(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
Polymer({ is: 'demo-footer' });

},{}],2:[function(require,module,exports){
Polymer({ is: 'demo-header' });

},{}],3:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
require("../ndarray-image-visualizer");
require("../demo-header");
require("../demo-footer");
var learnjs_1 = require("../learnjs");
var polymer_spec_1 = require("../polymer-spec");
var GOOGLE_CLOUD_STORAGE_DIR = 'https://storage.googleapis.com/learnjs-data/checkpoint_zoo/';
exports.FontEmbeddingPolymer = polymer_spec_1.PolymerElement({
    is: 'font-embedding',
    properties: {
        char: String,
        fontId: String,
        embedding: Array,
        numberOfValidChars: { type: Number, value: 62, readonly: true },
    }
});
var FontEmbedding = (function (_super) {
    __extends(FontEmbedding, _super);
    function FontEmbedding() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    FontEmbedding.prototype.ready = function () {
        var _this = this;
        var checkpointLoader = new learnjs_1.CheckpointLoader(GOOGLE_CLOUD_STORAGE_DIR + 'fonts/');
        checkpointLoader.getAllVariables().then(function (variables) {
            _this.variables = variables;
            _this.buildModel();
            _this.infer(_this.fontId, _this.char);
        });
        this.charIdMap = {};
        for (var i = 65; i < 91; i++) {
            this.charIdMap[String.fromCharCode(i)] = i - 65;
        }
        for (var i = 97; i < 123; i++) {
            this.charIdMap[String.fromCharCode(i)] = i - 97 + 26;
        }
        for (var i = 48; i < 58; i++) {
            this.charIdMap[String.fromCharCode(i)] = i - 48 + 52;
        }
        this.fontId = '0';
        this.char = 'A';
        var fontIdElement = this.querySelector('#font-id');
        fontIdElement.addEventListener('change', function (e) {
            _this.fontId = fontIdElement.value;
            _this.newFontId(_this.fontId);
            _this.infer(_this.fontId, _this.char);
        });
        var charIdElement = this.querySelector('#char-id');
        charIdElement.addEventListener('change', function (e) {
            _this.char = charIdElement.value;
            _this.infer(_this.fontId, _this.char);
        });
    };
    FontEmbedding.prototype.newFontId = function (fontId) {
        if (fontId.length === 0 || +fontId < 0 || +fontId > 56443) {
            return;
        }
        var embedding = [];
        var embeddingNDArray = this.variables['input_from_feature_columns/font_embedding/weights'];
        for (var i = 0; i < embeddingNDArray.shape[1]; i++) {
            var num = embeddingNDArray.get(+fontId, i);
            embedding.push({ init: num, val: num });
        }
        this.set('embedding', embedding);
    };
    FontEmbedding.prototype.sliderChange = function (e) {
        var element = e.target;
        var index = parseInt(element.getAttribute('data-index'), 10);
        this.embedding[index].val = element.immediateValue;
        this.infer(this.fontId, this.char);
    };
    FontEmbedding.prototype.buildModel = function () {
        this.vis = this.$.vis;
        this.vis.setShape([64, 64]);
        this.vis.setSize(128, 128);
        this.newFontId(this.fontId);
        var fc1wName = 'Stack/fully_connected_1/weights';
        var fc1bName = 'Stack/fully_connected_1/biases';
        var fc2wName = 'Stack/fully_connected_2/weights';
        var fc2bName = 'Stack/fully_connected_2/biases';
        var fc3wName = 'Stack/fully_connected_3/weights';
        var fc3bName = 'Stack/fully_connected_3/biases';
        var fc4wName = 'Stack/fully_connected_4/weights';
        var fc4bName = 'Stack/fully_connected_4/biases';
        var fc5wName = 'fully_connected/weights';
        var fc5bName = 'fully_connected/biases';
        this.graph = new learnjs_1.Graph();
        var g = this.graph;
        this.inputTensor = g.placeholder('input', [102]);
        var relu1 = g.layers.dense('fc1', this.inputTensor, this.variables[fc1bName].shape[1], function (x) { return g.relu(x); }, true, new learnjs_1.NDArrayInitializer(this.variables[fc1wName]), new learnjs_1.NDArrayInitializer(this.variables[fc1bName]));
        var relu2 = g.layers.dense('fc2', relu1, this.variables[fc2bName].shape[1], function (x) { return g.relu(x); }, true, new learnjs_1.NDArrayInitializer(this.variables[fc2wName]), new learnjs_1.NDArrayInitializer(this.variables[fc2bName]));
        var relu3 = g.layers.dense('fc3', relu2, this.variables[fc3bName].shape[1], function (x) { return g.relu(x); }, true, new learnjs_1.NDArrayInitializer(this.variables[fc3wName]), new learnjs_1.NDArrayInitializer(this.variables[fc3bName]));
        var relu4 = g.layers.dense('fc4', relu3, this.variables[fc4bName].shape[1], function (x) { return g.relu(x); }, true, new learnjs_1.NDArrayInitializer(this.variables[fc4wName]), new learnjs_1.NDArrayInitializer(this.variables[fc4bName]));
        this.outputTensor = g.layers.dense('fc5', relu4, this.variables[fc5bName].shape[1], function (x) { return g.sigmoid(x); }, true, new learnjs_1.NDArrayInitializer(this.variables[fc5wName]), new learnjs_1.NDArrayInitializer(this.variables[fc5bName]));
        this.math = new learnjs_1.NDArrayMathGPU();
        this.session = new learnjs_1.Session(g, this.math);
    };
    FontEmbedding.prototype.infer = function (fontId, char) {
        var _this = this;
        if (fontId.length === 0 || +fontId < 0 || +fontId > 56443 ||
            char.length === 0) {
            return;
        }
        var charId = this.charIdMap[char.charAt(0)];
        if (charId == null) {
            return;
        }
        var onehot = Array.apply(null, Array(this.numberOfValidChars))
            .map(Number.prototype.valueOf, 0);
        onehot[charId] = 1;
        var embedding = this.embedding.map(function (settings) { return settings.val; });
        this.math.scope(function (keep, track) {
            var inputData = track(learnjs_1.Array1D.new(embedding.concat(onehot)));
            var infer = _this.session.eval(_this.outputTensor, [{ tensor: _this.inputTensor, data: inputData }]);
            var scalar = track(learnjs_1.Scalar.new(255));
            var scaled = _this.math.scalarTimesArray(scalar, infer);
            var adjusted = _this.math.scalarMinusArray(scalar, scaled);
            _this.vis.saveImageDataFromNDArray(adjusted.as3D(64, 64, 1));
            _this.vis.draw();
        });
    };
    return FontEmbedding;
}(exports.FontEmbeddingPolymer));
exports.FontEmbedding = FontEmbedding;
document.registerElement(FontEmbedding.prototype.is, FontEmbedding);

},{"../demo-footer":1,"../demo-header":2,"../learnjs":4,"../ndarray-image-visualizer":5,"../polymer-spec":6}],4:[function(require,module,exports){
"use strict";
function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
__export(require("../src/index"));

},{"../src/index":13}],5:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var polymer_spec_1 = require("./polymer-spec");
exports.NDArrayImageVisualizerPolymer = polymer_spec_1.PolymerElement({ is: 'ndarray-image-visualizer', properties: {} });
var NDArrayImageVisualizer = (function (_super) {
    __extends(NDArrayImageVisualizer, _super);
    function NDArrayImageVisualizer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NDArrayImageVisualizer.prototype.ready = function () {
        this.canvas = this.querySelector('#canvas');
        this.canvas.width = 0;
        this.canvas.height = 0;
        this.canvasContext =
            this.canvas.getContext('2d');
        this.canvas.style.display = 'none';
    };
    NDArrayImageVisualizer.prototype.setShape = function (shape) {
        this.canvas.width = shape[1];
        this.canvas.height = shape[0];
    };
    NDArrayImageVisualizer.prototype.setSize = function (width, height) {
        this.canvas.style.width = width + 'px';
        this.canvas.style.height = height + 'px';
    };
    NDArrayImageVisualizer.prototype.saveImageDataFromNDArray = function (ndarray) {
        this.imageData = this.canvasContext.createImageData(this.canvas.width, this.canvas.height);
        if (ndarray.shape[2] === 1) {
            this.drawGrayscaleImageData(ndarray);
        }
        else if (ndarray.shape[2] === 3) {
            this.drawRGBImageData(ndarray);
        }
    };
    NDArrayImageVisualizer.prototype.drawRGBImageData = function (ndarray) {
        var pixelOffset = 0;
        for (var i = 0; i < ndarray.shape[0]; i++) {
            for (var j = 0; j < ndarray.shape[1]; j++) {
                this.imageData.data[pixelOffset++] = ndarray.get(i, j, 0);
                this.imageData.data[pixelOffset++] = ndarray.get(i, j, 1);
                this.imageData.data[pixelOffset++] = ndarray.get(i, j, 2);
                this.imageData.data[pixelOffset++] = 255;
            }
        }
    };
    NDArrayImageVisualizer.prototype.drawGrayscaleImageData = function (ndarray) {
        var pixelOffset = 0;
        for (var i = 0; i < ndarray.shape[0]; i++) {
            for (var j = 0; j < ndarray.shape[1]; j++) {
                var value = ndarray.get(i, j, 0);
                this.imageData.data[pixelOffset++] = value;
                this.imageData.data[pixelOffset++] = value;
                this.imageData.data[pixelOffset++] = value;
                this.imageData.data[pixelOffset++] = 255;
            }
        }
    };
    NDArrayImageVisualizer.prototype.draw = function () {
        this.canvas.style.display = '';
        this.canvasContext.putImageData(this.imageData, 0, 0);
    };
    return NDArrayImageVisualizer;
}(exports.NDArrayImageVisualizerPolymer));
exports.NDArrayImageVisualizer = NDArrayImageVisualizer;
document.registerElement(NDArrayImageVisualizer.prototype.is, NDArrayImageVisualizer);

},{"./polymer-spec":6}],6:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function PolymerElement(spec) {
    return Polymer.Class(spec);
}
exports.PolymerElement = PolymerElement;

},{}],7:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ndarray_1 = require("./math/ndarray");
var MANIFEST_FILE = 'manifest.json';
var CheckpointLoader = (function () {
    function CheckpointLoader(urlPath) {
        this.urlPath = urlPath;
        if (this.urlPath.charAt(this.urlPath.length - 1) !== '/') {
            this.urlPath += '/';
        }
    }
    CheckpointLoader.prototype.loadManifest = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', _this.urlPath + MANIFEST_FILE);
            xhr.onload = function () {
                _this.checkpointManifest = JSON.parse(xhr.responseText);
                resolve();
            };
            xhr.onerror = function (error) {
                throw new Error(MANIFEST_FILE + " not found at " + _this.urlPath + ". " + error);
            };
            xhr.send();
        });
    };
    CheckpointLoader.prototype.getCheckpointManifest = function () {
        var _this = this;
        if (this.checkpointManifest == null) {
            return new Promise(function (resolve, reject) {
                _this.loadManifest().then(function () {
                    resolve(_this.checkpointManifest);
                });
            });
        }
        return new Promise(function (resolve, reject) {
            resolve(_this.checkpointManifest);
        });
    };
    CheckpointLoader.prototype.getAllVariables = function () {
        var _this = this;
        if (this.variables != null) {
            return new Promise(function (resolve, reject) {
                resolve(_this.variables);
            });
        }
        return new Promise(function (resolve, reject) {
            _this.getCheckpointManifest().then(function (checkpointDefinition) {
                var variableNames = Object.keys(_this.checkpointManifest);
                var variablePromises = [];
                for (var i = 0; i < variableNames.length; i++) {
                    variablePromises.push(_this.getVariable(variableNames[i]));
                }
                Promise.all(variablePromises).then(function (variables) {
                    _this.variables = {};
                    for (var i = 0; i < variables.length; i++) {
                        _this.variables[variableNames[i]] = variables[i];
                    }
                    resolve(_this.variables);
                });
            });
        });
    };
    CheckpointLoader.prototype.getVariable = function (varName) {
        var _this = this;
        if (!(varName in this.checkpointManifest)) {
            throw new Error('Cannot load non-existant variable ' + varName);
        }
        var variableRequestPromiseMethod = function (resolve, reject) {
            var xhr = new XMLHttpRequest();
            xhr.responseType = 'arraybuffer';
            var fname = _this.checkpointManifest[varName].filename;
            xhr.open('GET', _this.urlPath + fname);
            xhr.onload = function () {
                var values = new Float32Array(xhr.response);
                var ndarray = ndarray_1.NDArray.make(_this.checkpointManifest[varName].shape, { values: values });
                resolve(ndarray);
            };
            xhr.onerror = function (error) {
                throw new Error('Could not fetch variable ' + varName + ': ' + error);
            };
            xhr.send();
        };
        if (this.checkpointManifest == null) {
            return new Promise(function (resolve, reject) {
                _this.loadManifest().then(function () {
                    new Promise(variableRequestPromiseMethod).then(resolve);
                });
            });
        }
        return new Promise(variableRequestPromiseMethod);
    };
    return CheckpointLoader;
}());
exports.CheckpointLoader = CheckpointLoader;

},{"./math/ndarray":24}],8:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ndarray_1 = require("./math/ndarray");
var util = require("./util");
var STATS_SAMPLE_PERCENTAGE = 0.1;
var InMemoryDataset = (function () {
    function InMemoryDataset(dataShapes) {
        this.dataShapes = dataShapes;
        this.normalizationInfo = {};
    }
    InMemoryDataset.prototype.getDataShape = function (dataIndex) {
        return this.dataShapes[dataIndex];
    };
    InMemoryDataset.prototype.getData = function () {
        return this.dataset;
    };
    InMemoryDataset.prototype.getStats = function () {
        var _this = this;
        if (this.dataset == null) {
            throw new Error('Data is null.');
        }
        return this.dataset.map(function (d) { return _this.getStatsForData(d); });
    };
    InMemoryDataset.prototype.getStatsForData = function (data) {
        var inputMin = Number.POSITIVE_INFINITY;
        var inputMax = Number.NEGATIVE_INFINITY;
        var exampleIndices = data.map(function (example, i) { return i; });
        util.shuffle(exampleIndices);
        exampleIndices =
            exampleIndices.slice(exampleIndices.length * STATS_SAMPLE_PERCENTAGE);
        for (var i = 0; i < exampleIndices.length; i++) {
            var inputValues = data[exampleIndices[i]].getValues();
            for (var j = 0; j < inputValues.length; j++) {
                inputMin = Math.min(inputMin, inputValues[j]);
                inputMax = Math.max(inputMax, inputValues[j]);
            }
        }
        return {
            inputMin: inputMin,
            inputMax: inputMax,
            exampleCount: data.length,
            shape: data[0].shape,
        };
    };
    InMemoryDataset.prototype.normalizeExamplesToRange = function (examples, curLowerBounds, curUpperBounds, newLowerBounds, newUpperBounds) {
        var curBoundsIsPerDimension = (curUpperBounds instanceof Float32Array &&
            curLowerBounds instanceof Float32Array);
        var newBoundsIsPerDimension = (newLowerBounds instanceof Float32Array &&
            newUpperBounds instanceof Float32Array);
        var inputSize = util.sizeFromShape(examples[0].shape);
        var newExamples = [];
        examples.forEach(function (example) {
            var inputValues = example.getValues();
            var normalizedValues = new Float32Array(inputSize);
            for (var j = 0; j < inputSize; j++) {
                var curLowerBound = curBoundsIsPerDimension ?
                    curLowerBounds[j] :
                    curLowerBounds;
                var curUpperBound = curBoundsIsPerDimension ?
                    curUpperBounds[j] :
                    curUpperBounds;
                var curRange = curUpperBound - curLowerBound;
                var newLowerBound = newBoundsIsPerDimension ?
                    newLowerBounds[j] :
                    newLowerBounds;
                var newUpperBound = newBoundsIsPerDimension ?
                    newUpperBounds[j] :
                    newUpperBounds;
                var newRange = newUpperBound - newLowerBound;
                if (curRange === 0) {
                    normalizedValues[j] = newLowerBound;
                }
                else {
                    normalizedValues[j] = newLowerBound +
                        newRange * (inputValues[j] - curLowerBound) / curRange;
                }
            }
            newExamples.push(ndarray_1.NDArray.make(example.shape, { values: normalizedValues }));
        });
        return newExamples;
    };
    InMemoryDataset.prototype.computeBounds = function (dataIndex) {
        var _this = this;
        if (this.dataset == null) {
            throw new Error('Data is null.');
        }
        var size = util.sizeFromShape(this.dataset[dataIndex][0].shape);
        this.normalizationInfo[dataIndex] = {
            isNormalized: false,
            minValues: new Float32Array(size),
            maxValues: new Float32Array(size)
        };
        for (var i = 0; i < size; i++) {
            this.normalizationInfo[dataIndex].minValues[i] = Number.POSITIVE_INFINITY;
            this.normalizationInfo[dataIndex].maxValues[i] = Number.NEGATIVE_INFINITY;
        }
        this.dataset[dataIndex].forEach(function (example) {
            var inputValues = example.getValues();
            for (var k = 0; k < size; k++) {
                _this.normalizationInfo[dataIndex].minValues[k] = Math.min(_this.normalizationInfo[dataIndex].minValues[k], inputValues[k]);
                _this.normalizationInfo[dataIndex].maxValues[k] = Math.max(_this.normalizationInfo[dataIndex].maxValues[k], inputValues[k]);
            }
        });
    };
    InMemoryDataset.prototype.normalizeWithinBounds = function (dataIndex, lowerBound, upperBound) {
        if (this.dataset == null) {
            throw new Error('Data is null.');
        }
        if (dataIndex >= this.dataset.length) {
            throw new Error('dataIndex out of bounds.');
        }
        if (this.normalizationInfo[dataIndex] == null) {
            this.computeBounds(dataIndex);
        }
        var curLowerBounds;
        var curUpperBounds;
        if (this.normalizationInfo[dataIndex].isNormalized) {
            curLowerBounds = this.normalizationInfo[dataIndex].lowerBound;
            curUpperBounds = this.normalizationInfo[dataIndex].upperBound;
        }
        else {
            curLowerBounds = this.normalizationInfo[dataIndex].minValues;
            curUpperBounds = this.normalizationInfo[dataIndex].maxValues;
        }
        this.dataset[dataIndex] = this.normalizeExamplesToRange(this.dataset[dataIndex], curLowerBounds, curUpperBounds, lowerBound, upperBound);
        this.normalizationInfo[dataIndex].isNormalized = true;
        this.normalizationInfo[dataIndex].lowerBound = lowerBound;
        this.normalizationInfo[dataIndex].upperBound = upperBound;
    };
    InMemoryDataset.prototype.isNormalized = function (dataIndex) {
        return this.normalizationInfo != null &&
            this.normalizationInfo[dataIndex].isNormalized;
    };
    InMemoryDataset.prototype.removeNormalization = function (dataIndex) {
        if (this.dataset == null) {
            throw new Error('Training or test data is null.');
        }
        if (!this.isNormalized(dataIndex)) {
            return;
        }
        this.dataset[dataIndex] = this.normalizeExamplesToRange(this.dataset[dataIndex], this.normalizationInfo[dataIndex].lowerBound, this.normalizationInfo[dataIndex].upperBound, this.normalizationInfo[dataIndex].minValues, this.normalizationInfo[dataIndex].maxValues);
        this.normalizationInfo[dataIndex].isNormalized = false;
    };
    InMemoryDataset.prototype.unnormalizeExamples = function (examples, dataIndex) {
        if (!this.isNormalized(dataIndex)) {
            return examples;
        }
        return this.normalizeExamplesToRange(examples, this.normalizationInfo[dataIndex].lowerBound, this.normalizationInfo[dataIndex].upperBound, this.normalizationInfo[dataIndex].minValues, this.normalizationInfo[dataIndex].maxValues);
    };
    InMemoryDataset.prototype.dispose = function () {
        if (this.dataset == null) {
            return;
        }
        for (var i = 0; i < this.dataset.length; i++) {
            for (var j = 0; j < this.dataset[i].length; j++) {
                this.dataset[i][j].dispose();
            }
        }
        this.dataset = [];
    };
    return InMemoryDataset;
}());
exports.InMemoryDataset = InMemoryDataset;

},{"./math/ndarray":24,"./util":88}],9:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var graph_layers_1 = require("./graph_layers");
var concat3d_util = require("./math/concat3d_util");
var conv_util = require("./math/conv_util");
var ndarray_1 = require("./math/ndarray");
var util = require("./util");
var Graph = (function () {
    function Graph() {
        this.nodes = [];
        this.layers = new graph_layers_1.GraphLayers(this);
    }
    Graph.prototype.variable = function (name, data) {
        return this.addNodeAndReturnOutput(new VariableNode(this, name, data));
    };
    Graph.prototype.placeholder = function (name, shape) {
        return this.addNodeAndReturnOutput(new PlaceholderNode(this, name, shape));
    };
    Graph.prototype.constant = function (value) {
        var finalValue;
        if (typeof value === 'number') {
            finalValue = ndarray_1.Scalar.new(value);
        }
        else if (value instanceof ndarray_1.NDArray) {
            finalValue = value;
        }
        else if (value instanceof Array) {
            var vals = new Float32Array(util.flatten(value));
            finalValue = ndarray_1.NDArray.make(util.inferShape(value), { values: vals });
        }
        else {
            throw new Error('unimplemented constant type.');
        }
        return this.addNodeAndReturnOutput(new ConstantNode(this, finalValue));
    };
    Graph.prototype.reshape = function (x, shape) {
        return this.addNodeAndReturnOutput(new ReshapeNode(this, 'Reshape', x, shape));
    };
    Graph.prototype.fusedLinearCombination = function (x1, x2, c1, c2) {
        return this.addNodeAndReturnOutput(new FusedLinearCombinationNode(this, x1, x2, c1, c2));
    };
    Graph.prototype.add = function (x1, x2) {
        return this.addNodeAndReturnOutput(new AddNode(this, x1, x2));
    };
    Graph.prototype.subtract = function (x1, x2) {
        return this.addNodeAndReturnOutput(new SubtractNode(this, x1, x2));
    };
    Graph.prototype.multiply = function (x1, x2) {
        return this.addNodeAndReturnOutput(new MultiplyNode(this, x1, x2));
    };
    Graph.prototype.divide = function (x1, x2) {
        return this.addNodeAndReturnOutput(new DivideNode(this, x1, x2));
    };
    Graph.prototype.reduceSum = function (x) {
        return this.addNodeAndReturnOutput(new ReduceSumNode(this, x));
    };
    Graph.prototype.concat3d = function (x1, x2, axis) {
        return this.addNodeAndReturnOutput(new Concat3DNode(this, x1, x2, axis));
    };
    Graph.prototype.matmul = function (x1, x2) {
        return this.addNodeAndReturnOutput(new MatMulNode(this, x1, x2));
    };
    Graph.prototype.conv2d = function (x, w, b, fieldSize, outputDepth, stride, zeroPad) {
        if (stride === void 0) { stride = 1; }
        return this.addNodeAndReturnOutput(new Convolution2DNode(this, x, w, b, fieldSize, outputDepth, stride, zeroPad));
    };
    Graph.prototype.maxPool = function (x, fieldSize, stride, zeroPad) {
        if (stride === void 0) { stride = 1; }
        return this.addNodeAndReturnOutput(new MaxPoolNode(this, x, fieldSize, stride, zeroPad));
    };
    Graph.prototype.exp = function (x) {
        return this.addNodeAndReturnOutput(new ExpNode(this, x));
    };
    Graph.prototype.log = function (x) {
        return this.addNodeAndReturnOutput(new LogNode(this, x));
    };
    Graph.prototype.relu = function (x) {
        return this.addNodeAndReturnOutput(new ReLUNode(this, x));
    };
    Graph.prototype.tanh = function (x) {
        return this.addNodeAndReturnOutput(new TanHNode(this, x));
    };
    Graph.prototype.sigmoid = function (x) {
        return this.addNodeAndReturnOutput(new SigmoidNode(this, x));
    };
    Graph.prototype.square = function (x) {
        return this.addNodeAndReturnOutput(new SquareNode(this, x));
    };
    Graph.prototype.softmax = function (x) {
        return this.addNodeAndReturnOutput(new SoftmaxNode(this, x));
    };
    Graph.prototype.softmaxCrossEntropyCost = function (x, target) {
        return this.addNodeAndReturnOutput(new SoftmaxCrossEntropyCostNode(this, x, target));
    };
    Graph.prototype.meanSquaredCost = function (label, prediction) {
        return this.addNodeAndReturnOutput(new MeanSquaredCostNode(this, label, prediction));
    };
    Graph.prototype.argmax = function (x) {
        return this.addNodeAndReturnOutput(new ArgMaxNode(this, x));
    };
    Graph.prototype.argmaxEquals = function (x1, x2) {
        return this.addNodeAndReturnOutput(new ArgMaxEqualsNode(this, x1, x2));
    };
    Graph.prototype.addNodeAndReturnOutput = function (node) {
        this.nodes.push(node);
        node.validate();
        return node.output;
    };
    Graph.prototype.getNodes = function () {
        return this.nodes;
    };
    return Graph;
}());
exports.Graph = Graph;
var Tensor = (function () {
    function Tensor(shape) {
        this.shape = shape;
        this.id = Tensor.nextID++;
    }
    return Tensor;
}());
Tensor.nextID = 0;
exports.Tensor = Tensor;
var Node = (function () {
    function Node(graph, name, inputs, output) {
        this.graph = graph;
        this.name = name;
        this.inputs = inputs;
        this.output = output;
        this.id = Node.nextID++;
        output.node = this;
    }
    return Node;
}());
Node.nextID = 0;
exports.Node = Node;
var VariableNode = (function (_super) {
    __extends(VariableNode, _super);
    function VariableNode(graph, name, data) {
        var _this = _super.call(this, graph, name, {}, new Tensor(data.shape)) || this;
        _this.data = data;
        return _this;
    }
    VariableNode.prototype.validate = function () {
        util.assert(this.data != null, 'Error adding variable op: Data for variable \'' + this.name +
            '\' is null or undefined');
    };
    return VariableNode;
}(Node));
exports.VariableNode = VariableNode;
var PlaceholderNode = (function (_super) {
    __extends(PlaceholderNode, _super);
    function PlaceholderNode(graph, name, shape) {
        return _super.call(this, graph, name, {}, new Tensor(shape)) || this;
    }
    PlaceholderNode.prototype.validate = function () { };
    return PlaceholderNode;
}(Node));
exports.PlaceholderNode = PlaceholderNode;
var ConstantNode = (function (_super) {
    __extends(ConstantNode, _super);
    function ConstantNode(graph, data) {
        var _this = _super.call(this, graph, 'Constant', {}, new Tensor(data.shape)) || this;
        _this.data = data;
        return _this;
    }
    ConstantNode.prototype.validate = function () {
        util.assert(this.data != null, 'Error adding constant: data for placeholder \'' + this.name +
            '\' is null or undefined');
    };
    return ConstantNode;
}(Node));
exports.ConstantNode = ConstantNode;
var ReshapeNode = (function (_super) {
    __extends(ReshapeNode, _super);
    function ReshapeNode(graph, name, x, shape) {
        var _this = _super.call(this, graph, name, { x: x }, new Tensor(shape)) || this;
        _this.name = name;
        _this.x = x;
        _this.shape = shape;
        return _this;
    }
    ReshapeNode.prototype.validate = function () {
        var xSize = util.sizeFromShape(this.x.shape);
        var shapeSize = util.sizeFromShape(this.shape);
        util.assert(xSize === shapeSize, 'Error making reshape operation: input Tensor to reshape \'' +
            this.name + '\' of shape (' + this.x.shape +
            ') does not match size of requested shape ' + this.shape + '.');
    };
    return ReshapeNode;
}(Node));
ReshapeNode.X = 'x';
exports.ReshapeNode = ReshapeNode;
var FusedLinearCombinationNode = (function (_super) {
    __extends(FusedLinearCombinationNode, _super);
    function FusedLinearCombinationNode(graph, t1, t2, c1, c2) {
        var _this = _super.call(this, graph, 'Linear Combination', { t1: t1, t2: t2, c1: c1, c2: c2 }, new Tensor(t1.shape)) || this;
        _this.t1 = t1;
        _this.t2 = t2;
        _this.c1 = c1;
        _this.c2 = c2;
        return _this;
    }
    FusedLinearCombinationNode.prototype.validate = function () {
        util.assertShapesMatch(this.t1.shape, this.t2.shape);
        if (!util.isScalarShape(this.c1.shape)) {
            throw new Error('Error adding fusedLinearCombination: c1 is not a scalar, got ' +
                'shape: ' + this.c1.shape);
        }
        if (!util.isScalarShape(this.c2.shape)) {
            throw new Error('Error adding fusedLinearCombination: c2 is not a scalar, got ' +
                'shape: ' + this.c2.shape);
        }
    };
    return FusedLinearCombinationNode;
}(Node));
FusedLinearCombinationNode.T1 = 't1';
FusedLinearCombinationNode.T2 = 't2';
FusedLinearCombinationNode.C1 = 'c1';
FusedLinearCombinationNode.C2 = 'c2';
exports.FusedLinearCombinationNode = FusedLinearCombinationNode;
var AddNode = (function (_super) {
    __extends(AddNode, _super);
    function AddNode(graph, t1, t2) {
        var _this = _super.call(this, graph, 'Add', { t1: t1, t2: t2 }, new Tensor(util.sizeFromShape(t1.shape) === 1 ? t2.shape : t1.shape)) || this;
        _this.t1 = t1;
        _this.t2 = t2;
        return _this;
    }
    AddNode.prototype.validate = function () {
        util.assert(util.sizeFromShape(this.t1.shape) === 1 ||
            util.sizeFromShape(this.t2.shape) === 1 ||
            util.arraysEqual(this.t1.shape, this.t2.shape), 'Error adding add operation op: one of inputs must be scalar or the ' +
            'shapes ' + this.t1.shape + ' and ' + this.t2.shape +
            ' must match.');
    };
    return AddNode;
}(Node));
AddNode.T1 = 't1';
AddNode.T2 = 't2';
exports.AddNode = AddNode;
var SubtractNode = (function (_super) {
    __extends(SubtractNode, _super);
    function SubtractNode(graph, t1, t2) {
        var _this = _super.call(this, graph, 'Subtract', { t1: t1, t2: t2 }, new Tensor(util.sizeFromShape(t1.shape) === 1 ? t2.shape : t1.shape)) || this;
        _this.t1 = t1;
        _this.t2 = t2;
        return _this;
    }
    SubtractNode.prototype.validate = function () {
        util.assert(util.sizeFromShape(this.t1.shape) === 1 ||
            util.sizeFromShape(this.t2.shape) === 1 ||
            util.arraysEqual(this.t1.shape, this.t2.shape), 'Error adding subtract op: one of inputs must be scalar or the ' +
            'shapes ' + this.t1.shape + ' and ' + this.t2.shape +
            ' must match.');
    };
    return SubtractNode;
}(Node));
SubtractNode.T1 = 't1';
SubtractNode.T2 = 't2';
exports.SubtractNode = SubtractNode;
var MultiplyNode = (function (_super) {
    __extends(MultiplyNode, _super);
    function MultiplyNode(graph, t1, t2) {
        var _this = _super.call(this, graph, 'Multiply', { t1: t1, t2: t2 }, new Tensor(util.sizeFromShape(t1.shape) === 1 ? t2.shape : t1.shape)) || this;
        _this.t1 = t1;
        _this.t2 = t2;
        return _this;
    }
    MultiplyNode.prototype.validate = function () {
        util.assert(util.sizeFromShape(this.t1.shape) === 1 ||
            util.sizeFromShape(this.t2.shape) === 1 ||
            util.arraysEqual(this.t1.shape, this.t2.shape), 'Error adding multiply op: one of inputs must be scalar or the ' +
            'shapes ' + this.t1.shape + ' and ' + this.t2.shape +
            ' must match.');
    };
    return MultiplyNode;
}(Node));
MultiplyNode.T1 = 't1';
MultiplyNode.T2 = 't2';
exports.MultiplyNode = MultiplyNode;
var DivideNode = (function (_super) {
    __extends(DivideNode, _super);
    function DivideNode(graph, t1, t2) {
        var _this = _super.call(this, graph, 'Divide', { t1: t1, t2: t2 }, new Tensor(util.sizeFromShape(t1.shape) === 1 ? t2.shape : t1.shape)) || this;
        _this.t1 = t1;
        _this.t2 = t2;
        return _this;
    }
    DivideNode.prototype.validate = function () {
        util.assert(util.sizeFromShape(this.t1.shape) === 1 ||
            util.sizeFromShape(this.t2.shape) === 1 ||
            util.arraysEqual(this.t1.shape, this.t2.shape), 'Error adding divide op: one of inputs must be scalar or the ' +
            'shapes ' + this.t1.shape + ' and ' + this.t2.shape +
            ' must match.');
    };
    return DivideNode;
}(Node));
DivideNode.T1 = 't1';
DivideNode.T2 = 't2';
exports.DivideNode = DivideNode;
var ReduceSumNode = (function (_super) {
    __extends(ReduceSumNode, _super);
    function ReduceSumNode(graph, x) {
        return _super.call(this, graph, 'ReduceSum', { x: x }, new Tensor([])) || this;
    }
    ReduceSumNode.prototype.validate = function () { };
    return ReduceSumNode;
}(Node));
ReduceSumNode.X = 'x';
exports.ReduceSumNode = ReduceSumNode;
var Concat3DNode = (function (_super) {
    __extends(Concat3DNode, _super);
    function Concat3DNode(graph, x1, x2, axis) {
        var _this = _super.call(this, graph, 'Concat3D', { x1: x1, x2: x2 }, new Tensor(concat3d_util.computeConcat3DOutputShape(x1.shape, x2.shape, axis))) || this;
        _this.x1 = x1;
        _this.x2 = x2;
        _this.axis = axis;
        return _this;
    }
    Concat3DNode.prototype.validate = function () {
        concat3d_util.assertConcat3DShapesMatch(this.x1.shape, this.x2.shape, this.axis);
    };
    return Concat3DNode;
}(Node));
Concat3DNode.X1 = 'x1';
Concat3DNode.X2 = 'x2';
Concat3DNode.AXIS = 'axis';
exports.Concat3DNode = Concat3DNode;
function getMatMulOutputShape(x1Shape, x2Shape) {
    if (x1Shape.length === 1 && x2Shape.length === 1) {
        return [1];
    }
    else if (x1Shape.length === 1 && x2Shape.length === 2) {
        return [x2Shape[1]];
    }
    else if (x1Shape.length === 2 && x2Shape.length === 1) {
        return [x1Shape[0]];
    }
    return [x1Shape[0], x2Shape[1]];
}
var MatMulNode = (function (_super) {
    __extends(MatMulNode, _super);
    function MatMulNode(graph, x1, x2) {
        var _this = _super.call(this, graph, 'MatMul', { x1: x1, x2: x2 }, new Tensor(getMatMulOutputShape(x1.shape, x2.shape))) || this;
        _this.x1 = x1;
        _this.x2 = x2;
        return _this;
    }
    MatMulNode.prototype.validate = function () {
        if (this.x1.shape.length === 2 && this.x2.shape.length === 2) {
            util.assert(this.x1.shape[1] === this.x2.shape[0], 'Error adding matmul op: inner shapes of matrices with shapes ' +
                this.x1.shape + ' and ' + this.x2.shape + ' must match.');
        }
        else if (this.x1.shape.length === 2 && this.x2.shape.length === 1) {
            util.assert(this.x1.shape[1] === this.x2.shape[0], 'Error adding matmul op: second dimension of matrix with shape ' +
                this.x1.shape + ' must match size of vector with shape ' +
                this.x2.shape + '.');
        }
        else if (this.x1.shape.length === 1 && this.x2.shape.length === 2) {
            util.assert(this.x1.shape[0] === this.x2.shape[0], 'Error adding matmul op: size of vector with shape ' + this.x1.shape +
                ' must match first dimension of matrix with ' +
                'shape ' + this.x2.shape + '.');
        }
        else {
            throw new Error('Error adding matmul op: inputs must be vectors or matrices.');
        }
    };
    return MatMulNode;
}(Node));
MatMulNode.X1 = 'x1';
MatMulNode.X2 = 'x2';
exports.MatMulNode = MatMulNode;
var Convolution2DNode = (function (_super) {
    __extends(Convolution2DNode, _super);
    function Convolution2DNode(graph, x, w, b, fieldSize, outputDepth, stride, zeroPad) {
        if (stride === void 0) { stride = 1; }
        var _this = _super.call(this, graph, 'Convolution 2D', { x: x, w: w, b: b }, new Tensor(conv_util.computeOutputShape3D(x.shape, fieldSize, outputDepth, stride, zeroPad))) || this;
        _this.x = x;
        _this.w = w;
        _this.b = b;
        _this.fieldSize = fieldSize;
        _this.outputDepth = outputDepth;
        _this.stride = stride;
        _this.zeroPad = zeroPad;
        return _this;
    }
    Convolution2DNode.prototype.validate = function () {
        util.assert(this.x.shape.length === 3, 'Error adding conv2d op: input must be of rank 3, but got shape: ' +
            this.x.shape + '.');
        util.assert(this.w.shape.length === 4, 'Error adding conv2d op: weights must be of rank 4, but got shape: ' +
            this.w.shape + '.');
        util.assert(this.b.shape.length === 1, 'Error adding conv2d op: biases must be of rank 1, but got shape: ' +
            this.b.shape + '.');
        util.assert(this.x.shape[2] === this.w.shape[2], 'Error adding conv2d op: depth of input (' + this.x.shape[2] +
            ') must match input depth for weights (' + this.w.shape[2] + ').');
    };
    return Convolution2DNode;
}(Node));
Convolution2DNode.X = 'x';
Convolution2DNode.W = 'w';
Convolution2DNode.B = 'b';
exports.Convolution2DNode = Convolution2DNode;
var MaxPoolNode = (function (_super) {
    __extends(MaxPoolNode, _super);
    function MaxPoolNode(graph, x, fieldSize, stride, zeroPad) {
        if (stride === void 0) { stride = 1; }
        var _this = _super.call(this, graph, 'Max pool', { x: x }, new Tensor(conv_util.computeOutputShape3D(x.shape, fieldSize, x.shape[2], stride, zeroPad))) || this;
        _this.x = x;
        _this.fieldSize = fieldSize;
        _this.stride = stride;
        _this.zeroPad = zeroPad;
        return _this;
    }
    MaxPoolNode.prototype.validate = function () {
        util.assert(this.x.shape.length === 3, 'Error adding maxPool op: input must be of rank 3, but got shape: ' +
            this.x.shape + '.');
    };
    return MaxPoolNode;
}(Node));
MaxPoolNode.X = 'x';
exports.MaxPoolNode = MaxPoolNode;
var ReLUNode = (function (_super) {
    __extends(ReLUNode, _super);
    function ReLUNode(graph, x) {
        return _super.call(this, graph, 'ReLU', { x: x }, new Tensor(x.shape)) || this;
    }
    ReLUNode.prototype.validate = function () { };
    return ReLUNode;
}(Node));
ReLUNode.X = 'x';
exports.ReLUNode = ReLUNode;
var ExpNode = (function (_super) {
    __extends(ExpNode, _super);
    function ExpNode(graph, x) {
        return _super.call(this, graph, 'Exp', { x: x }, new Tensor(x.shape)) || this;
    }
    ExpNode.prototype.validate = function () { };
    return ExpNode;
}(Node));
ExpNode.X = 'x';
exports.ExpNode = ExpNode;
var LogNode = (function (_super) {
    __extends(LogNode, _super);
    function LogNode(graph, x) {
        return _super.call(this, graph, 'Log', { x: x }, new Tensor(x.shape)) || this;
    }
    LogNode.prototype.validate = function () { };
    return LogNode;
}(Node));
LogNode.X = 'x';
exports.LogNode = LogNode;
var TanHNode = (function (_super) {
    __extends(TanHNode, _super);
    function TanHNode(graph, x) {
        return _super.call(this, graph, 'TanH', { x: x }, new Tensor(x.shape)) || this;
    }
    TanHNode.prototype.validate = function () { };
    return TanHNode;
}(Node));
TanHNode.X = 'x';
exports.TanHNode = TanHNode;
var SigmoidNode = (function (_super) {
    __extends(SigmoidNode, _super);
    function SigmoidNode(graph, x) {
        return _super.call(this, graph, 'Sigmoid', { x: x }, new Tensor(x.shape)) || this;
    }
    SigmoidNode.prototype.validate = function () { };
    return SigmoidNode;
}(Node));
SigmoidNode.X = 'x';
exports.SigmoidNode = SigmoidNode;
var SquareNode = (function (_super) {
    __extends(SquareNode, _super);
    function SquareNode(graph, x) {
        return _super.call(this, graph, 'Square', { x: x }, new Tensor(x.shape)) || this;
    }
    SquareNode.prototype.validate = function () { };
    return SquareNode;
}(Node));
SquareNode.X = 'x';
exports.SquareNode = SquareNode;
var SoftmaxCrossEntropyCostNode = (function (_super) {
    __extends(SoftmaxCrossEntropyCostNode, _super);
    function SoftmaxCrossEntropyCostNode(graph, x, target) {
        var _this = _super.call(this, graph, 'SoftmaxCrossEntropyCost', { x: x, target: target }, new Tensor([])) || this;
        _this.x = x;
        _this.target = target;
        return _this;
    }
    SoftmaxCrossEntropyCostNode.prototype.validate = function () {
        util.assert(util.arraysEqual(this.x.shape, this.target.shape), 'Error adding softmaxCrossEntropyCost op: x shape (' + this.x.shape +
            ') must match target shape (' + this.target.shape + ').');
    };
    return SoftmaxCrossEntropyCostNode;
}(Node));
SoftmaxCrossEntropyCostNode.X = 'x';
SoftmaxCrossEntropyCostNode.TARGET = 'target';
exports.SoftmaxCrossEntropyCostNode = SoftmaxCrossEntropyCostNode;
var SoftmaxNode = (function (_super) {
    __extends(SoftmaxNode, _super);
    function SoftmaxNode(graph, x) {
        var _this = _super.call(this, graph, 'Softmax', { x: x }, new Tensor(x.shape)) || this;
        _this.x = x;
        return _this;
    }
    SoftmaxNode.prototype.validate = function () {
        util.assert(this.x.shape.length === 1, 'The input to a softmax must be a 1-D tensor');
        util.assert(this.x.shape[0] >= 2, 'The input to a softmax must have at least 2 values');
    };
    return SoftmaxNode;
}(Node));
SoftmaxNode.X = 'x';
exports.SoftmaxNode = SoftmaxNode;
var MeanSquaredCostNode = (function (_super) {
    __extends(MeanSquaredCostNode, _super);
    function MeanSquaredCostNode(graph, label, prediction) {
        var _this = _super.call(this, graph, 'Mean Squared Cost', { label: label, prediction: prediction }, new Tensor([])) || this;
        _this.label = label;
        _this.prediction = prediction;
        return _this;
    }
    MeanSquaredCostNode.prototype.validate = function () {
        util.assert(util.arraysEqual(this.label.shape, this.prediction.shape), 'Error adding meanSquaredCost op: label shape (' + this.label.shape +
            ') must match prediction shape (' + this.prediction.shape + ').');
    };
    return MeanSquaredCostNode;
}(Node));
MeanSquaredCostNode.LABEL = 'label';
MeanSquaredCostNode.PREDICTION = 'prediction';
exports.MeanSquaredCostNode = MeanSquaredCostNode;
var ArgMaxNode = (function (_super) {
    __extends(ArgMaxNode, _super);
    function ArgMaxNode(graph, x) {
        var _this = _super.call(this, graph, 'ArgMax', { x: x }, new Tensor([1])) || this;
        _this.x = x;
        return _this;
    }
    ArgMaxNode.prototype.validate = function () {
        util.assert(util.sizeFromShape(this.x.shape) > 0, 'Error adding argmax op: input tensor must have at least one entry.');
    };
    return ArgMaxNode;
}(Node));
ArgMaxNode.X = 'x';
exports.ArgMaxNode = ArgMaxNode;
var ArgMaxEqualsNode = (function (_super) {
    __extends(ArgMaxEqualsNode, _super);
    function ArgMaxEqualsNode(graph, x1, x2) {
        var _this = _super.call(this, graph, 'ArgMaxEquals', { x1: x1, x2: x2 }, new Tensor([1])) || this;
        _this.x1 = x1;
        _this.x2 = x2;
        return _this;
    }
    ArgMaxEqualsNode.prototype.validate = function () {
        util.assert(util.arraysEqual(this.x1.shape, this.x2.shape), 'Error adding ArgMaxEquals op: x1 shape (' + this.x1.shape +
            ') must match x2 shape (' + this.x2.shape + ').');
    };
    return ArgMaxEqualsNode;
}(Node));
ArgMaxEqualsNode.X1 = 'x1';
ArgMaxEqualsNode.X2 = 'x2';
exports.ArgMaxEqualsNode = ArgMaxEqualsNode;
var SplitNode = (function (_super) {
    __extends(SplitNode, _super);
    function SplitNode(graph, x) {
        var _this = _super.call(this, graph, 'SplitNode', { x: x }, new Tensor(x.shape)) || this;
        _this.outputs = [];
        return _this;
    }
    SplitNode.prototype.getNewOutputTensor = function () {
        var output = new Tensor(this.inputs[SplitNode.X].shape);
        output.node = this;
        this.outputs.push(output);
        return output;
    };
    SplitNode.prototype.validate = function () { };
    return SplitNode;
}(Node));
SplitNode.X = 'x';
exports.SplitNode = SplitNode;

},{"./graph_layers":10,"./math/concat3d_util":17,"./math/conv_util":18,"./math/ndarray":24,"./util":88}],10:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var initializers_1 = require("./initializers");
var GraphLayers = (function () {
    function GraphLayers(g) {
        this.g = g;
    }
    GraphLayers.prototype.dense = function (name, x, units, activation, useBias, kernelInitializer, biasInitializer) {
        if (activation === void 0) { activation = null; }
        if (useBias === void 0) { useBias = true; }
        if (kernelInitializer === void 0) { kernelInitializer = new initializers_1.VarianceScalingInitializer(); }
        if (biasInitializer === void 0) { biasInitializer = new initializers_1.ZerosInitializer(); }
        var weights = this.g.variable(name + '-weights', kernelInitializer.initialize([x.shape[0], units], x.shape[0], units));
        var out = this.g.matmul(x, weights);
        if (useBias) {
            var bias = this.g.variable(name + '-bias', biasInitializer.initialize([units], x.shape[0], units));
            out = this.g.add(out, bias);
        }
        if (activation != null) {
            out = activation(out);
        }
        return out;
    };
    return GraphLayers;
}());
exports.GraphLayers = GraphLayers;

},{"./initializers":14}],11:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ndarray_1 = require("./math/ndarray");
var session_1 = require("./session");
var DEFAULT_EVAL_INTERVAL_MS = 1500;
var DEFAULT_COST_INTERVAL_MS = 500;
var DEFAULT_INFERENCE_EXAMPLE_INTERVAL_MS = 3000;
var MetricReduction;
(function (MetricReduction) {
    MetricReduction[MetricReduction["SUM"] = 0] = "SUM";
    MetricReduction[MetricReduction["MEAN"] = 1] = "MEAN";
})(MetricReduction = exports.MetricReduction || (exports.MetricReduction = {}));
var GraphRunner = (function () {
    function GraphRunner(math, session, eventObserver) {
        this.math = math;
        this.session = session;
        this.eventObserver = eventObserver;
        this.lastCostTimestamp = 0;
        this.lastEvalTimestamp = 0;
        this.totalIdleTimeMs = 0;
        this.resetStatistics();
        this.zeroScalar = ndarray_1.Scalar.new(0);
    }
    GraphRunner.prototype.resetStatistics = function () {
        this.totalBatchesTrained = 0;
        this.totalIdleTimeMs = 0;
        this.lastStopTimestamp = null;
    };
    GraphRunner.prototype.train = function (costTensor, trainFeedEntries, batchSize, optimizer, numBatches, metricTensor, metricFeedEntries, metricBatchSize, metricReduction, evalIntervalMs, costIntervalMs) {
        if (metricReduction === void 0) { metricReduction = MetricReduction.MEAN; }
        if (evalIntervalMs === void 0) { evalIntervalMs = DEFAULT_EVAL_INTERVAL_MS; }
        if (costIntervalMs === void 0) { costIntervalMs = DEFAULT_COST_INTERVAL_MS; }
        this.costTensor = costTensor;
        this.trainFeedEntries = trainFeedEntries;
        this.metricTensor = metricTensor;
        this.metricFeedEntries = metricFeedEntries;
        if (metricBatchSize != null && this.metricBatchSize !== metricBatchSize) {
            if (this.metricBatchSizeScalar != null) {
                this.metricBatchSizeScalar.dispose();
            }
            this.metricBatchSizeScalar = ndarray_1.Scalar.new(metricBatchSize);
        }
        this.metricBatchSize = metricBatchSize;
        this.metricReduction = metricReduction;
        this.batchSize = batchSize;
        this.optimizer = optimizer;
        this.metricIntervalMs = evalIntervalMs;
        this.costIntervalMs = costIntervalMs;
        this.currentTrainLoopNumBatches = numBatches;
        this.batchesTrainedThisRun = 0;
        this.isTraining = true;
        this.trainStartTimestamp = performance.now();
        this.trainNetwork();
    };
    GraphRunner.prototype.stopTraining = function () {
        this.isTraining = false;
        this.lastStopTimestamp = performance.now();
    };
    GraphRunner.prototype.resumeTraining = function () {
        this.isTraining = true;
        if (this.lastStopTimestamp != null) {
            this.totalIdleTimeMs += performance.now() - this.lastStopTimestamp;
        }
        this.trainNetwork();
    };
    GraphRunner.prototype.trainNetwork = function () {
        var _this = this;
        if (this.batchesTrainedThisRun === this.currentTrainLoopNumBatches) {
            this.stopTraining();
        }
        if (!this.isTraining) {
            if (this.eventObserver.doneTrainingCallback != null) {
                this.eventObserver.doneTrainingCallback();
            }
            return;
        }
        var start = performance.now();
        var shouldComputeCost = this.eventObserver.avgCostCallback != null &&
            (start - this.lastCostTimestamp > this.costIntervalMs);
        if (shouldComputeCost) {
            this.lastCostTimestamp = start;
        }
        var costReduction = shouldComputeCost ? session_1.CostReduction.MEAN : session_1.CostReduction.NONE;
        this.math.scope(function (keep) {
            var avgCost = _this.session.train(_this.costTensor, _this.trainFeedEntries, _this.batchSize, _this.optimizer, costReduction);
            if (shouldComputeCost) {
                var trainTime = performance.now() - start;
                _this.eventObserver.avgCostCallback(avgCost);
                if (_this.eventObserver.trainExamplesPerSecCallback != null) {
                    var examplesPerSec = (_this.batchSize * 1000 / trainTime);
                    _this.eventObserver.trainExamplesPerSecCallback(examplesPerSec);
                }
            }
            if (_this.eventObserver.metricCallback != null &&
                _this.metricFeedEntries != null &&
                start - _this.lastEvalTimestamp > _this.metricIntervalMs) {
                _this.lastEvalTimestamp = start;
                if (_this.lastComputedMetric != null) {
                    _this.lastComputedMetric.dispose();
                }
                _this.lastComputedMetric = _this.computeMetric();
                _this.eventObserver.metricCallback(_this.lastComputedMetric);
            }
            if (_this.eventObserver.totalTimeCallback != null) {
                _this.eventObserver.totalTimeCallback((start - _this.trainStartTimestamp) / 1000);
            }
            _this.batchesTrainedThisRun++;
            _this.totalBatchesTrained++;
            if (_this.eventObserver.batchesTrainedCallback != null) {
                _this.eventObserver.batchesTrainedCallback(_this.totalBatchesTrained);
            }
        });
        setTimeout(function () { return _this.trainNetwork(); });
    };
    GraphRunner.prototype.infer = function (inferenceTensor, inferenceFeedEntries, inferenceExampleIntervalMs, inferenceExampleCount, numPasses) {
        var _this = this;
        if (inferenceExampleIntervalMs === void 0) { inferenceExampleIntervalMs = DEFAULT_INFERENCE_EXAMPLE_INTERVAL_MS; }
        if (inferenceExampleCount === void 0) { inferenceExampleCount = 5; }
        if (this.eventObserver.inferenceExamplesCallback == null &&
            this.eventObserver.inferenceExamplesPerSecCallback == null) {
            throw new Error('Cannot start inference loop, no inference example or ' +
                'examples/sec observer provided.');
        }
        for (var i = 0; i < inferenceFeedEntries.length; i++) {
            var feedEntry = inferenceFeedEntries[i];
            if (feedEntry.data instanceof ndarray_1.NDArray) {
                throw new Error('Cannot start inference on the model runner with feed entries of ' +
                    'type NDArray. Please use InputProviders.');
            }
        }
        this.inferenceExampleIntervalMs = inferenceExampleIntervalMs;
        this.inferenceTensor = inferenceTensor;
        this.inferenceFeedEntries = inferenceFeedEntries;
        this.inferenceExampleCount = inferenceExampleCount;
        this.currentInferenceLoopNumPasses = numPasses;
        if (!this.isInferring) {
            this.inferencePassesThisRun = 0;
            setTimeout(function () { return _this.inferNetwork(); });
        }
        this.isInferring = true;
    };
    GraphRunner.prototype.inferNetwork = function () {
        var _this = this;
        if (!this.isInferring ||
            this.inferencePassesThisRun === this.currentInferenceLoopNumPasses) {
            return;
        }
        this.math.scope(function (keep, track) {
            var feeds = [];
            var inferenceValues = [];
            var start = performance.now();
            for (var i = 0; i < _this.inferenceExampleCount; i++) {
                var ndarrayFeedEntries = [];
                for (var j = 0; j < _this.inferenceFeedEntries.length; j++) {
                    var feedEntry = _this.inferenceFeedEntries[j];
                    ndarrayFeedEntries.push({
                        tensor: feedEntry.tensor,
                        data: track(feedEntry.data.getNextCopy(_this.math))
                    });
                }
                feeds.push(ndarrayFeedEntries);
                inferenceValues.push(_this.session.eval(_this.inferenceTensor, ndarrayFeedEntries));
            }
            if (_this.eventObserver.inferenceExamplesPerSecCallback != null) {
                inferenceValues[inferenceValues.length - 1].getValues();
                var inferenceExamplesPerSecTime = performance.now() - start;
                var examplesPerSec = (_this.inferenceExampleCount * 1000 / inferenceExamplesPerSecTime);
                _this.eventObserver.inferenceExamplesPerSecCallback(examplesPerSec);
            }
            if (_this.eventObserver.inferenceExamplesCallback != null) {
                _this.eventObserver.inferenceExamplesCallback(feeds, inferenceValues);
            }
            _this.inferencePassesThisRun++;
        });
        setTimeout(function () { return _this.inferNetwork(); }, this.inferenceExampleIntervalMs);
    };
    GraphRunner.prototype.stopInferring = function () {
        this.isInferring = false;
    };
    GraphRunner.prototype.isInferenceRunning = function () {
        return this.isInferring;
    };
    GraphRunner.prototype.computeMetric = function () {
        var _this = this;
        if (this.metricFeedEntries == null) {
            throw new Error('Cannot compute metric, no metric FeedEntries provided.');
        }
        var metric = this.zeroScalar;
        return this.math.scope(function (keep) {
            for (var i = 0; i < _this.metricBatchSize; i++) {
                var metricValue = _this.session.eval(_this.metricTensor, _this.metricFeedEntries);
                metric = _this.math.add(metric, metricValue);
            }
            if (_this.metricReduction === MetricReduction.MEAN) {
                metric = _this.math.divide(metric, _this.metricBatchSizeScalar);
            }
            return metric;
        });
    };
    GraphRunner.prototype.getTotalBatchesTrained = function () {
        return this.totalBatchesTrained;
    };
    GraphRunner.prototype.getLastComputedMetric = function () {
        return this.lastComputedMetric;
    };
    GraphRunner.prototype.setMath = function (math) {
        this.math = math;
    };
    GraphRunner.prototype.setSession = function (session) {
        this.session = session;
    };
    GraphRunner.prototype.setInferenceTensor = function (inferenceTensor) {
        this.inferenceTensor = inferenceTensor;
    };
    GraphRunner.prototype.setInferenceExampleCount = function (inferenceExampleCount) {
        this.inferenceExampleCount = inferenceExampleCount;
    };
    return GraphRunner;
}());
exports.GraphRunner = GraphRunner;

},{"./math/ndarray":24,"./session":84}],12:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var graph_1 = require("./graph");
var priority_queue = require("./priority_queue");
var priority_queue_1 = require("./priority_queue");
function getUnorderedEvaluationSet(nodes, terminatingNodes) {
    var terminatingNodeMap = {};
    var seen = {};
    var set = [];
    var visit = nodes.slice();
    terminatingNodes.forEach(function (node) { return terminatingNodeMap[node.id] = node; });
    var _loop_1 = function () {
        var cur = visit.pop();
        if (seen[cur.id] == null) {
            if (terminatingNodeMap[cur.id] == null) {
                Object.keys(cur.inputs)
                    .map(function (inputName) { return cur.inputs[inputName]; })
                    .forEach(function (input) { return visit.push(input.node); });
            }
            set.push(cur);
            seen[cur.id] = cur;
        }
    };
    while (visit.length !== 0) {
        _loop_1();
    }
    return set;
}
exports.getUnorderedEvaluationSet = getUnorderedEvaluationSet;
function getOrderedEvaluationSet(unorderedEvaluationSet) {
    var set = [];
    var nodeIndices = {};
    var pendingDependencies = {};
    var nodeQueue = new priority_queue_1.PriorityQueue(function (a, b) { return priority_queue.defaultCompare(pendingDependencies[a.id], pendingDependencies[b.id]); }, function (node, newIndex) { return nodeIndices[node.id] = newIndex; });
    unorderedEvaluationSet.forEach(function (node) { return pendingDependencies[node.id] = 0; });
    unorderedEvaluationSet.forEach(function (node) { return Object.keys(node.inputs)
        .map(function (key) { return node.inputs[key]; })
        .forEach(function (input) {
        if (unorderedEvaluationSet.indexOf(input.node) !== -1) {
            pendingDependencies[input.node.id]++;
        }
    }); });
    unorderedEvaluationSet.forEach(function (node) { return nodeQueue.enqueue(node); });
    while (!nodeQueue.empty()) {
        set.unshift(nodeQueue.dequeue());
        Object.keys(set[0].inputs).map(function (key) { return set[0].inputs[key]; }).forEach(function (input) {
            if (unorderedEvaluationSet.indexOf(input.node) === -1) {
                return;
            }
            pendingDependencies[input.node.id]--;
            nodeQueue.update(input.node, nodeIndices[input.node.id]);
        });
    }
    return set;
}
exports.getOrderedEvaluationSet = getOrderedEvaluationSet;
function isInputNode(node) {
    return Object.keys(node.inputs).length === 0;
}
exports.isInputNode = isInputNode;
function shouldBackProp(t) {
    return !(t.node instanceof graph_1.ConstantNode);
}
exports.shouldBackProp = shouldBackProp;
function isPassthroughNode(node, map) {
    var keys = Object.keys(node.inputs);
    for (var i = 0; i < keys.length; i++) {
        var input = node.inputs[keys[i]];
        if (map.get(input, true) === map.get(node.output, true)) {
            return true;
        }
    }
    return false;
}
exports.isPassthroughNode = isPassthroughNode;

},{"./graph":9,"./priority_queue":83}],13:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var conv_util = require("./math/conv_util");
exports.conv_util = conv_util;
var gpgpu_util = require("./math/webgl/gpgpu_util");
exports.gpgpu_util = gpgpu_util;
var render_ndarray_gpu_util = require("./math/webgl/render_ndarray_gpu_util");
exports.render_ndarray_gpu_util = render_ndarray_gpu_util;
var webgl_util = require("./math/webgl/webgl_util");
exports.webgl_util = webgl_util;
var util = require("./util");
exports.util = util;
var checkpoint_loader_1 = require("./checkpoint_loader");
exports.CheckpointLoader = checkpoint_loader_1.CheckpointLoader;
var dataset_1 = require("./dataset");
exports.InMemoryDataset = dataset_1.InMemoryDataset;
var graph_1 = require("./graph");
exports.Graph = graph_1.Graph;
exports.Tensor = graph_1.Tensor;
var graph_runner_1 = require("./graph_runner");
exports.GraphRunner = graph_runner_1.GraphRunner;
exports.MetricReduction = graph_runner_1.MetricReduction;
var initializers_1 = require("./initializers");
exports.ConstantInitializer = initializers_1.ConstantInitializer;
exports.NDArrayInitializer = initializers_1.NDArrayInitializer;
exports.OnesInitializer = initializers_1.OnesInitializer;
exports.RandomNormalInitializer = initializers_1.RandomNormalInitializer;
exports.RandomTruncatedNormalInitializer = initializers_1.RandomTruncatedNormalInitializer;
exports.RandomUniformInitializer = initializers_1.RandomUniformInitializer;
exports.VarianceScalingInitializer = initializers_1.VarianceScalingInitializer;
exports.ZerosInitializer = initializers_1.ZerosInitializer;
var input_provider_1 = require("./input_provider");
exports.InCPUMemoryShuffledInputProviderBuilder = input_provider_1.InCPUMemoryShuffledInputProviderBuilder;
exports.InGPUMemoryShuffledInputProviderBuilder = input_provider_1.InGPUMemoryShuffledInputProviderBuilder;
var math_1 = require("./math/math");
exports.MatrixOrientation = math_1.MatrixOrientation;
exports.NDArrayMath = math_1.NDArrayMath;
var math_cpu_1 = require("./math/math_cpu");
exports.NDArrayMathCPU = math_cpu_1.NDArrayMathCPU;
var math_gpu_1 = require("./math/math_gpu");
exports.NDArrayMathGPU = math_gpu_1.NDArrayMathGPU;
var ndarray_1 = require("./math/ndarray");
exports.Array1D = ndarray_1.Array1D;
exports.Array2D = ndarray_1.Array2D;
exports.Array3D = ndarray_1.Array3D;
exports.Array4D = ndarray_1.Array4D;
exports.NDArray = ndarray_1.NDArray;
exports.Scalar = ndarray_1.Scalar;
var gpgpu_context_1 = require("./math/webgl/gpgpu_context");
exports.GPGPUContext = gpgpu_context_1.GPGPUContext;
var optimizer_1 = require("./optimizer");
exports.Optimizer = optimizer_1.Optimizer;
var session_1 = require("./session");
exports.CostReduction = session_1.CostReduction;
exports.Session = session_1.Session;
var sgd_optimizer_1 = require("./sgd_optimizer");
exports.SGDOptimizer = sgd_optimizer_1.SGDOptimizer;

},{"./checkpoint_loader":7,"./dataset":8,"./graph":9,"./graph_runner":11,"./initializers":14,"./input_provider":15,"./math/conv_util":18,"./math/math":21,"./math/math_cpu":22,"./math/math_gpu":23,"./math/ndarray":24,"./math/webgl/gpgpu_context":37,"./math/webgl/gpgpu_util":38,"./math/webgl/render_ndarray_gpu_util":50,"./math/webgl/webgl_util":60,"./optimizer":82,"./session":84,"./sgd_optimizer":86,"./util":88}],14:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ndarray_1 = require("./math/ndarray");
var VarianceScalingInitializer = (function () {
    function VarianceScalingInitializer(scale, mode, distribution) {
        if (scale === void 0) { scale = 1.0; }
        if (mode === void 0) { mode = 'fan_in'; }
        if (distribution === void 0) { distribution = 'normal'; }
        this.scale = scale;
        this.mode = mode;
        this.distribution = distribution;
    }
    VarianceScalingInitializer.prototype.initialize = function (weightsShape, inputUnits, outputUnits) {
        var n = 0;
        if (this.mode === 'fan_in') {
            n = inputUnits;
        }
        else if (this.mode === 'fan_out') {
            n = outputUnits;
        }
        else if (this.mode === 'fan_avg') {
            n = (inputUnits + outputUnits) / 2;
        }
        else {
            throw new Error('Unexpected mode for variance scaling initializer: ' + this.mode);
        }
        if (this.distribution === 'normal') {
            return ndarray_1.NDArray.randTruncatedNormal(weightsShape, 0.0, Math.sqrt(this.scale / n));
        }
        else if (this.distribution === 'uniform') {
            return ndarray_1.NDArray.randUniform(weightsShape, 0.0, Math.sqrt(3 * this.scale / n));
        }
        else {
            throw new Error('Unexpected distribution for variance scaling initializer: ' +
                this.distribution);
        }
    };
    return VarianceScalingInitializer;
}());
exports.VarianceScalingInitializer = VarianceScalingInitializer;
var ZerosInitializer = (function () {
    function ZerosInitializer() {
    }
    ZerosInitializer.prototype.initialize = function (weightsShape, inputUnits, outputUnits) {
        return ndarray_1.NDArray.zeros(weightsShape);
    };
    return ZerosInitializer;
}());
exports.ZerosInitializer = ZerosInitializer;
var OnesInitializer = (function () {
    function OnesInitializer() {
    }
    OnesInitializer.prototype.initialize = function (weightsShape, inputUnits, outputUnits) {
        var values = ndarray_1.NDArray.zeros(weightsShape);
        values.fill(1);
        return values;
    };
    return OnesInitializer;
}());
exports.OnesInitializer = OnesInitializer;
var ConstantInitializer = (function () {
    function ConstantInitializer(value) {
        if (value === void 0) { value = 0; }
        this.value = value;
    }
    ConstantInitializer.prototype.initialize = function (weightsShape, inputUnits, outputUnits) {
        var values = ndarray_1.NDArray.zeros(weightsShape);
        values.fill(this.value);
        return values;
    };
    return ConstantInitializer;
}());
exports.ConstantInitializer = ConstantInitializer;
var NDArrayInitializer = (function () {
    function NDArrayInitializer(ndarray) {
        this.ndarray = ndarray;
    }
    NDArrayInitializer.prototype.initialize = function (weightsShape, inputUnits, outputUnits) {
        return this.ndarray;
    };
    return NDArrayInitializer;
}());
exports.NDArrayInitializer = NDArrayInitializer;
var RandomNormalInitializer = (function () {
    function RandomNormalInitializer(mean, stdev) {
        if (mean === void 0) { mean = 0; }
        if (stdev === void 0) { stdev = .05; }
        this.mean = mean;
        this.stdev = stdev;
    }
    RandomNormalInitializer.prototype.initialize = function (weightsShape, inputUnits, outputUnits) {
        return ndarray_1.NDArray.randNormal(weightsShape, this.mean, this.stdev);
    };
    return RandomNormalInitializer;
}());
exports.RandomNormalInitializer = RandomNormalInitializer;
var RandomTruncatedNormalInitializer = (function () {
    function RandomTruncatedNormalInitializer(mean, stdev) {
        if (mean === void 0) { mean = 0; }
        if (stdev === void 0) { stdev = .05; }
        this.mean = mean;
        this.stdev = stdev;
    }
    RandomTruncatedNormalInitializer.prototype.initialize = function (weightsShape, inputUnits, outputUnits) {
        return ndarray_1.NDArray.randTruncatedNormal(weightsShape, this.mean, this.stdev);
    };
    return RandomTruncatedNormalInitializer;
}());
exports.RandomTruncatedNormalInitializer = RandomTruncatedNormalInitializer;
var RandomUniformInitializer = (function () {
    function RandomUniformInitializer(minval, maxval) {
        if (minval === void 0) { minval = -.05; }
        if (maxval === void 0) { maxval = .05; }
        this.minval = minval;
        this.maxval = maxval;
    }
    RandomUniformInitializer.prototype.initialize = function (weightsShape, inputUnits, outputUnits) {
        return ndarray_1.NDArray.randUniform(weightsShape, this.minval, this.maxval);
    };
    return RandomUniformInitializer;
}());
exports.RandomUniformInitializer = RandomUniformInitializer;

},{"./math/ndarray":24}],15:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var ndarray_1 = require("./math/ndarray");
var util = require("./util");
var InMemoryShuffledInputProviderBuilder = (function () {
    function InMemoryShuffledInputProviderBuilder(inputs) {
        this.inputs = inputs;
        this.idx = 0;
        this.inputCounter = 0;
        this.epoch = 0;
        this.shuffledIndices = util.createShuffledIndices(inputs[0].length);
        this.numInputs = inputs.length;
        var numExamples = this.inputs[0].length;
        for (var i = 0; i < this.numInputs; i++) {
            util.assert(this.inputs[i].length === numExamples, 'Number of examples must match across different inputs.');
        }
        for (var i = 0; i < this.numInputs; i++) {
            var inputShape = this.inputs[i][0].shape;
            for (var j = 0; j < this.inputs[i].length; j++) {
                util.assertShapesMatch(inputShape, this.inputs[i][j].shape);
            }
        }
    }
    InMemoryShuffledInputProviderBuilder.prototype.getCurrentExampleIndex = function () {
        var returnIdx = this.idx;
        this.inputCounter++;
        if (this.inputCounter >= this.numInputs) {
            this.idx++;
            this.inputCounter = 0;
            if (this.idx >= this.inputs[0].length) {
                this.idx = 0;
                this.epoch++;
            }
        }
        return returnIdx;
    };
    InMemoryShuffledInputProviderBuilder.prototype.getNextInput = function (inputId) {
        var currentExampleIndex = this.getCurrentExampleIndex();
        return this.inputs[inputId][this.shuffledIndices[currentExampleIndex]];
    };
    InMemoryShuffledInputProviderBuilder.prototype.getEpoch = function () {
        return this.epoch;
    };
    InMemoryShuffledInputProviderBuilder.prototype.getInputProviders = function () {
        var inputProviders = [];
        for (var i = 0; i < this.numInputs; i++) {
            inputProviders.push(this.getInputProvider(i));
        }
        return inputProviders;
    };
    return InMemoryShuffledInputProviderBuilder;
}());
exports.InMemoryShuffledInputProviderBuilder = InMemoryShuffledInputProviderBuilder;
var InCPUMemoryShuffledInputProviderBuilder = (function (_super) {
    __extends(InCPUMemoryShuffledInputProviderBuilder, _super);
    function InCPUMemoryShuffledInputProviderBuilder() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    InCPUMemoryShuffledInputProviderBuilder.prototype.getInputProvider = function (inputId) {
        var shuffledInputProvider = this;
        return {
            getNextCopy: function (math) {
                return ndarray_1.NDArray.like(shuffledInputProvider.getNextInput(inputId));
            },
            disposeCopy: function (math, copy) {
                copy.dispose();
            }
        };
    };
    return InCPUMemoryShuffledInputProviderBuilder;
}(InMemoryShuffledInputProviderBuilder));
exports.InCPUMemoryShuffledInputProviderBuilder = InCPUMemoryShuffledInputProviderBuilder;
var InGPUMemoryShuffledInputProviderBuilder = (function (_super) {
    __extends(InGPUMemoryShuffledInputProviderBuilder, _super);
    function InGPUMemoryShuffledInputProviderBuilder() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    InGPUMemoryShuffledInputProviderBuilder.prototype.getInputProvider = function (inputId) {
        var shuffledInputProvider = this;
        return {
            getNextCopy: function (math) {
                return math.clone(shuffledInputProvider.getNextInput(inputId));
            },
            disposeCopy: function (math, copy) {
                copy.dispose();
            }
        };
    };
    return InGPUMemoryShuffledInputProviderBuilder;
}(InMemoryShuffledInputProviderBuilder));
exports.InGPUMemoryShuffledInputProviderBuilder = InGPUMemoryShuffledInputProviderBuilder;

},{"./math/ndarray":24,"./util":88}],16:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ndarray_1 = require("./ndarray");
var TanHFunc = (function () {
    function TanHFunc() {
    }
    TanHFunc.prototype.output = function (math, x) {
        return math.scope(function () {
            return math.tanh(x);
        });
    };
    TanHFunc.prototype.der = function (math, x, y) {
        return math.scope(function () {
            var ySquared = math.elementWiseMul(y, y);
            return math.scalarMinusArray(ndarray_1.Scalar.ONE, ySquared);
        });
    };
    return TanHFunc;
}());
exports.TanHFunc = TanHFunc;
var ReLUFunc = (function () {
    function ReLUFunc() {
    }
    ReLUFunc.prototype.output = function (math, x) {
        return math.scope(function () {
            return math.relu(x);
        });
    };
    ReLUFunc.prototype.der = function (math, x, y) {
        return math.scope(function () {
            return math.step(x);
        });
    };
    return ReLUFunc;
}());
exports.ReLUFunc = ReLUFunc;
var SigmoidFunc = (function () {
    function SigmoidFunc() {
    }
    SigmoidFunc.prototype.output = function (math, x) {
        return math.scope(function () {
            return math.sigmoid(x);
        });
    };
    SigmoidFunc.prototype.der = function (math, x, y) {
        return math.scope(function () {
            var ySquared = math.elementWiseMul(y, y);
            return math.sub(y, ySquared);
        });
    };
    return SigmoidFunc;
}());
exports.SigmoidFunc = SigmoidFunc;
var SquareFunc = (function () {
    function SquareFunc() {
    }
    SquareFunc.prototype.output = function (math, x) {
        return math.scope(function () {
            return math.elementWiseMul(x, x);
        });
    };
    SquareFunc.prototype.der = function (math, x, y) {
        return math.scope(function () {
            return math.scalarTimesArray(ndarray_1.Scalar.TWO, x);
        });
    };
    return SquareFunc;
}());
exports.SquareFunc = SquareFunc;

},{"./ndarray":24}],17:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var util = require("../util");
function assertConcat3DShapesMatch(x1Shape, x2Shape, axis, errorMessagePrefix) {
    if (errorMessagePrefix === void 0) { errorMessagePrefix = ''; }
    util.assert(x1Shape.length === 3, errorMessagePrefix + 'Concat3D x1 shape should be of rank 3.');
    util.assert(x2Shape.length === 3, errorMessagePrefix + 'Concat3D x2 shape should be of rank 3.');
    util.assert(axis >= 0 && axis < 3, 'Axis for concat3D must be between 0 and 2.');
    for (var i = 0; i < 3; i++) {
        util.assert((i === axis) || (x1Shape[i] === x2Shape[i]), errorMessagePrefix +
            ("Shape (" + x1Shape + ") does not match (" + x2Shape + ") along ") +
            "non-concatenated axis.");
    }
}
exports.assertConcat3DShapesMatch = assertConcat3DShapesMatch;
function computeConcat3DOutputShape(x1Shape, x2Shape, axis) {
    util.assert(x1Shape.length === 3, 'Concat3D x1 shape should be of rank 3.');
    util.assert(x2Shape.length === 3, 'Concat3D x2shape should be of rank 3.');
    var outputShape = x1Shape.slice();
    outputShape[axis] += x2Shape[axis];
    return outputShape;
}
exports.computeConcat3DOutputShape = computeConcat3DOutputShape;

},{"../util":88}],18:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var util = require("../util");
function computeOutputShape3D(inputShapeRowColDepth, fieldSize, depth, stride, zeroPad) {
    if (zeroPad == null) {
        zeroPad = computeDefaultPad(inputShapeRowColDepth, fieldSize, stride);
    }
    var inputRows = inputShapeRowColDepth[0];
    var inputCols = inputShapeRowColDepth[1];
    var outputRows = (inputRows - fieldSize + 2 * zeroPad) / stride + 1;
    util.assert(util.isInt(outputRows), "The output # of rows (" + outputRows + ") must be an integer. Change the " +
        "stride and/or zero pad parameters");
    var outputCols = (inputCols - fieldSize + 2 * zeroPad) / stride + 1;
    util.assert(util.isInt(outputCols), "The output # of columns (" + outputCols + ") must be an integer. Change " +
        "the stride and/or zero pad parameters");
    return [outputRows, outputCols, depth];
}
exports.computeOutputShape3D = computeOutputShape3D;
function computeDefaultPad(inputShape, fieldSize, stride) {
    return Math.floor((inputShape[0] * (stride - 1) - stride + fieldSize) / 2);
}
exports.computeDefaultPad = computeDefaultPad;
function computeTexShapeFrom3D(shapeRowColDepth) {
    return [shapeRowColDepth[0], shapeRowColDepth[1] * shapeRowColDepth[2]];
}
exports.computeTexShapeFrom3D = computeTexShapeFrom3D;
function computeWeightsShape4D(inputDepth, outputDepth, fSize) {
    return [fSize, fSize, inputDepth, outputDepth];
}
exports.computeWeightsShape4D = computeWeightsShape4D;
function computeWeightsTexShape(inputDepth, outputDepth, fieldSize) {
    return [fieldSize * fieldSize * inputDepth, outputDepth];
}
exports.computeWeightsTexShape = computeWeightsTexShape;
function computeBiasesTexShape(outputDepth) {
    return [1, outputDepth];
}
exports.computeBiasesTexShape = computeBiasesTexShape;
function computeDilatedRC(rc, origStride) {
    var rowsDilated = (rc[0] - 1) * origStride + 1;
    var colsDilated = (rc[1] - 1) * origStride + 1;
    return [rowsDilated, colsDilated];
}
exports.computeDilatedRC = computeDilatedRC;

},{"../util":88}],19:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function validateShapes(sourceSize, destSize) {
    var srcArea = sourceSize[0] * sourceSize[1];
    var dstArea = destSize[0] * destSize[1];
    if (srcArea !== dstArea) {
        var srcStr = '[' + sourceSize[0] + ', ' + sourceSize[1] + ']';
        var dstStr = '[' + destSize[0] + ', ' + destSize[1] + ']';
        throw new Error('copy2D shapes have different areas:\n  sourceSize ' + srcStr +
            ', area ' + srcArea + '\n  destSize ' + dstStr + ', area ' + dstArea);
    }
}
exports.validateShapes = validateShapes;

},{}],20:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ndarray_1 = require("./ndarray");
var SquareCostFunc = (function () {
    function SquareCostFunc() {
        this.halfOne = ndarray_1.Scalar.new(0.5);
    }
    SquareCostFunc.prototype.cost = function (math, x1, x2) {
        var diff = math.sub(x1, x2);
        var diffSquared = math.elementWiseMul(diff, diff);
        var result = math.scalarTimesArray(this.halfOne, diffSquared);
        diff.dispose();
        diffSquared.dispose();
        return result;
    };
    SquareCostFunc.prototype.der = function (math, x1, x2) {
        return math.sub(x1, x2);
    };
    SquareCostFunc.prototype.dispose = function () {
        this.halfOne.dispose();
    };
    return SquareCostFunc;
}());
exports.SquareCostFunc = SquareCostFunc;

},{"./ndarray":24}],21:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var util = require("../util");
var concat3d_util = require("./concat3d_util");
var copy2d_util = require("./copy2d_util");
var ndarray_1 = require("./ndarray");
var NDArrayMath = (function () {
    function NDArrayMath(safeMode) {
        this.safeMode = safeMode;
        this.ndarrayScopes = [];
        this.ndarraysToKeep = [];
        this.activeScopeNDArraysToKeep = [];
    }
    NDArrayMath.prototype.scope = function (scopeFn) {
        var _this = this;
        this.startScope();
        var keepFn = function (ndarray) { return _this.keep(ndarray); };
        var trackFn = function (ndarray) { return _this.track(ndarray); };
        var result = scopeFn(keepFn, trackFn);
        this.endScope(result);
        return result;
    };
    NDArrayMath.prototype.startScope = function () {
        var newScope = [];
        this.ndarrayScopes.push(newScope);
        this.activeScope = newScope;
        var newNDArraysToKeep = [];
        this.ndarraysToKeep.push(newNDArraysToKeep);
        this.activeScopeNDArraysToKeep = newNDArraysToKeep;
    };
    NDArrayMath.prototype.endScope = function (result) {
        var _this = this;
        for (var i = 0; i < this.activeScope.length; i++) {
            var ndarray = this.activeScope[i];
            if (this.isNDArrayDataInList(ndarray, this.activeScopeNDArraysToKeep) ||
                (result != null && result instanceof ndarray_1.NDArray &&
                    ndarray.getData() === result.getData())) {
                continue;
            }
            ndarray.dispose();
        }
        this.ndarrayScopes.pop();
        this.activeScope = this.ndarrayScopes.length === 0 ?
            null :
            this.ndarrayScopes[this.ndarrayScopes.length - 1];
        if (result instanceof ndarray_1.NDArray &&
            !this.isNDArrayDataInList(result, this.activeScopeNDArraysToKeep)) {
            this.track(result);
        }
        else if (Array.isArray(result)) {
            result.forEach(function (r) {
                if (r instanceof ndarray_1.NDArray &&
                    !_this.isNDArrayDataInList(r, _this.activeScopeNDArraysToKeep)) {
                    _this.track(r);
                }
            });
        }
        this.ndarraysToKeep.pop();
        this.activeScopeNDArraysToKeep = this.ndarraysToKeep.length === 0 ?
            null :
            this.ndarraysToKeep[this.ndarraysToKeep.length - 1];
    };
    NDArrayMath.prototype.isNDArrayDataInList = function (ndarray, ndarrayList) {
        for (var i = 0; i < ndarrayList.length; i++) {
            if (ndarrayList[i].getData() === ndarray.getData()) {
                return true;
            }
        }
        return false;
    };
    NDArrayMath.prototype.keep = function (result) {
        if (this.activeScope == null) {
            if (this.safeMode) {
                throw new Error('You are using math in safe mode. Enclose all ' +
                    'math.method() calls inside a scope: ' +
                    'math.scope(() => {math.method();...}) to avoid memory ' +
                    'leaks.');
            }
            return result;
        }
        this.activeScopeNDArraysToKeep.push(result);
        return result;
    };
    NDArrayMath.prototype.track = function (result) {
        if (this.activeScope == null) {
            if (this.safeMode) {
                throw new Error('You are using math in safe mode. Enclose all ' +
                    'math.method() calls inside a scope: ' +
                    'math.scope(() => {math.method();...}) to avoid memory ' +
                    'leaks.');
            }
            return result;
        }
        this.activeScope.push(result);
        return result;
    };
    NDArrayMath.prototype.matMul = function (a, b, aOrientation, bOrientation) {
        if (aOrientation === void 0) { aOrientation = MatrixOrientation.REGULAR; }
        if (bOrientation === void 0) { bOrientation = MatrixOrientation.REGULAR; }
        var innerShapeA = (aOrientation === MatrixOrientation.REGULAR) ? a.shape[1] : a.shape[0];
        var innerShapeB = (bOrientation === MatrixOrientation.REGULAR) ? b.shape[0] : b.shape[1];
        util.assert(a.rank === 2 && b.rank === 2, "Error in matMul: inputs must be rank 2, got ranks " + a.rank +
            ("and " + b.rank + "."));
        util.assert(innerShapeA === innerShapeB, "Error in matMul: inner shapes (" + innerShapeA + ") and (" +
            (innerShapeB + ") of NDArrays with shapes " + a.shape + " and ") +
            (b.shape + " and orientations " + MatrixOrientation[aOrientation]) +
            (" and " + MatrixOrientation[bOrientation] + " must match."));
        return this.track(this.matMulInternal(a, b, aOrientation, bOrientation));
    };
    NDArrayMath.prototype.vectorTimesMatrix = function (v, matrix) {
        util.assert(v.rank === 1, "Error in vectorTimesMatrix: first input must be rank 1, but got " +
            ("rank " + v.rank + "."));
        util.assert(matrix.rank === 2, "Error in vectorTimesMatrix: second input must be rank 2, but got " +
            ("rank " + matrix.rank + "."));
        util.assert(v.size === matrix.shape[0], "Error in vectorTimesMatrix: size of first rank 1 input (" + v.size + ") " +
            "must match inner dimension of second rank 2 input, but got " +
            ("rank " + matrix.rank + "."));
        return this.matMul(v.as2D(1, v.size), matrix).as1D();
    };
    NDArrayMath.prototype.matrixTimesVector = function (matrix, v) {
        util.assert(v.rank === 1, "Error in vectorTimesMatrix: second input must rank 1, but got " +
            ("rank " + v.rank + "."));
        util.assert(matrix.rank === 2, "Error in vectorTimesMatrix: first input must be a rank 2, but got " +
            ("rank " + matrix.rank + "."));
        util.assert(v.size === matrix.shape[1], "Error in vectorTimesMatrix: size of first rank 1 input " + v.size + " " +
            "must match inner dimension of second rank 2 input, but got " +
            ("shape " + matrix.shape + "."));
        return this.matMul(matrix, v.as2D(v.size, 1)).as1D();
    };
    NDArrayMath.prototype.dotProduct = function (v1, v2) {
        util.assert(v1.rank === 1 && v2.rank === 1, "Error in dotProduct: inputs must be rank 1, but got ranks " +
            (v1.rank + " and " + v2.rank + "."));
        util.assert(v1.size === v2.size, "Error in dotProduct: size of inputs (" + v1.size + ") and (" +
            (v2.size + ") must match."));
        return this.matMul(v1.as2D(1, v1.size), v2.as2D(v2.size, 1)).asScalar();
    };
    NDArrayMath.prototype.outerProduct = function (v1, v2) {
        util.assert(v1.rank === 1 && v2.rank === 1, "Error in outerProduct: inputs must be rank 1, but got ranks " +
            (v1.rank + " and " + v2.rank + "."));
        return this.matMul(v1.as2D(v1.size, 1), v2.as2D(1, v2.size));
    };
    NDArrayMath.prototype.clone = function (ndarray) {
        return this.track(this.cloneInternal(ndarray));
    };
    NDArrayMath.prototype.reshape = function (ndarray, newShape) {
        util.assert(ndarray.size === util.sizeFromShape(newShape), "Error in reshape: old size " + ndarray.size + " must match new size " +
            (util.sizeFromShape(newShape) + "."));
        return this.track(this.reshapeInternal(ndarray, newShape));
    };
    NDArrayMath.prototype.slice2D = function (input, begin, size) {
        util.assert(begin[0] + size[0] <= input.shape[0] &&
            begin[1] + size[1] <= input.shape[1], "Error in slice2D: requested start position " + begin + " and size " +
            (size + " would overflow input of shape " + input.shape + "."));
        return this.track(this.slice2DInternal(input, begin, size));
    };
    NDArrayMath.prototype.copy2D = function (source, sourceBegin, sourceSize, dest, destBegin, destSize) {
        util.assert(sourceBegin[0] + sourceSize[0] <= source.shape[0] &&
            sourceBegin[1] + sourceSize[1] <= source.shape[1], "Error in copy2D: requested source start position " + sourceBegin + " " +
            ("and source size " + sourceSize + " would overflow source NDArray") +
            ("of shape " + source.shape + "."));
        util.assert(destBegin[0] + destSize[0] <= dest.shape[0] &&
            destBegin[1] + destSize[1] <= dest.shape[1], "Error in copy2D: requested dest start position " + destBegin + " " +
            ("and source size " + destSize + " would overflow dest NDArray of") +
            ("shape " + dest.shape + "."));
        copy2d_util.validateShapes(sourceSize, destSize);
        return this.copy2DInternal(source, sourceBegin, sourceSize, dest, destBegin, destSize);
    };
    NDArrayMath.prototype.concat3D = function (ndarray1, ndarray2, axis) {
        concat3d_util.assertConcat3DShapesMatch(ndarray1.shape, ndarray2.shape, axis, 'Error in concat3d: ');
        return this.track(this.concat3DInternal(ndarray1, ndarray2, axis));
    };
    NDArrayMath.prototype.logSumExp = function (ndarray) {
        return this.track(this.logSumExpInternal(ndarray));
    };
    NDArrayMath.prototype.sum = function (ndarray) {
        return this.track(this.sumInternal(ndarray));
    };
    NDArrayMath.prototype.argMin = function (ndarray) {
        return this.track(this.argMinInternal(ndarray));
    };
    NDArrayMath.prototype.argMax = function (ndarray) {
        return this.track(this.argMaxInternal(ndarray));
    };
    NDArrayMath.prototype.argMaxEquals = function (x1, x2) {
        util.assertShapesMatch(x1.shape, x2.shape, 'Error in argMaxEquals: ');
        return this.track(this.argMaxEqualsInternal(x1, x2));
    };
    NDArrayMath.prototype.topK = function (ndarray, k) {
        util.assert(k <= ndarray.size, "Error in topK: k value (" + k + ") must be less than size of input " +
            ("ndarray, got shape " + ndarray.shape + "."));
        var result = this.topKInternal(ndarray, k);
        this.track(result.values);
        this.track(result.indices);
        return result;
    };
    NDArrayMath.prototype.min = function (ndarray) {
        return this.track(this.minInternal(ndarray));
    };
    NDArrayMath.prototype.max = function (ndarray) {
        return this.track(this.maxInternal(ndarray));
    };
    NDArrayMath.prototype.softmax = function (x) {
        var _this = this;
        return this.scope(function () {
            var lse = _this.logSumExp(x);
            var logResult = _this.arrayMinusScalar(x, lse);
            return _this.exp(logResult);
        });
    };
    NDArrayMath.prototype.switchDim = function (a, newDim) {
        util.assert(a.rank === newDim.length, "Error in switchDim: length of input shape " + a.shape + " " +
            ("must match size of newDim array " + newDim + "."));
        return this.track(this.switchDimInternal(a, newDim));
    };
    NDArrayMath.prototype.scalarPlusArray = function (c, a) {
        util.assert(c.size === 1, "Error in scalarPlusArray: first argument must be rank 0, but got " +
            ("rank " + c.rank + "."));
        return this.track(this.scalarPlusArrayInternal(c, a));
    };
    NDArrayMath.prototype.scalarMinusArray = function (c, a) {
        util.assert(c.size === 1, "Error in scalarMinusArray: first argument must be rank 0, but got " +
            ("rank " + c.rank + "."));
        return this.track(this.scalarMinusArrayInternal(c, a));
    };
    NDArrayMath.prototype.arrayMinusScalar = function (a, c) {
        util.assert(c.size === 1, "Error in arrayMinusScalar: second argument must be rank 0, but " +
            ("got rank " + c.rank + "."));
        return this.track(this.arrayMinusScalarInternal(a, c));
    };
    NDArrayMath.prototype.neg = function (a) {
        return this.track(this.negInternal(a));
    };
    NDArrayMath.prototype.add = function (a, b) {
        util.assertShapesMatch(a.shape, b.shape, 'Error in add: ');
        return this.track(this.addInternal(a, b));
    };
    NDArrayMath.prototype.sub = function (a, b) {
        util.assertShapesMatch(a.shape, b.shape, 'Error in sub: ');
        return this.track(this.subInternal(a, b));
    };
    NDArrayMath.prototype.elementWiseMul = function (a, b) {
        util.assertShapesMatch(a.shape, b.shape, 'Error in elementWiseMul: ');
        return this.track(this.elementWiseMulInternal(a, b));
    };
    NDArrayMath.prototype.divide = function (a, b) {
        util.assertShapesMatch(a.shape, b.shape, 'Error in divide: ');
        return this.track(this.divideInternal(a, b));
    };
    NDArrayMath.prototype.scalarDividedByArray = function (c, a) {
        util.assert(c.size === 1, "Error in scalarDividedByArray: first argument must be rank 0, but " +
            ("got NDArray of rank " + c.rank + "."));
        return this.track(this.scalarDividedByArrayInternal(c, a));
    };
    NDArrayMath.prototype.arrayDividedByScalar = function (a, c) {
        util.assert(c.size === 1, "Error in arrayDividedByScalar: second argument must be rank 0, " +
            ("but got NDArray of rank " + c.rank + "."));
        return this.track(this.arrayDividedByScalarInternal(a, c));
    };
    NDArrayMath.prototype.exp = function (ndarray) {
        return this.track(this.expInternal(ndarray));
    };
    NDArrayMath.prototype.log = function (ndarray) {
        return this.track(this.logInternal(ndarray));
    };
    NDArrayMath.prototype.relu = function (ndarray) {
        return this.track(this.reluInternal(ndarray));
    };
    NDArrayMath.prototype.sigmoid = function (ndarray) {
        return this.track(this.sigmoidInternal(ndarray));
    };
    NDArrayMath.prototype.tanh = function (ndarray) {
        return this.track(this.tanhInternal(ndarray));
    };
    NDArrayMath.prototype.sin = function (ndarray) {
        return this.track(this.sinInternal(ndarray));
    };
    NDArrayMath.prototype.step = function (ndarray) {
        return this.track(this.stepInternal(ndarray));
    };
    NDArrayMath.prototype.scaledArrayAdd = function (c1, a, c2, b) {
        util.assert(c1.size === 1, "Error in scaledArrayAdd: first argument must rank 0, but got " +
            (" rank " + c1.rank + "."));
        util.assert(c2.size === 1, "Error in scaledArrayAdd: third argument must be rank 0, but got " +
            ("NDArray of rank " + c2.rank + "."));
        util.assertShapesMatch(a.shape, b.shape, 'Error in scaledArrayAdd: ');
        return this.track(this.scaledArrayAddInternal(c1, a, c2, b));
    };
    NDArrayMath.prototype.scalarTimesArray = function (c, a) {
        util.assert(c.size === 1, "Error in arrayDividedByScalar: first argument must be rank 0, but " +
            ("got rank " + c.rank + "."));
        return this.track(this.scalarTimesArrayInternal(c, a));
    };
    NDArrayMath.prototype.elementWiseMulBroadcast = function (a, b) {
        util.assert(a.rank === 2, "Error in elementWiseMulBroadcast: first argument must be " +
            ("rank 2, but got rank " + a.rank + "."));
        util.assert(b.rank === 2, "Error in elementWiseMulBroadcast: second argument must be " +
            ("rank 2, but got rank " + b.rank + "."));
        return this.track(this.elementWiseMulBroadcastInternal(a, b));
    };
    NDArrayMath.prototype.conv2d = function (x, weights, biases, stride, zeroPad) {
        util.assert(x.rank === 3, "Error in conv2d: x must be rank 3, but got rank " + x.rank + ".");
        util.assert(weights.rank === 4, "Error in conv2d: weights must be rank 4, but got rank " +
            (weights.rank + "."));
        if (biases != null) {
            util.assert(biases.rank === 1, "Error in conv2d: biases must be rank 1, but got rank " +
                (biases.rank + "."));
        }
        util.assert(x.shape[2] === weights.shape[2], "Error in conv2d: depth of input (" + x.shape[2] + ") must match  " +
            ("input depth for weights " + weights.shape[2] + "."));
        return this.track(this.conv2dInternal(x, weights, biases, stride, zeroPad));
    };
    NDArrayMath.prototype.conv2dBackProp = function (x, dy, weights, stride, pad) {
        util.assert(x.rank === 3, "Error in conv2dBackProp: x must be rank 3, but got shape " +
            (x.shape + "."));
        util.assert(dy.rank === 3, "Error in conv2dBackProp: dy must be rank 3, but got shape " +
            (dy.shape + "."));
        util.assert(weights.rank === 4, "Error in conv2dBackProp: weights must be rank 4, but got shape " +
            (weights.shape + "."));
        util.assert(x.shape[2] === weights.shape[2], "Error in conv2dBackProp: depth of x " + x.shape[2] + ") must " +
            ("match input depth for weights (" + weights.shape[2] + "."));
        util.assert(dy.shape[2] === weights.shape[3], "Error in conv2dBackProp: depth of dy (" + dy.shape[2] + ") must " +
            ("match output depth for weights (" + weights.shape[3] + ")."));
        var backpropResult = this.conv2dBackPropInternal(x, dy, weights, stride, pad);
        this.track(backpropResult.db);
        this.track(backpropResult.dw);
        this.track(backpropResult.dx);
        return backpropResult;
    };
    NDArrayMath.prototype.conv2dTranspose = function (x, weights, biases, stride, pad) {
        util.assert(x.rank === 3, "Error in conv2dTranspose: x must be rank 3, but got rank " +
            (x.rank + "."));
        util.assert(weights.rank === 4, "Error in conv2dTranspose: weights must be rank 4, but got " +
            ("rank " + weights.rank));
        if (biases != null) {
            util.assert(biases.rank === 1, "Error in conv2dTranspose: biases must be rank 1, but got ' +\n              'rank " + biases.rank + ".");
        }
        util.assert(x.shape[2] === weights.shape[3], "Error in conv2dTranspose: depth of input (" + x.shape[2] + ") must " +
            ("match input depth for weights " + weights.shape[3] + "."));
        return this.track(this.conv2dTransposeInternal(x, weights, biases, stride, pad));
    };
    NDArrayMath.prototype.maxPool = function (x, fSize, stride, pad) {
        util.assert(x.rank === 3, 'Error in maxPool: x must be rank 3 but got rank ' + x.rank + '.');
        return this.track(this.maxPoolInternal(x, fSize, stride, pad));
    };
    NDArrayMath.prototype.maxPoolBackprop = function (dy, x, fSize, stride, pad) {
        util.assert(dy.rank === 3, "Error in maxPoolBackprop: dy must be rank 3 but got rank " +
            (dy.rank + "."));
        util.assert(x.rank === 3, "Error in maxPoolBackprop: x must be rank 3 but got rank " +
            (x.rank + "."));
        return this.track(this.maxPoolBackpropInternal(dy, x, fSize, stride, pad));
    };
    NDArrayMath.prototype.minPool = function (x, fSize, stride, pad) {
        util.assert(x.rank === 3, "Error in minPool: x must be rank 3 but got rank " + x.rank + ".");
        return this.track(this.minPoolInternal(x, fSize, stride, pad));
    };
    NDArrayMath.prototype.avgPool = function (x, fSize, stride, pad) {
        util.assert(x.rank === 3, "Error in avgPool: x must be rank 3 but got rank " + x.rank + ".");
        return this.track(this.avgPoolInternal(x, fSize, stride, pad));
    };
    NDArrayMath.prototype.resizeBilinear3D = function (x, newShape2D, alignCorners) {
        if (alignCorners === void 0) { alignCorners = false; }
        util.assert(x.rank === 3, "Error in resizeBilinear3D: x must be rank 3 but got rank " + x.rank + ".");
        util.assert(newShape2D.length === 2, "Error in resizeBilinear3D: new shape must 2D, but got shape " +
            (newShape2D + "."));
        return this.track(this.resizeBilinear3DInternal(x, newShape2D, alignCorners));
    };
    NDArrayMath.prototype.batchNormalization3D = function (x, mean, variance, varianceEpsilon, scale, offset) {
        if (varianceEpsilon === void 0) { varianceEpsilon = .001; }
        util.assert(x.rank === 3, "Error in batchNormalization3D: x must be rank 3 but got rank " +
            (x.rank + "."));
        util.assert(mean.rank === 3 || mean.rank === 1, "Error in batchNormalization3D: mean must be rank 3 or rank 1 but " +
            ("got rank " + mean.rank + "."));
        util.assert(variance.rank === 3 || variance.rank === 1, "Error in batchNormalization3D: variance must be rank 3 or rank 1 " +
            ("but got rank " + variance.rank + "."));
        if (scale != null) {
            util.assert(scale.rank === 3 || scale.rank === 1, "Error in batchNormalization3D: scale must be rank 3 or rank 1 " +
                ("but got rank " + scale.rank + "."));
        }
        if (offset != null) {
            util.assert(offset.rank === 3 || offset.rank === 1, "Error in batchNormalization3D: offset must be rank 3 or rank 1 " +
                ("but got rank " + offset.rank + "."));
        }
        return this.track(this.batchNormalization3DInternal(x, mean, variance, varianceEpsilon, scale, offset));
    };
    return NDArrayMath;
}());
exports.NDArrayMath = NDArrayMath;
var MatrixOrientation;
(function (MatrixOrientation) {
    MatrixOrientation[MatrixOrientation["REGULAR"] = 0] = "REGULAR";
    MatrixOrientation[MatrixOrientation["TRANSPOSED"] = 1] = "TRANSPOSED";
})(MatrixOrientation = exports.MatrixOrientation || (exports.MatrixOrientation = {}));

},{"../util":88,"./concat3d_util":17,"./copy2d_util":19,"./ndarray":24}],22:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var conv_util = require("../math/conv_util");
var util = require("../util");
var concat3d_util = require("./concat3d_util");
var copy2D_util = require("./copy2d_util");
var math_1 = require("./math");
var ndarray_1 = require("./ndarray");
var NDArrayMathCPU = (function (_super) {
    __extends(NDArrayMathCPU, _super);
    function NDArrayMathCPU(safeMode) {
        if (safeMode === void 0) { safeMode = false; }
        return _super.call(this, safeMode) || this;
    }
    NDArrayMathCPU.prototype.cloneInternal = function (ndarray) {
        return ndarray_1.NDArray.make(ndarray.shape, { values: new Float32Array(ndarray.getValues()) });
    };
    NDArrayMathCPU.prototype.reshapeInternal = function (ndarray, newShape) {
        return this.cloneInternal(ndarray).reshape(newShape);
    };
    NDArrayMathCPU.prototype.slice2DInternal = function (input, beginRowCol, sizeRowCol) {
        var result = ndarray_1.Array2D.zeros(sizeRowCol);
        this.copy2DInternal(input, beginRowCol, sizeRowCol, result, [0, 0], sizeRowCol);
        return result;
    };
    NDArrayMathCPU.prototype.copy2DInternal = function (source, sourceBeginRowCol, sourceSizeRowCol, dest, destBeginRowCol, destSizeRowCol) {
        copy2D_util.validateShapes(sourceSizeRowCol, destSizeRowCol);
        var srcValues = source.getValues();
        var dstValues = dest.getValues();
        var n = sourceSizeRowCol[0] * sourceSizeRowCol[1];
        for (var i = 0; i < n; ++i) {
            var srcRow = sourceBeginRowCol[0] + Math.floor(i / sourceSizeRowCol[1]);
            var srcCol = sourceBeginRowCol[1] + (i % sourceSizeRowCol[1]);
            var srcOff = srcRow * source.shape[1] + srcCol;
            var dstRow = destBeginRowCol[0] + Math.floor(i / destSizeRowCol[1]);
            var dstCol = destBeginRowCol[1] + (i % destSizeRowCol[1]);
            var dstOff = dstRow * dest.shape[1] + dstCol;
            dstValues[dstOff] = srcValues[srcOff];
        }
    };
    NDArrayMathCPU.prototype.concat3DInternal = function (x1, x2, axis) {
        var outputShape = concat3d_util.computeConcat3DOutputShape(x1.shape, x2.shape, axis);
        var values = ndarray_1.NDArray.zeros(outputShape);
        for (var i = 0; i < outputShape[0]; i++) {
            for (var j = 0; j < outputShape[1]; j++) {
                for (var k = 0; k < outputShape[2]; k++) {
                    var index = [i, j, k];
                    var value = void 0;
                    if (index[axis] < x1.shape[axis]) {
                        value = x1.get(i, j, k);
                    }
                    else {
                        index[axis] -= x1.shape[axis];
                        var i2 = index[0], j2 = index[1], k2 = index[2];
                        value = x2.get(i2, j2, k2);
                    }
                    values.set(value, i, j, k);
                }
            }
        }
        return values;
    };
    NDArrayMathCPU.prototype.scalarPlusArrayInternal = function (c, a) {
        var resultValues = new Float32Array(a.size);
        var aValues = a.getValues();
        var cVal = c.get();
        for (var i = 0; i < resultValues.length; ++i) {
            resultValues[i] = cVal + aValues[i];
        }
        return ndarray_1.NDArray.make(a.shape, { values: resultValues });
    };
    NDArrayMathCPU.prototype.scaledArrayAddInternal = function (c1, a, c2, b) {
        var cValues = new Float32Array(a.size);
        var aValues = a.getValues();
        var bValues = b.getValues();
        var c1Val = c1.get();
        var c2Val = c2.get();
        for (var i = 0; i < cValues.length; ++i) {
            cValues[i] = c1Val * aValues[i] + c2Val * bValues[i];
        }
        return ndarray_1.NDArray.make(a.shape, { values: cValues });
    };
    NDArrayMathCPU.prototype.scalarTimesArrayInternal = function (c, a) {
        var newValues = new Float32Array(a.size);
        var aValues = a.getValues();
        var cVal = c.get();
        for (var i = 0; i < aValues.length; ++i) {
            newValues[i] = cVal * aValues[i];
        }
        return ndarray_1.NDArray.make(a.shape, { values: newValues });
    };
    NDArrayMathCPU.prototype.scalarMinusArrayInternal = function (c, a) {
        var negA = this.negInternal(a);
        var result = this.scalarPlusArrayInternal(c, negA);
        negA.dispose();
        return result;
    };
    NDArrayMathCPU.prototype.arrayMinusScalarInternal = function (a, c) {
        var negC = this.negInternal(c);
        var result = this.scalarPlusArrayInternal(negC, a);
        negC.dispose();
        return result;
    };
    NDArrayMathCPU.prototype.negInternal = function (a) {
        return this.scalarTimesArrayInternal(ndarray_1.Scalar.NEG_ONE, a);
    };
    NDArrayMathCPU.prototype.addInternal = function (a, b) {
        return this.scaledArrayAddInternal(ndarray_1.Scalar.ONE, a, ndarray_1.Scalar.ONE, b);
    };
    NDArrayMathCPU.prototype.subInternal = function (a, b) {
        return this.scaledArrayAddInternal(ndarray_1.Scalar.ONE, a, ndarray_1.Scalar.NEG_ONE, b);
    };
    NDArrayMathCPU.prototype.matMulInternal = function (a, b, aOrientation, bOrientation) {
        if (aOrientation === void 0) { aOrientation = math_1.MatrixOrientation.REGULAR; }
        if (bOrientation === void 0) { bOrientation = math_1.MatrixOrientation.REGULAR; }
        var sharedDim = (aOrientation === math_1.MatrixOrientation.REGULAR) ? a.shape[1] : a.shape[0];
        var leftDim = (aOrientation === math_1.MatrixOrientation.REGULAR) ? a.shape[0] : a.shape[1];
        var rightDim = (bOrientation === math_1.MatrixOrientation.REGULAR) ? b.shape[1] : b.shape[0];
        var normalGetter = function (matrix, i, j) {
            return matrix.get(i, j);
        };
        var transposedGetter = function (matrix, i, j) {
            return matrix.get(j, i);
        };
        var aGetter = (aOrientation === math_1.MatrixOrientation.REGULAR) ?
            normalGetter :
            transposedGetter;
        var bGetter = (bOrientation === math_1.MatrixOrientation.REGULAR) ?
            normalGetter :
            transposedGetter;
        var values = new Float32Array(leftDim * rightDim);
        var index = 0;
        for (var i = 0; i < leftDim; ++i) {
            for (var j = 0; j < rightDim; ++j) {
                var sum = 0;
                for (var k = 0; k < sharedDim; ++k) {
                    sum += aGetter(a, i, k) * bGetter(b, k, j);
                }
                values[index++] = sum;
            }
        }
        return ndarray_1.Array2D.new([leftDim, rightDim], values);
    };
    NDArrayMathCPU.prototype.elementWiseMulInternal = function (a, b) {
        var newValues = new Float32Array(a.size);
        var aValues = a.getValues();
        var bValues = b.getValues();
        for (var i = 0; i < aValues.length; ++i) {
            newValues[i] = aValues[i] * bValues[i];
        }
        return ndarray_1.NDArray.make(a.shape, { values: newValues });
    };
    NDArrayMathCPU.prototype.elementWiseMulBroadcastInternal = function (a, b) {
        var maxRow = Math.max(a.shape[0], b.shape[0]);
        var maxCol = Math.max(a.shape[1], b.shape[1]);
        var values = new Float32Array(maxRow * maxCol);
        var index = 0;
        for (var row = 0; row < maxRow; row++) {
            for (var col = 0; col < maxCol; col++) {
                values[index++] = a.get(row % a.shape[0], col % a.shape[1]) *
                    b.get(row % b.shape[0], col % b.shape[1]);
            }
        }
        return ndarray_1.Array2D.new([maxRow, maxCol], values);
    };
    NDArrayMathCPU.prototype.divideInternal = function (a, b) {
        var newValues = new Float32Array(a.size);
        var aValues = a.getValues();
        var bValues = b.getValues();
        for (var i = 0; i < aValues.length; ++i) {
            newValues[i] = aValues[i] / bValues[i];
        }
        return ndarray_1.NDArray.make(a.shape, { values: newValues });
    };
    NDArrayMathCPU.prototype.scalarDividedByArrayInternal = function (c, a) {
        var newValues = new Float32Array(a.size);
        var aValues = a.getValues();
        var cValue = c.get();
        for (var i = 0; i < aValues.length; ++i) {
            newValues[i] = cValue / aValues[i];
        }
        return ndarray_1.NDArray.make(a.shape, { values: newValues });
    };
    NDArrayMathCPU.prototype.arrayDividedByScalarInternal = function (a, c) {
        var newValues = new Float32Array(a.size);
        var aValues = a.getValues();
        var cValue = c.get();
        for (var i = 0; i < aValues.length; ++i) {
            newValues[i] = aValues[i] / cValue;
        }
        return ndarray_1.NDArray.make(a.shape, { values: newValues });
    };
    NDArrayMathCPU.prototype.sumInternal = function (ndarray) {
        var sum = 0;
        var values = ndarray.getValues();
        for (var i = 0; i < values.length; ++i) {
            sum += values[i];
        }
        return ndarray_1.Scalar.new(sum);
    };
    NDArrayMathCPU.prototype.argMinInternal = function (ndarray) {
        var min = Number.MAX_VALUE;
        var minIndex = -1;
        var values = ndarray.getValues();
        for (var i = 0; i < values.length; ++i) {
            var value = values[i];
            if (isNaN(value)) {
                return ndarray_1.Scalar.new(NaN);
            }
            if (value < min) {
                min = value;
                minIndex = i;
            }
        }
        return ndarray_1.Scalar.new(minIndex);
    };
    NDArrayMathCPU.prototype.argMaxInternal = function (ndarray) {
        var max = Number.NEGATIVE_INFINITY;
        var maxIndex = -1;
        var values = ndarray.getValues();
        for (var i = 0; i < values.length; ++i) {
            var value = values[i];
            if (isNaN(value)) {
                return ndarray_1.Scalar.new(NaN);
            }
            if (value > max) {
                max = value;
                maxIndex = i;
            }
        }
        return ndarray_1.Scalar.new(maxIndex);
    };
    NDArrayMathCPU.prototype.argMaxEqualsInternal = function (x1, x2) {
        var argMax1 = this.argMaxInternal(x1).get();
        var argMax2 = this.argMaxInternal(x2).get();
        if (isNaN(argMax1) || isNaN(argMax2)) {
            return ndarray_1.Scalar.new(NaN);
        }
        return ndarray_1.Scalar.new(+(argMax1 === argMax2));
    };
    NDArrayMathCPU.prototype.topKInternal = function (ndarray, k) {
        var values = ndarray.getValues();
        var valuesAndIndices = [];
        for (var i = 0; i < values.length; i++) {
            valuesAndIndices.push({ value: values[i], index: i });
        }
        valuesAndIndices.sort(function (a, b) {
            return b.value - a.value;
        });
        var topkValues = new Float32Array(k);
        var topkIndices = new Float32Array(k);
        for (var i = 0; i < k; i++) {
            topkValues[i] = valuesAndIndices[i].value;
            topkIndices[i] = valuesAndIndices[i].index;
        }
        return { values: ndarray_1.Array1D.new(topkValues), indices: ndarray_1.Array1D.new(topkIndices) };
    };
    NDArrayMathCPU.prototype.minInternal = function (ndarray) {
        var values = ndarray.getValues();
        var min = values[0];
        for (var i = 1; i < values.length; ++i) {
            var value = values[i];
            if (isNaN(value)) {
                return ndarray_1.Scalar.new(NaN);
            }
            if (value < min) {
                min = value;
            }
        }
        return ndarray_1.Scalar.new(min);
    };
    NDArrayMathCPU.prototype.maxInternal = function (ndarray) {
        var values = ndarray.getValues();
        var max = values[0];
        for (var i = 1; i < values.length; ++i) {
            var value = values[i];
            if (isNaN(value)) {
                return ndarray_1.Scalar.new(NaN);
            }
            if (value > max) {
                max = value;
            }
        }
        return ndarray_1.Scalar.new(max);
    };
    NDArrayMathCPU.prototype.expInternal = function (ndarray) {
        var values = ndarray.getValues();
        var newValues = new Float32Array(values.length);
        for (var i = 0; i < values.length; ++i) {
            newValues[i] = Math.exp(values[i]);
        }
        return ndarray_1.NDArray.make(ndarray.shape, { values: newValues });
    };
    NDArrayMathCPU.prototype.logInternal = function (ndarray) {
        var values = ndarray.getValues();
        var newValues = new Float32Array(values.length);
        for (var i = 0; i < values.length; ++i) {
            var value = values[i];
            newValues[i] = Math.log(value);
        }
        return ndarray_1.NDArray.make(ndarray.shape, { values: newValues });
    };
    NDArrayMathCPU.prototype.logSumExpInternal = function (ndarray) {
        var xMax = this.max(ndarray);
        var a = this.arrayMinusScalar(ndarray, xMax);
        var b = this.exp(a);
        var c = this.sum(b);
        var d = this.log(c);
        var result = this.add(xMax, d);
        xMax.dispose();
        a.dispose();
        b.dispose();
        c.dispose();
        d.dispose();
        return result;
    };
    NDArrayMathCPU.prototype.reluInternal = function (ndarray) {
        var resultValues = new Float32Array(ndarray.size);
        var values = ndarray.getValues();
        for (var i = 0; i < values.length; ++i) {
            resultValues[i] = Math.max(0, values[i]);
        }
        return ndarray_1.NDArray.make(ndarray.shape, { values: resultValues });
    };
    NDArrayMathCPU.prototype.sigmoidInternal = function (ndarray) {
        var resultValues = new Float32Array(ndarray.size);
        var values = ndarray.getValues();
        for (var i = 0; i < values.length; ++i) {
            resultValues[i] = 1 / (1 + Math.exp(-values[i]));
        }
        return ndarray_1.NDArray.make(ndarray.shape, { values: resultValues });
    };
    NDArrayMathCPU.prototype.tanhInternal = function (ndarray) {
        var resultValues = new Float32Array(ndarray.size);
        var values = ndarray.getValues();
        for (var i = 0; i < values.length; ++i) {
            resultValues[i] = util.tanh(values[i]);
        }
        return ndarray_1.NDArray.make(ndarray.shape, { values: resultValues });
    };
    NDArrayMathCPU.prototype.sinInternal = function (ndarray) {
        var resultValues = new Float32Array(ndarray.size);
        var values = ndarray.getValues();
        for (var i = 0; i < values.length; ++i) {
            resultValues[i] = Math.sin(values[i]);
        }
        return ndarray_1.NDArray.make(ndarray.shape, { values: resultValues });
    };
    NDArrayMathCPU.prototype.stepInternal = function (ndarray) {
        var resultValues = new Float32Array(ndarray.size);
        var values = ndarray.getValues();
        for (var i = 0; i < values.length; ++i) {
            var value = values[i];
            resultValues[i] = value > 0 ? 1 : (value < 0 ? 0 : value);
        }
        return ndarray_1.NDArray.make(ndarray.shape, { values: resultValues });
    };
    NDArrayMathCPU.prototype.conv2dInternal = function (x, weights, biases, stride, pad) {
        var _a = x.shape, xRows = _a[0], xCols = _a[1], inputDepth = _a[2];
        var fieldSize = weights.shape[0];
        var outputDepth = weights.shape[3];
        var outputShape = conv_util.computeOutputShape3D([xRows, xCols, inputDepth], fieldSize, outputDepth, stride, pad);
        var y = ndarray_1.Array3D.zeros(outputShape);
        for (var d2 = 0; d2 < outputDepth; ++d2) {
            for (var yR = 0; yR < y.shape[0]; ++yR) {
                var xRCorner = yR * stride - pad;
                var xRMin = Math.max(0, xRCorner);
                var xRMax = Math.min(xRows, fieldSize + xRCorner);
                for (var yC = 0; yC < y.shape[1]; ++yC) {
                    var xCCorner = yC * stride - pad;
                    var xCMin = Math.max(0, xCCorner);
                    var xCMax = Math.min(xCols, fieldSize + xCCorner);
                    var dotProd = 0;
                    for (var xR = xRMin; xR < xRMax; ++xR) {
                        var wR = xR - xRCorner;
                        for (var xC = xCMin; xC < xCMax; ++xC) {
                            var wC = xC - xCCorner;
                            for (var d1 = 0; d1 < inputDepth; ++d1) {
                                var pixel = x.get(xR, xC, d1);
                                var weight = weights.get(wR, wC, d1, d2);
                                dotProd += pixel * weight;
                            }
                        }
                    }
                    var bias = (biases != null) ? biases.get(d2) : 0;
                    y.set(dotProd + bias, yR, yC, d2);
                }
            }
        }
        return y;
    };
    NDArrayMathCPU.prototype.conv2dBackPropInternal = function (x, dy, weights, stride, pad) {
        var fSize = weights.shape[0];
        var dw = this.conv2dDerWeights(x, dy, fSize, stride, pad);
        var db = this.conv2dDerBias(dy);
        var dx = this.conv2dTransposeInternal(dy, weights, null, stride, pad);
        return { dx: dx, db: db, dw: dw };
    };
    NDArrayMathCPU.prototype.conv2dTransposeInternal = function (x, weights, biases, origStride, origPad) {
        var fSize = weights.shape[0];
        var pad = fSize - 1 - origPad;
        var origInputDepth = weights.shape[2];
        var origOutputDepth = weights.shape[3];
        var _a = x.shape, xRows = _a[0], xCols = _a[1], xDepth = _a[2];
        var xRowsDilated = (xRows - 1) * origStride + 1;
        var xColsDilated = (xCols - 1) * origStride + 1;
        var outputShape = conv_util.computeOutputShape3D([xRowsDilated, xColsDilated, origOutputDepth], fSize, origInputDepth, 1, pad);
        var y = ndarray_1.Array3D.zeros(outputShape);
        for (var d2 = 0; d2 < origInputDepth; ++d2) {
            for (var yR = 0; yR < y.shape[0]; ++yR) {
                var xRCorner = yR - pad;
                var xRMin = Math.max(0, Math.ceil(xRCorner / origStride));
                var xRMax = Math.min(xRows, (fSize + xRCorner) / origStride);
                for (var yC = 0; yC < y.shape[1]; ++yC) {
                    var xCCorner = yC - pad;
                    var xCMin = Math.max(0, Math.ceil(xCCorner / origStride));
                    var xCMax = Math.min(xCols, (fSize + xCCorner) / origStride);
                    var dotProd = 0;
                    for (var xR = xRMin; xR < xRMax; ++xR) {
                        var wR = xR * origStride - xRCorner;
                        for (var xC = xCMin; xC < xCMax; ++xC) {
                            var wC = xC * origStride - xCCorner;
                            for (var d1 = 0; d1 < origOutputDepth; ++d1) {
                                var pixel = x.get(xR, xC, d1);
                                var weight = weights.get(fSize - 1 - wR, fSize - 1 - wC, d2, d1);
                                dotProd += pixel * weight;
                            }
                        }
                    }
                    var bias = biases != null ? biases.get(d2) : 0;
                    y.set(dotProd + bias, yR, yC, d2);
                }
            }
        }
        return y;
    };
    NDArrayMathCPU.prototype.conv2dTransposeShaderLike = function (x, origWeights, origStride, origPad) {
        var fSize = origWeights.shape[0];
        var pad = fSize - 1 - origPad;
        var origInputDepth = origWeights.shape[2];
        var origOutputDepth = origWeights.shape[3];
        var _a = x.shape, xRows = _a[0], xCols = _a[1], xDepth = _a[2];
        var xRowsDilated = (xRows - 1) * origStride + 1;
        var xColsDilated = (xCols - 1) * origStride + 1;
        var outputShape = conv_util.computeOutputShape3D([xRowsDilated, xColsDilated, origOutputDepth], fSize, origInputDepth, 1, pad);
        var y = ndarray_1.Array3D.zeros(outputShape);
        for (var d2 = 0; d2 < origInputDepth; ++d2) {
            for (var yR = 0; yR < y.shape[0]; ++yR) {
                for (var yC = 0; yC < y.shape[1]; ++yC) {
                    var xRCorner = yR - pad;
                    var xCCorner = yC - pad;
                    var dotProd = 0;
                    for (var wR = 0; wR < fSize; ++wR) {
                        var xR = (xRCorner + wR) / origStride;
                        if (xR < 0 || xR >= xRows || Math.floor(xR) !== xR) {
                            continue;
                        }
                        for (var wC = 0; wC < fSize; ++wC) {
                            var xC = (xCCorner + wC) / origStride;
                            if (xC < 0 || xC >= xCols || Math.floor(xC) !== xC) {
                                continue;
                            }
                            for (var d1 = 0; d1 < origOutputDepth; ++d1) {
                                var pixel = x.get(xR, xC, d1);
                                var weight = origWeights.get(fSize - 1 - wR, fSize - 1 - wC, d2, d1);
                                dotProd += pixel * weight;
                            }
                        }
                    }
                    y.set(dotProd, yR, yC, d2);
                }
            }
        }
        return y;
    };
    NDArrayMathCPU.prototype.conv2dDerWeights = function (x, dY, fSize, stride, zeroPad) {
        var inputDepth = x.shape[2];
        var outputDepth = dY.shape[2];
        var weightsShape = conv_util.computeWeightsShape4D(inputDepth, outputDepth, fSize);
        var dW = ndarray_1.Array4D.zeros(weightsShape);
        var yNumRows = dY.shape[0];
        var yNumCols = dY.shape[1];
        var xNumRows = x.shape[0];
        var xNumCols = x.shape[1];
        for (var wR = 0; wR < fSize; ++wR) {
            var yRMin = Math.max(0, Math.ceil((zeroPad - wR) / stride));
            var yRMax = Math.min(yNumRows, (xNumRows + zeroPad - wR) / stride);
            for (var wC = 0; wC < fSize; ++wC) {
                var yCMin = Math.max(0, Math.ceil((zeroPad - wC) / stride));
                var yCMax = Math.min(yNumCols, (xNumCols + zeroPad - wC) / stride);
                for (var d1 = 0; d1 < inputDepth; ++d1) {
                    for (var d2 = 0; d2 < outputDepth; ++d2) {
                        var dotProd = 0;
                        for (var yR = yRMin; yR < yRMax; ++yR) {
                            var xR = wR + yR * stride - zeroPad;
                            for (var yC = yCMin; yC < yCMax; ++yC) {
                                var xC = wC + yC * stride - zeroPad;
                                dotProd += x.get(xR, xC, d1) * dY.get(yR, yC, d2);
                            }
                        }
                        dW.set(dotProd, wR, wC, d1, d2);
                    }
                }
            }
        }
        return dW;
    };
    NDArrayMathCPU.prototype.conv2dDerBias = function (dY) {
        var outputDepth = dY.shape[2];
        var numRows = dY.shape[0];
        var numCols = dY.shape[1];
        var values = new Float32Array(outputDepth);
        for (var d2 = 0; d2 < outputDepth; ++d2) {
            var sum = 0;
            for (var r = 0; r < numRows; ++r) {
                for (var c = 0; c < numCols; ++c) {
                    sum += dY.get(r, c, d2);
                }
            }
            values[d2] = sum;
        }
        return ndarray_1.Array1D.new(values);
    };
    NDArrayMathCPU.prototype.switchDimInternal = function (t, newDim) {
        var newShape = new Array(t.rank);
        for (var i = 0; i < newShape.length; i++) {
            newShape[i] = t.shape[newDim[i]];
        }
        var resultValues = new Float32Array(t.size);
        var values = t.getValues();
        var result = ndarray_1.NDArray.make(newShape, { values: resultValues });
        for (var i = 0; i < t.size; ++i) {
            var loc = t.indexToLoc(i);
            var newLoc = new Array(loc.length);
            for (var i_1 = 0; i_1 < newLoc.length; i_1++) {
                newLoc[i_1] = loc[newDim[i_1]];
            }
            var newIndex = result.locToIndex(newLoc);
            resultValues[newIndex] = values[i];
        }
        return result;
    };
    NDArrayMathCPU.prototype.pool = function (x, fSize, stride, pad, poolType) {
        var _a = x.shape, xRows = _a[0], xCols = _a[1], depth = _a[2];
        var outputShape = conv_util.computeOutputShape3D([xRows, xCols, depth], fSize, depth, stride, pad);
        var y = ndarray_1.Array3D.zeros(outputShape);
        for (var d = 0; d < depth; ++d) {
            for (var yR = 0; yR < y.shape[0]; ++yR) {
                var xRCorner = yR * stride - pad;
                var xRMin = Math.max(0, xRCorner);
                var xRMax = Math.min(xRows, fSize + xRCorner);
                for (var yC = 0; yC < y.shape[1]; ++yC) {
                    var xCCorner = yC * stride - pad;
                    var xCMin = Math.max(0, xCCorner);
                    var xCMax = Math.min(xCols, fSize + xCCorner);
                    var minMaxValue = (poolType === 'max' ? Number.NEGATIVE_INFINITY :
                        Number.POSITIVE_INFINITY);
                    var avgValue = 0;
                    for (var xR = xRMin; xR < xRMax; ++xR) {
                        var wR = xR - xRCorner;
                        for (var xC = xCMin; xC < xCMax; ++xC) {
                            var wC = xC - xCCorner;
                            var pixel = x.get(xR, xC, d);
                            if (isNaN(pixel)) {
                                minMaxValue = NaN;
                                avgValue = NaN;
                                break;
                            }
                            if ((poolType === 'max' && pixel > minMaxValue) ||
                                (poolType === 'min' && pixel < minMaxValue)) {
                                minMaxValue = pixel;
                            }
                            else if (poolType === 'avg') {
                                avgValue += pixel / (fSize * fSize);
                            }
                        }
                        if (isNaN(minMaxValue)) {
                            break;
                        }
                    }
                    y.set(poolType === 'avg' ? avgValue : minMaxValue, yR, yC, d);
                }
            }
        }
        return y;
    };
    NDArrayMathCPU.prototype.maxPoolInternal = function (x, fSize, stride, pad) {
        return this.pool(x, fSize, stride, pad, 'max');
    };
    NDArrayMathCPU.prototype.maxPoolPositions = function (x, fSize, stride, pad) {
        var _a = x.shape, xRows = _a[0], xCols = _a[1], depth = _a[2];
        var outputShape = conv_util.computeOutputShape3D(x.shape, fSize, depth, stride, pad);
        var maxPositions = ndarray_1.Array3D.zeros(outputShape);
        for (var d = 0; d < depth; ++d) {
            for (var yR = 0; yR < outputShape[0]; ++yR) {
                var xRCorner = yR * stride - pad;
                var xRMin = Math.max(0, xRCorner);
                var xRMax = Math.min(xRows, fSize + xRCorner);
                for (var yC = 0; yC < outputShape[1]; ++yC) {
                    var xCCorner = yC * stride - pad;
                    var xCMin = Math.max(0, xCCorner);
                    var xCMax = Math.min(xCols, fSize + xCCorner);
                    var maxValue = Number.NEGATIVE_INFINITY;
                    var maxPosition = -1;
                    for (var xR = xRMin; xR < xRMax; ++xR) {
                        var wR = xR - xRCorner;
                        for (var xC = xCMin; xC < xCMax; ++xC) {
                            var wC = xC - xCCorner;
                            var pixel = x.get(xR, xC, d);
                            if (pixel > maxValue) {
                                maxValue = pixel;
                                maxPosition = wR * fSize + wC;
                            }
                        }
                    }
                    maxPositions.set(maxPosition, yR, yC, d);
                }
            }
        }
        return maxPositions;
    };
    NDArrayMathCPU.prototype.maxPoolBackpropInternal = function (dy, x, fSize, origStride, origPad) {
        var maxPositions = this.maxPoolPositions(x, fSize, origStride, origPad);
        var pad = fSize - 1 - origPad;
        var _a = dy.shape, dyRows = _a[0], dyCols = _a[1], depth = _a[2];
        var dyRowsDilated = (dyRows - 1) * origStride + 1;
        var dxColsDilated = (dyCols - 1) * origStride + 1;
        var outputShape = conv_util.computeOutputShape3D([dyRowsDilated, dxColsDilated, depth], fSize, depth, 1, pad);
        var dx = ndarray_1.Array3D.zeros(outputShape);
        for (var d = 0; d < depth; ++d) {
            for (var dxR = 0; dxR < dx.shape[0]; ++dxR) {
                for (var dxC = 0; dxC < dx.shape[1]; ++dxC) {
                    var dyRCorner = dxR - pad;
                    var dyCCorner = dxC - pad;
                    var dotProd = 0;
                    for (var wR = 0; wR < fSize; ++wR) {
                        var dyR = (dyRCorner + wR) / origStride;
                        if (dyR < 0 || dyR >= dyRows || Math.floor(dyR) !== dyR) {
                            continue;
                        }
                        for (var wC = 0; wC < fSize; ++wC) {
                            var dyC = (dyCCorner + wC) / origStride;
                            if (dyC < 0 || dyC >= dyCols || Math.floor(dyC) !== dyC) {
                                continue;
                            }
                            var maxPos = fSize * fSize - 1 - maxPositions.get(dyR, dyC, d);
                            var curPos = wR * fSize + wC;
                            var mask = maxPos === curPos ? 1 : 0;
                            if (mask === 0) {
                                continue;
                            }
                            var pixel = dy.get(dyR, dyC, d);
                            dotProd += pixel * mask;
                        }
                    }
                    dx.set(dotProd, dxR, dxC, d);
                }
            }
        }
        return dx;
    };
    NDArrayMathCPU.prototype.minPoolInternal = function (x, fSize, stride, pad) {
        return this.pool(x, fSize, stride, pad, 'min');
    };
    NDArrayMathCPU.prototype.avgPoolInternal = function (x, fSize, stride, pad) {
        return this.pool(x, fSize, stride, pad, 'avg');
    };
    NDArrayMathCPU.prototype.resizeBilinear3DInternal = function (x, newShape2D, alignCorners) {
        var output = ndarray_1.Array3D.zeros([newShape2D[0], newShape2D[1], x.shape[2]]);
        var effectiveInputSize = alignCorners ? [x.shape[0] - 1, x.shape[1] - 1, x.shape[2]] : x.shape;
        var effectiveOutputSize = alignCorners ?
            [output.shape[0] - 1, output.shape[1] - 1, output.shape[2]] :
            output.shape;
        for (var r = 0; r < output.shape[0]; r++) {
            for (var c = 0; c < output.shape[1]; c++) {
                for (var d = 0; d < output.shape[2]; d++) {
                    var sourceFracRow = (effectiveInputSize[0]) * r / (effectiveOutputSize[0]);
                    var sourceFracCol = (effectiveInputSize[1]) * c / (effectiveOutputSize[1]);
                    var sourceRowFloor = Math.floor(sourceFracRow);
                    var sourceRowCeil = Math.min(x.shape[0] - 1, Math.ceil(sourceFracRow));
                    var sourceColFloor = Math.floor(sourceFracCol);
                    var sourceColCeil = Math.min(x.shape[1] - 1, Math.ceil(sourceFracCol));
                    var topLeft = x.get(sourceRowFloor, sourceColFloor, d);
                    var bottomLeft = x.get(sourceRowCeil, sourceColFloor, d);
                    var topRight = x.get(sourceRowFloor, sourceColCeil, d);
                    var bottomRight = x.get(sourceRowCeil, sourceColCeil, d);
                    var rowFrac = sourceFracRow - sourceRowFloor;
                    var colFrac = sourceFracCol - sourceColFloor;
                    var top_1 = topLeft + (topRight - topLeft) * colFrac;
                    var bottom = bottomLeft + (bottomRight - bottomLeft) * colFrac;
                    var newValue = top_1 + (bottom - top_1) * rowFrac;
                    output.set(newValue, r, c, d);
                }
            }
        }
        return output;
    };
    NDArrayMathCPU.prototype.batchNormalization3DInternal = function (x, mean, variance, varianceEpsilon, scale, offset) {
        if (varianceEpsilon === void 0) { varianceEpsilon = .001; }
        var xValues = x.getValues();
        var meanValues = mean.getValues();
        var varianceValues = variance.getValues();
        var scaleValues = scale ? scale.getValues() : new Float32Array([1]);
        var offsetValues = offset ? offset.getValues() : new Float32Array([0]);
        var outValues = new Float32Array(xValues.length);
        for (var i = 0; i < xValues.length; i++) {
            outValues[i] = offsetValues[i % offsetValues.length] +
                (xValues[i] - meanValues[i % meanValues.length]) *
                    scaleValues[i % scaleValues.length] /
                    Math.sqrt(varianceValues[i % varianceValues.length] + varianceEpsilon);
        }
        return ndarray_1.NDArray.make(x.shape, { values: outValues });
    };
    return NDArrayMathCPU;
}(math_1.NDArrayMath));
exports.NDArrayMathCPU = NDArrayMathCPU;

},{"../math/conv_util":18,"../util":88,"./concat3d_util":17,"./copy2d_util":19,"./math":21,"./ndarray":24}],23:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var util = require("../util");
var concat3d_util = require("./concat3d_util");
var conv_util = require("./conv_util");
var math_1 = require("./math");
var ndarray = require("./ndarray");
var ndarray_1 = require("./ndarray");
var addscaledmat_gpu = require("./webgl/addscaledmat_gpu");
var addsubmuldiv_gpu = require("./webgl/addsubmuldiv_gpu");
var addsubmuldiv_gpu_1 = require("./webgl/addsubmuldiv_gpu");
var argmaxequals_gpu = require("./webgl/argmaxequals_gpu");
var argminmax_gpu = require("./webgl/argminmax_gpu");
var avg_pool_gpu = require("./webgl/avg_pool_gpu");
var batchnorm_gpu = require("./webgl/batchnorm_gpu");
var concat3d_gpu = require("./webgl/concat3d_gpu");
var conv_backprop_gpu = require("./webgl/conv_backprop_gpu");
var conv_gpu = require("./webgl/conv_gpu");
var copy_gpu = require("./webgl/copy_gpu");
var exp_gpu = require("./webgl/exp_gpu");
var gpgpu_context_1 = require("./webgl/gpgpu_context");
var gpgpu_util = require("./webgl/gpgpu_util");
var log_gpu = require("./webgl/log_gpu");
var logsumexp_gpu = require("./webgl/logsumexp_gpu");
var max_pool_backprop_gpu = require("./webgl/max_pool_backprop_gpu");
var max_pool_gpu = require("./webgl/max_pool_gpu");
var min_pool_gpu = require("./webgl/min_pool_gpu");
var minmax_gpu = require("./webgl/minmax_gpu");
var mulmat_gpu = require("./webgl/mulmat_gpu");
var neg_gpu = require("./webgl/neg_gpu");
var pool_gpu = require("./webgl/pool_gpu");
var reducesum_gpu = require("./webgl/reducesum_gpu");
var relu_gpu = require("./webgl/relu_gpu");
var reshape_gpu = require("./webgl/reshape_gpu");
var resize_bilinear_gpu = require("./webgl/resize_bilinear_gpu");
var shader_compiler = require("./webgl/shader_compiler");
var sigmoid_gpu = require("./webgl/sigmoid_gpu");
var step_gpu = require("./webgl/step_gpu");
var texture_manager_1 = require("./webgl/texture_manager");
var trig_gpu = require("./webgl/trig_gpu");
var webgl_util = require("./webgl/webgl_util");
var ARGMAX_PROG = 'argmax';
var ARGMAX_EQUALS_PROG = 'argmaxequals';
var ARGMIN_PROG = 'argmin';
var BATCHNORM_PROG = 'batchnorm';
var COPY_PROG = 'copy';
var CONCAT_PROG = 'concat';
var ADD_SCALED_MAT_PROG = 'addscaledmat';
var MATMUL_PROG = 'matmul';
var RELU_PROG = 'relu';
var TANH_PROG = 'tanh';
var SIN_PROG = 'sin';
var SIGMOID_PROG = 'sigmoid';
var MAX_PROG = 'max';
var MIN_PROG = 'min';
var NEG_PROG = 'neg';
var EXP_PROG = 'exp';
var LOG_PROG = 'log';
var SUM_PROG = 'sum';
var STEP_PROG = 'step';
var LOGSUMEXP_PROG = 'logsumexp';
var RESHAPE_PROG = 'reshape';
var ADD_SUM_MUL_DIV_PROG = 'addsummuldiv';
var CONV2D_PROG = 'conv';
var CONV2D_TRANSPOSE_PROG = 'conv_transpose';
var CONV2D_DERW_PROG = 'conv_derw';
var CONV2D_DERB_PROG = 'conv_derb';
var MAX_POOL_PROG = 'maxpool';
var MAX_POOL_POSITIONS_PROG = 'maxpool_posn';
var MAX_POOL_BACKPROP_PROG = 'maxpool_backprop';
var MIN_POOL_PROG = 'minpool';
var AVG_POOL_PROG = 'avgpool';
var RESIZE_BILINEAR_PROG = 'resizebilin';
function makeCopyProgramName(sourceShapeRowCol, sourceSizeRowCol, destSizeRowCol) {
    var shapeName = sourceShapeRowCol[0] + "_" + sourceShapeRowCol[1];
    var srcSizeName = sourceSizeRowCol[0] + "_" + sourceSizeRowCol[1];
    var dstSizeName = destSizeRowCol[0] + "_" + destSizeRowCol[1];
    return COPY_PROG + "_" + shapeName + "_" + srcSizeName + "_" + dstSizeName;
}
var NDArrayMathGPU = (function (_super) {
    __extends(NDArrayMathGPU, _super);
    function NDArrayMathGPU(gpgpu, safeMode) {
        if (safeMode === void 0) { safeMode = true; }
        var _this = _super.call(this, safeMode) || this;
        _this.programCache = {};
        if (gpgpu == null) {
            var gl = gpgpu_util.createWebGLContext();
            _this.gpgpu = new gpgpu_context_1.GPGPUContext(gl);
            _this.gpgpuCreatedLocally = true;
        }
        else {
            _this.gpgpu = gpgpu;
            _this.gpgpuCreatedLocally = false;
        }
        _this.textureManager = new texture_manager_1.TextureManager(_this.gpgpu);
        ndarray.initializeGPU(_this.gpgpu, _this.textureManager);
        return _this;
    }
    NDArrayMathGPU.prototype.getGPGPUContext = function () {
        return this.gpgpu;
    };
    NDArrayMathGPU.prototype.cloneInternal = function (ndarray) {
        var textureShapeRC = ndarray.getTextureShapeRC();
        var program = this.getAndSaveProgram(makeCopyProgramName(textureShapeRC, textureShapeRC, textureShapeRC), function () { return copy_gpu.getFragmentShaderSource(textureShapeRC, textureShapeRC, textureShapeRC); });
        var resultTexture = this.textureManager.acquireTexture(textureShapeRC);
        copy_gpu.copy(this.gpgpu, program, ndarray.getTexture(), textureShapeRC, [0, 0], textureShapeRC, resultTexture, textureShapeRC, [0, 0], textureShapeRC);
        return ndarray_1.NDArray.make(ndarray.shape, { texture: resultTexture, textureShapeRC: textureShapeRC });
    };
    NDArrayMathGPU.prototype.reshapeInternal = function (ndarray, newShape) {
        var newTexShape;
        switch (newShape.length) {
            case 0:
                newTexShape = [1, 1];
                break;
            case 1:
                newTexShape = [newShape[0], 1];
                break;
            case 2:
                newTexShape = [newShape[0], newShape[1]];
                break;
            case 3:
                newTexShape = [newShape[0], newShape[1] * newShape[2]];
                break;
            default:
                throw Error("Reshapes into " + newShape.length + "-dim ndarray is not yet " +
                    "supported on GPU");
        }
        var actualTexShape = ndarray.getTextureShapeRC(newTexShape);
        var clonedArray;
        if (!util.arraysEqual(actualTexShape, newTexShape)) {
            clonedArray = this.reshapeTexture(ndarray, newTexShape);
        }
        else {
            clonedArray = this.cloneInternal(ndarray);
        }
        return clonedArray.reshape(newShape);
    };
    NDArrayMathGPU.prototype.slice2DInternal = function (input, beginRowCol, sizeRowCol) {
        var result = ndarray_1.NDArray.make(sizeRowCol, {
            texture: this.textureManager.acquireTexture(sizeRowCol),
            textureShapeRC: sizeRowCol
        });
        this.copy2DInternal(input, beginRowCol, sizeRowCol, result, [0, 0], sizeRowCol);
        return result;
    };
    NDArrayMathGPU.prototype.copy2DInternal = function (source, sourceBeginRowCol, sourceSizeRowCol, dest, destBeginRowCol, destSizeRowCol) {
        var sourceShapeRC = source.getTextureShapeRC();
        var destShapeRC = dest.getTextureShapeRC();
        var program = this.getAndSaveProgram(makeCopyProgramName(sourceShapeRC, sourceSizeRowCol, destSizeRowCol), function () { return copy_gpu.getFragmentShaderSource(sourceShapeRC, sourceSizeRowCol, destSizeRowCol); });
        copy_gpu.copy(this.gpgpu, program, source.getTexture(), sourceShapeRC, sourceBeginRowCol, sourceSizeRowCol, dest.getTexture(), destShapeRC, destBeginRowCol, destSizeRowCol);
    };
    NDArrayMathGPU.prototype.concat3DInternal = function (x1, x2, axis) {
        var x1TexShapeRC = conv_util.computeTexShapeFrom3D(x1.shape);
        var x2TexShapeRC = conv_util.computeTexShapeFrom3D(x2.shape);
        var actualX1TexShape = x1.getTextureShapeRC(x1TexShapeRC);
        var cleanupX1 = false;
        if (!util.arraysEqual(actualX1TexShape, x1TexShapeRC)) {
            x1 = this.reshapeTexture(x1, x1TexShapeRC);
            cleanupX1 = true;
        }
        var actualX2TexShape = x2.getTextureShapeRC(x2TexShapeRC);
        var cleanupX2 = false;
        if (!util.arraysEqual(actualX2TexShape, x2TexShapeRC)) {
            x2 = this.reshapeTexture(x2, x2TexShapeRC);
            cleanupX2 = true;
        }
        var resultShapeRCD = concat3d_util.computeConcat3DOutputShape(x1.shape, x2.shape, axis);
        var program = this.getAndSaveProgram(CONCAT_PROG + "_" + x1.shape + "_" + x2.shape + "_" + axis, function () { return concat3d_gpu.getFragmentShaderSource(x1.shape, x2.shape, resultShapeRCD, axis); });
        var resultTexShape = conv_util.computeTexShapeFrom3D(resultShapeRCD);
        var resultTex = this.textureManager.acquireTexture(resultTexShape);
        concat3d_gpu.concat3D(this.gpgpu, program, x1.getTexture(), x2.getTexture(), resultTex, resultTexShape);
        if (cleanupX1) {
            x1.dispose();
        }
        if (cleanupX2) {
            x2.dispose();
        }
        return ndarray_1.NDArray.make(resultShapeRCD, { texture: resultTex, textureShapeRC: resultTexShape });
    };
    NDArrayMathGPU.prototype.scalarPlusArrayInternal = function (c, a) {
        return this.addSubMulDiv(c, a, a.shape, addsubmuldiv_gpu_1.OperandType.SCALAR, '+', addsubmuldiv_gpu_1.OperandType.MATRIX);
    };
    NDArrayMathGPU.prototype.arrayMinusScalarInternal = function (a, c) {
        return this.addSubMulDiv(a, c, a.shape, addsubmuldiv_gpu_1.OperandType.MATRIX, '-', addsubmuldiv_gpu_1.OperandType.SCALAR);
    };
    NDArrayMathGPU.prototype.scalarMinusArrayInternal = function (c, a) {
        return this.addSubMulDiv(c, a, a.shape, addsubmuldiv_gpu_1.OperandType.SCALAR, '-', addsubmuldiv_gpu_1.OperandType.MATRIX);
    };
    NDArrayMathGPU.prototype.scaledArrayAddInternal = function (c1, a, c2, b) {
        var cleanupB = false;
        if (!this.doGPUShapesMatch(a, b)) {
            b = this.reshapeTexture(b, a.getTextureShapeRC());
            cleanupB = true;
        }
        var program = this.getAndSaveProgram(ADD_SCALED_MAT_PROG, function () { return addscaledmat_gpu.getFragmentShaderSource(); });
        var textureShapeRC = a.getTextureShapeRC();
        var resultTexture = this.textureManager.acquireTexture(textureShapeRC);
        addscaledmat_gpu.addScaledMatrices(this.gpgpu, program, a.getTexture(), b.getTexture(), textureShapeRC[0], textureShapeRC[1], c1.getTexture(), c2.getTexture(), resultTexture);
        if (cleanupB) {
            b.dispose();
        }
        return ndarray_1.NDArray.make(a.shape, { texture: resultTexture, textureShapeRC: textureShapeRC });
    };
    NDArrayMathGPU.prototype.scalarTimesArrayInternal = function (c, a) {
        return this.addSubMulDiv(c, a, a.shape, addsubmuldiv_gpu_1.OperandType.SCALAR, '*', addsubmuldiv_gpu_1.OperandType.MATRIX);
    };
    NDArrayMathGPU.prototype.negInternal = function (a) {
        var program = this.getAndSaveProgram(NEG_PROG, function () { return neg_gpu.getFragmentShaderSource(); });
        var textureShapeRC = a.getTextureShapeRC();
        var resultTexture = this.textureManager.acquireTexture(textureShapeRC);
        neg_gpu.neg(this.gpgpu, program, a.getTexture(), textureShapeRC[0], textureShapeRC[1], resultTexture);
        return ndarray_1.NDArray.make(a.shape, { texture: resultTexture, textureShapeRC: textureShapeRC });
    };
    NDArrayMathGPU.prototype.reshapeTexture = function (a, newTextureShape) {
        var aTexShape = a.getTextureShapeRC();
        var program = this.getAndSaveProgram(RESHAPE_PROG, function () { return reshape_gpu.getFragmentShaderSource(); });
        var resultTexture = this.textureManager.acquireTexture(newTextureShape);
        reshape_gpu.reshape(this.gpgpu, program, a.getTexture(), aTexShape[0], aTexShape[1], resultTexture, newTextureShape[0], newTextureShape[1]);
        return ndarray_1.NDArray.make(a.shape, { texture: resultTexture, textureShapeRC: newTextureShape });
    };
    NDArrayMathGPU.prototype.matMulInternal = function (a, b, aOrientation, bOrientation) {
        var sharedDim = (aOrientation === math_1.MatrixOrientation.REGULAR) ? a.shape[1] : a.shape[0];
        var outerShapeA = (aOrientation === math_1.MatrixOrientation.REGULAR) ? a.shape[0] : a.shape[1];
        var outerShapeB = (bOrientation === math_1.MatrixOrientation.REGULAR) ? b.shape[1] : b.shape[0];
        var outShape = [outerShapeA, outerShapeB];
        var outTexShape = webgl_util.getTextureShapeFromLogicalShape(this.gpgpu.gl, outShape);
        var outTexture = this.textureManager.acquireTexture(outTexShape);
        var out = new ndarray_1.Array2D(outShape, { texture: outTexture, textureShapeRC: outTexShape });
        var key = shader_compiler.makeShaderKey([a, b], out);
        var program = this.getAndSaveProgram(MATMUL_PROG + "_" + key + "_" + aOrientation + "_" + bOrientation, function () { return mulmat_gpu.getFragmentShader(a, b, out, aOrientation, bOrientation); });
        mulmat_gpu.multiplyMatrix(this.gpgpu, program, a.getTexture(), b.getTexture(), outTexture, outTexShape);
        return out;
    };
    NDArrayMathGPU.prototype.elementWiseMulInternal = function (a, b) {
        return this.addSubMulDiv(a, b, a.shape, addsubmuldiv_gpu_1.OperandType.MATRIX, '*', addsubmuldiv_gpu_1.OperandType.MATRIX);
    };
    NDArrayMathGPU.prototype.elementWiseMulBroadcastInternal = function (a, b) {
        throw new Error('Not yet implemented!');
    };
    NDArrayMathGPU.prototype.batchNormalization3DInternal = function (x, mean, variance, varianceEpsilon, scale, offset) {
        var xTexShape = x.getTextureShapeRC();
        var cleanupMean = false;
        var preferredMeanTexShape = mean.rank === 1 ? [1, mean.size] : xTexShape;
        var meanTexShape = mean.getTextureShapeRC(preferredMeanTexShape);
        if (!util.arraysEqual(meanTexShape, preferredMeanTexShape)) {
            mean = this.reshapeTexture(mean, preferredMeanTexShape);
            meanTexShape = preferredMeanTexShape;
            cleanupMean = true;
        }
        var cleanupVariance = false;
        var preferredVarianceTexShape = variance.rank === 1 ? [1, variance.size] : xTexShape;
        var varianceTexShape = variance.getTextureShapeRC(preferredMeanTexShape);
        if (!util.arraysEqual(varianceTexShape, preferredVarianceTexShape)) {
            variance = this.reshapeTexture(variance, preferredVarianceTexShape);
            varianceTexShape = preferredVarianceTexShape;
            cleanupVariance = true;
        }
        var scaleTexShape = null;
        var cleanupScale = false;
        if (scale != null) {
            var preferredScaleTexShape = scale.rank === 1 ? [1, scale.size] : xTexShape;
            scaleTexShape = scale.getTextureShapeRC(preferredScaleTexShape);
            if (!util.arraysEqual(scaleTexShape, preferredScaleTexShape)) {
                scale = this.reshapeTexture(scale, preferredScaleTexShape);
                scaleTexShape = preferredScaleTexShape;
                cleanupScale = true;
            }
        }
        var offsetTexShape = null;
        var cleanupOffset = false;
        if (offset != null) {
            var preferredOffsetTexShape = offset.rank === 1 ? [1, offset.size] : xTexShape;
            offsetTexShape = offset.getTextureShapeRC(preferredOffsetTexShape);
            if (!util.arraysEqual(offsetTexShape, preferredOffsetTexShape)) {
                offset = this.reshapeTexture(offset, preferredOffsetTexShape);
                offsetTexShape = preferredOffsetTexShape;
                cleanupOffset = true;
            }
        }
        var resultTexShape = x.getTextureShapeRC();
        var program = this.getAndSaveProgram(BATCHNORM_PROG + "_" + xTexShape + "_" + meanTexShape + "_" + varianceTexShape + "_" +
            (scaleTexShape + "_" + offsetTexShape + "_" + varianceEpsilon), function () { return batchnorm_gpu.getFragmentShaderSource(xTexShape, meanTexShape, varianceTexShape, offsetTexShape, scaleTexShape, varianceEpsilon); });
        var resultTexture = this.textureManager.acquireTexture(resultTexShape);
        batchnorm_gpu.batchNormalization(this.gpgpu, program, x.getTexture(), xTexShape, mean.getTexture(), meanTexShape, variance.getTexture(), varianceTexShape, offset != null ? offset.getTexture() : null, offset != null ? offsetTexShape : null, scale != null ? scale.getTexture() : null, scale != null ? scaleTexShape : null, resultTexture, resultTexShape);
        if (cleanupMean) {
            mean.dispose();
        }
        if (cleanupVariance) {
            variance.dispose();
        }
        if (cleanupScale) {
            scale.dispose();
        }
        if (cleanupOffset) {
            offset.dispose();
        }
        return ndarray_1.NDArray.make(x.shape, { texture: resultTexture, textureShapeRC: resultTexShape });
    };
    NDArrayMathGPU.prototype.switchDimInternal = function (a, newDim) {
        throw new Error('Not yet implemented!');
    };
    NDArrayMathGPU.prototype.sumInternal = function (ndarray) {
        var textureShapeRC = ndarray.getTextureShapeRC();
        var numRows = textureShapeRC[0], numColumns = textureShapeRC[1];
        var program = this.getAndSaveProgram(SUM_PROG + "_" + numRows + "_" + numColumns, function () { return reducesum_gpu.getFragmentShaderSource(numRows, numColumns); });
        var resultTexture = this.textureManager.acquireTexture([1, 1]);
        reducesum_gpu.reduceSum(this.gpgpu, program, ndarray.getTexture(), numRows, numColumns, resultTexture);
        return new ndarray_1.Scalar({ texture: resultTexture });
    };
    NDArrayMathGPU.prototype.argMinInternal = function (ndarray) {
        var textureShapeRC = ndarray.getTextureShapeRC();
        var numRows = textureShapeRC[0], numColumns = textureShapeRC[1];
        var program = this.getAndSaveProgram(ARGMIN_PROG + "_" + numRows + "_" + numColumns, function () { return argminmax_gpu.getArgMinFragmentShaderSource(numRows, numColumns); });
        var resultTexture = this.textureManager.acquireTexture([1, 1]);
        argminmax_gpu.argMinMax(this.gpgpu, program, ndarray.getTexture(), numRows, numColumns, resultTexture);
        return new ndarray_1.Scalar({ texture: resultTexture });
    };
    NDArrayMathGPU.prototype.argMaxInternal = function (ndarray) {
        var textureShapeRC = ndarray.getTextureShapeRC();
        var numRows = textureShapeRC[0], numColumns = textureShapeRC[1];
        var program = this.getAndSaveProgram(ARGMAX_PROG + "_" + numRows + "_" + numColumns, function () { return argminmax_gpu.getArgMaxFragmentShaderSource(numRows, numColumns); });
        var resultTexture = this.textureManager.acquireTexture([1, 1]);
        argminmax_gpu.argMinMax(this.gpgpu, program, ndarray.getTexture(), numRows, numColumns, resultTexture);
        return new ndarray_1.Scalar({ texture: resultTexture });
    };
    NDArrayMathGPU.prototype.argMaxEqualsInternal = function (x1, x2) {
        var actualX1TexShape = x1.getTextureShapeRC();
        var actualX2TexShape = x2.getTextureShapeRC();
        var cleanupX2 = false;
        if (!util.arraysEqual(actualX1TexShape, actualX2TexShape)) {
            x2 = this.reshapeTexture(x2, actualX1TexShape);
            cleanupX2 = true;
        }
        var textureShapeRC = x1.getTextureShapeRC();
        var numRows = textureShapeRC[0], numColumns = textureShapeRC[1];
        var program = this.getAndSaveProgram(ARGMAX_EQUALS_PROG + "_" + numRows + "_" + numColumns, function () { return argmaxequals_gpu.getArgMaxEqualsFragmentShaderSource(numRows, numColumns); });
        var resultTexture = this.textureManager.acquireTexture([1, 1]);
        argmaxequals_gpu.argMaxEquals(this.gpgpu, program, x1.getTexture(), x2.getTexture(), numRows, numColumns, resultTexture);
        if (cleanupX2) {
            x2.dispose();
        }
        return new ndarray_1.Scalar({ texture: resultTexture });
    };
    NDArrayMathGPU.prototype.topKInternal = function (ndarray, k) {
        throw new Error('topK GPU not yet implemented!');
    };
    NDArrayMathGPU.prototype.minInternal = function (ndarray) {
        var textureShapeRC = ndarray.getTextureShapeRC();
        var numRows = textureShapeRC[0], numColumns = textureShapeRC[1];
        var program = this.getAndSaveProgram(MIN_PROG + "_" + numRows + "_" + numColumns, function () { return minmax_gpu.getMinFragmentShaderSource(numRows, numColumns); });
        var resultTexture = this.textureManager.acquireTexture([1, 1]);
        minmax_gpu.minMax(this.gpgpu, program, ndarray.getTexture(), numRows, numColumns, resultTexture);
        return new ndarray_1.Scalar({ texture: resultTexture });
    };
    NDArrayMathGPU.prototype.maxInternal = function (ndarray) {
        var textureShapeRC = ndarray.getTextureShapeRC();
        var numRows = textureShapeRC[0], numColumns = textureShapeRC[1];
        var program = this.getAndSaveProgram(MAX_PROG + "_" + numRows + "_" + numColumns, function () { return minmax_gpu.getMaxFragmentShaderSource(numRows, numColumns); });
        var resultTexture = this.textureManager.acquireTexture([1, 1]);
        minmax_gpu.minMax(this.gpgpu, program, ndarray.getTexture(), numRows, numColumns, resultTexture);
        return new ndarray_1.Scalar({ texture: resultTexture });
    };
    NDArrayMathGPU.prototype.divideInternal = function (a, b) {
        return this.addSubMulDiv(a, b, a.shape, addsubmuldiv_gpu_1.OperandType.MATRIX, '/', addsubmuldiv_gpu_1.OperandType.MATRIX);
    };
    NDArrayMathGPU.prototype.scalarDividedByArrayInternal = function (c, a) {
        return this.addSubMulDiv(c, a, a.shape, addsubmuldiv_gpu_1.OperandType.SCALAR, '/', addsubmuldiv_gpu_1.OperandType.MATRIX);
    };
    NDArrayMathGPU.prototype.arrayDividedByScalarInternal = function (a, c) {
        return this.addSubMulDiv(a, c, a.shape, addsubmuldiv_gpu_1.OperandType.MATRIX, '/', addsubmuldiv_gpu_1.OperandType.SCALAR);
    };
    NDArrayMathGPU.prototype.addInternal = function (a, b) {
        return this.addSubMulDiv(a, b, a.shape, addsubmuldiv_gpu_1.OperandType.MATRIX, '+', addsubmuldiv_gpu_1.OperandType.MATRIX);
    };
    NDArrayMathGPU.prototype.subInternal = function (a, b) {
        return this.addSubMulDiv(a, b, a.shape, addsubmuldiv_gpu_1.OperandType.MATRIX, '-', addsubmuldiv_gpu_1.OperandType.MATRIX);
    };
    NDArrayMathGPU.prototype.logSumExpInternal = function (ndarray) {
        var _a = ndarray.getTextureShapeRC(), numRows = _a[0], numColumns = _a[1];
        var program = this.getAndSaveProgram(LOGSUMEXP_PROG + "_" + numRows + "_" + numColumns, function () { return logsumexp_gpu.getFragmentShaderSource(numRows, numColumns); });
        var result = new ndarray_1.Scalar({ texture: this.textureManager.acquireTexture([1, 1]) });
        reducesum_gpu.reduceSum(this.gpgpu, program, ndarray.getTexture(), numRows, numColumns, result.getTexture());
        return result;
    };
    NDArrayMathGPU.prototype.expInternal = function (ndarray) {
        var program = this.getAndSaveProgram(EXP_PROG, function () { return exp_gpu.getFragmentShaderSource(); });
        var textureShapeRC = ndarray.getTextureShapeRC();
        var resultTexture = this.textureManager.acquireTexture(textureShapeRC);
        exp_gpu.exp(this.gpgpu, program, ndarray.getTexture(), textureShapeRC[0], textureShapeRC[1], resultTexture);
        return ndarray_1.NDArray.make(ndarray.shape, { texture: resultTexture, textureShapeRC: textureShapeRC });
    };
    NDArrayMathGPU.prototype.logInternal = function (ndarray) {
        var program = this.getAndSaveProgram(LOG_PROG, function () { return log_gpu.getFragmentShaderSource(); });
        var textureShapeRC = ndarray.getTextureShapeRC();
        var resultTexture = this.textureManager.acquireTexture(textureShapeRC);
        log_gpu.log(this.gpgpu, program, ndarray.getTexture(), textureShapeRC[0], textureShapeRC[1], resultTexture);
        return ndarray_1.NDArray.make(ndarray.shape, { texture: resultTexture, textureShapeRC: textureShapeRC });
    };
    NDArrayMathGPU.prototype.reluInternal = function (ndarray) {
        var program = this.getAndSaveProgram(RELU_PROG, function () { return relu_gpu.getFragmentShaderSource(); });
        var textureShapeRC = ndarray.getTextureShapeRC();
        var resultTexture = this.textureManager.acquireTexture(textureShapeRC);
        relu_gpu.relu(this.gpgpu, program, ndarray.getTexture(), textureShapeRC[0], textureShapeRC[1], resultTexture);
        return ndarray_1.NDArray.make(ndarray.shape, { texture: resultTexture, textureShapeRC: textureShapeRC });
    };
    NDArrayMathGPU.prototype.sigmoidInternal = function (ndarray) {
        var program = this.getAndSaveProgram(SIGMOID_PROG, function () { return sigmoid_gpu.getSigmoidFragmentShaderSource(); });
        var textureShapeRC = ndarray.getTextureShapeRC();
        var resultTexture = this.textureManager.acquireTexture(textureShapeRC);
        sigmoid_gpu.sigmoid(this.gpgpu, program, ndarray.getTexture(), textureShapeRC[0], textureShapeRC[1], resultTexture);
        return ndarray_1.NDArray.make(ndarray.shape, { texture: resultTexture, textureShapeRC: textureShapeRC });
    };
    NDArrayMathGPU.prototype.tanhInternal = function (ndarray) {
        var program = this.getAndSaveProgram(TANH_PROG, function () { return trig_gpu.getTanhFragmentShaderSource(); });
        var textureShapeRC = ndarray.getTextureShapeRC();
        var resultTexture = this.textureManager.acquireTexture(textureShapeRC);
        trig_gpu.tanh(this.gpgpu, program, ndarray.getTexture(), textureShapeRC[0], textureShapeRC[1], resultTexture);
        return ndarray_1.NDArray.make(ndarray.shape, { texture: resultTexture, textureShapeRC: textureShapeRC });
    };
    NDArrayMathGPU.prototype.sinInternal = function (ndarray) {
        var program = this.getAndSaveProgram(SIN_PROG, function () { return trig_gpu.getSinFragmentShaderSource(); });
        var textureShapeRC = ndarray.getTextureShapeRC();
        var resultTexture = this.textureManager.acquireTexture(textureShapeRC);
        trig_gpu.sin(this.gpgpu, program, ndarray.getTexture(), textureShapeRC[0], textureShapeRC[1], resultTexture);
        return ndarray_1.NDArray.make(ndarray.shape, { texture: resultTexture, textureShapeRC: textureShapeRC });
    };
    NDArrayMathGPU.prototype.stepInternal = function (ndarray) {
        var program = this.getAndSaveProgram(STEP_PROG, function () { return step_gpu.getFragmentShaderSource(); });
        var textureShapeRC = ndarray.getTextureShapeRC();
        var resultTexture = this.textureManager.acquireTexture(textureShapeRC);
        step_gpu.step(this.gpgpu, program, ndarray.getTexture(), textureShapeRC[0], textureShapeRC[1], resultTexture);
        return ndarray_1.NDArray.make(ndarray.shape, { texture: resultTexture, textureShapeRC: textureShapeRC });
    };
    NDArrayMathGPU.prototype.conv2dInternal = function (x, weights, biases, stride, zeroPad) {
        var fieldSize = weights.shape[0];
        var inputDepth = weights.shape[2];
        var outputDepth = weights.shape[3];
        var progKey = [
            CONV2D_PROG, x.shape, outputDepth, fieldSize, stride, biases != null
        ].join('_');
        var program = this.getAndSaveProgram(progKey, function () {
            return conv_gpu.getFragmentShaderSource(x.shape, outputDepth, fieldSize, stride, zeroPad, biases != null);
        });
        var xTexShape = conv_util.computeTexShapeFrom3D(x.shape);
        var wTexShape = conv_util.computeWeightsTexShape(inputDepth, outputDepth, fieldSize);
        var biasTexShape = conv_util.computeBiasesTexShape(outputDepth);
        var actualXTexShape = x.getTextureShapeRC(xTexShape);
        var cleanupX = false;
        if (!util.arraysEqual(actualXTexShape, xTexShape)) {
            x = this.reshapeTexture(x, xTexShape);
            cleanupX = true;
        }
        var cleanupW = false;
        var actualWTexShape = weights.getTextureShapeRC(wTexShape);
        if (!util.arraysEqual(actualWTexShape, wTexShape)) {
            weights = this.reshapeTexture(weights, wTexShape);
            cleanupW = true;
        }
        var cleanupB = false;
        if (biases != null) {
            var actualBTexShape = biases.getTextureShapeRC(biasTexShape);
            if (!util.arraysEqual(actualBTexShape, biasTexShape)) {
                biases = this.reshapeTexture(biases, biasTexShape);
                cleanupB = true;
            }
        }
        var resultShape = conv_util.computeOutputShape3D(x.shape, fieldSize, outputDepth, stride, zeroPad);
        var resultTexShape = conv_util.computeTexShapeFrom3D(resultShape);
        var resultTex = this.textureManager.acquireTexture(resultTexShape);
        conv_gpu.convolve(this.gpgpu, program, x.getTexture(), weights.getTexture(), biases != null ? biases.getTexture() : null, resultTex, resultTexShape);
        if (cleanupX) {
            x.dispose();
        }
        if (cleanupW) {
            weights.dispose();
        }
        if (cleanupB && biases != null) {
            biases.dispose();
        }
        return ndarray_1.NDArray.make(resultShape, { texture: resultTex, textureShapeRC: resultTexShape });
    };
    NDArrayMathGPU.prototype.conv2dBackPropInternal = function (x, dy, weights, stride, pad) {
        var fSize = weights.shape[0];
        var inputDepth = weights.shape[2];
        var outputDepth = weights.shape[3];
        var xTexShape = conv_util.computeTexShapeFrom3D(x.shape);
        var wTexShape = conv_util.computeWeightsTexShape(inputDepth, outputDepth, fSize);
        var yTexShape = conv_util.computeTexShapeFrom3D(dy.shape);
        var cleanupX = false;
        var actualXTexShape = x.getTextureShapeRC(xTexShape);
        if (!util.arraysEqual(actualXTexShape, xTexShape)) {
            x = this.reshapeTexture(x, xTexShape);
            cleanupX = true;
        }
        var cleanupW = false;
        var actualWTexShape = weights.getTextureShapeRC(wTexShape);
        if (!util.arraysEqual(actualWTexShape, wTexShape)) {
            weights = this.reshapeTexture(weights, wTexShape);
            cleanupW = true;
        }
        var cleanupY = false;
        var actualYTexShape = dy.getTextureShapeRC(yTexShape);
        if (!util.arraysEqual(actualYTexShape, yTexShape)) {
            dy = this.reshapeTexture(dy, yTexShape);
            cleanupY = true;
        }
        var dw = this.conv2dDerWeights(x, dy, fSize, stride, pad);
        var db = this.conv2dDerBias(dy);
        var dx = this.conv2dTransposeInternal(dy, weights, null, stride, pad);
        if (cleanupX) {
            x.dispose();
        }
        if (cleanupW) {
            weights.dispose();
        }
        if (cleanupY) {
            dy.dispose();
        }
        return { dx: dx, db: db, dw: dw };
    };
    NDArrayMathGPU.prototype.conv2dTransposeInternal = function (x, weights, biases, origStride, origPad) {
        var origInputDepth = weights.shape[2];
        var origOutputDepth = weights.shape[3];
        var fieldSize = weights.shape[0];
        var progKey = [
            CONV2D_TRANSPOSE_PROG, x.shape, fieldSize, origInputDepth, origStride,
            origPad, biases != null
        ].join('_');
        var program = this.getAndSaveProgram(progKey, function () {
            return conv_backprop_gpu.getFragmentShaderConvTransposeSource(x.shape, fieldSize, origInputDepth, origStride, origPad, biases != null);
        });
        var xTexShape = conv_util.computeTexShapeFrom3D(x.shape);
        var wTexShape = conv_util.computeWeightsTexShape(origInputDepth, origOutputDepth, fieldSize);
        var biasTexShape = conv_util.computeBiasesTexShape(origInputDepth);
        var actualXTexShape = x.getTextureShapeRC(xTexShape);
        var cleanupX = false;
        if (!util.arraysEqual(actualXTexShape, xTexShape)) {
            x = this.reshapeTexture(x, xTexShape);
            cleanupX = true;
        }
        var cleanupW = false;
        var actualWTexShape = weights.getTextureShapeRC(wTexShape);
        if (!util.arraysEqual(actualWTexShape, wTexShape)) {
            weights = this.reshapeTexture(weights, wTexShape);
            cleanupW = true;
        }
        var cleanupB = false;
        if (biases != null) {
            var actualBiasTexShape = biases.getTextureShapeRC(biasTexShape);
            if (!util.arraysEqual(actualBiasTexShape, biasTexShape)) {
                biases = this.reshapeTexture(biases, biasTexShape);
                cleanupB = true;
            }
        }
        var dilatedRC = conv_util.computeDilatedRC([x.shape[0], x.shape[1]], origStride);
        var pad = fieldSize - 1 - origPad;
        var resultShape = conv_util.computeOutputShape3D([dilatedRC[0], dilatedRC[1], origOutputDepth], fieldSize, origInputDepth, 1, pad);
        var resultTexShape = conv_util.computeTexShapeFrom3D(resultShape);
        var resultTex = this.textureManager.acquireTexture(resultTexShape);
        conv_backprop_gpu.convTranspose(this.gpgpu, program, x.getTexture(), weights.getTexture(), biases != null ? biases.getTexture() : null, resultTex, resultTexShape);
        if (cleanupX) {
            x.dispose();
        }
        if (cleanupW) {
            weights.dispose();
        }
        if (cleanupB) {
            biases.dispose();
        }
        return ndarray_1.NDArray.make(resultShape, { texture: resultTex, textureShapeRC: resultTexShape });
    };
    NDArrayMathGPU.prototype.conv2dDerWeights = function (x, dY, fSize, stride, zeroPad) {
        var inputDepth = x.shape[2];
        var outputDepth = dY.shape[2];
        var progKey = [
            CONV2D_DERW_PROG, x.shape, fSize, outputDepth, stride, zeroPad
        ].join('_');
        var program = this.getAndSaveProgram(progKey, function () {
            return conv_backprop_gpu.getFragmentShaderDerWeightsSource(x.shape, fSize, outputDepth, stride, zeroPad);
        });
        var xTexShape = conv_util.computeTexShapeFrom3D(x.shape);
        var yShape = conv_util.computeOutputShape3D(x.shape, fSize, outputDepth, stride, zeroPad);
        var yTexShape = conv_util.computeTexShapeFrom3D(yShape);
        var actualXTexShape = x.getTextureShapeRC(xTexShape);
        var cleanupX = false;
        if (!util.arraysEqual(actualXTexShape, xTexShape)) {
            x = this.reshapeTexture(x, xTexShape);
            cleanupX = true;
        }
        var cleanupY = false;
        var actualYTexShape = dY.getTextureShapeRC(yTexShape);
        if (!util.arraysEqual(actualYTexShape, yTexShape)) {
            dY = this.reshapeTexture(dY, yTexShape);
            cleanupY = true;
        }
        var resultTexShape = conv_util.computeWeightsTexShape(inputDepth, outputDepth, fSize);
        var resultTex = this.textureManager.acquireTexture(resultTexShape);
        conv_backprop_gpu.derWeights(this.gpgpu, program, x.getTexture(), dY.getTexture(), resultTex, resultTexShape);
        if (cleanupX) {
            x.dispose();
        }
        if (cleanupY) {
            dY.dispose();
        }
        var weightsShape = conv_util.computeWeightsShape4D(inputDepth, outputDepth, fSize);
        return ndarray_1.NDArray.make(weightsShape, { texture: resultTex, textureShapeRC: resultTexShape });
    };
    NDArrayMathGPU.prototype.conv2dDerBias = function (dY) {
        var outputDepth = dY.shape[2];
        var progKey = [CONV2D_DERB_PROG, dY.shape].join('_');
        var program = this.getAndSaveProgram(progKey, function () {
            return conv_backprop_gpu.getFragmentShaderDerBiasSource(dY.shape);
        });
        var yTexShape = conv_util.computeTexShapeFrom3D(dY.shape);
        var cleanupY = false;
        var actualYTexShape = dY.getTextureShapeRC(yTexShape);
        if (!util.arraysEqual(actualYTexShape, yTexShape)) {
            dY = this.reshapeTexture(dY, yTexShape);
            cleanupY = true;
        }
        var resultTexShape = conv_util.computeBiasesTexShape(outputDepth);
        var resultTex = this.textureManager.acquireTexture(resultTexShape);
        conv_backprop_gpu.derBias(this.gpgpu, program, dY.getTexture(), resultTex, resultTexShape);
        if (cleanupY) {
            dY.dispose();
        }
        return ndarray_1.NDArray.make([outputDepth], { texture: resultTex, textureShapeRC: resultTexShape });
    };
    NDArrayMathGPU.prototype.pool = function (program, x, fSize, stride, pad) {
        var xTexShape = conv_util.computeTexShapeFrom3D(x.shape);
        var actualXTexShape = x.getTextureShapeRC(xTexShape);
        var cleanupX = false;
        if (!util.arraysEqual(actualXTexShape, xTexShape)) {
            x = this.reshapeTexture(x, xTexShape);
            cleanupX = true;
        }
        var resultShape = conv_util.computeOutputShape3D(x.shape, fSize, x.shape[2], stride, pad);
        var resultTexShape = conv_util.computeTexShapeFrom3D(resultShape);
        var poolResultTex = this.textureManager.acquireTexture(resultTexShape);
        pool_gpu.poolCommon(this.gpgpu, program, x.getTexture(), poolResultTex, resultTexShape);
        if (cleanupX) {
            x.dispose();
        }
        return ndarray_1.NDArray.make(resultShape, { texture: poolResultTex, textureShapeRC: resultTexShape });
    };
    NDArrayMathGPU.prototype.maxPoolInternal = function (x, fSize, stride, pad) {
        var maxPoolProgKey = [MAX_POOL_PROG, x.shape, fSize, stride, pad].join('_');
        var maxPoolProgram = this.getAndSaveProgram(maxPoolProgKey, function () {
            return max_pool_gpu.getFragmentShaderMaxPoolSource(x.shape, fSize, stride, pad);
        });
        return this.pool(maxPoolProgram, x, fSize, stride, pad);
    };
    NDArrayMathGPU.prototype.minPoolInternal = function (x, fSize, stride, pad) {
        var minPoolProgKey = [MIN_POOL_PROG, x.shape, fSize, stride, pad].join('_');
        var minPoolProgram = this.getAndSaveProgram(minPoolProgKey, function () {
            return min_pool_gpu.getFragmentShaderMinPoolSource(x.shape, fSize, stride, pad);
        });
        return this.pool(minPoolProgram, x, fSize, stride, pad);
    };
    NDArrayMathGPU.prototype.avgPoolInternal = function (x, fSize, stride, pad) {
        var avgPoolProgKey = [AVG_POOL_PROG, x.shape, fSize, stride, pad].join('_');
        var avgPoolProgram = this.getAndSaveProgram(avgPoolProgKey, function () {
            return avg_pool_gpu.getFragmentShaderAvgPoolSource(x.shape, fSize, stride, pad);
        });
        return this.pool(avgPoolProgram, x, fSize, stride, pad);
    };
    NDArrayMathGPU.prototype.maxPoolBackpropInternal = function (dy, x, fSize, origStride, origPad) {
        var maxPoolPositionsProgKey = [
            MAX_POOL_POSITIONS_PROG, x.shape, fSize, origStride, origPad
        ].join('_');
        var maxPoolPositionsProgram = this.getAndSaveProgram(maxPoolPositionsProgKey, function () {
            return max_pool_gpu.getFragmentShaderMaxPoolPositionsSource(x.shape, fSize, origStride, origPad);
        });
        var maxPoolResultShape = conv_util.computeOutputShape3D(x.shape, fSize, x.shape[2], origStride, origPad);
        var maxPoolResultTexShape = conv_util.computeTexShapeFrom3D(maxPoolResultShape);
        var maxPoolPositionsResultTex = this.textureManager.acquireTexture(maxPoolResultTexShape);
        var xTexShape = conv_util.computeTexShapeFrom3D(x.shape);
        var actualXTexShape = x.getTextureShapeRC(xTexShape);
        var cleanupX = false;
        if (!util.arraysEqual(actualXTexShape, xTexShape)) {
            x = this.reshapeTexture(x, xTexShape);
            cleanupX = true;
        }
        max_pool_gpu.maxPoolCommon(this.gpgpu, maxPoolPositionsProgram, x.getTexture(), maxPoolPositionsResultTex, maxPoolResultTexShape);
        var maxPoolBackpropProgKey = [
            MAX_POOL_BACKPROP_PROG, dy.shape, fSize, origStride, origPad
        ].join('_');
        var program = this.getAndSaveProgram(maxPoolBackpropProgKey, function () {
            return max_pool_backprop_gpu.getFragmentShaderMaxPoolBackprop(dy.shape, fSize, origStride, origPad);
        });
        var dyTexShape = conv_util.computeTexShapeFrom3D(dy.shape);
        var actualDyTexShape = dy.getTextureShapeRC(dyTexShape);
        var cleanupDy = false;
        if (!util.arraysEqual(actualDyTexShape, dyTexShape)) {
            dy = this.reshapeTexture(dy, dyTexShape);
            cleanupDy = true;
        }
        var dilatedDyRC = conv_util.computeDilatedRC([dy.shape[0], dy.shape[1]], origStride);
        var pad = fSize - 1 - origPad;
        var resultShapeRCD = conv_util.computeOutputShape3D([dilatedDyRC[0], dilatedDyRC[1], dy.shape[2]], fSize, dy.shape[2], 1, pad);
        var resultTexShape = conv_util.computeTexShapeFrom3D(resultShapeRCD);
        var resultTex = this.textureManager.acquireTexture(resultTexShape);
        max_pool_backprop_gpu.maxPoolBackprop(this.gpgpu, program, dy.getTexture(), maxPoolPositionsResultTex, resultTex, resultTexShape);
        if (cleanupDy) {
            dy.dispose();
        }
        if (cleanupX) {
            x.dispose();
        }
        this.textureManager.releaseTexture(maxPoolPositionsResultTex, maxPoolResultTexShape);
        return ndarray_1.NDArray.make(resultShapeRCD, { texture: resultTex, textureShapeRC: resultTexShape });
    };
    NDArrayMathGPU.prototype.resizeBilinear3DInternal = function (x, newShape2D, alignCorners) {
        var programKey = [RESIZE_BILINEAR_PROG, x.shape, newShape2D, alignCorners].join('_');
        var newShapeRCD = [newShape2D[0], newShape2D[1], x.shape[2]];
        var resultTexShape = conv_util.computeTexShapeFrom3D(newShapeRCD);
        var program = this.getAndSaveProgram(programKey, function () { return resize_bilinear_gpu.getFragmentShaderSource(x.shape, newShape2D, alignCorners); });
        var resultTexture = this.textureManager.acquireTexture(resultTexShape);
        resize_bilinear_gpu.resizeBilinear(this.gpgpu, program, x.getTexture(), resultTexture, resultTexShape);
        return ndarray_1.NDArray.make(newShapeRCD, { texture: resultTexture, textureShapeRC: resultTexShape });
    };
    NDArrayMathGPU.prototype.getAndSaveProgram = function (programKey, getShaderSource) {
        if (!(programKey in this.programCache)) {
            this.programCache[programKey] =
                this.gpgpu.createProgram(getShaderSource());
        }
        return this.programCache[programKey];
    };
    NDArrayMathGPU.prototype.addSubMulDiv = function (a, b, resultShape, operandA, opType, operandB) {
        var cleanupB = false;
        var aOrientation = math_1.MatrixOrientation.REGULAR;
        var bOrientation = math_1.MatrixOrientation.REGULAR;
        var logicalBTexShape;
        if (operandA === addsubmuldiv_gpu_1.OperandType.MATRIX && operandB === addsubmuldiv_gpu_1.OperandType.MATRIX) {
            util.assertShapesMatch(a.shape, b.shape);
            if (a.inGPU()) {
                b.getTextureShapeRC(a.getTextureShapeRC());
            }
            else if (b.inGPU()) {
                a.getTextureShapeRC(b.getTextureShapeRC());
            }
            var aTexShape_1 = a.getTextureShapeRC();
            var bTexShape_1 = b.getTextureShapeRC();
            logicalBTexShape = bTexShape_1;
            if (a.rank === 1) {
                if (!util.arraysEqual(bTexShape_1, aTexShape_1)) {
                    bOrientation = math_1.MatrixOrientation.TRANSPOSED;
                    logicalBTexShape = [bTexShape_1[1], bTexShape_1[0]];
                }
            }
            if (!util.arraysEqual(aTexShape_1, logicalBTexShape)) {
                b = this.reshapeTexture(b, aTexShape_1);
                bOrientation = math_1.MatrixOrientation.REGULAR;
                logicalBTexShape = b.getTextureShapeRC();
                cleanupB = true;
            }
        }
        else {
            logicalBTexShape = b.getTextureShapeRC();
        }
        var aTexShape = a.getTextureShapeRC();
        var bTexShape = b.getTextureShapeRC();
        var programKey = [
            ADD_SUM_MUL_DIV_PROG, operandA, aOrientation, opType, operandB,
            bOrientation
        ].join('_');
        var program = this.getAndSaveProgram(programKey, function () { return addsubmuldiv_gpu.getFragmentShaderSource(operandA, aOrientation, opType, operandB, bOrientation); });
        var resultTextureShape = [
            Math.max(aTexShape[0], logicalBTexShape[0]),
            Math.max(aTexShape[1], logicalBTexShape[1])
        ];
        var resultTexture = this.textureManager.acquireTexture(resultTextureShape);
        addsubmuldiv_gpu.addSubMulDiv(this.gpgpu, program, a.getTexture(), aTexShape, b.getTexture(), bTexShape, resultTexture, resultTextureShape);
        if (cleanupB) {
            b.dispose();
        }
        return ndarray_1.NDArray.make(resultShape, { texture: resultTexture, textureShapeRC: resultTextureShape });
    };
    NDArrayMathGPU.prototype.doGPUShapesMatch = function (a, b) {
        util.assertShapesMatch(a.shape, b.shape);
        if (a.inGPU()) {
            b.getTextureShapeRC(a.getTextureShapeRC());
        }
        else if (b.inGPU()) {
            a.getTextureShapeRC(b.getTextureShapeRC());
        }
        return util.arraysEqual(a.getTextureShapeRC(), b.getTextureShapeRC());
    };
    NDArrayMathGPU.prototype.getTextureManager = function () {
        return this.textureManager;
    };
    NDArrayMathGPU.prototype.dispose = function () {
        for (var programKey in this.programCache) {
            if (this.programCache.hasOwnProperty(programKey)) {
                this.gpgpu.deleteProgram(this.programCache[programKey]);
            }
        }
        this.textureManager.dispose();
        if (this.gpgpuCreatedLocally) {
            this.gpgpu.dispose();
        }
    };
    return NDArrayMathGPU;
}(math_1.NDArrayMath));
exports.NDArrayMathGPU = NDArrayMathGPU;

},{"../util":88,"./concat3d_util":17,"./conv_util":18,"./math":21,"./ndarray":24,"./webgl/addscaledmat_gpu":25,"./webgl/addsubmuldiv_gpu":26,"./webgl/argmaxequals_gpu":27,"./webgl/argminmax_gpu":28,"./webgl/avg_pool_gpu":29,"./webgl/batchnorm_gpu":30,"./webgl/concat3d_gpu":32,"./webgl/conv_backprop_gpu":33,"./webgl/conv_gpu":34,"./webgl/copy_gpu":35,"./webgl/exp_gpu":36,"./webgl/gpgpu_context":37,"./webgl/gpgpu_util":38,"./webgl/log_gpu":39,"./webgl/logsumexp_gpu":40,"./webgl/max_pool_backprop_gpu":41,"./webgl/max_pool_gpu":42,"./webgl/min_pool_gpu":43,"./webgl/minmax_gpu":44,"./webgl/mulmat_gpu":45,"./webgl/neg_gpu":46,"./webgl/pool_gpu":47,"./webgl/reducesum_gpu":48,"./webgl/relu_gpu":49,"./webgl/reshape_gpu":51,"./webgl/resize_bilinear_gpu":52,"./webgl/shader_compiler":53,"./webgl/sigmoid_gpu":54,"./webgl/step_gpu":55,"./webgl/texture_manager":57,"./webgl/trig_gpu":58,"./webgl/webgl_util":60}],24:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var util = require("../util");
var webgl_util = require("./webgl/webgl_util");
exports.GPGPU = null;
exports.TEXTURE_MANAGER = null;
function initializeGPU(gpgpu, textureManager) {
    exports.GPGPU = gpgpu;
    exports.TEXTURE_MANAGER = textureManager;
}
exports.initializeGPU = initializeGPU;
function throwIfGPUNotInitialized() {
    if (exports.GPGPU == null || exports.TEXTURE_MANAGER == null) {
        throw new Error('GPU not intialized.');
    }
}
var NDArray = (function () {
    function NDArray(shape, data) {
        util.assert(data.values != null || data.texture != null, 'Either `values` or `texture` must be defined');
        util.assert(data.texture == null || (data.textureShapeRC != null), '`textureShape` must be defined when `texture` is defined');
        this.size = util.sizeFromShape(shape);
        if (data.values != null) {
            util.assert(this.size === data.values.length, 'Constructing ndarray of shape (' + this.size + ') should match the' +
                ' length of values (' + data.values.length + ')');
        }
        this.shape = shape;
        this.data = data;
        var dim = this.shape.length;
        if (dim < 2) {
            this.strides = [];
        }
        else {
            this.strides = new Array(dim - 1);
            this.strides[dim - 2] = this.shape[dim - 1];
            for (var i = dim - 3; i >= 0; --i) {
                this.strides[i] = this.strides[i + 1] * this.shape[i + 1];
            }
        }
    }
    NDArray.zeros = function (shape) {
        var values = new Float32Array(util.sizeFromShape(shape));
        return NDArray.make(shape, { values: values });
    };
    NDArray.zerosLike = function (another) {
        return NDArray.zeros(another.shape);
    };
    NDArray.like = function (another) {
        var values = another.getValues();
        return NDArray.make(another.shape, { values: new Float32Array(values) });
    };
    NDArray.make = function (shape, data) {
        switch (shape.length) {
            case 0:
                return new Scalar(data);
            case 1:
                return new Array1D(data);
            case 2:
                return new Array2D(shape, data);
            case 3:
                return new Array3D(shape, data);
            case 4:
                return new Array4D(shape, data);
            default:
                return new NDArray(shape, data);
        }
    };
    NDArray.prototype.reshape = function (newShape) {
        if (util.arraysEqual(this.shape, newShape)) {
            return this;
        }
        util.assert(this.size === util.sizeFromShape(newShape), 'new shape and old shape must have the same number of elements.');
        return NDArray.make(newShape, this.data);
    };
    NDArray.prototype.asScalar = function () {
        util.assert(this.size === 1, 'The array must have only 1 element.');
        return this.reshape([]);
    };
    NDArray.prototype.as1D = function () {
        return this.reshape([this.size]);
    };
    NDArray.prototype.as2D = function (rows, columns) {
        return this.reshape([rows, columns]);
    };
    NDArray.prototype.as3D = function (rows, columns, depth) {
        return this.reshape([rows, columns, depth]);
    };
    NDArray.prototype.as4D = function (rows, columns, depth, depth2) {
        return this.reshape([rows, columns, depth, depth2]);
    };
    Object.defineProperty(NDArray.prototype, "rank", {
        get: function () {
            return this.shape.length;
        },
        enumerable: true,
        configurable: true
    });
    NDArray.prototype.get = function () {
        var locs = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            locs[_i] = arguments[_i];
        }
        var index = locs[locs.length - 1];
        for (var i = 0; i < locs.length - 1; ++i) {
            index += this.strides[i] * locs[i];
        }
        return this.getValues()[index];
    };
    NDArray.prototype.add = function (value) {
        var locs = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            locs[_i - 1] = arguments[_i];
        }
        this.set.apply(this, [this.get.apply(this, locs) + value].concat(locs));
    };
    NDArray.prototype.set = function (value) {
        var locs = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            locs[_i - 1] = arguments[_i];
        }
        var index = locs[locs.length - 1];
        for (var i = 0; i < locs.length - 1; ++i) {
            index += this.strides[i] * locs[i];
        }
        this.getValues()[index] = value;
    };
    NDArray.prototype.locToIndex = function (locs) {
        var index = locs[locs.length - 1];
        for (var i = 0; i < locs.length - 1; ++i) {
            index += this.strides[i] * locs[i];
        }
        return index;
    };
    NDArray.prototype.indexToLoc = function (index) {
        var locs = new Array(this.shape.length);
        for (var i = 0; i < locs.length - 1; ++i) {
            locs[i] = Math.floor(index / this.strides[i]);
            index -= locs[i] * this.strides[i];
        }
        locs[locs.length - 1] = index;
        return locs;
    };
    NDArray.prototype.fill = function (value) {
        this.getValues().fill(value);
    };
    NDArray.prototype.getData = function () {
        return this.data;
    };
    NDArray.prototype.getValues = function () {
        if (this.data.values == null) {
            throwIfGPUNotInitialized();
            this.data.values = exports.GPGPU.downloadMatrixFromTexture(this.data.texture, this.data.textureShapeRC[0], this.data.textureShapeRC[1]);
            this.disposeTexture();
        }
        return this.data.values;
    };
    NDArray.prototype.uploadToGPU = function (preferredTexShape) {
        throwIfGPUNotInitialized();
        this.data.textureShapeRC = webgl_util.getTextureShapeFromLogicalShape(exports.GPGPU.gl, this.shape, preferredTexShape);
        this.data.texture =
            exports.TEXTURE_MANAGER.acquireTexture(this.data.textureShapeRC);
        exports.GPGPU.uploadMatrixToTexture(this.data.texture, this.data.textureShapeRC[0], this.data.textureShapeRC[1], this.data.values);
        this.data.values = null;
    };
    NDArray.prototype.getTexture = function (preferredShapeRC) {
        if (this.data.texture == null) {
            this.uploadToGPU(preferredShapeRC);
        }
        return this.data.texture;
    };
    NDArray.prototype.getTextureShapeRC = function (preferredShapeRC) {
        if (this.data.textureShapeRC == null) {
            this.uploadToGPU(preferredShapeRC);
        }
        return this.data.textureShapeRC;
    };
    NDArray.prototype.dispose = function () {
        this.data.values = null;
        this.shape = null;
        if (this.data.texture != null) {
            this.disposeTexture();
        }
    };
    NDArray.prototype.disposeTexture = function () {
        throwIfGPUNotInitialized();
        exports.TEXTURE_MANAGER.releaseTexture(this.data.texture, this.data.textureShapeRC);
        this.data.texture = null;
        this.data.textureShapeRC = null;
    };
    NDArray.prototype.inGPU = function () {
        return this.data.texture != null;
    };
    NDArray.prototype.equals = function (t) {
        return util.arraysEqual(this.shape, t.shape) &&
            util.arraysEqual(this.getValues(), t.getValues());
    };
    NDArray.rand = function (shape, randFunction) {
        var size = util.sizeFromShape(shape);
        var values = new Float32Array(size);
        for (var i = 0; i < size; i++) {
            values[i] = randFunction();
        }
        return NDArray.make(shape, { values: values });
    };
    NDArray.randNormal = function (shape, mean, stdDev) {
        if (mean === void 0) { mean = 0; }
        if (stdDev === void 0) { stdDev = 1; }
        return NDArray.rand(shape, function () { return util.randGauss(mean, stdDev); });
    };
    NDArray.randTruncatedNormal = function (shape, mean, stdDev) {
        if (mean === void 0) { mean = 0; }
        if (stdDev === void 0) { stdDev = 1; }
        return NDArray.rand(shape, function () { return util.randGauss(mean, stdDev, true); });
    };
    NDArray.randUniform = function (shape, a, b) {
        return NDArray.rand(shape, function () { return util.randUniform(a, b); });
    };
    return NDArray;
}());
exports.NDArray = NDArray;
var Scalar = (function (_super) {
    __extends(Scalar, _super);
    function Scalar(data) {
        var _this = this;
        if (data.texture != null) {
            data.textureShapeRC = [1, 1];
        }
        _this = _super.call(this, [], data) || this;
        return _this;
    }
    Scalar.new = function (value) {
        return new Scalar({ values: new Float32Array([value]) });
    };
    Scalar.prototype.get = function () {
        return this.getValues()[0];
    };
    Scalar.prototype.set = function (value) {
        this.getValues()[0] = value;
    };
    Scalar.prototype.add = function (value) {
        this.getValues()[0] += value;
    };
    return Scalar;
}(NDArray));
Scalar.ZERO = Scalar.new(0);
Scalar.ONE = Scalar.new(1);
Scalar.TWO = Scalar.new(2);
Scalar.NEG_ONE = Scalar.new(-1);
exports.Scalar = Scalar;
var Array1D = (function (_super) {
    __extends(Array1D, _super);
    function Array1D(data) {
        var _this = this;
        var shape = (data.values != null) ?
            [data.values.length] :
            [util.sizeFromShape(data.textureShapeRC)];
        _this = _super.call(this, shape, data) || this;
        return _this;
    }
    Array1D.new = function (values) {
        if (!(values instanceof Float32Array)) {
            var inferredShape = util.inferShape(values);
            util.assert(inferredShape.length === 1, "Error constructing Array1D. Shape of values " + inferredShape + " is " +
                "not 1 dimensional.");
        }
        return new Array1D({ values: toTypedArray(values) });
    };
    Array1D.prototype.get = function (i) {
        return this.getValues()[i];
    };
    Array1D.prototype.set = function (value, i) {
        this.getValues()[i] = value;
    };
    Array1D.prototype.add = function (value, i) {
        this.getValues()[i] += value;
    };
    Array1D.prototype.locToIndex = function (loc) {
        return loc[0];
    };
    Array1D.prototype.indexToLoc = function (index) {
        return [index];
    };
    Array1D.zeros = function (shape) {
        return NDArray.zeros(shape);
    };
    return Array1D;
}(NDArray));
exports.Array1D = Array1D;
var Array2D = (function (_super) {
    __extends(Array2D, _super);
    function Array2D(shape, data) {
        var _this = this;
        util.assert(shape.length === 2, 'Shape should be of length 2');
        _this = _super.call(this, shape, data) || this;
        _this.stride0 = _this.strides[0];
        return _this;
    }
    Array2D.new = function (shape, values) {
        if (!(values instanceof Float32Array)) {
            var inferredShape = util.inferShape(values);
            if (inferredShape.length > 1) {
                util.assertShapesMatch(shape, inferredShape, "Error when constructing Array2D. Shape of values " +
                    (inferredShape + " does not match the provided shape ") +
                    (shape + ". "));
            }
        }
        return new Array2D(shape, { values: toTypedArray(values) });
    };
    Array2D.prototype.get = function (i, j) {
        return this.getValues()[this.stride0 * i + j];
    };
    Array2D.prototype.set = function (value, i, j) {
        this.getValues()[this.stride0 * i + j] = value;
    };
    Array2D.prototype.add = function (value, i, j) {
        this.getValues()[this.stride0 * i + j] += value;
    };
    Array2D.prototype.locToIndex = function (locs) {
        return this.stride0 * locs[0] + locs[1];
    };
    Array2D.prototype.indexToLoc = function (index) {
        return [Math.floor(index / this.stride0), index % this.stride0];
    };
    Array2D.zeros = function (shape) {
        return NDArray.zeros(shape);
    };
    return Array2D;
}(NDArray));
exports.Array2D = Array2D;
var Array3D = (function (_super) {
    __extends(Array3D, _super);
    function Array3D(shape, data) {
        var _this = this;
        util.assert(shape.length === 3, 'Shape should be of length 3');
        _this = _super.call(this, shape, data) || this;
        _this.stride0 = _this.strides[0];
        _this.stride1 = _this.strides[1];
        return _this;
    }
    Array3D.new = function (shape, values) {
        if (!(values instanceof Float32Array)) {
            var inferredShape = util.inferShape(values);
            if (inferredShape.length > 1) {
                util.assertShapesMatch(shape, inferredShape, "Error when constructing Array3D. Shape of values " +
                    (inferredShape + " does not match the provided shape ") +
                    (shape + ". "));
            }
        }
        return new Array3D(shape, { values: toTypedArray(values) });
    };
    Array3D.prototype.get = function (i, j, k) {
        return this.getValues()[this.stride0 * i + this.stride1 * j + k];
    };
    Array3D.prototype.set = function (value, i, j, k) {
        this.getValues()[this.stride0 * i + this.stride1 * j + k] = value;
    };
    Array3D.prototype.add = function (value, i, j, k) {
        this.getValues()[this.stride0 * i + this.stride1 * j + k] += value;
    };
    Array3D.prototype.locToIndex = function (locs) {
        return this.stride0 * locs[0] + this.stride1 * locs[1] + locs[2];
    };
    Array3D.prototype.indexToLoc = function (index) {
        var i = Math.floor(index / this.stride0);
        index -= i * this.stride0;
        return [i, Math.floor(index / this.stride1), index % this.stride1];
    };
    Array3D.zeros = function (shape) {
        return NDArray.zeros(shape);
    };
    return Array3D;
}(NDArray));
exports.Array3D = Array3D;
var Array4D = (function (_super) {
    __extends(Array4D, _super);
    function Array4D(shape, data) {
        var _this = this;
        util.assert(shape.length === 4, 'Shape should be of length 4');
        _this = _super.call(this, shape, data) || this;
        _this.stride0 = _this.strides[0];
        _this.stride1 = _this.strides[1];
        _this.stride2 = _this.strides[2];
        return _this;
    }
    Array4D.new = function (shape, values) {
        if (!(values instanceof Float32Array)) {
            var inferredShape = util.inferShape(values);
            if (inferredShape.length > 1) {
                util.assertShapesMatch(shape, inferredShape, "Error when constructing Array4D. Shape of values " +
                    (inferredShape + " does not match the provided shape ") +
                    (shape + ". "));
            }
        }
        return new Array4D(shape, { values: toTypedArray(values) });
    };
    Array4D.prototype.get = function (i, j, k, l) {
        return this.getValues()[this.stride0 * i + this.stride1 * j + this.stride2 * k + l];
    };
    Array4D.prototype.set = function (value, i, j, k, l) {
        this.getValues()[this.stride0 * i + this.stride1 * j + this.stride2 * k + l] = value;
    };
    Array4D.prototype.add = function (value, i, j, k, l) {
        this.getValues()[this.stride0 * i + this.stride1 * j + this.stride2 * k + l] += value;
    };
    Array4D.prototype.locToIndex = function (locs) {
        return this.stride0 * locs[0] + this.stride1 * locs[1] +
            this.stride2 * locs[2] + locs[3];
    };
    Array4D.prototype.indexToLoc = function (index) {
        var i = Math.floor(index / this.stride0);
        index -= i * this.stride0;
        var j = Math.floor(index / this.stride1);
        index -= j * this.stride1;
        return [i, j, Math.floor(index / this.stride2), index % this.stride2];
    };
    Array4D.zeros = function (shape) {
        return NDArray.zeros(shape);
    };
    return Array4D;
}(NDArray));
exports.Array4D = Array4D;
function toTypedArray(a) {
    return (a instanceof Float32Array) ? a : new Float32Array(util.flatten(a));
}

},{"../util":88,"./webgl/webgl_util":60}],25:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var gpgpu_context_1 = require("./gpgpu_context");
function getFragmentShaderSource() {
    return "\n    precision highp float;\n    uniform sampler2D matrixA;\n    uniform sampler2D matrixB;\n    uniform sampler2D matrixAScalar;\n    uniform sampler2D matrixBScalar;\n    varying vec2 resultUV;\n\n    const vec2 halfTexel = vec2(0.5, 0.5);\n\n    void main() {\n      float a = texture2D(matrixA, resultUV).r;\n      float b = texture2D(matrixB, resultUV).r;\n      float aScalar = texture2D(matrixAScalar, halfTexel).r;\n      float bScalar = texture2D(matrixBScalar, halfTexel).r;\n      vec2 abScaled = vec2(a, b) * vec2(aScalar, bScalar);\n      gl_FragColor = vec4(abScaled.x + abScaled.y, 0, 0, 0);\n    }";
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function addScaledMatrices(gpgpu, addScaledMatricesProgram, a, b, rows, columns, aScalar, bScalar, result) {
    gpgpu.setOutputMatrixTexture(result, rows, columns);
    gpgpu.setProgram(addScaledMatricesProgram);
    gpgpu.setInputMatrixTexture(a, 'matrixA', 0);
    gpgpu.setInputMatrixTexture(b, 'matrixB', 1);
    gpgpu.setInputMatrixTexture(aScalar, 'matrixAScalar', 2);
    gpgpu.setInputMatrixTexture(bScalar, 'matrixBScalar', 3);
    gpgpu.executeProgram();
}
exports.addScaledMatrices = addScaledMatrices;
function uploadAddScaledMatricesDownload(a, b, rows, columns, aScalar, bScalar) {
    var gpgpu = new gpgpu_context_1.GPGPUContext();
    var program = gpgpu.createProgram(getFragmentShaderSource());
    var aTex = gpgpu.createMatrixTexture(rows, columns);
    var bTex = gpgpu.createMatrixTexture(rows, columns);
    var aScalarTex = gpgpu.createMatrixTexture(1, 1);
    var bScalarTex = gpgpu.createMatrixTexture(1, 1);
    var resultTex = gpgpu.createMatrixTexture(rows, columns);
    gpgpu.uploadMatrixToTexture(aTex, rows, columns, a);
    gpgpu.uploadMatrixToTexture(bTex, rows, columns, b);
    gpgpu.uploadMatrixToTexture(aScalarTex, 1, 1, new Float32Array([aScalar]));
    gpgpu.uploadMatrixToTexture(bScalarTex, 1, 1, new Float32Array([bScalar]));
    addScaledMatrices(gpgpu, program, aTex, bTex, rows, columns, aScalarTex, bScalarTex, resultTex);
    var result = gpgpu.downloadMatrixFromTexture(resultTex, rows, columns);
    gpgpu.deleteMatrixTexture(aTex);
    gpgpu.deleteMatrixTexture(bTex);
    gpgpu.deleteMatrixTexture(resultTex);
    gpgpu.deleteMatrixTexture(aScalarTex);
    gpgpu.deleteMatrixTexture(bScalarTex);
    gpgpu.deleteProgram(program);
    gpgpu.dispose();
    return result;
}
exports.uploadAddScaledMatricesDownload = uploadAddScaledMatricesDownload;

},{"./gpgpu_context":37}],26:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var math_1 = require("../math");
var binaryop_gpu = require("./binaryop_gpu");
var OperandType;
(function (OperandType) {
    OperandType[OperandType["MATRIX"] = 0] = "MATRIX";
    OperandType[OperandType["SCALAR"] = 1] = "SCALAR";
})(OperandType = exports.OperandType || (exports.OperandType = {}));
function getFragmentShaderSource(aType, aOrientation, op, bType, bOrientation) {
    var aUV = operandToShaderSnippet(aType, aOrientation);
    var bUV = operandToShaderSnippet(bType, bOrientation);
    var resultOp = "gl_FragColor = vec4(a " + op + " b, 0, 0, 0);";
    return binaryop_gpu.getFragmentShaderSource(aUV, bUV, resultOp);
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function operandToShaderSnippet(operand, orientation) {
    switch (operand) {
        case OperandType.MATRIX:
            return 'resultUV' +
                (orientation === math_1.MatrixOrientation.REGULAR ? '.st' : '.ts');
        case OperandType.SCALAR:
            return 'vec2(0.5, 0.5)';
        default:
            throw new Error('Unknown operand type');
    }
}
function addSubMulDiv(gpgpu, program, a, aShapeRowCol, b, bShapeRowCol, result, resultShapeRowCol) {
    return binaryop_gpu.binaryOp(gpgpu, program, a, aShapeRowCol, b, bShapeRowCol, result, resultShapeRowCol);
}
exports.addSubMulDiv = addSubMulDiv;
function uploadScalarPlusMatrixDownload(a, b, bShape, bOrientation) {
    if (bOrientation === void 0) { bOrientation = math_1.MatrixOrientation.REGULAR; }
    var src = getFragmentShaderSource(OperandType.SCALAR, math_1.MatrixOrientation.REGULAR, '+', OperandType.MATRIX, bOrientation);
    return binaryop_gpu.uploadBinaryOpDownload(new Float32Array([a]), [1, 1], b, bShape, src);
}
exports.uploadScalarPlusMatrixDownload = uploadScalarPlusMatrixDownload;
function uploadMatrixMinusScalarDownload(a, aShape, b, aOrientation) {
    if (aOrientation === void 0) { aOrientation = math_1.MatrixOrientation.REGULAR; }
    var src = getFragmentShaderSource(OperandType.MATRIX, aOrientation, '-', OperandType.SCALAR, math_1.MatrixOrientation.REGULAR);
    return binaryop_gpu.uploadBinaryOpDownload(a, aShape, new Float32Array([b]), [1, 1], src);
}
exports.uploadMatrixMinusScalarDownload = uploadMatrixMinusScalarDownload;
function uploadScalarMinusMatrixDownload(a, b, bShape, bOrientation) {
    if (bOrientation === void 0) { bOrientation = math_1.MatrixOrientation.REGULAR; }
    var src = getFragmentShaderSource(OperandType.SCALAR, math_1.MatrixOrientation.REGULAR, '-', OperandType.MATRIX, bOrientation);
    return binaryop_gpu.uploadBinaryOpDownload(new Float32Array([a]), [1, 1], b, bShape, src);
}
exports.uploadScalarMinusMatrixDownload = uploadScalarMinusMatrixDownload;
function uploadScalarTimesMatrixDownload(a, b, bShape, bOrientation) {
    if (bOrientation === void 0) { bOrientation = math_1.MatrixOrientation.REGULAR; }
    var src = getFragmentShaderSource(OperandType.SCALAR, math_1.MatrixOrientation.REGULAR, '*', OperandType.MATRIX, bOrientation);
    return binaryop_gpu.uploadBinaryOpDownload(new Float32Array([a]), [1, 1], b, bShape, src);
}
exports.uploadScalarTimesMatrixDownload = uploadScalarTimesMatrixDownload;
function uploadMatrixTimesMatrixDownload(a, b, shape, aOrientation, bOrientation) {
    if (aOrientation === void 0) { aOrientation = math_1.MatrixOrientation.REGULAR; }
    if (bOrientation === void 0) { bOrientation = math_1.MatrixOrientation.REGULAR; }
    var src = getFragmentShaderSource(OperandType.MATRIX, aOrientation, '*', OperandType.MATRIX, bOrientation);
    return binaryop_gpu.uploadBinaryOpDownload(a, shape, b, shape, src);
}
exports.uploadMatrixTimesMatrixDownload = uploadMatrixTimesMatrixDownload;
function uploadMatrixPlusMatrixDownload(a, b, shape, aOrientation, bOrientation) {
    if (aOrientation === void 0) { aOrientation = math_1.MatrixOrientation.REGULAR; }
    if (bOrientation === void 0) { bOrientation = math_1.MatrixOrientation.REGULAR; }
    var src = getFragmentShaderSource(OperandType.MATRIX, aOrientation, '+', OperandType.MATRIX, bOrientation);
    return binaryop_gpu.uploadBinaryOpDownload(a, shape, b, shape, src);
}
exports.uploadMatrixPlusMatrixDownload = uploadMatrixPlusMatrixDownload;

},{"../math":21,"./binaryop_gpu":31}],27:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var argminmax_gpu = require("./argminmax_gpu");
function getFragmentShaderPrologueSource() {
    return "\n    precision highp float;\n    uniform sampler2D matrixA;\n    uniform sampler2D matrixB;\n    varying vec2 resultUV;";
}
function getFragmentShaderMainSource() {
    return "\n    void main() {\n      float argMaxA = getArgMinMax(matrixA);\n      float argMaxB = getArgMinMax(matrixB);\n      float value;\n      if (isNaN(argMaxA)) {\n        value = argMaxA;\n      } else if (isNaN(argMaxB)) {\n        value = argMaxB;\n      } else {\n        value = float(argMaxA == argMaxB);\n      }\n      gl_FragColor = vec4(value, 0, 0, 0);\n    }";
}
function getArgMaxEqualsFragmentShaderSource(rows, columns) {
    return [
        getFragmentShaderPrologueSource(),
        argminmax_gpu.getFragmentShaderGetArgMinMaxSource('>', rows, columns),
        getFragmentShaderMainSource()
    ].join('\n');
}
exports.getArgMaxEqualsFragmentShaderSource = getArgMaxEqualsFragmentShaderSource;
function argMaxEquals(gpgpu, maxEqualsProgram, a, b, numRows, numCols, result) {
    gpgpu.setOutputMatrixTexture(result, 1, 1);
    gpgpu.setProgram(maxEqualsProgram);
    gpgpu.setInputMatrixTexture(a, 'matrixA', 0);
    gpgpu.setInputMatrixTexture(b, 'matrixB', 1);
    gpgpu.executeProgram();
}
exports.argMaxEquals = argMaxEquals;

},{"./argminmax_gpu":28}],28:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var webgl_util_1 = require("./webgl_util");
function getFragmentShaderPrologueSource() {
    return "\n    precision highp float;\n    uniform sampler2D matrixA;\n    varying vec2 resultUV;";
}
exports.getFragmentShaderPrologueSource = getFragmentShaderPrologueSource;
function getFragmentShaderMainSource() {
    return "\n    void main() {\n      gl_FragColor = vec4(getArgMinMax(matrixA), 0, 0, 0);\n    }";
}
function getArgMinMaxFragmentShaderSource(rows, columns, compOp) {
    return [
        getFragmentShaderPrologueSource(),
        getFragmentShaderGetArgMinMaxSource(compOp, rows, columns),
        getFragmentShaderMainSource()
    ].join('\n');
}
function getArgMinFragmentShaderSource(rows, columns) {
    return getArgMinMaxFragmentShaderSource(rows, columns, '<');
}
exports.getArgMinFragmentShaderSource = getArgMinFragmentShaderSource;
function getArgMaxFragmentShaderSource(rows, columns) {
    return getArgMinMaxFragmentShaderSource(rows, columns, '>');
}
exports.getArgMaxFragmentShaderSource = getArgMaxFragmentShaderSource;
function getFragmentShaderGetArgMinMaxSource(compOp, rows, columns) {
    return "\n    const vec2 dimCR = vec2(" + columns + ".0, " + rows + ".0);\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    " + webgl_util_1.IS_NAN_SHADER_FUNC + "\n\n    float getArgMinMax(in sampler2D matrix) {\n      vec2 bestCR = vec2(0, 0);\n      float bestValue = texture2D(matrix, bestCR).r;\n\n      for (float c = 0.0; c < dimCR.x; c += 1.0) {\n        for (float r = 0.0; r < dimCR.y; r += 1.0) {\n          vec2 cr = vec2(c, r);\n          vec2 uv = (cr + halfCR) / dimCR;\n          float value = texture2D(matrix, uv).r;\n          if (isNaN(value)) {\n            return value;\n          }\n          if (value " + compOp + " bestValue) {\n            bestValue = value;\n            bestCR = cr;\n          }\n        }\n      }\n      return bestCR.x + (bestCR.y * dimCR.x);\n    }\n  ";
}
exports.getFragmentShaderGetArgMinMaxSource = getFragmentShaderGetArgMinMaxSource;
function argMinMax(gpgpu, minMaxProgram, a, aNumRows, aNumCols, result) {
    gpgpu.setOutputMatrixTexture(result, 1, 1);
    gpgpu.setProgram(minMaxProgram);
    gpgpu.setInputMatrixTexture(a, 'matrixA', 0);
    gpgpu.executeProgram();
}
exports.argMinMax = argMinMax;

},{"./webgl_util":60}],29:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var pool_gpu = require("./pool_gpu");
function getFragmentShaderAvgPoolSource(xShapeRCD, fSize, stride, pad) {
    return pool_gpu.getFragmentShaderPoolCommonSource(xShapeRCD, fSize, stride, pad, 'avg', false);
}
exports.getFragmentShaderAvgPoolSource = getFragmentShaderAvgPoolSource;
function avgPool(gpgpu, program, x, result, resultShapeRowCol) {
    pool_gpu.poolCommon(gpgpu, program, x, result, resultShapeRowCol);
}
exports.avgPool = avgPool;

},{"./pool_gpu":47}],30:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function getFragmentShaderSource(xTexShapeRC, meanTexShapeRC, varianceTexShapeRC, offsetTexShapeRC, scaleTexShapeRC, varianceEpsilon) {
    if (varianceEpsilon === void 0) { varianceEpsilon = 0.001; }
    var offsetSamplerSnippet = '';
    var offsetShapeInitializationSnippet = '';
    var offsetCoordsSnippet = '';
    var offsetUVSnippet = '';
    var offsetValueSnippet = '';
    var offsetOperationSnippet = '0.0';
    var scaleSamplerSnippet = '';
    var scaleShapeInitializationSnippet = '';
    var scaleCoordsSnippet = '';
    var scaleUVSnippet = '';
    var scaleValueSnippet = '';
    var scaleOperationSnippet = '';
    if (offsetTexShapeRC != null) {
        offsetSamplerSnippet = 'uniform sampler2D offset;';
        offsetShapeInitializationSnippet = "const vec2 offsetShapeCR = vec2(\n            " + offsetTexShapeRC[1] + ", " + offsetTexShapeRC[0] + ");";
        offsetCoordsSnippet = 'vec2 offsetCoordsCR = mod(yTexCR, offsetShapeCR);';
        offsetUVSnippet =
            'vec2 offsetUV = (offsetCoordsCR + halfCR) / offsetShapeCR;';
        offsetValueSnippet = 'float offsetValue = texture2D(offset, offsetUV).r;';
        offsetOperationSnippet = 'offsetValue';
    }
    if (scaleTexShapeRC != null) {
        scaleSamplerSnippet = 'uniform sampler2D scale;';
        scaleShapeInitializationSnippet = "const vec2 scaleShapeCR = vec2(\n            " + scaleTexShapeRC[1] + ", " + scaleTexShapeRC[0] + ");";
        scaleCoordsSnippet = 'vec2 scaleCoordsCR = mod(yTexCR, scaleShapeCR);';
        scaleUVSnippet = 'vec2 scaleUV = (scaleCoordsCR + halfCR) / scaleShapeCR;';
        scaleValueSnippet = 'float scaleValue = texture2D(scale, scaleUV).r;';
        scaleOperationSnippet = 'inv *= scaleValue;';
    }
    return "\n    precision highp float;\n    uniform sampler2D x;\n    uniform sampler2D mean;\n    uniform sampler2D variance;\n    " + offsetSamplerSnippet + "\n    " + scaleSamplerSnippet + "\n\n    varying vec2 resultUV;\n\n    const vec2 xShapeCR = vec2(" + xTexShapeRC[1] + ", " + xTexShapeRC[0] + ");\n    const vec2 meanShapeCR = vec2(" + meanTexShapeRC[1] + ", " + meanTexShapeRC[0] + ");\n    const vec2 varianceShapeCR = vec2(\n        " + varianceTexShapeRC[1] + ", " + varianceTexShapeRC[0] + ");\n\n    " + offsetShapeInitializationSnippet + "\n    " + scaleShapeInitializationSnippet + "\n\n    const vec2 halfCR = vec2(0.5, 0.5);\n    const float varianceEpsilon = " + varianceEpsilon + ";\n\n    void main() {\n      vec2 yTexCR = floor(gl_FragCoord.xy);\n\n      vec2 meanCoordsCR = mod(yTexCR, meanShapeCR);\n      vec2 varianceCoordsCR = mod(yTexCR, varianceShapeCR);\n      " + offsetCoordsSnippet + "\n      " + scaleCoordsSnippet + "\n\n      vec2 meanUV = (meanCoordsCR + halfCR) / meanShapeCR;\n      vec2 varianceUV = (varianceCoordsCR + halfCR) / varianceShapeCR;\n      " + offsetUVSnippet + "\n      " + scaleUVSnippet + "\n\n      float xValue = texture2D(x, resultUV).r;\n      float meanValue = texture2D(mean, meanUV).r;\n      float varianceValue = texture2D(variance, varianceUV).r;\n      " + offsetValueSnippet + "\n      " + scaleValueSnippet + "\n\n      float inv = 1.0 / sqrt(varianceValue + varianceEpsilon);\n      " + scaleOperationSnippet + "\n      float xTimesInv = xValue * inv;\n      float meanTimesInvWithOffset = " + offsetOperationSnippet + "\n          - meanValue * inv;\n\n      gl_FragColor = vec4(xTimesInv + meanTimesInvWithOffset, 0, 0, 0);\n    }";
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function batchNormalization(gpgpu, program, x, xShapeRowCol, mean, meanShapeRowCol, variance, varianceShapeRowCol, offset, offsetShapeRowCol, scale, scaleShapeRowCol, result, resultShapeRowCol) {
    gpgpu.setOutputMatrixTexture(result, resultShapeRowCol[0], resultShapeRowCol[1]);
    gpgpu.setProgram(program);
    gpgpu.setInputMatrixTexture(x, 'x', 0);
    gpgpu.setInputMatrixTexture(mean, 'mean', 1);
    gpgpu.setInputMatrixTexture(variance, 'variance', 2);
    var nextIndex = 3;
    if (offset != null) {
        gpgpu.setInputMatrixTexture(offset, 'offset', nextIndex);
        nextIndex++;
    }
    if (scale != null) {
        gpgpu.setInputMatrixTexture(scale, 'scale', nextIndex);
    }
    gpgpu.executeProgram();
}
exports.batchNormalization = batchNormalization;

},{}],31:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var gpgpu_context_1 = require("./gpgpu_context");
function getFragmentShaderSource(aResultUV, bResultUV, op) {
    return "\n    precision highp float;\n    uniform sampler2D matrixA;\n    uniform sampler2D matrixB;\n    varying vec2 resultUV;\n\n    void main() {\n      float a = texture2D(matrixA, " + aResultUV + ").r;\n      float b = texture2D(matrixB, " + bResultUV + ").r;\n      " + op + "\n    }";
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function binaryOp(gpgpu, program, a, aShapeRowCol, b, bShapeRowCol, result, resultShapeRowCol) {
    gpgpu.setOutputMatrixTexture(result, resultShapeRowCol[0], resultShapeRowCol[1]);
    gpgpu.setProgram(program);
    gpgpu.setInputMatrixTexture(a, 'matrixA', 0);
    gpgpu.setInputMatrixTexture(b, 'matrixB', 1);
    gpgpu.executeProgram();
}
exports.binaryOp = binaryOp;
function uploadBinaryOpDownload(a, aShape, b, bShape, fragmentShaderSource) {
    var gpgpu = new gpgpu_context_1.GPGPUContext();
    var program = gpgpu.createProgram(fragmentShaderSource);
    var aTexture = gpgpu.createMatrixTexture(aShape[0], aShape[1]);
    var bTexture = gpgpu.createMatrixTexture(bShape[0], bShape[1]);
    var resultShape = [Math.max(aShape[0], bShape[0]), Math.max(aShape[1], bShape[1])];
    var resultTexture = gpgpu.createMatrixTexture(resultShape[0], resultShape[1]);
    gpgpu.uploadMatrixToTexture(aTexture, aShape[0], aShape[1], a);
    gpgpu.uploadMatrixToTexture(bTexture, bShape[0], bShape[1], b);
    binaryOp(gpgpu, program, aTexture, aShape, bTexture, bShape, resultTexture, resultShape);
    var result = gpgpu.downloadMatrixFromTexture(resultTexture, resultShape[0], resultShape[1]);
    gpgpu.deleteMatrixTexture(aTexture);
    gpgpu.deleteMatrixTexture(bTexture);
    gpgpu.deleteMatrixTexture(resultTexture);
    gpgpu.deleteProgram(program);
    gpgpu.dispose();
    return result;
}
exports.uploadBinaryOpDownload = uploadBinaryOpDownload;

},{"./gpgpu_context":37}],32:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var conv_util = require("../conv_util");
function getFragmentShaderSource(x1ShapeRCD, x2ShapeRCD, resultShapeRCD, axis) {
    var x1TexShapeRC = conv_util.computeTexShapeFrom3D(x1ShapeRCD);
    var x2TexShapeRC = conv_util.computeTexShapeFrom3D(x2ShapeRCD);
    var yAxes = ['yR', 'yC', 'yD'];
    var concatAxis = yAxes[axis];
    return "\n    precision highp float;\n    uniform sampler2D x1;\n    uniform sampler2D x2;\n\n    const vec2 x1ShapeCR = vec2(" + x1TexShapeRC[1] + ", " + x1TexShapeRC[0] + ");\n    const vec2 x2ShapeCR = vec2(" + x2TexShapeRC[1] + ".0, " + x2TexShapeRC[0] + ".0);\n\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    void main() {\n      vec2 yTexCR = floor(gl_FragCoord.xy);\n\n      // Map from 2D (yTexR, yTexC) to 3D (yR, yC, yD).\n      float yR = yTexCR.y;\n      float yC = floor(yTexCR.x / " + resultShapeRCD[2] + ".0);\n      float yD = mod(yTexCR.x, " + resultShapeRCD[2] + ".0);\n\n      float value = 0.0;\n\n      if (" + concatAxis + " < " + x1ShapeRCD[axis] + ".0) {\n        // Map yR, yC, yD back to x1 coordinates.\n        vec2 x1CR = vec2(yC * " + x1ShapeRCD[2] + ".0 + yD, yR);\n        vec2 x1UV = (x1CR + halfCR) / x1ShapeCR;\n        value = texture2D(x1, x1UV).r;\n      } else {\n        " + concatAxis + " = " + concatAxis + " - " + x1ShapeRCD[axis] + ".0;\n\n        // Map yR, yC, yD back to x2 coordinates.\n        vec2 x2CR = vec2(yC * " + x2ShapeRCD[2] + ".0 + yD, yR);\n        vec2 x2UV = (x2CR + halfCR) / x2ShapeCR;\n        value = texture2D(x2, x2UV).r;\n      }\n\n      gl_FragColor = vec4(value, 0.0, 0.0, 0.0);\n    }";
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function concat3D(gpgpu, program, x1, x2, result, resultShapeRC) {
    gpgpu.setOutputMatrixTexture(result, resultShapeRC[0], resultShapeRC[1]);
    gpgpu.setProgram(program);
    gpgpu.setInputMatrixTexture(x1, 'x1', 0);
    gpgpu.setInputMatrixTexture(x2, 'x2', 1);
    gpgpu.executeProgram();
}
exports.concat3D = concat3D;

},{"../conv_util":18}],33:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var conv_util = require("../conv_util");
var conv_gpu = require("./conv_gpu");
function getFragmentShaderDerWeightsSource(xShapeRowColDepth, fSize, outputDepth, stride, zeroPad) {
    var getMatrixValueOrZeroPad = conv_gpu.getFragmentShaderGetMatrixValueOrZeroPadSource();
    var inputDepth = xShapeRowColDepth[2];
    var xTexShapeRC = conv_util.computeTexShapeFrom3D(xShapeRowColDepth);
    var yShape = conv_util.computeOutputShape3D(xShapeRowColDepth, fSize, outputDepth, stride, zeroPad);
    var yNumRows = yShape[0];
    var yNumCols = yShape[1];
    var yTexShapeRC = conv_util.computeTexShapeFrom3D(yShape);
    var fSizeTimesInputDepth = fSize * inputDepth;
    var prologue = "\n    precision highp float;\n    uniform sampler2D x;\n    uniform sampler2D dy;\n  ";
    return prologue + '\n' + getMatrixValueOrZeroPad + '\n' +
        ("\n    const vec2 halfCR = vec2(0.5, 0.5);\n    const vec2 xShapeCR = vec2(" + xTexShapeRC[1] + ", " + xTexShapeRC[0] + ");\n    const vec2 dyShapeCR = vec2(" + yTexShapeRC[1] + ", " + yTexShapeRC[0] + ");\n\n    void main() {\n      vec2 wTexCR = floor(gl_FragCoord.xy);\n\n      // Map from 2D (wTexR, wTexC) to 4D (wR, wC, d1, d2).\n      float wR = floor(wTexCR.y / " + fSizeTimesInputDepth + ".0);\n      float wTexRLeftover = wTexCR.y - wR * " + fSizeTimesInputDepth + ".0;\n      float wC = floor(wTexRLeftover / " + inputDepth + ".0);\n      float d1 = mod(wTexRLeftover, " + inputDepth + ".0);\n      float d2 = wTexCR.x;\n\n      // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n      // ? = to be determined. : = across all values in that axis.\n      float dotProd = 0.0;\n      for (float yR = 0.0; yR < " + yNumRows + ".0; yR += 1.0) {\n        float xR = wR + yR * " + stride + ".0 - " + zeroPad + ".0;\n        float xTexR = xR;\n        float yTexR = yR;\n        for (float yC = 0.0; yC < " + yNumCols + ".0; yC += 1.0) {\n          float xC = wC + yC * " + stride + ".0 - " + zeroPad + ".0;\n\n          // Map from 3D (xR, xC, d1) to 2D (xTexR, xTexC).\n          // Map from 3D (yR, yC, d2) to 2D (yTexR, yTexC).\n          vec2 xyTexC = vec2(xC, yC) * vec2(" + inputDepth + ".0, " + outputDepth + ".0) +\n                        vec2(d1, d2);\n          float xTexC = xyTexC.x;\n          float yTexC = xyTexC.y;\n\n          // Read dy(yR, yC, d2).\n          vec2 dyUV = (vec2(yTexC, yTexR) + halfCR) / dyShapeCR;\n          float dyValue = texture2D(dy, dyUV).r;\n\n          // Read x(xR, xC, d1) (potentially zero-padded).\n          float xValue =\n            getMatrixValueOrZeroPad(x, xShapeCR, vec2(xTexC, xTexR));\n\n          dotProd += (xValue * dyValue);\n        }\n      }\n      gl_FragColor = vec4(dotProd, 0, 0, 0);\n    }");
}
exports.getFragmentShaderDerWeightsSource = getFragmentShaderDerWeightsSource;
function getFragmentShaderConvTransposeSource(xShapeRCD, fSize, origInputDepth, origStride, origPad, hasBias) {
    var pad = fSize - 1 - origPad;
    var xRows = xShapeRCD[0], xCols = xShapeRCD[1], origOutputDepth = xShapeRCD[2];
    var xTexShapeRC = conv_util.computeTexShapeFrom3D(xShapeRCD);
    var wTexShapeRC = conv_util.computeWeightsTexShape(origInputDepth, origOutputDepth, fSize);
    var getBiasValue = hasBias ?
        conv_gpu.getFragmentShaderGetBiasValueSource(origInputDepth) :
        '';
    var biasPrologue = hasBias ? 'uniform sampler2D biases;' : '';
    var biasOperation = hasBias ? 'dotProd += getBiasValue(biases, d2);' : '';
    var prologue = "\n    precision highp float;\n    uniform sampler2D x;\n    uniform sampler2D weights;\n    " + biasPrologue + "\n    ";
    return prologue + '\n' + getBiasValue + '\n' +
        ("\n    const vec2 halfCR = vec2(0.5, 0.5);\n    const vec2 xShapeCR = vec2(" + xTexShapeRC[1] + ", " + xTexShapeRC[0] + ");\n    const vec2 wShapeCR = vec2(" + wTexShapeRC[1] + ", " + wTexShapeRC[0] + ");\n\n    void main() {\n      vec2 yTexCR = floor(gl_FragCoord.xy);\n\n      // Map from 2D (yTexR, yTexC) to 3D (yR, yC, d2).\n      float yR = yTexCR.y;\n      float yC = floor(yTexCR.x / " + origInputDepth + ".0);\n      float d2 = mod(yTexCR.x, " + origInputDepth + ".0);\n\n      vec2 xRCCorner = vec2(yR, yC) - vec2(" + pad + ".0, " + pad + ".0);\n      float xRCorner = xRCCorner.x;\n      float xCCorner = xRCCorner.y;\n\n      // Convolve x(?, ?, d1) with w(:, :, d2, d1) to get y(yR, yC, d2).\n      // ? = to be determined. : = across all values in that axis.\n      float dotProd = 0.0;\n      for (float wR = 0.0; wR < " + fSize + ".0; wR += 1.0) {\n\n        float xR = (xRCorner + wR) / " + origStride + ".0;\n        // TODO(smilkov): Splice this with another version where you call\n        // getMatrixValueOrZeroPad(). Here and below.\n        if (xR < 0.0 || xR >= " + xRows + ".0 || fract(xR) > 0.0) {\n          continue;\n        }\n\n        float wRPerm = " + fSize + ".0 - 1.0 - wR;\n        float xTexR = xR;\n\n        for (float wC = 0.0; wC < " + fSize + ".0; wC += 1.0) {\n\n          float xC = (xCCorner + wC) / " + origStride + ".0;\n          if (xC < 0.0 || xC >= " + xCols + ".0 || fract(xC) > 0.0) {\n            continue;\n          }\n\n          float wCPerm = " + fSize + ".0 - 1.0 - wC;\n          float wTexR = wRPerm * " + fSize + ".0 * " + origInputDepth + ".0 +\n                        wCPerm * " + origInputDepth + ".0 + d2;\n\n          for (float d1 = 0.0; d1 < " + origOutputDepth + ".0; d1 += 1.0) {\n            float xTexC = xC * " + origOutputDepth + ".0 + d1;\n            float wTexC = d1;\n\n            // Read x(xR, xC, d1).\n            vec2 xUV = (vec2(xTexC, xTexR) + halfCR) / xShapeCR;\n            float xValue = texture2D(x, xUV).r;\n\n            // Read w(wRPerm, wCPerm, d2, d1).\n            vec2 wUV = (vec2(wTexC, wTexR) + halfCR) / wShapeCR;\n            float wValue = texture2D(weights, wUV).r;\n\n            dotProd += xValue * wValue;\n          }\n        }\n      }\n      " + biasOperation + "\n      gl_FragColor = vec4(dotProd, 0, 0, 0);\n    }");
}
exports.getFragmentShaderConvTransposeSource = getFragmentShaderConvTransposeSource;
function getFragmentShaderDerBiasSource(dyShapeRCD) {
    var dyTexShapeRC = conv_util.computeTexShapeFrom3D(dyShapeRCD);
    var yNumRows = dyShapeRCD[0], yNumCols = dyShapeRCD[1], outputDepth = dyShapeRCD[2];
    return "\n    precision highp float;\n    uniform sampler2D dy;\n\n    const vec2 halfCR = vec2(0.5, 0.5);\n    const vec2 dyShapeCR = vec2(" + dyTexShapeRC[1] + ", " + dyTexShapeRC[0] + ");\n\n    void main() {\n      vec2 biasTexCR = floor(gl_FragCoord.xy);\n\n      // The bias texture RC shape is [1, d2].\n      float d2 = biasTexCR.x;\n\n      float derBias = 0.0;\n      for (float yR = 0.0; yR < " + yNumRows + ".0; yR += 1.0) {\n        float yTexR = yR;\n\n        for (float yC = 0.0; yC < " + yNumCols + ".0; yC += 1.0) {\n          // Map from 3D (yR, yC, d2) to 2D (yTexR, yTexC).\n          float yTexC = yC * " + outputDepth + ".0 + d2;\n\n          // Read dy(yR, yC, d2).\n          vec2 dyUV = (vec2(yTexC, yTexR) + halfCR) / dyShapeCR;\n          float dyValue = texture2D(dy, dyUV).r;\n\n          derBias += dyValue;\n        }\n      }\n      gl_FragColor = vec4(derBias, 0, 0, 0);\n    }";
}
exports.getFragmentShaderDerBiasSource = getFragmentShaderDerBiasSource;
function derBias(gpgpu, program, dyTex, result, resultTexShapeRC) {
    gpgpu.setOutputMatrixTexture(result, resultTexShapeRC[0], resultTexShapeRC[1]);
    gpgpu.setProgram(program);
    gpgpu.setInputMatrixTexture(dyTex, 'dy', 0);
    gpgpu.executeProgram();
}
exports.derBias = derBias;
function derWeights(gpgpu, program, xTex, dyTex, result, resultTexShapeRC) {
    gpgpu.setOutputMatrixTexture(result, resultTexShapeRC[0], resultTexShapeRC[1]);
    gpgpu.setProgram(program);
    gpgpu.setInputMatrixTexture(xTex, 'x', 0);
    gpgpu.setInputMatrixTexture(dyTex, 'dy', 1);
    gpgpu.executeProgram();
}
exports.derWeights = derWeights;
function convTranspose(gpgpu, program, xTex, weightsTex, biasesTex, resultTex, resultTexShapeRC) {
    gpgpu.setOutputMatrixTexture(resultTex, resultTexShapeRC[0], resultTexShapeRC[1]);
    gpgpu.setProgram(program);
    gpgpu.setInputMatrixTexture(xTex, 'x', 0);
    gpgpu.setInputMatrixTexture(weightsTex, 'weights', 1);
    if (biasesTex != null) {
        gpgpu.setInputMatrixTexture(biasesTex, 'biases', 2);
    }
    gpgpu.executeProgram();
}
exports.convTranspose = convTranspose;

},{"../conv_util":18,"./conv_gpu":34}],34:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var conv_util = require("../conv_util");
function getFragmentShaderPrologueSource() {
    return "\n    precision highp float;\n    uniform sampler2D x;\n    uniform sampler2D weights;\n    uniform sampler2D biases;\n    varying vec2 resultUV;";
}
exports.getFragmentShaderPrologueSource = getFragmentShaderPrologueSource;
function getFragmentShaderGetMatrixValueOrZeroPadSource() {
    return "\n    float getMatrixValueOrZeroPad(in sampler2D matrix, vec2 matrixShapeCR,\n        vec2 requestedCR) {\n      vec2 uv = (requestedCR + vec2(0.5, 0.5)) / matrixShapeCR;\n      float value = texture2D(matrix, uv).r;\n      bool lessThanZero = any(lessThan(uv, vec2(0, 0)));\n      bool greaterThanOne = any(greaterThan(uv, vec2(1, 1)));\n      bool outside = lessThanZero || greaterThanOne;\n      return mix(value, 0.0, float(outside));\n    }";
}
exports.getFragmentShaderGetMatrixValueOrZeroPadSource = getFragmentShaderGetMatrixValueOrZeroPadSource;
function getFragmentShaderConvolveSource(xShapeRCD, fSize, outputDepth, stride, pad, hasBias) {
    var xRows = xShapeRCD[0], xCols = xShapeRCD[1], inputDepth = xShapeRCD[2];
    var xTexShapeRC = conv_util.computeTexShapeFrom3D(xShapeRCD);
    var wTexShapeRC = conv_util.computeWeightsTexShape(inputDepth, outputDepth, fSize);
    return "\n    const vec2 halfCR = vec2(0.5, 0.5);\n    const vec2 xShapeCR = vec2(" + xTexShapeRC[1] + ", " + xTexShapeRC[0] + ");\n    const vec2 wShapeCR = vec2(" + wTexShapeRC[1] + ", " + wTexShapeRC[0] + ");\n\n    void main() {\n      vec2 yTexCR = floor(gl_FragCoord.xy);\n\n      // Map from 2D (yTexR, yTexC) to 3D (yR, yC, d2).\n      float yR = yTexCR.y;\n      float yC = floor(yTexCR.x / " + outputDepth + ".0);\n      float d2 = mod(yTexCR.x, " + outputDepth + ".0);\n      float wTexC = d2;\n\n      vec2 xRCCorner = vec2(yR, yC) * vec2(" + stride + ", " + stride + ") -\n          vec2(" + pad + ".0, " + pad + ".0);\n      float xRCorner = xRCCorner.x;\n      float xCCorner = xRCCorner.y;\n\n      // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n      // ? = to be determined. : = across all values in that axis.\n      float dotProd = 0.0;\n      for (float wR = 0.0; wR < " + fSize + ".0; wR += 1.0) {\n        float xR = xRCorner + wR;\n        float xTexR = xR;\n\n        for (float wC = 0.0; wC < " + fSize + ".0; wC += 1.0) {\n          float xC = xCCorner + wC;\n\n          for (float d1 = 0.0; d1 < " + inputDepth + ".0; d1 += 1.0) {\n            float xTexC = xC * " + inputDepth + ".0 + d1;\n            float wTexR = wR * " + fSize * inputDepth + ".0 +\n                wC * " + inputDepth + ".0 + d1;\n\n            float xValue =\n                getMatrixValueOrZeroPad(x, xShapeCR, vec2(xTexC, xTexR));\n\n            // Read w(wR, wC, d1, d2).\n            vec2 wUV = (vec2(wTexC, wTexR) + halfCR) / wShapeCR;\n            float wValue = texture2D(weights, wUV).r;\n\n            dotProd += xValue * wValue;\n          }\n        }\n      }\n      if (" + hasBias + ") {\n        dotProd += getBiasValue(biases, d2);\n      }\n      gl_FragColor = vec4(dotProd, 0, 0, 0);\n    }";
}
exports.getFragmentShaderConvolveSource = getFragmentShaderConvolveSource;
function getFragmentShaderGetBiasValueSource(outputDepth) {
    return "\n    float getBiasValue(in sampler2D bias, float biasC) {\n      const vec2 biasShapeCR = vec2(" + outputDepth + ", 1);\n      vec2 biasCR = vec2(mod(biasC, " + outputDepth + ".0), 0);\n      vec2 biasUV = (biasCR + vec2(0.5, 0.5)) / biasShapeCR;\n      return texture2D(bias, biasUV).r;\n    }";
}
exports.getFragmentShaderGetBiasValueSource = getFragmentShaderGetBiasValueSource;
function getFragmentShaderSource(aShapeRowColDepth, resultDepth, fieldSize, stride, zeroPad, hasBias) {
    var aShapeRC = conv_util.computeTexShapeFrom3D(aShapeRowColDepth);
    var weightShapeRC = conv_util.computeWeightsTexShape(aShapeRowColDepth[2], resultDepth, fieldSize);
    var prologue = getFragmentShaderPrologueSource();
    var getMatrixValueOrZeroPad = getFragmentShaderGetMatrixValueOrZeroPadSource();
    var convolve = getFragmentShaderConvolveSource(aShapeRowColDepth, fieldSize, resultDepth, stride, zeroPad, hasBias);
    var getBiasValue = getFragmentShaderGetBiasValueSource(resultDepth);
    return [
        prologue,
        getMatrixValueOrZeroPad,
        getBiasValue,
        convolve,
    ].join('\n');
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function convolve(gpgpu, program, a, weights, biases, result, resultShapeRowCol) {
    gpgpu.setOutputMatrixTexture(result, resultShapeRowCol[0], resultShapeRowCol[1]);
    gpgpu.setProgram(program);
    gpgpu.setInputMatrixTexture(a, 'x', 0);
    gpgpu.setInputMatrixTexture(weights, 'weights', 1);
    if (biases != null) {
        gpgpu.setInputMatrixTexture(biases, 'biases', 2);
    }
    gpgpu.executeProgram();
}
exports.convolve = convolve;

},{"../conv_util":18}],35:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function getFragmentShaderSource(sourceShapeRowCol, sourceSizeRowCol, destSizeRowCol) {
    return "\n    precision highp float;\n    uniform sampler2D source;\n    uniform vec2 sourceStartCR;\n    uniform vec2 destStartCR;\n\n    const vec2 sourceShapeCR =\n      vec2(" + sourceShapeRowCol[1] + ", " + sourceShapeRowCol[0] + ");\n    const vec2 sourceSizeCR =\n      vec2(" + sourceSizeRowCol[1] + ", " + sourceSizeRowCol[0] + ");\n    const vec2 destSizeCR =\n      vec2(" + destSizeRowCol[1] + ", " + destSizeRowCol[0] + ");\n\n    void main() {\n      vec2 destOffsetCR = floor(gl_FragCoord.xy) - destStartCR;\n      float destOffsetFlat = (destOffsetCR.y * destSizeCR.x) + destOffsetCR.x;\n      vec2 sourceOffsetCR = vec2(mod(destOffsetFlat, sourceSizeCR.x),\n        floor(destOffsetFlat / sourceSizeCR.x));\n      vec2 sourceCR = sourceStartCR + sourceOffsetCR;\n      vec2 sourceUV = (sourceCR + vec2(0.5, 0.5)) / sourceShapeCR;\n      gl_FragColor = texture2D(source, sourceUV);\n    }";
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function copy(gpgpu, program, source, sourceShapeRowCol, sourceStartRowCol, sourceSizeRowCol, dest, destShapeRowCol, destStartRowCol, destSizeRowCol) {
    gpgpu.setOutputMatrixTexture(dest, destShapeRowCol[0], destShapeRowCol[1]);
    gpgpu.setOutputMatrixWriteRegion(destStartRowCol[0], destSizeRowCol[0], destStartRowCol[1], destSizeRowCol[1]);
    gpgpu.setProgram(program);
    gpgpu.setInputMatrixTexture(source, 'source', 0);
    var sourceStartCRLoc = gpgpu.getUniformLocation('sourceStartCR');
    gpgpu.gl.uniform2f(sourceStartCRLoc, sourceStartRowCol[1], sourceStartRowCol[0]);
    var destStartCRLoc = gpgpu.getUniformLocation('destStartCR');
    gpgpu.gl.uniform2f(destStartCRLoc, destStartRowCol[1], destStartRowCol[0]);
    gpgpu.executeProgram();
}
exports.copy = copy;

},{}],36:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var unaryop_gpu = require("./unaryop_gpu");
function getExpUnaryOp() {
    return 'gl_FragColor = vec4(exp(value), 0, 0, 0);';
}
function getFragmentShaderSource() {
    return unaryop_gpu.getFragmentShaderSource(getExpUnaryOp());
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function exp(gpgpu, expProgram, a, rows, columns, result) {
    unaryop_gpu.unaryOp(gpgpu, expProgram, a, rows, columns, result);
}
exports.exp = exp;
function uploadExpDownload(a, rows, columns) {
    return unaryop_gpu.uploadUnaryOpDownload(a, rows, columns, getExpUnaryOp());
}
exports.uploadExpDownload = uploadExpDownload;

},{"./unaryop_gpu":59}],37:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var gpgpu_util = require("./gpgpu_util");
var tex_util = require("./tex_util");
var webgl_util = require("./webgl_util");
var GPGPUContext = (function () {
    function GPGPUContext(gl) {
        this.outputTexture = null;
        this.program = null;
        this.disposed = false;
        this.autoDebugValidate = false;
        if (gl != null) {
            this.gl = gl;
        }
        else {
            this.gl = gpgpu_util.createWebGLContext();
        }
        if (!webgl_util.isWebGL2Enabled()) {
            this.textureFloatExtension =
                webgl_util.getExtensionOrThrow(this.gl, 'OES_texture_float');
        }
        else {
            this.colorBufferFloatExtension =
                webgl_util.getExtensionOrThrow(this.gl, 'EXT_color_buffer_float');
        }
        this.loseContextExtension =
            webgl_util.getExtensionOrThrow(this.gl, 'WEBGL_lose_context');
        this.vertexBuffer = gpgpu_util.createVertexBuffer(this.gl);
        this.indexBuffer = gpgpu_util.createIndexBuffer(this.gl);
        this.framebuffer = webgl_util.createFramebuffer(this.gl);
    }
    GPGPUContext.prototype.dispose = function () {
        var _this = this;
        this.throwIfDisposed();
        if (this.program != null) {
            console.warn('Disposing a GPGPUContext that still has a bound WebGLProgram.' +
                ' This is probably a resource leak, delete the program with ' +
                'GPGPUContext.deleteProgram before disposing.');
        }
        if (this.outputTexture != null) {
            console.warn('Disposing a GPGPUContext that still has a bound output matrix ' +
                'texture.  This is probably a resource leak, delete the output ' +
                'matrix texture with GPGPUContext.deleteMatrixTexture before ' +
                'disposing.');
        }
        var gl = this.gl;
        webgl_util.callAndCheck(gl, function () { return gl.finish(); });
        webgl_util.callAndCheck(gl, function () { return gl.bindFramebuffer(gl.FRAMEBUFFER, null); });
        webgl_util.callAndCheck(gl, function () { return gl.deleteFramebuffer(_this.framebuffer); });
        webgl_util.callAndCheck(gl, function () { return gl.bindBuffer(gl.ARRAY_BUFFER, null); });
        webgl_util.callAndCheck(gl, function () { return gl.deleteBuffer(_this.vertexBuffer); });
        webgl_util.callAndCheck(gl, function () { return gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null); });
        webgl_util.callAndCheck(gl, function () { return gl.deleteBuffer(_this.indexBuffer); });
        this.loseContextExtension.loseContext();
        this.disposed = true;
    };
    GPGPUContext.prototype.enableAutomaticDebugValidation = function (enabled) {
        this.autoDebugValidate = enabled;
        webgl_util.enableDebugWebGLErrorChecking(enabled);
    };
    GPGPUContext.prototype.createMatrixTexture = function (rows, columns) {
        this.throwIfDisposed();
        return gpgpu_util.createMatrixTexture(this.gl, rows, columns);
    };
    GPGPUContext.prototype.uploadPixelDataToTexture = function (texture, pixels) {
        this.throwIfDisposed();
        gpgpu_util.uploadPixelDataToTexture(this.gl, texture, pixels);
    };
    GPGPUContext.prototype.createPackedMatrixTexture = function (rows, columns) {
        this.throwIfDisposed();
        return gpgpu_util.createPackedMatrixTexture(this.gl, rows, columns);
    };
    GPGPUContext.prototype.deleteMatrixTexture = function (texture) {
        var _this = this;
        this.throwIfDisposed();
        if (this.outputTexture === texture) {
            webgl_util.unbindColorTextureFromFramebuffer(this.gl, this.framebuffer);
            this.outputTexture = null;
        }
        webgl_util.callAndCheck(this.gl, function () { return _this.gl.deleteTexture(texture); });
    };
    GPGPUContext.prototype.uploadMatrixToTexture = function (texture, rows, columns, matrix) {
        this.throwIfDisposed();
        var numChannels = 1;
        return gpgpu_util.uploadMatrixToTexture(this.gl, texture, rows, columns, matrix, numChannels);
    };
    GPGPUContext.prototype.uploadMatrixToPackedTexture = function (texture, rows, columns, matrix) {
        this.throwIfDisposed();
        return gpgpu_util.uploadMatrixToPackedTexture(this.gl, texture, rows, columns, matrix);
    };
    GPGPUContext.prototype.downloadMatrixFromTexture = function (texture, rows, columns) {
        var _this = this;
        return this.downloadMatrixDriver(texture, function () {
            return gpgpu_util.downloadMatrixFromOutputTexture(_this.gl, rows, columns);
        });
    };
    GPGPUContext.prototype.downloadMatrixFromPackedTexture = function (texture, rows, columns) {
        var _this = this;
        return this.downloadMatrixDriver(texture, function () { return gpgpu_util.downloadMatrixFromPackedOutputTexture(_this.gl, rows, columns); });
    };
    GPGPUContext.prototype.createProgram = function (fragmentShaderSource) {
        this.throwIfDisposed();
        var gl = this.gl;
        var fragmentShader = webgl_util.createFragmentShader(gl, fragmentShaderSource);
        var vertexShader = gpgpu_util.createVertexShader(gl);
        var program = webgl_util.createProgram(gl);
        webgl_util.callAndCheck(gl, function () { return gl.attachShader(program, vertexShader); });
        webgl_util.callAndCheck(gl, function () { return gl.attachShader(program, fragmentShader); });
        webgl_util.linkProgram(gl, program);
        if (this.autoDebugValidate) {
            webgl_util.validateProgram(gl, program);
        }
        webgl_util.callAndCheck(gl, function () { return gl.detachShader(program, vertexShader); });
        webgl_util.callAndCheck(gl, function () { return gl.deleteShader(vertexShader); });
        webgl_util.callAndCheck(gl, function () { return gl.detachShader(program, fragmentShader); });
        webgl_util.callAndCheck(gl, function () { return gl.deleteShader(fragmentShader); });
        return program;
    };
    GPGPUContext.prototype.deleteProgram = function (program) {
        var _this = this;
        this.throwIfDisposed();
        if (program === this.program) {
            this.program = null;
        }
        if (program != null) {
            webgl_util.callAndCheck(this.gl, function () { return _this.gl.deleteProgram(program); });
        }
    };
    GPGPUContext.prototype.setProgram = function (program) {
        var _this = this;
        this.throwIfDisposed();
        this.program = program;
        if ((this.program != null) && this.autoDebugValidate) {
            webgl_util.validateProgram(this.gl, this.program);
        }
        webgl_util.callAndCheck(this.gl, function () { return _this.gl.useProgram(program); });
    };
    GPGPUContext.prototype.getUniformLocation = function (uniformName) {
        this.throwIfDisposed();
        this.throwIfNoProgram();
        return webgl_util.getProgramUniformLocationOrThrow(this.gl, this.program, uniformName);
    };
    GPGPUContext.prototype.setInputMatrixTexture = function (inputMatrixTexture, uniformName, textureUnit) {
        this.throwIfDisposed();
        this.throwIfNoProgram();
        webgl_util.bindTextureToProgramUniformSampler(this.gl, this.program, inputMatrixTexture, uniformName, textureUnit);
    };
    GPGPUContext.prototype.setOutputMatrixTexture = function (outputMatrixTexture, rows, columns) {
        this.setOutputMatrixTextureDriver(outputMatrixTexture, columns, rows);
    };
    GPGPUContext.prototype.setOutputPackedMatrixTexture = function (outputPackedMatrixTexture, rows, columns) {
        this.throwIfDisposed();
        var _a = tex_util.getPackedMatrixTextureShapeWidthHeight(rows, columns), width = _a[0], height = _a[1];
        this.setOutputMatrixTextureDriver(outputPackedMatrixTexture, width, height);
    };
    GPGPUContext.prototype.setOutputMatrixWriteRegion = function (startRow, numRows, startColumn, numColumns) {
        this.setOutputMatrixWriteRegionDriver(startColumn, startRow, numColumns, numRows);
    };
    GPGPUContext.prototype.setOutputPackedMatrixWriteRegion = function (startRow, numRows, startColumn, numColumns) {
        throw new Error('setOutputPackedMatrixWriteRegion not implemented.');
    };
    GPGPUContext.prototype.debugValidate = function () {
        if (this.program != null) {
            webgl_util.validateProgram(this.gl, this.program);
        }
        webgl_util.validateFramebuffer(this.gl);
    };
    GPGPUContext.prototype.executeProgram = function () {
        this.throwIfDisposed();
        this.throwIfNoProgram();
        var gl = this.gl;
        gpgpu_util.bindVertexProgramAttributeStreams(gl, this.program, this.vertexBuffer);
        if (this.autoDebugValidate) {
            this.debugValidate();
        }
        webgl_util.callAndCheck(gl, function () { return gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0); });
    };
    GPGPUContext.prototype.blockUntilAllProgramsCompleted = function () {
        var _this = this;
        this.throwIfDisposed();
        webgl_util.callAndCheck(this.gl, function () { return _this.gl.finish(); });
    };
    GPGPUContext.prototype.downloadMatrixDriver = function (texture, downloadAndDecode) {
        this.throwIfDisposed();
        webgl_util.bindColorTextureToFramebuffer(this.gl, texture, this.framebuffer);
        var result = downloadAndDecode();
        if (this.outputTexture != null) {
            webgl_util.bindColorTextureToFramebuffer(this.gl, this.outputTexture, this.framebuffer);
            if (this.autoDebugValidate) {
                webgl_util.validateFramebuffer(this.gl);
            }
        }
        else {
            webgl_util.unbindColorTextureFromFramebuffer(this.gl, this.framebuffer);
        }
        return result;
    };
    GPGPUContext.prototype.setOutputMatrixTextureDriver = function (outputMatrixTextureMaybePacked, width, height) {
        this.throwIfDisposed();
        var gl = this.gl;
        webgl_util.bindColorTextureToFramebuffer(gl, outputMatrixTextureMaybePacked, this.framebuffer);
        if (this.autoDebugValidate) {
            webgl_util.validateFramebuffer(gl);
        }
        this.outputTexture = outputMatrixTextureMaybePacked;
        webgl_util.callAndCheck(gl, function () { return gl.viewport(0, 0, width, height); });
        webgl_util.callAndCheck(gl, function () { return gl.scissor(0, 0, width, height); });
    };
    GPGPUContext.prototype.setOutputMatrixWriteRegionDriver = function (x, y, width, height) {
        var _this = this;
        this.throwIfDisposed();
        webgl_util.callAndCheck(this.gl, function () { return _this.gl.scissor(x, y, width, height); });
    };
    GPGPUContext.prototype.throwIfDisposed = function () {
        if (this.disposed) {
            throw new Error('Attempted to use disposed GPGPUContext.');
        }
    };
    GPGPUContext.prototype.throwIfNoProgram = function () {
        if (this.program == null) {
            throw new Error('No GPU program is currently set.');
        }
    };
    return GPGPUContext;
}());
exports.GPGPUContext = GPGPUContext;

},{"./gpgpu_util":38,"./tex_util":56,"./webgl_util":60}],38:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tex_util = require("./tex_util");
var webgl_util = require("./webgl_util");
function getWebGLContextAttributes() {
    return {
        alpha: false,
        antialias: false,
        premultipliedAlpha: false,
        preserveDrawingBuffer: false,
        depth: false,
        stencil: false,
        failIfMajorPerformanceCaveat: true
    };
}
exports.getWebGLContextAttributes = getWebGLContextAttributes;
function createWebGLContext(canvas) {
    var attributes = getWebGLContextAttributes();
    var gl;
    if (canvas != null) {
        gl = webgl_util.createWebGLRenderingContextFromCanvas(canvas, attributes);
    }
    else {
        gl = webgl_util.createWebGLRenderingContext(attributes);
    }
    webgl_util.callAndCheck(gl, function () { return gl.disable(gl.DEPTH_TEST); });
    webgl_util.callAndCheck(gl, function () { return gl.disable(gl.STENCIL_TEST); });
    webgl_util.callAndCheck(gl, function () { return gl.disable(gl.BLEND); });
    webgl_util.callAndCheck(gl, function () { return gl.disable(gl.DITHER); });
    webgl_util.callAndCheck(gl, function () { return gl.disable(gl.POLYGON_OFFSET_FILL); });
    webgl_util.callAndCheck(gl, function () { return gl.disable(gl.SAMPLE_COVERAGE); });
    webgl_util.callAndCheck(gl, function () { return gl.enable(gl.SCISSOR_TEST); });
    webgl_util.callAndCheck(gl, function () { return gl.enable(gl.CULL_FACE); });
    webgl_util.callAndCheck(gl, function () { return gl.cullFace(gl.BACK); });
    return gl;
}
exports.createWebGLContext = createWebGLContext;
function createVertexShader(gl) {
    var vertexShaderSource = "\n    precision highp float;\n    attribute vec3 clipSpacePos;\n    attribute vec2 uv;\n    varying vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }";
    return webgl_util.createVertexShader(gl, vertexShaderSource);
}
exports.createVertexShader = createVertexShader;
function createVertexBuffer(gl) {
    var vertexArray = new Float32Array([-1, 1, 0, 0, 1, -1, -1, 0, 0, 0, 1, 1, 0, 1, 1, 1, -1, 0, 1, 0]);
    return webgl_util.createStaticVertexBuffer(gl, vertexArray);
}
exports.createVertexBuffer = createVertexBuffer;
function createIndexBuffer(gl) {
    var triangleVertexIndices = new Uint16Array([0, 1, 2, 2, 1, 3]);
    return webgl_util.createStaticIndexBuffer(gl, triangleVertexIndices);
}
exports.createIndexBuffer = createIndexBuffer;
function getTextureInternalFormat(gl, numChannels) {
    if (webgl_util.isWebGL2Enabled()) {
        if (numChannels === 4) {
            return gl.RGBA32F;
        }
        return gl.R32F;
    }
    return gl.RGBA;
}
function getTextureFormat(gl, numChannels) {
    if (webgl_util.isWebGL2Enabled() && numChannels === 1) {
        return gl.RED;
    }
    return gl.RGBA;
}
function createAndConfigureTexture(gl, width, height, numChannels) {
    webgl_util.validateTextureSize(gl, width, height);
    var texture = webgl_util.createTexture(gl);
    var tex2d = gl.TEXTURE_2D;
    var internalFormat = getTextureInternalFormat(gl, numChannels);
    var format = getTextureFormat(gl, numChannels);
    webgl_util.callAndCheck(gl, function () { return gl.bindTexture(tex2d, texture); });
    webgl_util.callAndCheck(gl, function () { return gl.texParameteri(tex2d, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE); });
    webgl_util.callAndCheck(gl, function () { return gl.texParameteri(tex2d, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE); });
    webgl_util.callAndCheck(gl, function () { return gl.texParameteri(tex2d, gl.TEXTURE_MIN_FILTER, gl.NEAREST); });
    webgl_util.callAndCheck(gl, function () { return gl.texParameteri(tex2d, gl.TEXTURE_MAG_FILTER, gl.NEAREST); });
    webgl_util.callAndCheck(gl, function () { return gl.texImage2D(tex2d, 0, internalFormat, width, height, 0, format, gl.FLOAT, null); });
    webgl_util.callAndCheck(gl, function () { return gl.bindTexture(gl.TEXTURE_2D, null); });
    return texture;
}
function createMatrixTexture(gl, rows, columns) {
    var _a = tex_util.getUnpackedMatrixTextureShapeWidthHeight(rows, columns), width = _a[0], height = _a[1];
    var numChannels = 1;
    return createAndConfigureTexture(gl, width, height, numChannels);
}
exports.createMatrixTexture = createMatrixTexture;
function createColorMatrixTexture(gl, rows, columns) {
    var _a = tex_util.getColorMatrixTextureShapeWidthHeight(rows, columns), width = _a[0], height = _a[1];
    var numChannels = 4;
    return createAndConfigureTexture(gl, width, height, numChannels);
}
exports.createColorMatrixTexture = createColorMatrixTexture;
function createPackedMatrixTexture(gl, rows, columns) {
    var _a = tex_util.getPackedMatrixTextureShapeWidthHeight(rows, columns), width = _a[0], height = _a[1];
    var numChannels = 4;
    return createAndConfigureTexture(gl, width, height, numChannels);
}
exports.createPackedMatrixTexture = createPackedMatrixTexture;
function bindVertexProgramAttributeStreams(gl, program, vertexBuffer) {
    var posOffset = 0;
    var uvOffset = 3 * 4;
    var stride = (3 * 4) + (2 * 4);
    webgl_util.callAndCheck(gl, function () { return gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer); });
    webgl_util.bindVertexBufferToProgramAttribute(gl, program, 'clipSpacePos', vertexBuffer, 3, stride, posOffset);
    try {
        webgl_util.bindVertexBufferToProgramAttribute(gl, program, 'uv', vertexBuffer, 2, stride, uvOffset);
    }
    catch (e) {
        if (!e.hasOwnProperty('namedVertexAttributeNotFound')) {
            throw e;
        }
    }
}
exports.bindVertexProgramAttributeStreams = bindVertexProgramAttributeStreams;
function uploadPixelDataToTexture(gl, texture, pixels) {
    var numChannels = 4;
    var internalFormat = getTextureInternalFormat(gl, numChannels);
    webgl_util.callAndCheck(gl, function () { return gl.bindTexture(gl.TEXTURE_2D, texture); });
    webgl_util.callAndCheck(gl, function () { return gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, gl.RGBA, gl.FLOAT, pixels); });
    webgl_util.callAndCheck(gl, function () { return gl.bindTexture(gl.TEXTURE_2D, null); });
}
exports.uploadPixelDataToTexture = uploadPixelDataToTexture;
function uploadDataToTexture(gl, texture, width, height, data, numChannels) {
    var textureFormat = getTextureFormat(gl, numChannels);
    webgl_util.validateTextureSize(gl, width, height);
    webgl_util.callAndCheck(gl, function () { return gl.bindTexture(gl.TEXTURE_2D, texture); });
    webgl_util.callAndCheck(gl, function () { return gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, width, height, textureFormat, gl.FLOAT, data); });
    webgl_util.callAndCheck(gl, function () { return gl.bindTexture(gl.TEXTURE_2D, null); });
}
function uploadMatrixToTexture(gl, texture, rows, columns, matrix, numChannels) {
    var _a = tex_util.getUnpackedMatrixTextureShapeWidthHeight(rows, columns), w = _a[0], h = _a[1];
    var channelsPerTexture = numChannels === 1 ? webgl_util.getChannelsPerTexture() : numChannels;
    var unpackedArray = new Float32Array(tex_util.getUnpackedArraySizeFromMatrixSize(matrix.length, channelsPerTexture));
    tex_util.encodeMatrixToUnpackedArray(matrix, unpackedArray, channelsPerTexture);
    uploadDataToTexture(gl, texture, w, h, unpackedArray, numChannels);
}
exports.uploadMatrixToTexture = uploadMatrixToTexture;
function uploadMatrixToPackedTexture(gl, texture, rows, columns, matrix) {
    var _a = tex_util.getPackedMatrixTextureShapeWidthHeight(rows, columns), w = _a[0], h = _a[1];
    var packedRGBA = new Float32Array(tex_util.getPackedRGBAArraySizeFromMatrixShape(rows, columns));
    tex_util.encodeMatrixToPackedRGBA(matrix, rows, columns, packedRGBA);
    var numChannels = 4;
    uploadDataToTexture(gl, texture, w, h, packedRGBA, numChannels);
}
exports.uploadMatrixToPackedTexture = uploadMatrixToPackedTexture;
function downloadMatrixFromOutputTexture(gl, rows, columns) {
    var _a = tex_util.getUnpackedMatrixTextureShapeWidthHeight(rows, columns), w = _a[0], h = _a[1];
    var channelsPerTexture = 4;
    var unpackedArray = new Float32Array(tex_util.getUnpackedArraySizeFromMatrixSize(rows * columns, channelsPerTexture));
    var textureFormat = getTextureFormat(gl, channelsPerTexture);
    webgl_util.callAndCheck(gl, function () { return gl.readPixels(0, 0, w, h, gl.RGBA, gl.FLOAT, unpackedArray); });
    var matrix = new Float32Array(rows * columns);
    tex_util.decodeMatrixFromUnpackedArray(unpackedArray, matrix, channelsPerTexture);
    return matrix;
}
exports.downloadMatrixFromOutputTexture = downloadMatrixFromOutputTexture;
function downloadMatrixFromPackedOutputTexture(gl, rows, columns) {
    var _a = tex_util.getPackedMatrixTextureShapeWidthHeight(rows, columns), w = _a[0], h = _a[1];
    var packedRGBA = new Float32Array(tex_util.getPackedRGBAArraySizeFromMatrixShape(rows, columns));
    webgl_util.callAndCheck(gl, function () { return gl.readPixels(0, 0, w, h, gl.RGBA, gl.FLOAT, packedRGBA); });
    var matrix = new Float32Array(rows * columns);
    return tex_util.decodeMatrixFromPackedRGBA(packedRGBA, rows, columns, matrix);
}
exports.downloadMatrixFromPackedOutputTexture = downloadMatrixFromPackedOutputTexture;

},{"./tex_util":56,"./webgl_util":60}],39:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var unaryop_gpu = require("./unaryop_gpu");
function getLogUnaryOp() {
    return 'gl_FragColor = vec4(log(value), 0, 0, 0);';
}
function getFragmentShaderSource() {
    return unaryop_gpu.getFragmentShaderSource(getLogUnaryOp());
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function log(gpgpu, logProgram, a, rows, columns, result) {
    unaryop_gpu.unaryOp(gpgpu, logProgram, a, rows, columns, result);
}
exports.log = log;
function uploadLogDownload(a, rows, columns) {
    return unaryop_gpu.uploadUnaryOpDownload(a, rows, columns, getLogUnaryOp());
}
exports.uploadLogDownload = uploadLogDownload;

},{"./unaryop_gpu":59}],40:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var gpgpu_context_1 = require("./gpgpu_context");
function getFragmentShaderSource(rows, columns) {
    return "\n    precision highp float;\n    uniform sampler2D matrixA;\n    varying vec2 resultUV;\n\n    const vec2 aDimCR = vec2(" + columns + ".0, " + rows + ".0);\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    void main() {\n      float aMax = texture2D(matrixA, halfCR / aDimCR).r;\n      for (float r = 0.0; r < aDimCR.y; r += 1.0) {\n        for (float c = 0.0; c < aDimCR.x; c += 1.0) {\n          vec2 uv = (vec2(c, r) + halfCR) / aDimCR;\n          float aCur = texture2D(matrixA, uv).r;\n          aMax = max(aMax, aCur);\n        }\n      }\n\n      float expSum = 0.0;\n      for (float r = 0.0; r < aDimCR.y; r += 1.0) {\n        for (float c = 0.0; c < aDimCR.x; c += 1.0) {\n          vec2 uv = (vec2(c, r) + halfCR) / aDimCR;\n          float aCur = texture2D(matrixA, uv).r;\n          expSum += exp(aCur - aMax);\n        }\n      }\n\n      gl_FragColor = vec4(aMax + log(expSum), 0, 0, 0);\n    }";
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function logSumExp(gpgpu, logSumExpProgram, a, rows, columns, result) {
    gpgpu.setOutputMatrixTexture(result, 1, 1);
    gpgpu.setProgram(logSumExpProgram);
    gpgpu.setInputMatrixTexture(a, 'matrixA', 0);
    gpgpu.executeProgram();
}
exports.logSumExp = logSumExp;
function uploadLogSumExpDownload(a, rows, columns) {
    var gpgpu = new gpgpu_context_1.GPGPUContext();
    var program = gpgpu.createProgram(getFragmentShaderSource(rows, columns));
    var aTexture = gpgpu.createMatrixTexture(rows, columns);
    var resultTexture = gpgpu.createMatrixTexture(1, 1);
    gpgpu.uploadMatrixToTexture(aTexture, rows, columns, a);
    logSumExp(gpgpu, program, aTexture, rows, columns, resultTexture);
    var result = gpgpu.downloadMatrixFromTexture(resultTexture, 1, 1);
    gpgpu.deleteMatrixTexture(aTexture);
    gpgpu.deleteMatrixTexture(resultTexture);
    gpgpu.deleteProgram(program);
    gpgpu.dispose();
    return result[0];
}
exports.uploadLogSumExpDownload = uploadLogSumExpDownload;

},{"./gpgpu_context":37}],41:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var conv_util = require("../conv_util");
function getFragmentShaderMaxPoolBackprop(dyShapeRCD, fSize, origStride, origPad) {
    var origInputDepth = dyShapeRCD[2];
    var pad = fSize - 1 - origPad;
    var dyRows = dyShapeRCD[0], dyCols = dyShapeRCD[1], depth = dyShapeRCD[2];
    var dyTexShapeRC = conv_util.computeTexShapeFrom3D(dyShapeRCD);
    return "\n    precision highp float;\n    uniform sampler2D dy;\n    uniform sampler2D maxPos;\n\n    const vec2 halfCR = vec2(0.5, 0.5);\n    const vec2 dyShapeCR = vec2(" + dyTexShapeRC[1] + ", " + dyTexShapeRC[0] + ");\n\n    void main() {\n      vec2 dxTexCR = floor(gl_FragCoord.xy);\n\n      // Map from 2D (dxTexR, dxTexC) to 3D (dxR, dxC, d).\n      float dxR = dxTexCR.y;\n      float dxC = floor(dxTexCR.x / " + origInputDepth + ".0);\n      float d = mod(dxTexCR.x, " + origInputDepth + ".0);\n\n      vec2 dyRCCorner = vec2(dxR, dxC) - vec2(" + pad + ".0, " + pad + ".0);\n      float dyRCorner = dyRCCorner.x;\n      float dyCCorner = dyRCCorner.y;\n\n      // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(yR, dxC, d).\n      // ? = to be determined. : = across all values in that axis.\n      float dotProd = 0.0;\n      for (float wR = 0.0; wR < " + fSize + ".0; wR += 1.0) {\n\n        float dyR = (dyRCorner + wR) / " + origStride + ".0;\n        // TODO(nsthorat): Splice this with another version where you call\n        // getMatrixValueOrZeroPad(). Here and below.\n        if (dyR < 0.0 || dyR >= " + dyRows + ".0 || fract(dyR) > 0.0) {\n          continue;\n        }\n\n        float dyTexR = dyR;\n\n        for (float wC = 0.0; wC < " + fSize + ".0; wC += 1.0) {\n\n          float dyC = (dyCCorner + wC) / " + origStride + ".0;\n          if (dyC < 0.0 || dyC >= " + dyCols + ".0 || fract(dyC) > 0.0) {\n            continue;\n          }\n\n          float dyTexC = dyC * " + depth + ".0 + d;\n\n          // Read dy(dyR, dyC, d).\n          vec2 dyUV = (vec2(dyTexC, dyTexR) + halfCR) / dyShapeCR;\n          float dyValue = texture2D(dy, dyUV).r;\n\n          // Read maxPos(dyR, dyC, d).\n          float maxPosValue =\n              " + (fSize * fSize - 1) + ".0 - texture2D(maxPos, dyUV).r;\n\n          // Get the current value, check it against the value from the\n          // position matrix.\n          float curPosValue = wR * " + fSize + ".0 + wC;\n          float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n          dotProd += dyValue * mask;\n        }\n      }\n      gl_FragColor = vec4(dotProd, 0, 0, 0);\n    }";
}
exports.getFragmentShaderMaxPoolBackprop = getFragmentShaderMaxPoolBackprop;
function maxPoolBackprop(gpgpu, program, dyTex, maxPositionsTex, resultTex, resultTexShapeRC) {
    gpgpu.setOutputMatrixTexture(resultTex, resultTexShapeRC[0], resultTexShapeRC[1]);
    gpgpu.setProgram(program);
    gpgpu.setInputMatrixTexture(dyTex, 'dy', 0);
    gpgpu.setInputMatrixTexture(maxPositionsTex, 'maxPos', 1);
    gpgpu.executeProgram();
}
exports.maxPoolBackprop = maxPoolBackprop;

},{"../conv_util":18}],42:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var pool_gpu = require("./pool_gpu");
function getFragmentShaderMaxPoolPositionsSource(xShapeRCD, fSize, stride, pad) {
    return getFragmentShaderMaxPoolCommonSource(xShapeRCD, fSize, stride, pad, true);
}
exports.getFragmentShaderMaxPoolPositionsSource = getFragmentShaderMaxPoolPositionsSource;
function getFragmentShaderMaxPoolSource(xShapeRCD, fSize, stride, pad) {
    return getFragmentShaderMaxPoolCommonSource(xShapeRCD, fSize, stride, pad, false);
}
exports.getFragmentShaderMaxPoolSource = getFragmentShaderMaxPoolSource;
function getFragmentShaderMaxPoolCommonSource(xShapeRCD, fSize, stride, pad, computeMaxPositions) {
    return pool_gpu.getFragmentShaderPoolCommonSource(xShapeRCD, fSize, stride, pad, 'max', computeMaxPositions);
}
function maxPoolCommon(gpgpu, program, x, result, resultShapeRowCol) {
    pool_gpu.poolCommon(gpgpu, program, x, result, resultShapeRowCol);
}
exports.maxPoolCommon = maxPoolCommon;

},{"./pool_gpu":47}],43:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var pool_gpu = require("./pool_gpu");
function getFragmentShaderMinPoolSource(xShapeRCD, fSize, stride, pad) {
    return pool_gpu.getFragmentShaderPoolCommonSource(xShapeRCD, fSize, stride, pad, 'min', false);
}
exports.getFragmentShaderMinPoolSource = getFragmentShaderMinPoolSource;
function minPool(gpgpu, program, x, result, resultShapeRowCol) {
    pool_gpu.poolCommon(gpgpu, program, x, result, resultShapeRowCol);
}
exports.minPool = minPool;

},{"./pool_gpu":47}],44:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var webgl_util_1 = require("./webgl_util");
function getFragmentShaderSource(rows, columns, compOp) {
    return "\n    precision highp float;\n    uniform sampler2D matrixA;\n    varying vec2 outputColumnRow;\n\n    const vec2 aDimCR = vec2(" + columns + ".0, " + rows + ".0);\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    " + webgl_util_1.IS_NAN_SHADER_FUNC + "\n\n    void main() {\n      float value = texture2D(matrixA, halfCR / aDimCR).r;\n      for (float r = 0.0; r < aDimCR.y; r += 1.0) {\n        for (float c = 0.0; c < aDimCR.x; c += 1.0) {\n          vec2 cr = vec2(c, r);\n          vec2 uv = (cr + halfCR) / aDimCR;\n          float candidate = texture2D(matrixA, uv).r;\n          if (isNaN(candidate)) {\n            gl_FragColor = vec4(candidate, 0, 0, 0);\n            return;\n          }\n          value = " + compOp + "(value, candidate);\n        }\n      }\n      gl_FragColor = vec4(value, 0, 0, 0);\n    }";
}
function getMinFragmentShaderSource(rows, columns) {
    return getFragmentShaderSource(rows, columns, 'min');
}
exports.getMinFragmentShaderSource = getMinFragmentShaderSource;
function getMaxFragmentShaderSource(rows, columns) {
    return getFragmentShaderSource(rows, columns, 'max');
}
exports.getMaxFragmentShaderSource = getMaxFragmentShaderSource;
function minMax(gpgpu, minMaxProgram, a, rows, columns, result) {
    gpgpu.setOutputMatrixTexture(result, 1, 1);
    gpgpu.setProgram(minMaxProgram);
    gpgpu.setInputMatrixTexture(a, 'matrixA', 0);
    gpgpu.executeProgram();
}
exports.minMax = minMax;

},{"./webgl_util":60}],45:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var math_1 = require("../math");
var shader_compiler = require("./shader_compiler");
function getFragmentShader(a, b, out, aOrientation, bOrientation) {
    var sharedDim = (aOrientation === math_1.MatrixOrientation.REGULAR ? a.shape[1] : a.shape[0]);
    var aSnippet = (aOrientation === math_1.MatrixOrientation.REGULAR) ? 'aRow, i' : 'i, aRow';
    var bSnippet = (bOrientation === math_1.MatrixOrientation.REGULAR) ? 'i, bCol' : 'bCol, i';
    var inputs = [{ name: 'matrixA', array: a }, { name: 'matrixB', array: b }];
    var userCode = "\n    const float sharedDim = " + sharedDim + ".0;\n\n    float dotARowBCol(float aRow, float bCol) {\n      float result = 0.0;\n      for (float i = 0.0; i < sharedDim; i += 1.0) {\n        float a = getMatrixA(" + aSnippet + ");\n        float b = getMatrixB(" + bSnippet + ");\n        result += (a * b);\n      }\n      return result;\n    }\n\n    void main() {\n      vec2 resRC = getOutputCoords();\n      setOutput(dotARowBCol(resRC.x, resRC.y));\n    }\n  ";
    return shader_compiler.makeShader(inputs, out, userCode);
}
exports.getFragmentShader = getFragmentShader;
function multiplyMatrix(gpgpu, multiplyProgram, a, b, result, outTexShape) {
    gpgpu.setOutputMatrixTexture(result, outTexShape[0], outTexShape[1]);
    gpgpu.setProgram(multiplyProgram);
    gpgpu.setInputMatrixTexture(a, 'matrixA', 0);
    gpgpu.setInputMatrixTexture(b, 'matrixB', 1);
    gpgpu.executeProgram();
}
exports.multiplyMatrix = multiplyMatrix;

},{"../math":21,"./shader_compiler":53}],46:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var unaryop_gpu = require("./unaryop_gpu");
function getNegUnaryOp() {
    return 'gl_FragColor = vec4(-value, 0, 0, 0);';
}
function getFragmentShaderSource() {
    return unaryop_gpu.getFragmentShaderSource(getNegUnaryOp());
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function neg(gpgpu, program, a, rows, columns, result) {
    unaryop_gpu.unaryOp(gpgpu, program, a, rows, columns, result);
}
exports.neg = neg;
function uploadNegDownload(a, rows, columns) {
    return unaryop_gpu.uploadUnaryOpDownload(a, rows, columns, getNegUnaryOp());
}
exports.uploadNegDownload = uploadNegDownload;

},{"./unaryop_gpu":59}],47:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var conv_util = require("../conv_util");
var webgl_util_1 = require("./webgl_util");
function getFragmentShaderPoolCommonSource(xShapeRCD, fSize, stride, pad, poolType, computePositions) {
    if (poolType === 'avg' && computePositions) {
        throw new Error('Cannot compute positions for average pool.');
    }
    var depth = xShapeRCD[2];
    var xTexShapeRC = conv_util.computeTexShapeFrom3D(xShapeRCD);
    var returnValue = 'minMaxValue';
    if (computePositions) {
        returnValue = 'minMaxPosition';
    }
    else if (poolType === 'avg') {
        returnValue = 'avgValue';
    }
    return "\n    precision highp float;\n    uniform sampler2D x;\n    varying vec2 resultUV;\n\n    const vec2 halfCR = vec2(0.5, 0.5);\n    const vec2 xShapeCR = vec2(" + xTexShapeRC[1] + ", " + xTexShapeRC[0] + ");\n\n    " + webgl_util_1.IS_NAN_SHADER_FUNC + "\n\n    void main() {\n      vec2 yTexCR = floor(gl_FragCoord.xy);\n\n      // Map from 2D (yTexR, yTexC) to 3D (yR, yC, d2).\n      float yR = yTexCR.y;\n      float yC = floor(yTexCR.x / " + depth + ".0);\n      float d = mod(yTexCR.x, " + depth + ".0);\n\n      vec2 xRCCorner = vec2(yR, yC) * vec2(" + stride + ", " + stride + ") -\n          vec2(" + pad + ".0, " + pad + ".0);\n      float xRCorner = xRCCorner.x;\n      float xCCorner = xRCCorner.y;\n\n      // max/min x(?, ?, d) to get y(yR, yC, d).\n      // ? = to be determined\n      float minMaxValue = 0.0;\n      float minMaxValueFound = 0.0;\n      float minMaxPosition = 0.0;\n      float avgValue = 0.0;\n\n      for (float wR = 0.0; wR < " + fSize + ".0; wR += 1.0) {\n        float xR = xRCorner + wR;\n        float xTexR = xR;\n\n        for (float wC = 0.0; wC < " + fSize + ".0; wC += 1.0) {\n          float xC = xCCorner + wC;\n          float xTexC = xC * " + depth + ".0 + d;\n\n          vec2 texCR = vec2(xTexC, xTexR);\n\n          // Check if the requested UV is invalid.\n          vec2 uv = (texCR + halfCR) / xShapeCR;\n          bool lessThanZero = any(lessThan(uv, vec2(0, 0)));\n          bool greaterThanOne = any(greaterThan(uv, vec2(1, 1)));\n          bool outside = lessThanZero || greaterThanOne;\n          if (outside) {\n            continue;\n          }\n\n          float value = texture2D(x, uv).r;\n          if (isNaN(value)) {\n            gl_FragColor = vec4(value, 0, 0, 0);\n            return;\n          }\n          if (" + (poolType === 'avg') + ") {\n            avgValue += value / " + fSize * fSize + ".0;\n          } else {\n            // If a min / max value has already been found, use it. If not, use\n            // the current value.\n            float currentMinMaxValue = mix(\n                value, minMaxValue, minMaxValueFound);\n            if (value " + (poolType === 'min' ? '<=' : '>=') + " currentMinMaxValue) {\n              minMaxValue = value;\n              minMaxValueFound = 1.0;\n              if (" + computePositions + ") {\n                minMaxPosition = wR * " + fSize + ".0 + wC;\n              }\n            }\n          }\n        }\n      }\n      gl_FragColor = vec4(" + returnValue + ", 0, 0, 0);\n    }";
}
exports.getFragmentShaderPoolCommonSource = getFragmentShaderPoolCommonSource;
function poolCommon(gpgpu, program, x, result, resultShapeRowCol) {
    gpgpu.setOutputMatrixTexture(result, resultShapeRowCol[0], resultShapeRowCol[1]);
    gpgpu.setProgram(program);
    gpgpu.setInputMatrixTexture(x, 'x', 0);
    gpgpu.executeProgram();
}
exports.poolCommon = poolCommon;

},{"../conv_util":18,"./webgl_util":60}],48:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var gpgpu_context_1 = require("./gpgpu_context");
function getFragmentShaderSource(rows, columns) {
    return "\n    precision highp float;\n    uniform sampler2D matrixA;\n    varying vec2 resultUV;\n\n    const vec2 aDimCR = vec2(" + columns + ".0, " + rows + ".0);\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    void main() {\n      float sum = 0.0;\n      for (float r = 0.0; r < aDimCR.y; r += 1.0) {\n        for (float c = 0.0; c < aDimCR.x; c += 1.0) {\n          vec2 uv = (vec2(c, r) + halfCR) / aDimCR;\n          sum += texture2D(matrixA, uv).r;\n        }\n      }\n      gl_FragColor = vec4(sum, 0, 0, 0);\n    }";
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function reduceSum(gpgpu, reduceSumProgram, a, aNumRows, aNumCols, result) {
    gpgpu.setOutputMatrixTexture(result, 1, 1);
    gpgpu.setProgram(reduceSumProgram);
    gpgpu.setInputMatrixTexture(a, 'matrixA', 0);
    gpgpu.executeProgram();
}
exports.reduceSum = reduceSum;
function uploadReduceSumDownload(a, rows, columns) {
    var gpgpu = new gpgpu_context_1.GPGPUContext();
    var program = gpgpu.createProgram(getFragmentShaderSource(rows, columns));
    var aTexture = gpgpu.createMatrixTexture(rows, columns);
    var resultTexture = gpgpu.createMatrixTexture(1, 1);
    gpgpu.uploadMatrixToTexture(aTexture, rows, columns, a);
    reduceSum(gpgpu, program, aTexture, rows, columns, resultTexture);
    var result = gpgpu.downloadMatrixFromTexture(resultTexture, 1, 1)[0];
    gpgpu.deleteMatrixTexture(aTexture);
    gpgpu.deleteMatrixTexture(resultTexture);
    gpgpu.deleteProgram(program);
    gpgpu.dispose();
    return result;
}
exports.uploadReduceSumDownload = uploadReduceSumDownload;

},{"./gpgpu_context":37}],49:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var unaryop_gpu = require("./unaryop_gpu");
function getReluUnaryOp() {
    return "\n    float result = (value < 0.0 ? 0.0 : value);\n    gl_FragColor = vec4(result, 0, 0, 0);\n  ";
}
function getFragmentShaderSource() {
    return unaryop_gpu.getFragmentShaderSource(getReluUnaryOp());
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function relu(gpgpu, reluProgram, a, rows, columns, result) {
    unaryop_gpu.unaryOp(gpgpu, reluProgram, a, rows, columns, result);
}
exports.relu = relu;
function uploadReluDownload(a, rows, columns) {
    return unaryop_gpu.uploadUnaryOpDownload(a, rows, columns, getReluUnaryOp());
}
exports.uploadReluDownload = uploadReluDownload;

},{"./unaryop_gpu":59}],50:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var webgl_util = require("./webgl_util");
function getRenderRGBShader(gpgpu, destinationWidth) {
    var fragmentShaderSource = "\n    precision highp float;\n    uniform sampler2D source;\n    varying vec2 resultUV;\n\n    const float destinationWidth = " + destinationWidth + ".0;\n    const float a = 1.0;\n\n    void main() {\n      float xr = floor(resultUV.s * destinationWidth) * 3.0;\n      vec3 x = xr + vec3(0, 1, 2);\n\n      float sourceWidth = destinationWidth * 3.0;\n      vec3 u = (x + 0.5) / sourceWidth;\n      float v = 1.0 - resultUV.t;\n\n      float r = texture2D(source, vec2(u[0], v)).r;\n      float g = texture2D(source, vec2(u[1], v)).r;\n      float b = texture2D(source, vec2(u[2], v)).r;\n\n      gl_FragColor = vec4(r, g, b, a);\n    }";
    return gpgpu.createProgram(fragmentShaderSource);
}
exports.getRenderRGBShader = getRenderRGBShader;
function renderToCanvas(gpgpu, renderShader, sourceTex) {
    webgl_util.bindCanvasToFramebuffer(gpgpu.gl);
    renderToFramebuffer(gpgpu, renderShader, sourceTex);
}
exports.renderToCanvas = renderToCanvas;
function renderToFramebuffer(gpgpu, renderShader, sourceTex) {
    gpgpu.setProgram(renderShader);
    gpgpu.setInputMatrixTexture(sourceTex, 'source', 0);
    gpgpu.executeProgram();
}
exports.renderToFramebuffer = renderToFramebuffer;

},{"./webgl_util":60}],51:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var util = require("../../util");
function getFragmentShaderSource() {
    return "\n    precision highp float;\n    uniform sampler2D matrixA;\n    uniform vec2 inputDimCR;\n    uniform vec2 resultDimCR;\n    varying vec2 resultUV;\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    void main() {\n      vec2 resultCR = floor(resultUV * resultDimCR);\n      // indexInFlat = row * stride + column, where stride == numOutputColumns\n      float indexInFlat = resultCR.y * resultDimCR.x + resultCR.x;\n\n      vec2 inputCR = vec2(\n        mod(indexInFlat, inputDimCR.x), // col = indexInFlat % numInputColumns\n        floor(indexInFlat / inputDimCR.x) // row = indexInFlat / numInputColumns\n      ) + halfCR;\n\n      vec2 inputUV = inputCR / inputDimCR;\n      gl_FragColor = texture2D(matrixA, inputUV);\n    }";
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function reshape(gpgpu, reshapeProgram, a, aNumRows, aNumCols, result, resultNumRows, resultNumCols) {
    var inputSize = aNumRows * aNumCols;
    var outputSize = resultNumCols * resultNumRows;
    util.assert(inputSize === outputSize, "The input size (" + inputSize + ") and output size (" + outputSize + ") " +
        "must match");
    gpgpu.setOutputMatrixTexture(result, resultNumRows, resultNumCols);
    gpgpu.setProgram(reshapeProgram);
    gpgpu.setInputMatrixTexture(a, 'matrixA', 0);
    var inputDimCRLocation = gpgpu.getUniformLocation('inputDimCR');
    gpgpu.gl.uniform2f(inputDimCRLocation, aNumCols, aNumRows);
    var resultDimCRLocation = gpgpu.getUniformLocation('resultDimCR');
    gpgpu.gl.uniform2f(resultDimCRLocation, resultNumCols, resultNumRows);
    gpgpu.executeProgram();
}
exports.reshape = reshape;

},{"../../util":88}],52:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var conv_util = require("../conv_util");
function getFragmentShaderSource(inputShapeRCD, outputDimensionsRowCol, alignCorners) {
    var depth = inputShapeRCD[2];
    var inputTexShapeRC = conv_util.computeTexShapeFrom3D(inputShapeRCD);
    var effectiveInputShapeRCD = alignCorners ?
        [inputShapeRCD[0] - 1, inputShapeRCD[1] - 1, depth] :
        inputShapeRCD;
    var effectiveOutputShapeRCD = alignCorners ?
        [outputDimensionsRowCol[0] - 1, outputDimensionsRowCol[1] - 1, depth] :
        [outputDimensionsRowCol[0], outputDimensionsRowCol[1], depth];
    return "\n    precision highp float;\n    uniform sampler2D matrixA;\n    varying vec2 resultUV;\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    const vec2 inputShapeCR = vec2(" + inputShapeRCD[1] + ", " + inputShapeRCD[0] + ");\n    const vec2 inputShapeTexCR = vec2(\n        " + inputTexShapeRC[1] + ", " + inputTexShapeRC[0] + ");\n\n    const vec2 effectiveInputOverOutputRatioCR = vec2(\n        " + effectiveInputShapeRCD[1] / effectiveOutputShapeRCD[1] + ",\n        " + effectiveInputShapeRCD[0] / effectiveOutputShapeRCD[0] + ");\n\n    float sampleInput(float col, float row, float d) {\n      vec2 uv = (vec2(col * " + depth + ".0 + d, row) + halfCR) / inputShapeTexCR;\n      return texture2D(matrixA, uv).r;\n    }\n\n    void main() {\n      vec2 yTexCR = floor(gl_FragCoord.xy);\n\n      // Map from 2D (yTexR, yTexC) to 3D (yR, yC, d).\n      vec2 yCR = vec2(floor(yTexCR.x / " + depth + ".0), yTexCR.y);\n      float d = mod(yTexCR.x, " + depth + ".0);\n\n      // Fractional source index.\n      vec2 sourceFracIndexCR = yCR * effectiveInputOverOutputRatioCR;\n\n      // Compute the four integer indices.\n      vec2 sourceFloorCR = floor(sourceFracIndexCR);\n      vec2 sourceCeilCR = min(inputShapeCR - 1.0, ceil(sourceFracIndexCR));\n\n      float topLeft = sampleInput(sourceFloorCR[0], sourceFloorCR[1], d);\n      float bottomLeft = sampleInput(sourceFloorCR[0], sourceCeilCR[1], d);\n      float topRight = sampleInput(sourceCeilCR[0], sourceFloorCR[1], d);\n      float bottomRight = sampleInput(sourceCeilCR[0], sourceCeilCR[1], d);\n\n      vec2 fracCR = sourceFracIndexCR - sourceFloorCR;\n\n      float top = topLeft + (topRight - topLeft) * fracCR[0];\n      float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR[0];\n      float newValue = top + (bottom - top) * fracCR[1];\n\n      gl_FragColor = vec4(newValue, 0.0, 0.0, 0.0);\n    }";
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function resizeBilinear(gpgpu, resizeBilinearProgram, a, result, resultShapeRowCol) {
    gpgpu.setOutputMatrixTexture(result, resultShapeRowCol[0], resultShapeRowCol[1]);
    gpgpu.setProgram(resizeBilinearProgram);
    gpgpu.setInputMatrixTexture(a, 'matrixA', 0);
    gpgpu.executeProgram();
}
exports.resizeBilinear = resizeBilinear;

},{"../conv_util":18}],53:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var util = require("../../util");
function makeShaderKey(inputs, output) {
    var ins = inputs.map(function (x) { return x.shape + '_' + x.getTextureShapeRC(); });
    return ins.join('_') + '_' + output.shape + '_' + output.getTextureShapeRC();
}
exports.makeShaderKey = makeShaderKey;
function makeShader(inputs, output, userCode) {
    var inputPrefixSnippet = inputs.map(function (x) { return "uniform sampler2D " + x.name + ";"; }).join('\n');
    var inputSamplingSnippet = inputs.map(function (x) { return getInputSamplingSnippet(x); }).join('\n');
    var outTexShape = output.getTextureShapeRC();
    var outputSamplingSnippet = getOutputSamplingSnippet(output.shape, outTexShape);
    var source = [
        SHADER_PREFIX, inputPrefixSnippet, SAMPLE_2D_SNIPPET, inputSamplingSnippet,
        outputSamplingSnippet, userCode
    ].join('\n');
    return source;
}
exports.makeShader = makeShader;
function getInputSamplingSnippet(input) {
    var arr = input.array;
    var shape = arr.shape;
    var texShape = arr.getTextureShapeRC(shape);
    switch (shape.length) {
        case 2:
            return getSampler2D(input.name, shape, texShape);
        default:
            throw new Error(arr.rank + "-D input sampling is not yet supported");
    }
}
function getOutputSamplingSnippet(outShape, outTexShape) {
    switch (outShape.length) {
        case 2:
            return getOutput2DCoords(outShape, outTexShape);
        default:
            throw new Error(outShape.length + "-D output sampling is not yet supported");
    }
}
var SHADER_PREFIX = "\n  precision highp float;\n  varying vec2 resultUV;\n  const vec2 halfCR = vec2(0.5, 0.5);\n\n  void setOutput(float val) {\n    gl_FragColor = vec4(val, 0, 0, 0);\n  }\n";
var SAMPLE_2D_SNIPPET = "\n  float sample2D(sampler2D texture, float texNumR, float texNumC, float numC,\n      float row, float col) {\n    float index = dot(vec2(row, col), vec2(numC, 1.0));\n    float texR = floor(index / texNumC);\n    float texC = mod(index, texNumC);\n    vec2 uv = (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n    return texture2D(texture, uv).r;\n  }\n";
function getOutput2DCoords(shape, texShape) {
    if (util.arraysEqual(shape, texShape)) {
        return "\n      vec2 getOutputCoords() {\n        return floor(gl_FragCoord.yx);\n      }\n    ";
    }
    return "\n    vec2 getOutputCoords() {\n      vec2 resTexRC = floor(gl_FragCoord.yx);\n      float index = dot(resTexRC, vec2(" + texShape[1] + ".0, 1.0));\n      float r = floor(index / " + shape[1] + ".0);\n      float c = mod(index, " + shape[1] + ".0);\n      return vec2(r, c);\n    }\n  ";
}
function getSampler2D(texName, shape, texShape) {
    var funcName = 'get' + texName.charAt(0).toUpperCase() + texName.slice(1);
    var tR = texShape[0];
    var tC = texShape[1];
    if (util.arraysEqual(shape, texShape)) {
        return "\n      float " + funcName + "(float row, float col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(" + tC + ".0, " + tR + ".0);\n        return texture2D(" + texName + ", uv).r;\n      }\n    ";
    }
    return "\n    float " + funcName + "(float row, float col) {\n      return sample2D(" + texName + ", " + tR + ".0, " + tC + ".0, " + shape[1] + ".0, row, col);\n    }\n  ";
}

},{"../../util":88}],54:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var unaryop_gpu = require("./unaryop_gpu");
function getSigmoidUnaryOp() {
    return 'gl_FragColor = vec4(1.0 / (1.0 + exp(-1.0 * value)), 0, 0, 0);';
}
function getSigmoidFragmentShaderSource() {
    return unaryop_gpu.getFragmentShaderSource(getSigmoidUnaryOp());
}
exports.getSigmoidFragmentShaderSource = getSigmoidFragmentShaderSource;
function sigmoid(gpgpu, sigmoidProgram, a, rows, columns, result) {
    unaryop_gpu.unaryOp(gpgpu, sigmoidProgram, a, rows, columns, result);
}
exports.sigmoid = sigmoid;
function uploadSigmoidDownload(a, rows, columns) {
    return unaryop_gpu.uploadUnaryOpDownload(a, rows, columns, getSigmoidUnaryOp());
}
exports.uploadSigmoidDownload = uploadSigmoidDownload;

},{"./unaryop_gpu":59}],55:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var unaryop_gpu = require("./unaryop_gpu");
function getStepUnaryOp() {
    return "\n    float res = value == value ? (value > 0.0 ? 1.0 : 0.0) : value;\n    gl_FragColor = vec4(res, 0, 0, 0);\n  ";
}
function getFragmentShaderSource() {
    return unaryop_gpu.getFragmentShaderSource(getStepUnaryOp());
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function step(gpgpu, stepProgram, a, rows, columns, result) {
    unaryop_gpu.unaryOp(gpgpu, stepProgram, a, rows, columns, result);
}
exports.step = step;
function uploadStepDownload(a, rows, columns) {
    return unaryop_gpu.uploadUnaryOpDownload(a, rows, columns, getStepUnaryOp());
}
exports.uploadStepDownload = uploadStepDownload;

},{"./unaryop_gpu":59}],56:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function getUnpackedMatrixTextureShapeWidthHeight(rows, columns) {
    return [columns, rows];
}
exports.getUnpackedMatrixTextureShapeWidthHeight = getUnpackedMatrixTextureShapeWidthHeight;
function getUnpackedArraySizeFromMatrixSize(matrixSize, channelsPerTexture) {
    return matrixSize * channelsPerTexture;
}
exports.getUnpackedArraySizeFromMatrixSize = getUnpackedArraySizeFromMatrixSize;
function getColorMatrixTextureShapeWidthHeight(rows, columns) {
    return [columns * 4, rows];
}
exports.getColorMatrixTextureShapeWidthHeight = getColorMatrixTextureShapeWidthHeight;
function getMatrixSizeFromUnpackedArraySize(unpackedSize, channelsPerTexture) {
    if (unpackedSize % channelsPerTexture !== 0) {
        throw new Error('unpackedSize (' + unpackedSize + ') must be a multiple of ' +
            channelsPerTexture);
    }
    return unpackedSize / channelsPerTexture;
}
exports.getMatrixSizeFromUnpackedArraySize = getMatrixSizeFromUnpackedArraySize;
function encodeMatrixToUnpackedArray(matrix, unpackedArray, channelsPerTexture) {
    var requiredSize = getUnpackedArraySizeFromMatrixSize(matrix.length, channelsPerTexture);
    if (unpackedArray.length < requiredSize) {
        throw new Error('unpackedArray length (' + unpackedArray.length +
            ') must be >= ' + requiredSize);
    }
    var dst = 0;
    for (var src = 0; src < matrix.length; ++src) {
        unpackedArray[dst] = matrix[src];
        dst += channelsPerTexture;
    }
}
exports.encodeMatrixToUnpackedArray = encodeMatrixToUnpackedArray;
function decodeMatrixFromUnpackedArray(unpackedArray, matrix, channelsPerTexture) {
    var requiredSize = getMatrixSizeFromUnpackedArraySize(unpackedArray.length, channelsPerTexture);
    if (matrix.length < requiredSize) {
        throw new Error('matrix length (' + matrix.length + ') must be >= ' + requiredSize);
    }
    var dst = 0;
    for (var src = 0; src < unpackedArray.length; src += channelsPerTexture) {
        matrix[dst++] = unpackedArray[src];
    }
}
exports.decodeMatrixFromUnpackedArray = decodeMatrixFromUnpackedArray;
function getPackedMatrixTextureShapeWidthHeight(rows, columns) {
    return [Math.ceil(columns / 2), Math.ceil(rows / 2)];
}
exports.getPackedMatrixTextureShapeWidthHeight = getPackedMatrixTextureShapeWidthHeight;
function getPackedRGBAArraySizeFromMatrixShape(rows, columns) {
    var _a = getPackedMatrixTextureShapeWidthHeight(rows, columns), w = _a[0], h = _a[1];
    return w * h * 4;
}
exports.getPackedRGBAArraySizeFromMatrixShape = getPackedRGBAArraySizeFromMatrixShape;
function encodeMatrixToPackedRGBA(matrix, rows, columns, packedRGBA) {
    var requiredSize = getPackedRGBAArraySizeFromMatrixShape(rows, columns);
    if (packedRGBA.length < requiredSize) {
        throw new Error('packedRGBA length (' + packedRGBA.length +
            ') must be >= ' + requiredSize);
    }
    var _a = getPackedMatrixTextureShapeWidthHeight(rows, columns), textureWidth = _a[0], textureHeight = _a[1];
    var oddWidth = (columns % 2) === 1;
    var oddHeight = (rows % 2) === 1;
    var widthInFullBlocks = Math.floor(columns / 2);
    var heightInFullBlocks = Math.floor(rows / 2);
    {
        var dstStride = (oddWidth ? 4 : 0);
        var oneRow = columns;
        var dst = 0;
        for (var blockY = 0; blockY < heightInFullBlocks; ++blockY) {
            var matrixSrcRow = (blockY * 2 * columns);
            for (var blockX = 0; blockX < widthInFullBlocks; ++blockX) {
                var matrixSrcCol = blockX * 2;
                var src = matrixSrcRow + matrixSrcCol;
                packedRGBA[dst] = matrix[src];
                packedRGBA[dst + 1] = matrix[src + 1];
                packedRGBA[dst + 2] = matrix[src + oneRow];
                packedRGBA[dst + 3] = matrix[src + oneRow + 1];
                dst += 4;
            }
            dst += dstStride;
        }
    }
    if (oddWidth) {
        var src = columns - 1;
        var dst = (textureWidth - 1) * 4;
        var srcStride = 2 * columns;
        var dstStride = textureWidth * 4;
        for (var blockY = 0; blockY < heightInFullBlocks; ++blockY) {
            packedRGBA[dst] = matrix[src];
            packedRGBA[dst + 2] = matrix[src + columns];
            src += srcStride;
            dst += dstStride;
        }
    }
    if (oddHeight) {
        var src = (rows - 1) * columns;
        var dst = (textureHeight - 1) * textureWidth * 4;
        for (var blockX = 0; blockX < widthInFullBlocks; ++blockX) {
            packedRGBA[dst++] = matrix[src++];
            packedRGBA[dst++] = matrix[src++];
            dst += 2;
        }
    }
    if (oddWidth && oddHeight) {
        packedRGBA[packedRGBA.length - 4] = matrix[matrix.length - 1];
    }
    return packedRGBA;
}
exports.encodeMatrixToPackedRGBA = encodeMatrixToPackedRGBA;
function decodeMatrixFromPackedRGBA(packedRGBA, rows, columns, matrix) {
    var requiredSize = rows * columns;
    if (requiredSize < matrix.length) {
        throw new Error('matrix length (' + matrix.length + ') must be >= ' + requiredSize);
    }
    var oddWidth = (columns % 2) === 1;
    var oddHeight = (rows % 2) === 1;
    var widthInFullBlocks = Math.floor(columns / 2);
    var heightInFullBlocks = Math.floor(rows / 2);
    var _a = getPackedMatrixTextureShapeWidthHeight(rows, columns), textureWidth = _a[0], textureHeight = _a[1];
    {
        var srcStride = oddWidth ? 4 : 0;
        var dstStride = columns + (oddWidth ? 1 : 0);
        var src = 0;
        var dstRow1 = 0;
        var dstRow2 = columns;
        for (var blockY = 0; blockY < heightInFullBlocks; ++blockY) {
            for (var blockX = 0; blockX < widthInFullBlocks; ++blockX) {
                matrix[dstRow1++] = packedRGBA[src++];
                matrix[dstRow1++] = packedRGBA[src++];
                matrix[dstRow2++] = packedRGBA[src++];
                matrix[dstRow2++] = packedRGBA[src++];
            }
            src += srcStride;
            dstRow1 += dstStride;
            dstRow2 += dstStride;
        }
    }
    if (oddWidth) {
        var src = (textureWidth - 1) * 4;
        var dst = columns - 1;
        var srcStride = textureWidth * 4;
        var dstStride = 2 * columns;
        for (var blockY = 0; blockY < heightInFullBlocks; ++blockY) {
            matrix[dst] = packedRGBA[src];
            matrix[dst + columns] = packedRGBA[src + 2];
            src += srcStride;
            dst += dstStride;
        }
    }
    if (oddHeight) {
        var src = (textureHeight - 1) * textureWidth * 4;
        var dst = (rows - 1) * columns;
        for (var blockX = 0; blockX < widthInFullBlocks; ++blockX) {
            matrix[dst++] = packedRGBA[src++];
            matrix[dst++] = packedRGBA[src++];
            src += 2;
        }
    }
    if (oddWidth && oddHeight) {
        matrix[matrix.length - 1] = packedRGBA[packedRGBA.length - 4];
    }
    return matrix;
}
exports.decodeMatrixFromPackedRGBA = decodeMatrixFromPackedRGBA;

},{}],57:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var TextureManager = (function () {
    function TextureManager(gpgpu) {
        this.gpgpu = gpgpu;
        this.numUsedTextures = 0;
        this.numFreeTextures = 0;
        this.freeTextures = {};
        this.logEnabled = false;
        this.usedTextureCount = {};
    }
    TextureManager.prototype.acquireTexture = function (shapeRC) {
        var shapeKey = getKeyFromTextureShape(shapeRC);
        if (!(shapeKey in this.freeTextures)) {
            this.freeTextures[shapeKey] = [];
        }
        if (!(shapeKey in this.usedTextureCount)) {
            this.usedTextureCount[shapeKey] = 0;
        }
        this.usedTextureCount[shapeKey]++;
        if (this.freeTextures[shapeKey].length > 0) {
            this.numFreeTextures--;
            this.numUsedTextures++;
            this.log();
            return this.freeTextures[shapeKey].shift();
        }
        this.numUsedTextures++;
        this.log();
        return this.gpgpu.createMatrixTexture(shapeRC[0], shapeRC[1]);
    };
    TextureManager.prototype.releaseTexture = function (texture, shape) {
        var shapeKey = getKeyFromTextureShape(shape);
        if (!(shapeKey in this.freeTextures)) {
            this.freeTextures[shapeKey] = [];
        }
        this.freeTextures[shapeKey].push(texture);
        this.numFreeTextures++;
        this.numUsedTextures--;
        this.usedTextureCount[shapeKey]--;
        this.log();
    };
    TextureManager.prototype.log = function () {
        if (!this.logEnabled) {
            return;
        }
        var total = this.numFreeTextures + this.numUsedTextures;
        console.log('Free/Used', this.numFreeTextures + ' / ' + this.numUsedTextures, "(" + total + ")");
    };
    TextureManager.prototype.getNumUsedTextures = function () {
        return this.numUsedTextures;
    };
    TextureManager.prototype.getNumFreeTextures = function () {
        return this.numFreeTextures;
    };
    TextureManager.prototype.dispose = function () {
        for (var shape in this.freeTextures) {
            if (this.freeTextures.hasOwnProperty(shape)) {
                for (var i = 0; i < this.freeTextures[shape].length; i++) {
                    this.gpgpu.deleteMatrixTexture(this.freeTextures[shape][i]);
                }
            }
        }
    };
    return TextureManager;
}());
exports.TextureManager = TextureManager;
function getKeyFromTextureShape(shapeRowsCol) {
    return shapeRowsCol[0] + '_' + shapeRowsCol[1];
}

},{}],58:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var unaryop_gpu = require("./unaryop_gpu");
function getSinUnaryOp() {
    return "\n    gl_FragColor = vec4(sin(value), 0, 0, 0);\n  ";
}
function getSinFragmentShaderSource() {
    return unaryop_gpu.getFragmentShaderSource(getSinUnaryOp());
}
exports.getSinFragmentShaderSource = getSinFragmentShaderSource;
function sin(gpgpu, sinProgram, a, rows, columns, result) {
    unaryop_gpu.unaryOp(gpgpu, sinProgram, a, rows, columns, result);
}
exports.sin = sin;
function uploadSinDownload(a, rows, columns) {
    return unaryop_gpu.uploadUnaryOpDownload(a, rows, columns, getSinUnaryOp());
}
exports.uploadSinDownload = uploadSinDownload;
function getTanhUnaryOp() {
    return "\n    float e2x = exp(-2.0 * value);\n    gl_FragColor = vec4((1.0 - e2x) / (1.0 + e2x), 0, 0, 0);\n  ";
}
function getTanhFragmentShaderSource() {
    return unaryop_gpu.getFragmentShaderSource(getTanhUnaryOp());
}
exports.getTanhFragmentShaderSource = getTanhFragmentShaderSource;
function tanh(gpgpu, tanhProgram, a, rows, columns, result) {
    unaryop_gpu.unaryOp(gpgpu, tanhProgram, a, rows, columns, result);
}
exports.tanh = tanh;
function uploadTanhDownload(a, rows, columns) {
    return unaryop_gpu.uploadUnaryOpDownload(a, rows, columns, getTanhUnaryOp());
}
exports.uploadTanhDownload = uploadTanhDownload;

},{"./unaryop_gpu":59}],59:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var gpgpu_context_1 = require("./gpgpu_context");
function getFragmentShaderSource(resultOp) {
    return "\n    precision highp float;\n    uniform sampler2D matrixA;\n    varying vec2 resultUV;\n\n    void main() {\n      float value = texture2D(matrixA, resultUV).r;\n      " + resultOp + "\n    }";
}
exports.getFragmentShaderSource = getFragmentShaderSource;
function unaryOp(gpgpu, unaryOpProgram, a, rows, columns, result) {
    gpgpu.setOutputMatrixTexture(result, rows, columns);
    gpgpu.setProgram(unaryOpProgram);
    gpgpu.setInputMatrixTexture(a, 'matrixA', 0);
    gpgpu.executeProgram();
}
exports.unaryOp = unaryOp;
function uploadUnaryOpDownload(a, rows, columns, resultOp) {
    var gpgpu = new gpgpu_context_1.GPGPUContext();
    var fragmentShaderSrc = getFragmentShaderSource(resultOp);
    var program = gpgpu.createProgram(fragmentShaderSrc);
    var aTexture = gpgpu.createMatrixTexture(rows, columns);
    var resultTexture = gpgpu.createMatrixTexture(rows, columns);
    gpgpu.uploadMatrixToTexture(aTexture, rows, columns, a);
    unaryOp(gpgpu, program, aTexture, rows, columns, resultTexture);
    var result = gpgpu.downloadMatrixFromTexture(resultTexture, rows, columns);
    gpgpu.deleteMatrixTexture(aTexture);
    gpgpu.deleteMatrixTexture(resultTexture);
    gpgpu.deleteProgram(program);
    gpgpu.dispose();
    return result;
}
exports.uploadUnaryOpDownload = uploadUnaryOpDownload;

},{"./gpgpu_context":37}],60:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var USE_WEBGL2_WHEN_AVAILABLE = false;
var WEBGL2_ENABLED = null;
var MAX_TEXTURE_SIZE = null;
var util = require("../../util");
exports.IS_NAN_SHADER_FUNC = "\nbool isNaN(float val) {\n  return val == val ? false : true;\n}\n";
function createWebGLRenderingContext(attributes) {
    var canvas = document.createElement('canvas');
    canvas.width = 1;
    canvas.height = 1;
    return createWebGLRenderingContextFromCanvas(canvas, attributes);
}
exports.createWebGLRenderingContext = createWebGLRenderingContext;
function preferWebGL1() {
    USE_WEBGL2_WHEN_AVAILABLE = false;
    WEBGL2_ENABLED = undefined;
}
exports.preferWebGL1 = preferWebGL1;
function preferWebGL2() {
    USE_WEBGL2_WHEN_AVAILABLE = true;
    WEBGL2_ENABLED = undefined;
}
exports.preferWebGL2 = preferWebGL2;
function isWebGL2Enabled() {
    if (!USE_WEBGL2_WHEN_AVAILABLE) {
        return false;
    }
    if (WEBGL2_ENABLED === undefined) {
        var tempCanvas = document.createElement('canvas');
        var gl = tempCanvas.getContext('webgl2');
        if (gl != null) {
            WEBGL2_ENABLED = true;
            var loseContextExtension = getExtensionOrThrow(gl, 'WEBGL_lose_context');
            loseContextExtension.loseContext();
        }
        else {
            WEBGL2_ENABLED = false;
        }
    }
    return WEBGL2_ENABLED;
}
exports.isWebGL2Enabled = isWebGL2Enabled;
function createWebGLRenderingContextFromCanvas(canvas, attributes) {
    var gl;
    if (isWebGL2Enabled()) {
        gl = canvas.getContext('webgl2', attributes);
    }
    else {
        gl = (canvas.getContext('webgl', attributes) ||
            canvas.getContext('experimental-webgl', attributes));
    }
    if (gl == null) {
        throw new Error('This browser does not support WebGL.');
    }
    return gl;
}
exports.createWebGLRenderingContextFromCanvas = createWebGLRenderingContextFromCanvas;
function callAndCheck(gl, func) {
    var returnValue = func();
    checkWebGLError(gl);
    return returnValue;
}
exports.callAndCheck = callAndCheck;
var webGLDebugErrorCheckingEnabled = false;
function enableDebugWebGLErrorChecking(enabled) {
    webGLDebugErrorCheckingEnabled = enabled;
}
exports.enableDebugWebGLErrorChecking = enableDebugWebGLErrorChecking;
function checkWebGLError(gl) {
    if (webGLDebugErrorCheckingEnabled) {
        var error = gl.getError();
        if (error !== gl.NO_ERROR) {
            throw new Error('WebGL Error: ' + getWebGLErrorMessage(gl, error));
        }
    }
}
exports.checkWebGLError = checkWebGLError;
function getWebGLErrorMessage(gl, status) {
    switch (status) {
        case gl.NO_ERROR:
            return 'NO_ERROR';
        case gl.INVALID_ENUM:
            return 'INVALID_ENUM';
        case gl.INVALID_VALUE:
            return 'INVALID_VALUE';
        case gl.INVALID_OPERATION:
            return 'INVALID_OPERATION';
        case gl.INVALID_FRAMEBUFFER_OPERATION:
            return 'INVALID_FRAMEBUFFER_OPERATION';
        case gl.OUT_OF_MEMORY:
            return 'OUT_OF_MEMORY';
        case gl.CONTEXT_LOST_WEBGL:
            return 'CONTEXT_LOST_WEBGL';
        default:
            return 'Unknown error code ' + status;
    }
}
exports.getWebGLErrorMessage = getWebGLErrorMessage;
function getExtensionOrThrow(gl, extensionName) {
    return throwIfNull(gl, function () { return gl.getExtension(extensionName); }, 'Extension "' + extensionName + '" not supported on this browser.');
}
exports.getExtensionOrThrow = getExtensionOrThrow;
function createVertexShader(gl, vertexShaderSource) {
    var vertexShader = throwIfNull(gl, function () { return gl.createShader(gl.VERTEX_SHADER); }, 'Unable to create vertex WebGLShader.');
    callAndCheck(gl, function () { return gl.shaderSource(vertexShader, vertexShaderSource); });
    callAndCheck(gl, function () { return gl.compileShader(vertexShader); });
    if (gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS) === false) {
        console.log(gl.getShaderInfoLog(vertexShader));
        throw new Error('Failed to compile vertex shader.');
    }
    return vertexShader;
}
exports.createVertexShader = createVertexShader;
function createFragmentShader(gl, fragmentShaderSource) {
    var fragmentShader = throwIfNull(gl, function () { return gl.createShader(gl.FRAGMENT_SHADER); }, 'Unable to create fragment WebGLShader.');
    callAndCheck(gl, function () { return gl.shaderSource(fragmentShader, fragmentShaderSource); });
    callAndCheck(gl, function () { return gl.compileShader(fragmentShader); });
    if (gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS) === false) {
        console.log(gl.getShaderInfoLog(fragmentShader));
        throw new Error('Failed to compile fragment shader.');
    }
    return fragmentShader;
}
exports.createFragmentShader = createFragmentShader;
function createProgram(gl) {
    return throwIfNull(gl, function () { return gl.createProgram(); }, 'Unable to create WebGLProgram.');
}
exports.createProgram = createProgram;
function linkProgram(gl, program) {
    callAndCheck(gl, function () { return gl.linkProgram(program); });
    if (gl.getProgramParameter(program, gl.LINK_STATUS) === false) {
        console.log(gl.getProgramInfoLog(program));
        throw new Error('Failed to link vertex and fragment shaders.');
    }
}
exports.linkProgram = linkProgram;
function validateProgram(gl, program) {
    callAndCheck(gl, function () { return gl.validateProgram(program); });
    if (gl.getProgramParameter(program, gl.VALIDATE_STATUS) === false) {
        console.log(gl.getProgramInfoLog(program));
        throw new Error('Shader program validation failed.');
    }
}
exports.validateProgram = validateProgram;
function createStaticVertexBuffer(gl, data) {
    var buffer = throwIfNull(gl, function () { return gl.createBuffer(); }, 'Unable to create WebGLBuffer');
    callAndCheck(gl, function () { return gl.bindBuffer(gl.ARRAY_BUFFER, buffer); });
    callAndCheck(gl, function () { return gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW); });
    return buffer;
}
exports.createStaticVertexBuffer = createStaticVertexBuffer;
function createStaticIndexBuffer(gl, data) {
    var buffer = throwIfNull(gl, function () { return gl.createBuffer(); }, 'Unable to create WebGLBuffer');
    callAndCheck(gl, function () { return gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer); });
    callAndCheck(gl, function () { return gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, data, gl.STATIC_DRAW); });
    return buffer;
}
exports.createStaticIndexBuffer = createStaticIndexBuffer;
function queryMaxTextureSize(gl) {
    if (MAX_TEXTURE_SIZE != null) {
        return MAX_TEXTURE_SIZE;
    }
    MAX_TEXTURE_SIZE =
        callAndCheck(gl, function () { return gl.getParameter(gl.MAX_TEXTURE_SIZE); });
    return MAX_TEXTURE_SIZE;
}
exports.queryMaxTextureSize = queryMaxTextureSize;
function getChannelsPerTexture() {
    if (isWebGL2Enabled()) {
        return 1;
    }
    return 4;
}
exports.getChannelsPerTexture = getChannelsPerTexture;
function createTexture(gl) {
    return throwIfNull(gl, function () { return gl.createTexture(); }, 'Unable to create WebGLTexture.');
}
exports.createTexture = createTexture;
function validateTextureSize(gl, width, height) {
    var maxTextureSize = queryMaxTextureSize(gl);
    if ((width <= 0) || (height <= 0)) {
        var requested = '[' + width + 'x' + height + ']';
        throw new Error('Requested texture size ' + requested + ' is invalid.');
    }
    if ((width > maxTextureSize) || (height > maxTextureSize)) {
        var requested = '[' + width + 'x' + height + ']';
        var max = '[' + maxTextureSize + 'x' + maxTextureSize + ']';
        throw new Error('Requested texture size ' + requested +
            ' greater than WebGL maximum on this browser / GPU ' + max + '.');
    }
}
exports.validateTextureSize = validateTextureSize;
function createFramebuffer(gl) {
    return throwIfNull(gl, function () { return gl.createFramebuffer(); }, 'Unable to create WebGLFramebuffer.');
}
exports.createFramebuffer = createFramebuffer;
function bindVertexBufferToProgramAttribute(gl, program, attribute, buffer, arrayEntriesPerItem, itemStrideInBytes, itemOffsetInBytes) {
    var loc = gl.getAttribLocation(program, attribute);
    if (loc === -1) {
        var error = new Error('Unable to get attribute "' + attribute + '" on WebGLProgram.');
        error.namedVertexAttributeNotFound = attribute;
        throw error;
    }
    callAndCheck(gl, function () { return gl.bindBuffer(gl.ARRAY_BUFFER, buffer); });
    callAndCheck(gl, function () { return gl.vertexAttribPointer(loc, arrayEntriesPerItem, gl.FLOAT, false, itemStrideInBytes, itemOffsetInBytes); });
    callAndCheck(gl, function () { return gl.enableVertexAttribArray(loc); });
}
exports.bindVertexBufferToProgramAttribute = bindVertexBufferToProgramAttribute;
function bindTextureUnit(gl, texture, textureUnit) {
    validateTextureUnit(gl, textureUnit);
    callAndCheck(gl, function () { return gl.activeTexture(gl.TEXTURE0 + textureUnit); });
    callAndCheck(gl, function () { return gl.bindTexture(gl.TEXTURE_2D, texture); });
}
exports.bindTextureUnit = bindTextureUnit;
function unbindTextureUnit(gl, textureUnit) {
    validateTextureUnit(gl, textureUnit);
    callAndCheck(gl, function () { return gl.activeTexture(gl.TEXTURE0 + textureUnit); });
    callAndCheck(gl, function () { return gl.bindTexture(gl.TEXTURE_2D, null); });
}
exports.unbindTextureUnit = unbindTextureUnit;
function getProgramUniformLocationOrThrow(gl, program, uniformName) {
    return throwIfNull(gl, function () { return gl.getUniformLocation(program, uniformName); }, 'uniform "' + uniformName + '" not present in program.');
}
exports.getProgramUniformLocationOrThrow = getProgramUniformLocationOrThrow;
function bindTextureToProgramUniformSampler(gl, program, texture, uniformSamplerName, textureUnit) {
    callAndCheck(gl, function () { return bindTextureUnit(gl, texture, textureUnit); });
    var samplerLocation = getProgramUniformLocationOrThrow(gl, program, uniformSamplerName);
    callAndCheck(gl, function () { return gl.uniform1i(samplerLocation, textureUnit); });
}
exports.bindTextureToProgramUniformSampler = bindTextureToProgramUniformSampler;
function bindCanvasToFramebuffer(gl) {
    callAndCheck(gl, function () { return gl.bindFramebuffer(gl.FRAMEBUFFER, null); });
    callAndCheck(gl, function () { return gl.viewport(0, 0, gl.canvas.width, gl.canvas.height); });
    callAndCheck(gl, function () { return gl.scissor(0, 0, gl.canvas.width, gl.canvas.height); });
}
exports.bindCanvasToFramebuffer = bindCanvasToFramebuffer;
function bindColorTextureToFramebuffer(gl, texture, framebuffer) {
    callAndCheck(gl, function () { return gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer); });
    callAndCheck(gl, function () { return gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0); });
}
exports.bindColorTextureToFramebuffer = bindColorTextureToFramebuffer;
function unbindColorTextureFromFramebuffer(gl, framebuffer) {
    callAndCheck(gl, function () { return gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer); });
    callAndCheck(gl, function () { return gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, null, 0); });
}
exports.unbindColorTextureFromFramebuffer = unbindColorTextureFromFramebuffer;
function validateFramebuffer(gl) {
    var status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);
    if (status !== gl.FRAMEBUFFER_COMPLETE) {
        throw new Error('Error binding framebuffer: ' + getFramebufferErrorMessage(gl, status));
    }
}
exports.validateFramebuffer = validateFramebuffer;
function getFramebufferErrorMessage(gl, status) {
    switch (status) {
        case gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:
            return 'FRAMEBUFFER_INCOMPLETE_ATTACHMENT';
        case gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:
            return 'FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT';
        case gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:
            return 'FRAMEBUFFER_INCOMPLETE_DIMENSIONS';
        case gl.FRAMEBUFFER_UNSUPPORTED:
            return 'FRAMEBUFFER_UNSUPPORTED';
        default:
            return 'unknown error ' + status;
    }
}
exports.getFramebufferErrorMessage = getFramebufferErrorMessage;
function throwIfNull(gl, returnTOrNull, failureMessage) {
    var tOrNull = callAndCheck(gl, function () { return returnTOrNull(); });
    if (tOrNull == null) {
        throw new Error(failureMessage);
    }
    return tOrNull;
}
function validateTextureUnit(gl, textureUnit) {
    var maxTextureUnit = gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS - 1;
    var glTextureUnit = textureUnit + gl.TEXTURE0;
    if (glTextureUnit < gl.TEXTURE0 || glTextureUnit > maxTextureUnit) {
        var textureUnitRange = '[gl.TEXTURE0, gl.TEXTURE' + maxTextureUnit + ']';
        throw new Error('textureUnit must be in ' + textureUnitRange + '.');
    }
}
function getTextureShapeFromLogicalShape(gl, logicalShape, preferredTexShape) {
    var maxTexSize = queryMaxTextureSize(gl);
    var size = util.sizeFromShape(logicalShape);
    if (preferredTexShape != null) {
        var sizePreferred = util.sizeFromShape(preferredTexShape);
        util.assert(size === sizePreferred, "Size of shape (" + size + ") must match size of " +
            ("preferredShape (" + sizePreferred + ")"));
        if (preferredTexShape[0] <= maxTexSize &&
            preferredTexShape[1] <= maxTexSize) {
            return preferredTexShape;
        }
    }
    if (logicalShape.length <= 1 && size <= maxTexSize) {
        return [size, 1];
    }
    else if (logicalShape.length === 2 && logicalShape[0] <= maxTexSize &&
        logicalShape[1] <= maxTexSize) {
        return logicalShape;
    }
    else if (logicalShape.length === 3 && logicalShape[0] <= maxTexSize &&
        logicalShape[1] * logicalShape[2] <= maxTexSize) {
        return [logicalShape[0], logicalShape[1] * logicalShape[2]];
    }
    else {
        return util.sizeToSquarishShape(size);
    }
}
exports.getTextureShapeFromLogicalShape = getTextureShapeFromLogicalShape;

},{"../../util":88}],61:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var graph_1 = require("./graph");
var graph_util = require("./graph_util");
var add_1 = require("./ops/add");
var argmax_1 = require("./ops/argmax");
var argmaxequals_1 = require("./ops/argmaxequals");
var concat3d_1 = require("./ops/concat3d");
var convolution_1 = require("./ops/convolution");
var divide_1 = require("./ops/divide");
var element_wise_activation_1 = require("./ops/element_wise_activation");
var element_wise_cost_1 = require("./ops/element_wise_cost");
var exp_1 = require("./ops/exp");
var linear_combination_1 = require("./ops/linear_combination");
var log_1 = require("./ops/log");
var matmul_1 = require("./ops/matmul");
var max_pool_1 = require("./ops/max_pool");
var multiply_1 = require("./ops/multiply");
var reduce_sum_1 = require("./ops/reduce_sum");
var reshape_1 = require("./ops/reshape");
var softmax_1 = require("./ops/softmax");
var split_1 = require("./ops/split");
var subtract_1 = require("./ops/subtract");
function emitFromGraphNodes(nodes) {
    var ops = [];
    nodes.forEach(function (node) { return Array.prototype.push.apply(ops, emitOpFromNode(node)); });
    return ops;
}
exports.emitFromGraphNodes = emitFromGraphNodes;
function emitOpFromNode(node) {
    if (node instanceof graph_1.ReshapeNode) {
        return [new reshape_1.Reshape(node.inputs[graph_1.ReshapeNode.X], node.output)];
    }
    else if (node instanceof graph_1.MatMulNode) {
        var x1 = node.inputs[graph_1.MatMulNode.X1];
        var x2 = node.inputs[graph_1.MatMulNode.X2];
        return [new matmul_1.MatMul(x1, x2, node.output)];
    }
    else if (node instanceof graph_1.Convolution2DNode) {
        var w = node.inputs[graph_1.Convolution2DNode.W];
        var x = node.inputs[graph_1.Convolution2DNode.X];
        var b = node.inputs[graph_1.Convolution2DNode.B];
        return [new convolution_1.Convolution2D(w, x, b, node.output, node.fieldSize, node.outputDepth, node.stride, node.zeroPad)];
    }
    else if (node instanceof graph_1.MaxPoolNode) {
        var x = node.inputs[graph_1.MaxPoolNode.X];
        return [new max_pool_1.MaxPool(x, node.output, node.fieldSize, node.stride, node.zeroPad)];
    }
    else if (node instanceof graph_1.ExpNode) {
        return [new exp_1.Exp(node.inputs[graph_1.ExpNode.X], node.output)];
    }
    else if (node instanceof graph_1.LogNode) {
        return [new log_1.Log(node.inputs[graph_1.LogNode.X], node.output)];
    }
    else if (node instanceof graph_1.ReLUNode) {
        return [new element_wise_activation_1.ReLU(node.inputs[graph_1.ReLUNode.X], node.output)];
    }
    else if (node instanceof graph_1.TanHNode) {
        return [new element_wise_activation_1.TanH(node.inputs[graph_1.TanHNode.X], node.output)];
    }
    else if (node instanceof graph_1.SigmoidNode) {
        return [new element_wise_activation_1.Sigmoid(node.inputs[graph_1.SigmoidNode.X], node.output)];
    }
    else if (node instanceof graph_1.SoftmaxCrossEntropyCostNode) {
        var x = node.inputs[graph_1.SoftmaxCrossEntropyCostNode.X];
        var target = node.inputs[graph_1.SoftmaxCrossEntropyCostNode.TARGET];
        return [new softmax_1.SoftmaxCrossEntropyCost(x, target, node.output)];
    }
    else if (node instanceof graph_1.SoftmaxNode) {
        return [new softmax_1.Softmax(node.inputs[graph_1.SoftmaxNode.X], node.output)];
    }
    else if (node instanceof graph_1.MeanSquaredCostNode) {
        var label = node.inputs[graph_1.MeanSquaredCostNode.LABEL];
        var prediction = node.inputs[graph_1.MeanSquaredCostNode.PREDICTION];
        return [new element_wise_cost_1.MeanSquaredCost(label, prediction, node.output)];
    }
    else if (node instanceof graph_1.ArgMaxEqualsNode) {
        return [new argmaxequals_1.ArgMaxEquals(node.inputs[graph_1.ArgMaxEqualsNode.X1], node.inputs[graph_1.ArgMaxEqualsNode.X2], node.output)];
    }
    else if (node instanceof graph_1.ArgMaxNode) {
        return [new argmax_1.ArgMax(node.x, node.output)];
    }
    else if (node instanceof graph_1.FusedLinearCombinationNode) {
        return [new linear_combination_1.LinearCombination(node.inputs[graph_1.FusedLinearCombinationNode.T1], node.inputs[graph_1.FusedLinearCombinationNode.T2], node.inputs[graph_1.FusedLinearCombinationNode.C1], node.inputs[graph_1.FusedLinearCombinationNode.C2], node.output)];
    }
    else if (node instanceof graph_1.Concat3DNode) {
        return [new concat3d_1.Concat3D(node.inputs[graph_1.Concat3DNode.X1], node.inputs[graph_1.Concat3DNode.X2], node.axis, node.output)];
    }
    else if (node instanceof graph_1.SquareNode) {
        return [new element_wise_activation_1.Square(node.inputs[graph_1.SquareNode.X], node.output)];
    }
    else if (node instanceof graph_1.AddNode) {
        return [new add_1.Add(node.inputs[graph_1.AddNode.T1], node.inputs[graph_1.AddNode.T2], node.output)];
    }
    else if (node instanceof graph_1.SubtractNode) {
        return [new subtract_1.Subtract(node.inputs[graph_1.SubtractNode.T1], node.inputs[graph_1.SubtractNode.T2], node.output)];
    }
    else if (node instanceof graph_1.MultiplyNode) {
        return [new multiply_1.Multiply(node.inputs[graph_1.MultiplyNode.T1], node.inputs[graph_1.MultiplyNode.T2], node.output)];
    }
    else if (node instanceof graph_1.DivideNode) {
        return [new divide_1.Divide(node.inputs[graph_1.DivideNode.T1], node.inputs[graph_1.DivideNode.T2], node.output)];
    }
    else if (node instanceof graph_1.SplitNode) {
        return [new split_1.Split(node.inputs[graph_1.SplitNode.X], node.outputs)];
    }
    else if (node instanceof graph_1.ReduceSumNode) {
        return [new reduce_sum_1.ReduceSum(node.inputs[graph_1.ReduceSumNode.X], node.output)];
    }
    else if (graph_util.isInputNode(node)) {
        return [];
    }
    else {
        throw Error('Unsupported node type: ' + node.constructor.name);
    }
}

},{"./graph":9,"./graph_util":12,"./ops/add":62,"./ops/argmax":63,"./ops/argmaxequals":64,"./ops/concat3d":65,"./ops/convolution":66,"./ops/divide":67,"./ops/element_wise_activation":68,"./ops/element_wise_cost":69,"./ops/exp":70,"./ops/linear_combination":71,"./ops/log":72,"./ops/matmul":73,"./ops/max_pool":74,"./ops/multiply":75,"./ops/reduce_sum":77,"./ops/reshape":78,"./ops/softmax":79,"./ops/split":80,"./ops/subtract":81}],62:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var graph_util = require("../graph_util");
var ndarray_1 = require("../math/ndarray");
var util = require("../util");
var op_1 = require("./op");
var Add = (function (_super) {
    __extends(Add, _super);
    function Add(x1Tensor, x2Tensor, yTensor) {
        var _this = _super.call(this) || this;
        _this.x1Tensor = x1Tensor;
        _this.x2Tensor = x2Tensor;
        _this.yTensor = yTensor;
        util.assert(util.sizeFromShape(x1Tensor.shape) === 1 ||
            util.sizeFromShape(x2Tensor.shape) === 1 ||
            util.arraysEqual(x1Tensor.shape, x2Tensor.shape), 'One of t1 or t2 must be a scalar, or t1 and t2 must have ' +
            'the same shape');
        return _this;
    }
    Add.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var x1 = inferenceArrays.get(this.x1Tensor);
        var x2 = inferenceArrays.get(this.x2Tensor);
        math.scope(function (keep) {
            var result;
            if (util.isScalarShape(x1.shape)) {
                result = math.scalarPlusArray(x1, x2);
            }
            else if (util.isScalarShape(x2.shape)) {
                result = math.scalarPlusArray(x2, x1);
            }
            else {
                result = math.add(x1, x2);
            }
            inferenceArrays.set(_this.yTensor, keep(result));
        });
    };
    Add.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        var x1 = inferenceArrays.get(this.x1Tensor);
        var x2 = inferenceArrays.get(this.x2Tensor);
        var dy = gradientArrays.get(this.yTensor);
        math.scope(function (keep) {
            if (graph_util.shouldBackProp(_this.x1Tensor)) {
                if (util.isScalarShape(_this.x1Tensor.shape)) {
                    var sum = math.sum(dy);
                    if (_this.dySizeScalar == null) {
                        _this.dySizeScalar = ndarray_1.Scalar.new(dy.size);
                    }
                    gradientArrays.set(_this.x1Tensor, keep(math.divide(sum, _this.dySizeScalar)));
                }
                else {
                    gradientArrays.set(_this.x1Tensor, dy);
                }
            }
            if (graph_util.shouldBackProp(_this.x2Tensor)) {
                if (util.isScalarShape(_this.x2Tensor.shape)) {
                    var sum = math.sum(dy);
                    if (_this.dySizeScalar == null) {
                        _this.dySizeScalar = ndarray_1.Scalar.new(dy.size);
                    }
                    gradientArrays.set(_this.x2Tensor, keep(math.divide(sum, _this.dySizeScalar)));
                }
                else {
                    gradientArrays.set(_this.x2Tensor, dy);
                }
            }
        });
    };
    Add.prototype.dispose = function () {
        if (this.dySizeScalar != null) {
            this.dySizeScalar.dispose();
        }
    };
    return Add;
}(op_1.Operation));
exports.Add = Add;

},{"../graph_util":12,"../math/ndarray":24,"../util":88,"./op":76}],63:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var op_1 = require("./op");
var ArgMax = (function (_super) {
    __extends(ArgMax, _super);
    function ArgMax(xTensor, yTensor) {
        var _this = _super.call(this) || this;
        _this.xTensor = xTensor;
        _this.yTensor = yTensor;
        return _this;
    }
    ArgMax.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var x = inferenceArrays.get(this.xTensor);
        math.scope(function (keep) {
            inferenceArrays.set(_this.yTensor, keep(math.argMax(x)));
        });
    };
    ArgMax.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        throw new Error('ArgMax backprop unimplemented');
    };
    return ArgMax;
}(op_1.Operation));
exports.ArgMax = ArgMax;

},{"./op":76}],64:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var op_1 = require("./op");
var ArgMaxEquals = (function (_super) {
    __extends(ArgMaxEquals, _super);
    function ArgMaxEquals(x1Tensor, x2Tensor, yTensor) {
        var _this = _super.call(this) || this;
        _this.x1Tensor = x1Tensor;
        _this.x2Tensor = x2Tensor;
        _this.yTensor = yTensor;
        return _this;
    }
    ArgMaxEquals.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var x1 = inferenceArrays.get(this.x1Tensor);
        var x2 = inferenceArrays.get(this.x2Tensor);
        math.scope(function (keep) {
            inferenceArrays.set(_this.yTensor, keep(math.argMaxEquals(x1, x2)));
        });
    };
    ArgMaxEquals.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        throw new Error('ArgMaxEquals backprop unimplemented');
    };
    return ArgMaxEquals;
}(op_1.Operation));
exports.ArgMaxEquals = ArgMaxEquals;

},{"./op":76}],65:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var concat3d_util = require("../math/concat3d_util");
var op_1 = require("./op");
var Concat3D = (function (_super) {
    __extends(Concat3D, _super);
    function Concat3D(x1Tensor, x2Tensor, axis, yTensor) {
        var _this = _super.call(this) || this;
        _this.x1Tensor = x1Tensor;
        _this.x2Tensor = x2Tensor;
        _this.axis = axis;
        _this.yTensor = yTensor;
        concat3d_util.assertConcat3DShapesMatch(x1Tensor.shape, x2Tensor.shape, axis);
        return _this;
    }
    Concat3D.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var x1 = inferenceArrays.get(this.x1Tensor);
        var x2 = inferenceArrays.get(this.x2Tensor);
        math.scope(function (keep) {
            var concatResult = math.concat3D(x1, x2, _this.axis);
            inferenceArrays.set(_this.yTensor, keep(concatResult));
        });
    };
    Concat3D.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        throw new Error('Concat3D backprop not implemented.');
    };
    return Concat3D;
}(op_1.Operation));
exports.Concat3D = Concat3D;

},{"../math/concat3d_util":17,"./op":76}],66:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var conv_util = require("../math/conv_util");
var util = require("../util");
var op_1 = require("./op");
var Convolution2D = (function (_super) {
    __extends(Convolution2D, _super);
    function Convolution2D(wTensor, xTensor, bTensor, yTensor, fieldSize, outputDepth, stride, zeroPad) {
        if (stride === void 0) { stride = 1; }
        var _this = _super.call(this) || this;
        _this.wTensor = wTensor;
        _this.xTensor = xTensor;
        _this.bTensor = bTensor;
        _this.yTensor = yTensor;
        _this.fieldSize = fieldSize;
        _this.outputDepth = outputDepth;
        _this.stride = stride;
        _this.assertWeightsShape(wTensor.shape);
        _this.zeroPad = zeroPad != null ?
            zeroPad :
            conv_util.computeDefaultPad(_this.xTensor.shape, _this.fieldSize, _this.stride);
        util.assert(util.isInt(_this.zeroPad), "The zero padding (" + _this.zeroPad + ") must be an integer. Change the " +
            "stride and/or zero pad parameters");
        return _this;
    }
    Convolution2D.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var weights = inferenceArrays.get(this.wTensor);
        var biases = inferenceArrays.get(this.bTensor);
        var x = inferenceArrays.get(this.xTensor);
        math.scope(function (keep) {
            inferenceArrays.set(_this.yTensor, keep(math.conv2d(x, weights, biases, _this.stride, _this.zeroPad)));
        });
    };
    Convolution2D.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        var weights = inferenceArrays.get(this.wTensor);
        var x = inferenceArrays.get(this.xTensor);
        var dy = gradientArrays.get(this.yTensor);
        math.scope(function (keep) {
            var _a = math.conv2dBackProp(x, dy, weights, _this.stride, _this.zeroPad), dw = _a.dw, db = _a.db, dx = _a.dx;
            gradientArrays.set(_this.wTensor, keep(dw));
            gradientArrays.set(_this.bTensor, keep(db));
            gradientArrays.set(_this.xTensor, keep(dx));
        });
    };
    Convolution2D.prototype.assertWeightsShape = function (weightsShape) {
        util.assert(weightsShape[0] === this.fieldSize &&
            weightsShape[1] === this.fieldSize &&
            weightsShape[2] === this.xTensor.shape[2] &&
            weightsShape[3] === this.outputDepth, "weights must be of shape [" + this.fieldSize + "," + this.fieldSize + "," +
            (this.xTensor.shape[2] + "," + this.outputDepth + "] but they are of") +
            ("shape [" + weightsShape + "]"));
    };
    return Convolution2D;
}(op_1.Operation));
exports.Convolution2D = Convolution2D;

},{"../math/conv_util":18,"../util":88,"./op":76}],67:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var graph_util = require("../graph_util");
var util = require("../util");
var op_1 = require("./op");
var Divide = (function (_super) {
    __extends(Divide, _super);
    function Divide(x1Tensor, x2Tensor, yTensor) {
        var _this = _super.call(this) || this;
        _this.x1Tensor = x1Tensor;
        _this.x2Tensor = x2Tensor;
        _this.yTensor = yTensor;
        util.assert(util.sizeFromShape(x1Tensor.shape) === 1 ||
            util.sizeFromShape(x2Tensor.shape) === 1 ||
            util.arraysEqual(x1Tensor.shape, x2Tensor.shape), 'One of t1 or t2 must be a scalar, or t1 and t2 must have ' +
            'the same shape');
        return _this;
    }
    Divide.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var t1 = inferenceArrays.get(this.x1Tensor);
        var t2 = inferenceArrays.get(this.x2Tensor);
        math.scope(function (keep) {
            var result;
            if (util.isScalarShape(t1.shape)) {
                result = math.scalarDividedByArray(t1, t2);
            }
            else if (util.isScalarShape(t2.shape)) {
                result = math.arrayDividedByScalar(t1, t2);
            }
            else {
                result = math.divide(t1, t2);
            }
            inferenceArrays.set(_this.yTensor, keep(result));
        });
    };
    Divide.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        var x1 = inferenceArrays.get(this.x1Tensor);
        var x2 = inferenceArrays.get(this.x2Tensor);
        var dy = gradientArrays.get(this.yTensor);
        var x1IsScalar = util.isScalarShape(x1.shape);
        var x2IsScalar = util.isScalarShape(x2.shape);
        math.scope(function (keep) {
            if (graph_util.shouldBackProp(_this.x1Tensor)) {
                if (x1IsScalar) {
                    var div = math.divide(dy, x2);
                    gradientArrays.set(_this.x1Tensor, keep(math.sum(div)));
                    div.dispose();
                }
                else if (x2IsScalar) {
                    gradientArrays.set(_this.x1Tensor, keep(math.arrayDividedByScalar(dy, x2)));
                }
                else {
                    gradientArrays.set(_this.x1Tensor, keep(math.divide(dy, x2)));
                }
            }
            if (graph_util.shouldBackProp(_this.x2Tensor)) {
                var x2Squared = math.elementWiseMul(x2, x2);
                var x1OverX2Squared = void 0;
                if (x2IsScalar) {
                    x1OverX2Squared = math.arrayDividedByScalar(x1, x2Squared);
                }
                else if (x1IsScalar) {
                    x1OverX2Squared = math.scalarDividedByArray(x1, x2Squared);
                }
                else {
                    x1OverX2Squared = math.divide(x1, x2Squared);
                }
                var dx2 = math.neg(x1OverX2Squared);
                var dyTimesDerivative = math.elementWiseMul(dy, dx2);
                if (x2IsScalar) {
                    gradientArrays.set(_this.x2Tensor, keep(math.sum(dyTimesDerivative)));
                }
                else {
                    gradientArrays.set(_this.x2Tensor, keep(dyTimesDerivative));
                }
            }
        });
    };
    return Divide;
}(op_1.Operation));
exports.Divide = Divide;

},{"../graph_util":12,"../util":88,"./op":76}],68:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var activation_functions_1 = require("../math/activation_functions");
var op_1 = require("./op");
var ElementWiseActivation = (function (_super) {
    __extends(ElementWiseActivation, _super);
    function ElementWiseActivation(xTensor, yTensor, func) {
        var _this = _super.call(this) || this;
        _this.xTensor = xTensor;
        _this.yTensor = yTensor;
        _this.func = func;
        return _this;
    }
    ElementWiseActivation.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var x = inferenceArrays.get(this.xTensor);
        math.scope(function (keep) {
            inferenceArrays.set(_this.yTensor, keep(_this.func.output(math, x)));
        });
    };
    ElementWiseActivation.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        var x = inferenceArrays.get(this.xTensor);
        var y = inferenceArrays.get(this.yTensor);
        var dy = gradientArrays.get(this.yTensor);
        math.scope(function (keep) {
            var dydx = _this.func.der(math, x, y);
            gradientArrays.set(_this.xTensor, keep(math.elementWiseMul(dy, dydx)));
            dydx.dispose();
        });
    };
    return ElementWiseActivation;
}(op_1.Operation));
exports.ElementWiseActivation = ElementWiseActivation;
var ReLU = (function (_super) {
    __extends(ReLU, _super);
    function ReLU(xTensor, yTensor) {
        return _super.call(this, xTensor, yTensor, new activation_functions_1.ReLUFunc()) || this;
    }
    return ReLU;
}(ElementWiseActivation));
exports.ReLU = ReLU;
var TanH = (function (_super) {
    __extends(TanH, _super);
    function TanH(xTensor, yTensor) {
        return _super.call(this, xTensor, yTensor, new activation_functions_1.TanHFunc()) || this;
    }
    return TanH;
}(ElementWiseActivation));
exports.TanH = TanH;
var Sigmoid = (function (_super) {
    __extends(Sigmoid, _super);
    function Sigmoid(xTensor, yTensor) {
        return _super.call(this, xTensor, yTensor, new activation_functions_1.SigmoidFunc()) || this;
    }
    return Sigmoid;
}(ElementWiseActivation));
exports.Sigmoid = Sigmoid;
var Square = (function (_super) {
    __extends(Square, _super);
    function Square(xTensor, yTensor) {
        return _super.call(this, xTensor, yTensor, new activation_functions_1.SquareFunc()) || this;
    }
    return Square;
}(ElementWiseActivation));
exports.Square = Square;

},{"../math/activation_functions":16,"./op":76}],69:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var graph_util = require("../graph_util");
var cost_functions_1 = require("../math/cost_functions");
var ndarray_1 = require("../math/ndarray");
var util = require("../util");
var op_1 = require("./op");
var ElementWiseCost = (function (_super) {
    __extends(ElementWiseCost, _super);
    function ElementWiseCost(x1Tensor, x2Tensor, yTensor, func) {
        var _this = _super.call(this) || this;
        _this.x1Tensor = x1Tensor;
        _this.x2Tensor = x2Tensor;
        _this.yTensor = yTensor;
        _this.func = func;
        _this.oneOverNScalar = ndarray_1.Scalar.new(1 / util.sizeFromShape(x1Tensor.shape));
        return _this;
    }
    ElementWiseCost.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var x1 = inferenceArrays.get(this.x1Tensor);
        var x2 = inferenceArrays.get(this.x2Tensor);
        math.scope(function (keep) {
            var elementWiseCost = _this.func.cost(math, x1, x2);
            var sum = math.sum(elementWiseCost);
            var result = math.scalarTimesArray(_this.oneOverNScalar, sum);
            inferenceArrays.set(_this.yTensor, keep(result));
        });
    };
    ElementWiseCost.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        var x1 = inferenceArrays.get(this.x1Tensor);
        var x2 = inferenceArrays.get(this.x2Tensor);
        math.scope(function (keep) {
            if (graph_util.shouldBackProp(_this.x1Tensor)) {
                gradientArrays.set(_this.x1Tensor, keep(_this.func.der(math, x1, x2)));
            }
            if (graph_util.shouldBackProp(_this.x2Tensor)) {
                gradientArrays.set(_this.x2Tensor, keep(_this.func.der(math, x2, x1)));
            }
        });
    };
    ElementWiseCost.prototype.dispose = function () {
        this.func.dispose();
        this.oneOverNScalar.dispose();
    };
    return ElementWiseCost;
}(op_1.Operation));
exports.ElementWiseCost = ElementWiseCost;
var MeanSquaredCost = (function (_super) {
    __extends(MeanSquaredCost, _super);
    function MeanSquaredCost(x1Tensor, x2Tensor, yTensor) {
        return _super.call(this, x1Tensor, x2Tensor, yTensor, new cost_functions_1.SquareCostFunc()) || this;
    }
    return MeanSquaredCost;
}(ElementWiseCost));
exports.MeanSquaredCost = MeanSquaredCost;

},{"../graph_util":12,"../math/cost_functions":20,"../math/ndarray":24,"../util":88,"./op":76}],70:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var graph_util = require("../graph_util");
var op_1 = require("./op");
var Exp = (function (_super) {
    __extends(Exp, _super);
    function Exp(xTensor, yTensor) {
        var _this = _super.call(this) || this;
        _this.xTensor = xTensor;
        _this.yTensor = yTensor;
        return _this;
    }
    Exp.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var x = inferenceArrays.get(this.xTensor);
        math.scope(function (keep) {
            inferenceArrays.set(_this.yTensor, keep(math.exp(x)));
        });
    };
    Exp.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        var y = inferenceArrays.get(this.yTensor);
        var dy = gradientArrays.get(this.yTensor);
        math.scope(function (keep) {
            if (graph_util.shouldBackProp(_this.xTensor)) {
                gradientArrays.set(_this.xTensor, keep(math.elementWiseMul(y, dy)));
            }
        });
    };
    return Exp;
}(op_1.Operation));
exports.Exp = Exp;

},{"../graph_util":12,"./op":76}],71:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var graph_util = require("../graph_util");
var op_1 = require("./op");
var LinearCombination = (function (_super) {
    __extends(LinearCombination, _super);
    function LinearCombination(x1Tensor, x2Tensor, c1Tensor, c2Tensor, outTensor) {
        var _this = _super.call(this) || this;
        _this.x1Tensor = x1Tensor;
        _this.x2Tensor = x2Tensor;
        _this.c1Tensor = c1Tensor;
        _this.c2Tensor = c2Tensor;
        _this.outTensor = outTensor;
        return _this;
    }
    LinearCombination.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var x1 = inferenceArrays.get(this.x1Tensor);
        var x2 = inferenceArrays.get(this.x2Tensor);
        var c1 = inferenceArrays.get(this.c1Tensor).asScalar();
        var c2 = inferenceArrays.get(this.c2Tensor).asScalar();
        math.scope(function (keep) {
            inferenceArrays.set(_this.outTensor, keep(math.scaledArrayAdd(c1, x1, c2, x2)));
        });
    };
    LinearCombination.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        var x1 = inferenceArrays.get(this.x1Tensor);
        var x2 = inferenceArrays.get(this.x2Tensor);
        var c1 = inferenceArrays.get(this.c1Tensor);
        var c2 = inferenceArrays.get(this.c2Tensor);
        var dy = gradientArrays.get(this.outTensor);
        math.scope(function (keep) {
            if (graph_util.shouldBackProp(_this.x1Tensor)) {
                gradientArrays.set(_this.x1Tensor, keep(math.scalarTimesArray(c1, dy)));
            }
            if (graph_util.shouldBackProp(_this.x2Tensor)) {
                gradientArrays.set(_this.x2Tensor, keep(math.scalarTimesArray(c2, dy)));
            }
            if (graph_util.shouldBackProp(_this.c1Tensor)) {
                var dotProduct1 = math.elementWiseMul(x1, dy);
                gradientArrays.set(_this.c1Tensor, keep(math.sum(dotProduct1)));
            }
            if (graph_util.shouldBackProp(_this.c2Tensor)) {
                var dotProduct2 = math.elementWiseMul(x2, dy);
                gradientArrays.set(_this.c2Tensor, keep(math.sum(dotProduct2)));
            }
        });
    };
    return LinearCombination;
}(op_1.Operation));
exports.LinearCombination = LinearCombination;

},{"../graph_util":12,"./op":76}],72:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var graph_util = require("../graph_util");
var op_1 = require("./op");
var Log = (function (_super) {
    __extends(Log, _super);
    function Log(xTensor, yTensor) {
        var _this = _super.call(this) || this;
        _this.xTensor = xTensor;
        _this.yTensor = yTensor;
        return _this;
    }
    Log.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var x = inferenceArrays.get(this.xTensor);
        math.scope(function (keep) {
            inferenceArrays.set(_this.yTensor, keep(math.log(x)));
        });
    };
    Log.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        var x = inferenceArrays.get(this.xTensor);
        var dy = gradientArrays.get(this.yTensor);
        math.scope(function (keep) {
            if (graph_util.shouldBackProp(_this.xTensor)) {
                gradientArrays.set(_this.xTensor, keep(math.divide(dy, x)));
            }
        });
    };
    return Log;
}(op_1.Operation));
exports.Log = Log;

},{"../graph_util":12,"./op":76}],73:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var graph_util = require("../graph_util");
var math_1 = require("../math/math");
var op_1 = require("./op");
var MatMul = (function (_super) {
    __extends(MatMul, _super);
    function MatMul(x1Tensor, x2Tensor, yTensor) {
        var _this = _super.call(this) || this;
        _this.x1Tensor = x1Tensor;
        _this.x2Tensor = x2Tensor;
        _this.yTensor = yTensor;
        return _this;
    }
    MatMul.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var x1 = inferenceArrays.get(this.x1Tensor);
        var x2 = inferenceArrays.get(this.x2Tensor);
        math.scope(function (keep) {
            if (x1.shape.length === 2 && x2.shape.length === 2) {
                inferenceArrays.set(_this.yTensor, keep(math.matMul(x1, x2)));
            }
            else if (x1.shape.length === 2 && x2.shape.length === 1) {
                inferenceArrays.set(_this.yTensor, keep(math.matrixTimesVector(x1, x2)));
            }
            else if (x1.shape.length === 1 && x2.shape.length === 2) {
                inferenceArrays.set(_this.yTensor, keep(math.vectorTimesMatrix(x1, x2)));
            }
        });
    };
    MatMul.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        var x1 = inferenceArrays.get(this.x1Tensor);
        var x2 = inferenceArrays.get(this.x2Tensor);
        var dy = gradientArrays.get(this.yTensor);
        if (x1.shape.length === 1) {
            x1 = x1.reshape([1, x1.size]);
            dy = dy.reshape([1, dy.size]);
        }
        if (x2.shape.length === 1) {
            x2 = x2.reshape([x2.size, 1]);
            dy = dy.reshape([dy.size, 1]);
        }
        math.scope(function (keep) {
            if (graph_util.shouldBackProp(_this.x1Tensor)) {
                var dx1 = math.matMul(dy, x2, math_1.MatrixOrientation.REGULAR, math_1.MatrixOrientation.TRANSPOSED);
                gradientArrays.set(_this.x1Tensor, keep(_this.x1Tensor.shape.length === 1 ? dx1.as1D() : dx1));
            }
            if (graph_util.shouldBackProp(_this.x2Tensor)) {
                var dx2 = math.matMul(x1, dy, math_1.MatrixOrientation.TRANSPOSED, math_1.MatrixOrientation.REGULAR);
                gradientArrays.set(_this.x2Tensor, keep(_this.x2Tensor.shape.length === 1 ? dx2.as1D() : dx2));
            }
        });
    };
    return MatMul;
}(op_1.Operation));
exports.MatMul = MatMul;

},{"../graph_util":12,"../math/math":21,"./op":76}],74:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var conv_util = require("../math/conv_util");
var util = require("../util");
var op_1 = require("./op");
var MaxPool = (function (_super) {
    __extends(MaxPool, _super);
    function MaxPool(xTensor, yTensor, fieldSize, stride, pad) {
        if (stride === void 0) { stride = 1; }
        var _this = _super.call(this) || this;
        _this.xTensor = xTensor;
        _this.yTensor = yTensor;
        _this.fieldSize = fieldSize;
        _this.stride = stride;
        if (pad != null) {
            _this.pad = pad;
        }
        else {
            _this.pad = conv_util.computeDefaultPad(xTensor.shape, _this.fieldSize, _this.stride);
        }
        util.assert(util.isInt(_this.pad), "The zero padding (" + _this.pad + ") must be an integer. Change the " +
            "stride and/or zero pad parameters");
        return _this;
    }
    MaxPool.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var x = inferenceArrays.get(this.xTensor);
        math.scope(function (keep) {
            inferenceArrays.set(_this.yTensor, keep(math.maxPool(x, _this.fieldSize, _this.stride, _this.pad)));
        });
    };
    MaxPool.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        var x = inferenceArrays.get(this.xTensor);
        var dy = gradientArrays.get(this.yTensor);
        math.scope(function (keep) {
            gradientArrays.set(_this.xTensor, keep(math.maxPoolBackprop(dy, x, _this.fieldSize, _this.stride, _this.pad)));
        });
    };
    return MaxPool;
}(op_1.Operation));
exports.MaxPool = MaxPool;

},{"../math/conv_util":18,"../util":88,"./op":76}],75:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var graph_util = require("../graph_util");
var util = require("../util");
var op_1 = require("./op");
var Multiply = (function (_super) {
    __extends(Multiply, _super);
    function Multiply(x1Tensor, x2Tensor, yTensor) {
        var _this = _super.call(this) || this;
        _this.x1Tensor = x1Tensor;
        _this.x2Tensor = x2Tensor;
        _this.yTensor = yTensor;
        util.assert(util.sizeFromShape(x1Tensor.shape) === 1 ||
            util.sizeFromShape(x2Tensor.shape) === 1 ||
            util.arraysEqual(x1Tensor.shape, x2Tensor.shape), 'One of t1 or t2 must be a scalar, or t1 and t2 must have ' +
            'the same shape');
        return _this;
    }
    Multiply.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var t1 = inferenceArrays.get(this.x1Tensor);
        var t2 = inferenceArrays.get(this.x2Tensor);
        math.scope(function (keep) {
            var result;
            if (util.isScalarShape(t1.shape)) {
                result = math.scalarTimesArray(t1, t2);
            }
            else if (util.isScalarShape(t2.shape)) {
                result = math.scalarTimesArray(t2, t1);
            }
            else {
                result = math.elementWiseMul(t1, t2);
            }
            inferenceArrays.set(_this.yTensor, keep(result));
        });
    };
    Multiply.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        var x1 = inferenceArrays.get(this.x1Tensor);
        var x2 = inferenceArrays.get(this.x2Tensor);
        var dy = gradientArrays.get(this.yTensor);
        math.scope(function (keep) {
            if (graph_util.shouldBackProp(_this.x1Tensor)) {
                if (util.isScalarShape(_this.x1Tensor.shape)) {
                    var mul = math.elementWiseMul(dy, x2);
                    gradientArrays.set(_this.x1Tensor, keep(math.sum(mul)));
                }
                else if (util.isScalarShape(x2.shape)) {
                    gradientArrays.set(_this.x1Tensor, keep(math.scalarTimesArray(x2, dy)));
                }
                else {
                    gradientArrays.set(_this.x1Tensor, keep(math.elementWiseMul(x2, dy)));
                }
            }
            if (graph_util.shouldBackProp(_this.x2Tensor)) {
                if (util.isScalarShape(_this.x2Tensor.shape)) {
                    var mul = math.elementWiseMul(dy, x1);
                    gradientArrays.set(_this.x2Tensor, keep(math.sum(mul)));
                }
                else if (util.isScalarShape(x1.shape)) {
                    gradientArrays.set(_this.x2Tensor, keep(math.scalarTimesArray(x1, dy)));
                }
                else {
                    gradientArrays.set(_this.x2Tensor, keep(math.elementWiseMul(x1, dy)));
                }
            }
        });
    };
    return Multiply;
}(op_1.Operation));
exports.Multiply = Multiply;

},{"../graph_util":12,"../util":88,"./op":76}],76:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Operation = (function () {
    function Operation() {
    }
    Operation.prototype.disposeTransientArrays = function (inferenceArrays, gradientArrays) { };
    Operation.prototype.dispose = function () { };
    return Operation;
}());
exports.Operation = Operation;

},{}],77:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var graph_util = require("../graph_util");
var ndarray_1 = require("../math/ndarray");
var util = require("../util");
var op_1 = require("./op");
var ReduceSum = (function (_super) {
    __extends(ReduceSum, _super);
    function ReduceSum(x, outTensor) {
        var _this = _super.call(this) || this;
        _this.x = x;
        _this.outTensor = outTensor;
        util.assertShapesMatch(outTensor.shape, []);
        return _this;
    }
    ReduceSum.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var x = inferenceArrays.get(this.x);
        math.scope(function (keep) {
            inferenceArrays.set(_this.outTensor, keep(math.sum(x)));
        });
    };
    ReduceSum.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        if (!graph_util.shouldBackProp(this.x)) {
            return;
        }
        math.scope(function (keep) {
            var dy = gradientArrays.get(_this.outTensor);
            if (_this.ones == null) {
                var xArray = inferenceArrays.get(_this.x);
                _this.ones = ndarray_1.NDArray.zerosLike(xArray);
                _this.ones.fill(1);
            }
            gradientArrays.set(_this.x, keep(math.scalarTimesArray(dy, _this.ones)));
        });
    };
    return ReduceSum;
}(op_1.Operation));
exports.ReduceSum = ReduceSum;

},{"../graph_util":12,"../math/ndarray":24,"../util":88,"./op":76}],78:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var util = require("../util");
var op_1 = require("./op");
var Reshape = (function (_super) {
    __extends(Reshape, _super);
    function Reshape(xTensor, yTensor) {
        var _this = _super.call(this) || this;
        _this.xTensor = xTensor;
        _this.yTensor = yTensor;
        var xSize = util.sizeFromShape(xTensor.shape);
        var ySize = util.sizeFromShape(yTensor.shape);
        util.assert(xSize === ySize, "The input size (" + xSize + ") and output size (" + ySize + ") must match");
        return _this;
    }
    Reshape.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var x = inferenceArrays.get(this.xTensor);
        math.scope(function (keep) {
            inferenceArrays.set(_this.yTensor, keep(math.reshape(x, _this.yTensor.shape)));
        });
    };
    Reshape.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        var dy = gradientArrays.get(this.yTensor);
        math.scope(function (keep) {
            gradientArrays.set(_this.xTensor, keep(math.reshape(dy, _this.xTensor.shape)));
        });
    };
    return Reshape;
}(op_1.Operation));
exports.Reshape = Reshape;

},{"../util":88,"./op":76}],79:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var graph_1 = require("../graph");
var ndarray_1 = require("../math/ndarray");
var util = require("../util");
var op_1 = require("./op");
var Softmax = (function (_super) {
    __extends(Softmax, _super);
    function Softmax(logitsTensor, output) {
        var _this = _super.call(this) || this;
        _this.logitsTensor = logitsTensor;
        _this.output = output;
        return _this;
    }
    Softmax.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var logits = inferenceArrays.get(this.logitsTensor);
        return math.scope(function (keep) {
            inferenceArrays.set(_this.output, keep(math.softmax(logits)));
        });
    };
    Softmax.prototype.backProp = function () {
        throw Error('Softmax backprop is not yet implemented');
    };
    return Softmax;
}(op_1.Operation));
exports.Softmax = Softmax;
var SoftmaxCrossEntropyCost = (function (_super) {
    __extends(SoftmaxCrossEntropyCost, _super);
    function SoftmaxCrossEntropyCost(logitsTensor, labelTensor, yTensor) {
        var _this = _super.call(this) || this;
        _this.logitsTensor = logitsTensor;
        _this.labelTensor = labelTensor;
        _this.yTensor = yTensor;
        _this.epsilon = ndarray_1.Scalar.new(1e-5);
        _this.softmaxTensor = new graph_1.Tensor(logitsTensor.shape);
        return _this;
    }
    SoftmaxCrossEntropyCost.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var logits = inferenceArrays.get(this.logitsTensor);
        var label = inferenceArrays.get(this.labelTensor);
        math.scope(function (keep) {
            var softmaxResult = math.softmax(logits);
            inferenceArrays.set(_this.softmaxTensor, keep(softmaxResult));
            inferenceArrays.set(_this.yTensor, keep(crossEntropyCost(math, softmaxResult, label, _this.epsilon)));
        });
    };
    SoftmaxCrossEntropyCost.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        var softmax = inferenceArrays.get(this.softmaxTensor);
        var label = inferenceArrays.get(this.labelTensor);
        math.scope(function (keep) {
            gradientArrays.set(_this.logitsTensor, keep(math.sub(softmax, label)));
        });
    };
    SoftmaxCrossEntropyCost.prototype.disposeTransientArrays = function (inferenceArrays, gradientArrays) {
        inferenceArrays.disposeArray(this.softmaxTensor);
    };
    SoftmaxCrossEntropyCost.prototype.dispose = function () {
        this.epsilon.dispose();
    };
    return SoftmaxCrossEntropyCost;
}(op_1.Operation));
exports.SoftmaxCrossEntropyCost = SoftmaxCrossEntropyCost;
function crossEntropyCost(math, y, target, epsilon) {
    util.assert(y.size === target.size, 'The output and target must be the same size');
    return math.scope(function () {
        var yPlusEps = math.scalarPlusArray(epsilon, y);
        var logOutput = math.log(yPlusEps);
        var tarLogOutput = math.elementWiseMul(target, logOutput);
        var costVector = math.neg(tarLogOutput);
        return math.sum(costVector);
    });
}
exports.crossEntropyCost = crossEntropyCost;

},{"../graph":9,"../math/ndarray":24,"../util":88,"./op":76}],80:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var graph_util = require("../graph_util");
var util = require("../util");
var op_1 = require("./op");
var Split = (function (_super) {
    __extends(Split, _super);
    function Split(input, outputs) {
        var _this = _super.call(this) || this;
        _this.input = input;
        _this.outputs = outputs;
        outputs.forEach(function (output) {
            util.assertShapesMatch(input.shape, output.shape);
        });
        return _this;
    }
    Split.prototype.feedForward = function (math, inferenceArrays) {
        var inputArray = inferenceArrays.get(this.input);
        this.outputs.forEach(function (output) {
            inferenceArrays.set(output, inputArray);
        });
    };
    Split.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        if (!graph_util.shouldBackProp(this.input)) {
            return;
        }
        math.scope(function (keep) {
            var dx = math.add(gradientArrays.get(_this.outputs[0]), gradientArrays.get(_this.outputs[1]));
            _this.outputs.slice(2).forEach(function (output) {
                dx = math.add(dx, gradientArrays.get(output));
            });
            gradientArrays.set(_this.input, keep(dx));
        });
    };
    return Split;
}(op_1.Operation));
exports.Split = Split;

},{"../graph_util":12,"../util":88,"./op":76}],81:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var graph_util = require("../graph_util");
var ndarray_1 = require("../math/ndarray");
var util = require("../util");
var op_1 = require("./op");
var Subtract = (function (_super) {
    __extends(Subtract, _super);
    function Subtract(t1, t2, outTensor) {
        var _this = _super.call(this) || this;
        _this.t1 = t1;
        _this.t2 = t2;
        _this.outTensor = outTensor;
        util.assert(util.sizeFromShape(t1.shape) === 1 ||
            util.sizeFromShape(t2.shape) === 1 ||
            util.arraysEqual(t1.shape, t2.shape), 'One of t1 or t2 must be a scalar, or t1 and t2 must have ' +
            'the same shape');
        return _this;
    }
    Subtract.prototype.feedForward = function (math, inferenceArrays) {
        var _this = this;
        var t1 = inferenceArrays.get(this.t1);
        var t2 = inferenceArrays.get(this.t2);
        math.scope(function (keep) {
            var result;
            if (util.isScalarShape(t1.shape)) {
                result = math.scalarMinusArray(t1, t2);
            }
            else if (util.isScalarShape(t2.shape)) {
                result = math.arrayMinusScalar(t1, t2);
            }
            else {
                result = math.sub(t1, t2);
            }
            inferenceArrays.set(_this.outTensor, keep(result));
        });
    };
    Subtract.prototype.backProp = function (math, inferenceArrays, gradientArrays) {
        var _this = this;
        var t1 = inferenceArrays.get(this.t1);
        var t2 = inferenceArrays.get(this.t2);
        var dy = gradientArrays.get(this.outTensor);
        math.scope(function (keep) {
            if (graph_util.shouldBackProp(_this.t1)) {
                if (util.isScalarShape(_this.t1.shape)) {
                    var sum = math.sum(dy);
                    if (_this.dySizeScalar == null) {
                        _this.dySizeScalar = ndarray_1.Scalar.new(dy.size);
                    }
                    gradientArrays.set(_this.t1, keep(math.divide(sum, _this.dySizeScalar)));
                }
                else {
                    gradientArrays.set(_this.t1, keep(dy));
                }
            }
            if (graph_util.shouldBackProp(_this.t2)) {
                if (util.isScalarShape(_this.t2.shape)) {
                    var sum = math.sum(dy);
                    var negSum = math.neg(sum);
                    if (_this.dySizeScalar == null) {
                        _this.dySizeScalar = ndarray_1.Scalar.new(dy.size);
                    }
                    gradientArrays.set(_this.t2, keep(math.divide(negSum, _this.dySizeScalar)));
                }
                else {
                    gradientArrays.set(_this.t2, keep(math.neg(dy)));
                }
            }
        });
    };
    Subtract.prototype.dispose = function () {
        if (this.dySizeScalar != null) {
            this.dySizeScalar.dispose();
        }
    };
    return Subtract;
}(op_1.Operation));
exports.Subtract = Subtract;

},{"../graph_util":12,"../math/ndarray":24,"../util":88,"./op":76}],82:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Optimizer = (function () {
    function Optimizer(specifiedVariableList) {
        if (specifiedVariableList != null) {
            this.specifiedVariableNodes = specifiedVariableList;
        }
    }
    return Optimizer;
}());
exports.Optimizer = Optimizer;

},{}],83:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function defaultCompare(a, b) {
    if (a === b) {
        return 0;
    }
    else if (a < b) {
        return -1;
    }
    else {
        return 1;
    }
}
exports.defaultCompare = defaultCompare;
var PriorityQueue = (function () {
    function PriorityQueue(comparator, indexObserver) {
        this.comparator = comparator;
        this.indexObserver = indexObserver;
        this.heap = [];
    }
    PriorityQueue.prototype.enqueue = function (t) {
        this.heap.push(t);
        this.onIndexChanged(t, this.heap.length - 1);
        this.siftUp(this.heap.length - 1);
    };
    PriorityQueue.prototype.dequeue = function () {
        if (this.empty()) {
            throw new Error('dequeue called on empty priority queue.');
        }
        var t = this.heap[0];
        this.swap(0, this.heap.length - 1);
        this.heap.pop();
        this.siftDown(0);
        return t;
    };
    PriorityQueue.prototype.update = function (newT, index) {
        var last = (index === this.heap.length - 1);
        if (!last) {
            this.swap(index, this.heap.length - 1);
        }
        this.heap.pop();
        if (!last) {
            if (this.siftUpIndex(index) !== -1) {
                this.siftUp(index);
            }
            else if (this.siftDownIndex(index) !== -1) {
                this.siftDown(index);
            }
        }
        this.enqueue(newT);
    };
    PriorityQueue.prototype.empty = function () {
        return this.heap.length === 0;
    };
    PriorityQueue.prototype.onIndexChanged = function (t, newIndex) {
        if (this.indexObserver) {
            this.indexObserver(t, newIndex);
        }
    };
    PriorityQueue.prototype.getParentIndex = function (index) {
        if (index === 0) {
            return -1;
        }
        return Math.floor((index - 1) / 2);
    };
    PriorityQueue.prototype.getLeftChildIndex = function (index) {
        var candidate = index * 2 + 1;
        return candidate < this.heap.length ? candidate : -1;
    };
    PriorityQueue.prototype.getRightChildIndex = function (index) {
        var candidate = index * 2 + 2;
        return candidate < this.heap.length ? candidate : -1;
    };
    PriorityQueue.prototype.siftUpIndex = function (index) {
        var parentIndex = this.getParentIndex(index);
        if (parentIndex === -1) {
            return -1;
        }
        if (this.compare(parentIndex, index) > 0) {
            return parentIndex;
        }
        return -1;
    };
    PriorityQueue.prototype.siftUp = function (index) {
        var siftIndex = this.siftUpIndex(index);
        while (siftIndex !== -1) {
            this.swap(index, siftIndex);
            index = siftIndex;
            siftIndex = this.siftUpIndex(index);
        }
    };
    PriorityQueue.prototype.siftDownIndex = function (index) {
        if (index >= this.heap.length) {
            return -1;
        }
        var largestChildIndex = index;
        var leftChildIndex = this.getLeftChildIndex(index);
        if ((leftChildIndex !== -1) &&
            (this.compare(leftChildIndex, largestChildIndex) < 0)) {
            largestChildIndex = leftChildIndex;
        }
        var rightChildIndex = this.getRightChildIndex(index);
        if ((rightChildIndex !== -1) &&
            (this.compare(rightChildIndex, largestChildIndex) < 0)) {
            largestChildIndex = rightChildIndex;
        }
        return (largestChildIndex === index) ? -1 : largestChildIndex;
    };
    PriorityQueue.prototype.siftDown = function (index) {
        var siftIndex = this.siftDownIndex(index);
        while (siftIndex !== -1) {
            this.swap(index, siftIndex);
            index = siftIndex;
            siftIndex = this.siftDownIndex(index);
        }
    };
    PriorityQueue.prototype.compare = function (aIndex, bIndex) {
        return this.comparator(this.heap[aIndex], this.heap[bIndex]);
    };
    PriorityQueue.prototype.swap = function (a, b) {
        var temp = this.heap[a];
        this.heap[a] = this.heap[b];
        this.heap[b] = temp;
        this.onIndexChanged(this.heap[a], a);
        this.onIndexChanged(this.heap[b], b);
    };
    return PriorityQueue;
}());
exports.PriorityQueue = PriorityQueue;

},{}],84:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ndarray_1 = require("./math/ndarray");
var operation_emitter = require("./operation_emitter");
var session_util = require("./session_util");
var tensor_array_map_1 = require("./tensor_array_map");
var util = require("./util");
var FeedDictionary = (function () {
    function FeedDictionary(feedEntries) {
        var _this = this;
        this.dict = {};
        if (feedEntries) {
            feedEntries.forEach(function (entry) { return _this.dict[entry.tensor.id] = entry; });
        }
    }
    return FeedDictionary;
}());
exports.FeedDictionary = FeedDictionary;
var CostReduction;
(function (CostReduction) {
    CostReduction[CostReduction["NONE"] = 0] = "NONE";
    CostReduction[CostReduction["SUM"] = 1] = "SUM";
    CostReduction[CostReduction["MEAN"] = 2] = "MEAN";
})(CostReduction = exports.CostReduction || (exports.CostReduction = {}));
var Session = (function () {
    function Session(graph, math) {
        this.graph = graph;
        this.math = math;
        this.activationArrayMap = new tensor_array_map_1.TensorArrayMap();
        this.gradientArrayMap = new tensor_array_map_1.TensorArrayMap();
        this.runtimeCache = {};
        this.oneScalar = ndarray_1.Scalar.new(1);
    }
    Session.prototype.dispose = function () {
        var _this = this;
        this.activationArrayMap.dispose();
        Object.keys(this.runtimeCache).forEach(function (key) {
            var runtime = _this.runtimeCache[key];
            if (runtime.operations) {
                runtime.operations.forEach(function (op) { return op.dispose(); });
            }
        });
        this.runtimeCache = {};
        if (this.batchSizeScalar != null) {
            this.batchSizeScalar.dispose();
        }
        this.oneScalar.dispose();
    };
    Session.prototype.evalAll = function (tensors, feedEntries) {
        var _this = this;
        return this.math.scope(function () {
            var feed = new FeedDictionary(feedEntries);
            var runtime = _this.getOrCreateRuntime(tensors, feed);
            var activations = _this.activationArrayMap;
            session_util.disposeAndInitializeOperationOutputs(runtime.nodes, activations);
            session_util.disposeTransientOperationArrays(runtime.operations, _this.activationArrayMap, _this.gradientArrayMap);
            session_util.addPersistentArraysToTensorArrayMap(runtime.nodes, activations);
            session_util.loadInputsFromFeedDictionaryToTensorArrayMap(feed, activations, _this.math);
            runtime.operations.forEach(function (op) { return op.feedForward(_this.math, activations); });
            var results = tensors.map(function (x) { return activations.get(x); });
            tensors.forEach(function (x) { return activations.delete(x); });
            session_util.releaseFeedDictionaryInputsFromTensorArrayMap(feed, activations, _this.math);
            return results;
        });
    };
    Session.prototype.eval = function (tensor, feedEntries) {
        return this.evalAll([tensor], feedEntries)[0];
    };
    Session.prototype.train = function (costTensor, feedEntries, batchSize, optimizer, costReduction) {
        var _this = this;
        if (costReduction === void 0) { costReduction = CostReduction.NONE; }
        util.assert(util.isScalarShape(costTensor.shape), 'Cost tensor for training must be a scalar value.');
        if (this.prevBatchSize !== batchSize) {
            this.prevBatchSize = batchSize;
            this.batchSizeScalar = ndarray_1.Scalar.new(batchSize);
        }
        var feed = new FeedDictionary(feedEntries);
        session_util.throwIfFeedDictionaryContainsNDArrays(feed);
        var runtime = this.getOrCreateRuntime([costTensor], feed);
        var inferenceOperations = runtime.operations;
        var backPropOperations = runtime.operations.slice().reverse();
        var activations = this.activationArrayMap;
        var gradients = this.gradientArrayMap;
        gradients.set(costTensor, this.oneScalar);
        session_util.addPersistentArraysToTensorArrayMap(runtime.nodes, activations);
        optimizer.beforeBatch(this.math, batchSize, runtime, activations, gradients);
        return this.math.scope(function (keep, track) {
            var cost = track(ndarray_1.Scalar.new(0));
            for (var i = 0; i < batchSize; ++i) {
                session_util.disposeAndInitializeOperationOutputs(runtime.nodes, activations);
                session_util.disposeAndInitializeOperationInputGradients(runtime.nodes, gradients);
                session_util.disposeTransientOperationArrays(runtime.operations, activations, gradients);
                session_util.loadInputsFromFeedDictionaryToTensorArrayMap(feed, activations, _this.math);
                inferenceOperations.forEach(function (op) { return op.feedForward(_this.math, activations); });
                backPropOperations.forEach(function (op) { return op.backProp(_this.math, activations, gradients); });
                optimizer.afterExample(_this.math, runtime, activations, gradients);
                session_util.releaseFeedDictionaryInputsFromTensorArrayMap(feed, activations, _this.math);
                cost = _this.updateCostForExample(cost, activations.get(costTensor), costReduction);
            }
            optimizer.afterBatch(_this.math, batchSize, runtime, activations, gradients);
            return _this.updateCostForBatch(cost, costReduction);
        });
    };
    Session.prototype.updateCostForExample = function (totalCost, currCost, costReduction) {
        if (costReduction === CostReduction.MEAN ||
            costReduction === CostReduction.SUM) {
            return this.math.add(totalCost, currCost);
        }
        return totalCost;
    };
    Session.prototype.updateCostForBatch = function (totalCost, costReduction) {
        if (costReduction === CostReduction.MEAN) {
            return this.math.divide(totalCost, this.batchSizeScalar);
        }
        return totalCost;
    };
    Session.prototype.getOrCreateRuntime = function (tensors, feed) {
        var key = this.makeRuntimeCacheKey(tensors, feed);
        var runtime = this.runtimeCache[key];
        if (runtime === undefined) {
            var nodes = session_util.getOrderedEvaluationSetFromEvalTensor(tensors, feed);
            nodes = session_util.addSplitNodes(nodes);
            session_util.removeFeedDictionaryNodesFromEvaluationSet(feed, nodes);
            session_util.throwErrorIfEvaluationSetContainsPlaceholderNodes(nodes);
            var operations = operation_emitter.emitFromGraphNodes(nodes);
            runtime = { nodes: nodes, operations: operations };
            this.runtimeCache[key] = runtime;
        }
        return runtime;
    };
    Session.prototype.makeRuntimeCacheKey = function (tensors, feed) {
        return tensors.map(function (x) { return x.id; }).sort().join('_') + '__' +
            Object.keys(feed.dict).sort().join('_');
    };
    return Session;
}());
exports.Session = Session;

},{"./math/ndarray":24,"./operation_emitter":61,"./session_util":85,"./tensor_array_map":87,"./util":88}],85:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var graph_1 = require("./graph");
var graph_util = require("./graph_util");
var ndarray_1 = require("./math/ndarray");
var util = require("./util");
function getTerminatingNodesFromFeedDictionary(feedDictionary) {
    return Object.keys(feedDictionary.dict)
        .map(function (tensorID) { return feedDictionary.dict[+tensorID].tensor.node; });
}
exports.getTerminatingNodesFromFeedDictionary = getTerminatingNodesFromFeedDictionary;
function getOrderedEvaluationSetFromEvalTensor(evalTensors, feedDictionary) {
    var terminatingNodes = getTerminatingNodesFromFeedDictionary(feedDictionary);
    var evalNodes = evalTensors.map(function (x) { return x.node; });
    var unorderedEvaluationSet = graph_util.getUnorderedEvaluationSet(evalNodes, terminatingNodes);
    var orderedEvaluationSet = graph_util.getOrderedEvaluationSet(unorderedEvaluationSet);
    return orderedEvaluationSet;
}
exports.getOrderedEvaluationSetFromEvalTensor = getOrderedEvaluationSetFromEvalTensor;
function addPersistentArraysToTensorArrayMap(evaluationSet, tensorArrayMap) {
    evaluationSet.forEach(function (node) {
        if (node instanceof graph_1.VariableNode || node instanceof graph_1.ConstantNode) {
            tensorArrayMap.set(node.output, node.data);
        }
    });
}
exports.addPersistentArraysToTensorArrayMap = addPersistentArraysToTensorArrayMap;
function getVariableNodesFromEvaluationSet(evaluationSet) {
    var nodes = [];
    evaluationSet.forEach(function (node) {
        if (node instanceof graph_1.VariableNode) {
            nodes.push(node);
        }
    });
    return nodes;
}
exports.getVariableNodesFromEvaluationSet = getVariableNodesFromEvaluationSet;
function throwIfFeedDictionaryContainsNDArrays(feedDictionary) {
    Object.keys(feedDictionary.dict).forEach(function (tensorID) {
        if (feedDictionary.dict[+tensorID].data instanceof ndarray_1.NDArray) {
            throw new Error('training requires FeedDictionary entries to be InputProviders' +
                'and not NDArrays.');
        }
    });
}
exports.throwIfFeedDictionaryContainsNDArrays = throwIfFeedDictionaryContainsNDArrays;
function loadInputsFromFeedDictionaryToTensorArrayMap(batchFeed, activations, math) {
    Object.keys(batchFeed.dict).forEach(function (tensorID) {
        var feedEntry = batchFeed.dict[+tensorID];
        var data;
        if (feedEntry.data instanceof ndarray_1.NDArray) {
            data = feedEntry.data;
        }
        else {
            var provider = feedEntry.data;
            data = provider.getNextCopy(math);
        }
        util.assert(util.arraysEqual(feedEntry.tensor.shape, data.shape), "Error loading FeedEntry: feeding NDArray of shape " + data.shape + " " +
            ("does not match Tensor (id: " + feedEntry.tensor.id + ") shape: ") +
            (feedEntry.tensor.shape + "."));
        activations.set(feedEntry.tensor, data);
    });
}
exports.loadInputsFromFeedDictionaryToTensorArrayMap = loadInputsFromFeedDictionaryToTensorArrayMap;
function releaseFeedDictionaryInputsFromTensorArrayMap(batchFeed, activations, math) {
    Object.keys(batchFeed.dict).forEach(function (tensorID) {
        var feedEntry = batchFeed.dict[+tensorID];
        if (!(feedEntry.data instanceof ndarray_1.NDArray)) {
            var provider = feedEntry.data;
            var feedEntryArray = activations.get(feedEntry.tensor);
            provider.disposeCopy(math, feedEntryArray);
        }
        activations.delete(feedEntry.tensor);
    });
}
exports.releaseFeedDictionaryInputsFromTensorArrayMap = releaseFeedDictionaryInputsFromTensorArrayMap;
function removeFeedDictionaryNodesFromEvaluationSet(feedDictionary, evaluationSet) {
    var i = 0;
    while (i < evaluationSet.length) {
        var node = evaluationSet[i];
        if (feedDictionary.dict[node.output.id] != null) {
            evaluationSet.splice(i, 1);
        }
        else {
            ++i;
        }
    }
}
exports.removeFeedDictionaryNodesFromEvaluationSet = removeFeedDictionaryNodesFromEvaluationSet;
function disposeAndInitializeOperationOutputs(evaluationSet, tensorArrayMap) {
    evaluationSet.forEach(function (node) {
        if (!graph_util.isInputNode(node)) {
            if (!graph_util.isPassthroughNode(node, tensorArrayMap)) {
                tensorArrayMap.disposeArray(node.output);
            }
            tensorArrayMap.set(node.output, null);
        }
    });
}
exports.disposeAndInitializeOperationOutputs = disposeAndInitializeOperationOutputs;
function disposeAndInitializeOperationInputGradients(evaluationSet, gradients) {
    evaluationSet.forEach(function (node) {
        Object.keys(node.inputs).forEach(function (inputName) {
            var input = node.inputs[inputName];
            if (gradients.get(input, true) !== gradients.get(node.output, true)) {
                gradients.disposeArray(input);
            }
            gradients.set(input, null);
        });
    });
}
exports.disposeAndInitializeOperationInputGradients = disposeAndInitializeOperationInputGradients;
function disposeTransientOperationArrays(operations, activations, gradients) {
    operations.forEach(function (op) { return op.disposeTransientArrays(activations, gradients); });
}
exports.disposeTransientOperationArrays = disposeTransientOperationArrays;
function throwErrorIfEvaluationSetContainsPlaceholderNodes(evaluationSet) {
    evaluationSet.forEach(function (node) {
        if (node instanceof graph_1.PlaceholderNode) {
            var shape = '[' + node.output.shape.join(', ') + ']';
            throw new Error('Placeholder node "' + node.name + '" ' + shape +
                ' not present in feed dictionary.');
        }
    });
}
exports.throwErrorIfEvaluationSetContainsPlaceholderNodes = throwErrorIfEvaluationSetContainsPlaceholderNodes;
function addSplitNodes(nodes) {
    var nodeIdToNumConsumers = [];
    var nodeIdToSplitNode = {};
    nodes.forEach(function (node) {
        var keys = Object.keys(node.inputs);
        keys.forEach(function (key) {
            var inputTensor = node.inputs[key];
            var input = inputTensor.node;
            if (nodeIdToNumConsumers[input.id] == null) {
                nodeIdToNumConsumers[input.id] = 0;
            }
            nodeIdToNumConsumers[input.id]++;
            if (nodeIdToNumConsumers[input.id] > 1 &&
                nodeIdToSplitNode[input.id] == null) {
                nodeIdToSplitNode[input.id] = new graph_1.SplitNode(input.graph, inputTensor);
            }
        });
    });
    var newNodes = [];
    nodes.forEach(function (node) {
        newNodes.push(node);
        if (node.id in nodeIdToSplitNode) {
            var splitNode = nodeIdToSplitNode[node.id];
            newNodes.push(splitNode);
        }
        var keys = Object.keys(node.inputs);
        keys.forEach(function (key) {
            var inputTensor = node.inputs[key];
            var inputId = inputTensor.node.id;
            if (inputId in nodeIdToSplitNode) {
                node.inputs[key] = nodeIdToSplitNode[inputId].getNewOutputTensor();
            }
        });
    });
    return newNodes;
}
exports.addSplitNodes = addSplitNodes;

},{"./graph":9,"./graph_util":12,"./math/ndarray":24,"./util":88}],86:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var ndarray_1 = require("./math/ndarray");
var optimizer_1 = require("./optimizer");
var session_util = require("./session_util");
var tensor_array_map_1 = require("./tensor_array_map");
var SGDOptimizer = (function (_super) {
    __extends(SGDOptimizer, _super);
    function SGDOptimizer(learningRate, specifiedVariableList) {
        var _this = _super.call(this, specifiedVariableList) || this;
        _this.learningRate = learningRate;
        _this.variableGradients = new tensor_array_map_1.TensorArrayMap();
        _this.one = ndarray_1.Scalar.new(1);
        return _this;
    }
    SGDOptimizer.prototype.beforeBatch = function (math, batchSize, runtime, activationArrayMap, gradientArrayMap) {
        var _this = this;
        this.variableNodes = this.specifiedVariableNodes == null ?
            session_util.getVariableNodesFromEvaluationSet(runtime.nodes) :
            this.specifiedVariableNodes;
        if (batchSize !== this.prevBatchSize) {
            this.prevBatchSize = batchSize;
            this.c = ndarray_1.Scalar.new(-this.learningRate / batchSize);
        }
        this.variableNodes.forEach(function (node) { return _this.variableGradients.set(node.output, ndarray_1.NDArray.zeros(node.output.shape)); });
    };
    SGDOptimizer.prototype.afterExample = function (math, runtime, activationArrayMap, gradientArrayMap) {
        var _this = this;
        math.scope(function (keep) {
            _this.variableNodes.forEach(function (node) {
                var gradient = gradientArrayMap.get(node.output);
                var accumulatedGradient = _this.variableGradients.get(node.output);
                _this.variableGradients.set(node.output, keep(math.add(gradient, accumulatedGradient)));
                accumulatedGradient.dispose();
            });
        });
    };
    SGDOptimizer.prototype.afterBatch = function (math, batchSize, runtime, activationArrayMap, gradientArrayMap) {
        var _this = this;
        math.scope(function (keep) {
            _this.variableNodes.forEach(function (node) {
                var oldVariable = activationArrayMap.get(node.output);
                var gradient = _this.variableGradients.get(node.output);
                var variable = math.scaledArrayAdd(_this.c, gradient, _this.one, oldVariable);
                activationArrayMap.set(node.output, keep(variable));
                node.data = variable;
                oldVariable.dispose();
            });
        });
        this.variableGradients.dispose();
        this.variableGradients = new tensor_array_map_1.TensorArrayMap();
    };
    SGDOptimizer.prototype.dispose = function () {
        if (this.c != null) {
            this.c.dispose();
        }
        this.one.dispose();
    };
    SGDOptimizer.prototype.setLearningRate = function (learningRate) {
        this.learningRate = learningRate;
    };
    return SGDOptimizer;
}(optimizer_1.Optimizer));
exports.SGDOptimizer = SGDOptimizer;

},{"./math/ndarray":24,"./optimizer":82,"./session_util":85,"./tensor_array_map":87}],87:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var TensorArrayMap = (function () {
    function TensorArrayMap() {
        this.dict = {};
    }
    TensorArrayMap.prototype.set = function (tensor, array) {
        this.dict[tensor.id] = array;
    };
    TensorArrayMap.prototype.get = function (tensor, skipChecks) {
        if (skipChecks === void 0) { skipChecks = false; }
        if (!skipChecks && this.dict[tensor.id] === undefined) {
            throw new Error('tensor ' + tensor.id + ' not in array map.');
        }
        var nda = this.dict[tensor.id];
        if (!skipChecks && nda === null) {
            throw new Error('tensor ' + tensor.id + ' has null array.');
        }
        return nda;
    };
    TensorArrayMap.prototype.delete = function (tensor) {
        delete this.dict[tensor.id];
    };
    TensorArrayMap.prototype.disposeArray = function (tensor) {
        if (this.dict[tensor.id] === undefined) {
            return;
        }
        var nda = this.dict[tensor.id];
        if (nda === null) {
            return;
        }
        nda.dispose();
        this.dict[tensor.id] = null;
    };
    TensorArrayMap.prototype.size = function () {
        return Object.keys(this.dict).length;
    };
    TensorArrayMap.prototype.dispose = function () {
        var _this = this;
        Object.keys(this.dict).forEach(function (tensorID) {
            var nda = _this.dict[+tensorID];
            if (nda) {
                nda.dispose();
            }
        });
        this.dict = {};
    };
    TensorArrayMap.prototype.hasNullArray = function (tensor) {
        if (this.dict[tensor.id] === undefined) {
            throw new Error('tensor ' + tensor.id + ' not in array map.');
        }
        return this.dict[tensor.id] === null;
    };
    return TensorArrayMap;
}());
exports.TensorArrayMap = TensorArrayMap;

},{}],88:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function shuffle(array) {
    var counter = array.length;
    var temp = 0;
    var index = 0;
    while (counter > 0) {
        index = (Math.random() * counter) | 0;
        counter--;
        temp = array[counter];
        array[counter] = array[index];
        array[index] = temp;
    }
}
exports.shuffle = shuffle;
function clamp(min, x, max) {
    return Math.max(min, Math.min(x, max));
}
exports.clamp = clamp;
function randUniform(a, b) {
    return Math.random() * (b - a) + a;
}
exports.randUniform = randUniform;
function randGauss(mean, stdDev, truncated) {
    if (mean === void 0) { mean = 0; }
    if (stdDev === void 0) { stdDev = 1; }
    if (truncated === void 0) { truncated = false; }
    var v1, v2, s;
    do {
        v1 = 2 * Math.random() - 1;
        v2 = 2 * Math.random() - 1;
        s = v1 * v1 + v2 * v2;
    } while (s > 1);
    var result = Math.sqrt(-2 * Math.log(s) / s) * v1;
    if (truncated && result > 2) {
        return randGauss(mean, stdDev, true);
    }
    return mean + stdDev * result;
}
exports.randGauss = randGauss;
function distSquared(a, b) {
    var result = 0;
    for (var i = 0; i < a.length; i++) {
        var diff = a[i] - b[i];
        result += diff * diff;
    }
    return result;
}
exports.distSquared = distSquared;
function assert(expr, msg) {
    if (!expr) {
        throw new Error(msg);
    }
}
exports.assert = assert;
function assertShapesMatch(shapeA, shapeB, errorMessagePrefix) {
    if (errorMessagePrefix === void 0) { errorMessagePrefix = ''; }
    assert(arraysEqual(shapeA, shapeB), errorMessagePrefix + ("Shapes " + shapeA + " and " + shapeB + " must match"));
}
exports.assertShapesMatch = assertShapesMatch;
function flatten(arr, ret) {
    ret = (ret === undefined ? [] : ret);
    for (var i = 0; i < arr.length; ++i) {
        if (Array.isArray(arr[i])) {
            flatten(arr[i], ret);
        }
        else {
            ret.push(arr[i]);
        }
    }
    return ret;
}
exports.flatten = flatten;
function inferShape(arr) {
    var shape = [];
    while (arr instanceof Array) {
        shape.push(arr.length);
        arr = arr[0];
    }
    return shape;
}
exports.inferShape = inferShape;
function sizeFromShape(shape) {
    if (shape.length === 0) {
        return 1;
    }
    var size = shape[0];
    for (var i = 1; i < shape.length; i++) {
        size *= shape[i];
    }
    return size;
}
exports.sizeFromShape = sizeFromShape;
function isScalarShape(shape) {
    return shape.length === 0;
}
exports.isScalarShape = isScalarShape;
function arraysEqual(n1, n2) {
    if (n1.length !== n2.length) {
        return false;
    }
    for (var i = 0; i < n1.length; i++) {
        if (n1[i] !== n2[i]) {
            return false;
        }
    }
    return true;
}
exports.arraysEqual = arraysEqual;
function isInt(a) {
    return a % 1 === 0;
}
exports.isInt = isInt;
function tanh(x) {
    if (Math.tanh != null) {
        return Math.tanh(x);
    }
    if (x === Infinity) {
        return 1;
    }
    else if (x === -Infinity) {
        return -1;
    }
    else {
        var e2x = Math.exp(2 * x);
        return (e2x - 1) / (e2x + 1);
    }
}
exports.tanh = tanh;
function sizeToSquarishShape(size) {
    for (var a = Math.floor(Math.sqrt(size)); a > 1; --a) {
        if (size % a === 0) {
            return [a, size / a];
        }
    }
    return [1, size];
}
exports.sizeToSquarishShape = sizeToSquarishShape;
function createShuffledIndices(n) {
    var shuffledIndices = new Uint32Array(n);
    for (var i = 0; i < n; ++i) {
        shuffledIndices[i] = i;
    }
    shuffle(shuffledIndices);
    return shuffledIndices;
}
exports.createShuffledIndices = createShuffledIndices;

},{}]},{},[3])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkZW1vcy9kZW1vLWZvb3Rlci50cyIsImRlbW9zL2RlbW8taGVhZGVyLnRzIiwiZGVtb3MvZm9udC1lbWJlZGRpbmcvZm9udC1lbWJlZGRpbmcudHMiLCJkZW1vcy9sZWFybmpzLnRzIiwiZGVtb3MvbmRhcnJheS1pbWFnZS12aXN1YWxpemVyLnRzIiwiZGVtb3MvcG9seW1lci1zcGVjLnRzIiwic3JjL2NoZWNrcG9pbnRfbG9hZGVyLnRzIiwic3JjL2RhdGFzZXQudHMiLCJzcmMvZ3JhcGgudHMiLCJzcmMvZ3JhcGhfbGF5ZXJzLnRzIiwic3JjL2dyYXBoX3J1bm5lci50cyIsInNyYy9ncmFwaF91dGlsLnRzIiwic3JjL2luZGV4LnRzIiwic3JjL2luaXRpYWxpemVycy50cyIsInNyYy9pbnB1dF9wcm92aWRlci50cyIsInNyYy9tYXRoL2FjdGl2YXRpb25fZnVuY3Rpb25zLnRzIiwic3JjL21hdGgvY29uY2F0M2RfdXRpbC50cyIsInNyYy9tYXRoL2NvbnZfdXRpbC50cyIsInNyYy9tYXRoL2NvcHkyZF91dGlsLnRzIiwic3JjL21hdGgvY29zdF9mdW5jdGlvbnMudHMiLCJzcmMvbWF0aC9tYXRoLnRzIiwic3JjL21hdGgvbWF0aF9jcHUudHMiLCJzcmMvbWF0aC9tYXRoX2dwdS50cyIsInNyYy9tYXRoL25kYXJyYXkudHMiLCJzcmMvbWF0aC93ZWJnbC9hZGRzY2FsZWRtYXRfZ3B1LnRzIiwic3JjL21hdGgvd2ViZ2wvYWRkc3VibXVsZGl2X2dwdS50cyIsInNyYy9tYXRoL3dlYmdsL2FyZ21heGVxdWFsc19ncHUudHMiLCJzcmMvbWF0aC93ZWJnbC9hcmdtaW5tYXhfZ3B1LnRzIiwic3JjL21hdGgvd2ViZ2wvYXZnX3Bvb2xfZ3B1LnRzIiwic3JjL21hdGgvd2ViZ2wvYmF0Y2hub3JtX2dwdS50cyIsInNyYy9tYXRoL3dlYmdsL2JpbmFyeW9wX2dwdS50cyIsInNyYy9tYXRoL3dlYmdsL2NvbmNhdDNkX2dwdS50cyIsInNyYy9tYXRoL3dlYmdsL2NvbnZfYmFja3Byb3BfZ3B1LnRzIiwic3JjL21hdGgvd2ViZ2wvY29udl9ncHUudHMiLCJzcmMvbWF0aC93ZWJnbC9jb3B5X2dwdS50cyIsInNyYy9tYXRoL3dlYmdsL2V4cF9ncHUudHMiLCJzcmMvbWF0aC93ZWJnbC9ncGdwdV9jb250ZXh0LnRzIiwic3JjL21hdGgvd2ViZ2wvZ3BncHVfdXRpbC50cyIsInNyYy9tYXRoL3dlYmdsL2xvZ19ncHUudHMiLCJzcmMvbWF0aC93ZWJnbC9sb2dzdW1leHBfZ3B1LnRzIiwic3JjL21hdGgvd2ViZ2wvbWF4X3Bvb2xfYmFja3Byb3BfZ3B1LnRzIiwic3JjL21hdGgvd2ViZ2wvbWF4X3Bvb2xfZ3B1LnRzIiwic3JjL21hdGgvd2ViZ2wvbWluX3Bvb2xfZ3B1LnRzIiwic3JjL21hdGgvd2ViZ2wvbWlubWF4X2dwdS50cyIsInNyYy9tYXRoL3dlYmdsL211bG1hdF9ncHUudHMiLCJzcmMvbWF0aC93ZWJnbC9uZWdfZ3B1LnRzIiwic3JjL21hdGgvd2ViZ2wvcG9vbF9ncHUudHMiLCJzcmMvbWF0aC93ZWJnbC9yZWR1Y2VzdW1fZ3B1LnRzIiwic3JjL21hdGgvd2ViZ2wvcmVsdV9ncHUudHMiLCJzcmMvbWF0aC93ZWJnbC9yZW5kZXJfbmRhcnJheV9ncHVfdXRpbC50cyIsInNyYy9tYXRoL3dlYmdsL3Jlc2hhcGVfZ3B1LnRzIiwic3JjL21hdGgvd2ViZ2wvcmVzaXplX2JpbGluZWFyX2dwdS50cyIsInNyYy9tYXRoL3dlYmdsL3NoYWRlcl9jb21waWxlci50cyIsInNyYy9tYXRoL3dlYmdsL3NpZ21vaWRfZ3B1LnRzIiwic3JjL21hdGgvd2ViZ2wvc3RlcF9ncHUudHMiLCJzcmMvbWF0aC93ZWJnbC90ZXhfdXRpbC50cyIsInNyYy9tYXRoL3dlYmdsL3RleHR1cmVfbWFuYWdlci50cyIsInNyYy9tYXRoL3dlYmdsL3RyaWdfZ3B1LnRzIiwic3JjL21hdGgvd2ViZ2wvdW5hcnlvcF9ncHUudHMiLCJzcmMvbWF0aC93ZWJnbC93ZWJnbF91dGlsLnRzIiwic3JjL29wZXJhdGlvbl9lbWl0dGVyLnRzIiwic3JjL29wcy9hZGQudHMiLCJzcmMvb3BzL2FyZ21heC50cyIsInNyYy9vcHMvYXJnbWF4ZXF1YWxzLnRzIiwic3JjL29wcy9jb25jYXQzZC50cyIsInNyYy9vcHMvY29udm9sdXRpb24udHMiLCJzcmMvb3BzL2RpdmlkZS50cyIsInNyYy9vcHMvZWxlbWVudF93aXNlX2FjdGl2YXRpb24udHMiLCJzcmMvb3BzL2VsZW1lbnRfd2lzZV9jb3N0LnRzIiwic3JjL29wcy9leHAudHMiLCJzcmMvb3BzL2xpbmVhcl9jb21iaW5hdGlvbi50cyIsInNyYy9vcHMvbG9nLnRzIiwic3JjL29wcy9tYXRtdWwudHMiLCJzcmMvb3BzL21heF9wb29sLnRzIiwic3JjL29wcy9tdWx0aXBseS50cyIsInNyYy9vcHMvb3AudHMiLCJzcmMvb3BzL3JlZHVjZV9zdW0udHMiLCJzcmMvb3BzL3Jlc2hhcGUudHMiLCJzcmMvb3BzL3NvZnRtYXgudHMiLCJzcmMvb3BzL3NwbGl0LnRzIiwic3JjL29wcy9zdWJ0cmFjdC50cyIsInNyYy9vcHRpbWl6ZXIudHMiLCJzcmMvcHJpb3JpdHlfcXVldWUudHMiLCJzcmMvc2Vzc2lvbi50cyIsInNyYy9zZXNzaW9uX3V0aWwudHMiLCJzcmMvc2dkX29wdGltaXplci50cyIsInNyYy90ZW5zb3JfYXJyYXlfbWFwLnRzIiwic3JjL3V0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNjQSxPQUFPLENBQUMsRUFBQyxFQUFFLEVBQUUsYUFBYSxFQUFDLENBQUMsQ0FBQzs7O0FDQTdCLE9BQU8sQ0FBQyxFQUFDLEVBQUUsRUFBRSxhQUFhLEVBQUMsQ0FBQyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7QUNDN0IsdUNBQXFDO0FBQ3JDLDBCQUF3QjtBQUN4QiwwQkFBd0I7QUFFeEIsc0NBQStJO0FBRy9JLGdEQUFtRTtBQUVuRSxJQUFNLHdCQUF3QixHQUMxQiw2REFBNkQsQ0FBQztBQUd2RCxRQUFBLG9CQUFvQixHQUFHLDZCQUFjLENBQUM7SUFDL0MsRUFBRSxFQUFFLGdCQUFnQjtJQUNwQixVQUFVLEVBQUU7UUFDVixJQUFJLEVBQUUsTUFBTTtRQUNaLE1BQU0sRUFBRSxNQUFNO1FBQ2QsU0FBUyxFQUFFLEtBQUs7UUFDaEIsa0JBQWtCLEVBQUUsRUFBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBQztLQUM5RDtDQUNGLENBQUMsQ0FBQztBQU9IO0lBQW1DLGlDQUFvQjtJQUF2RDs7SUF1S0EsQ0FBQztJQWhKQyw2QkFBSyxHQUFMO1FBQUEsaUJBbUNDO1FBbENDLElBQU0sZ0JBQWdCLEdBQ2xCLElBQUksMEJBQWdCLENBQUMsd0JBQXdCLEdBQUcsUUFBUSxDQUFDLENBQUM7UUFDOUQsZ0JBQWdCLENBQUMsZUFBZSxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQUEsU0FBUztZQUMvQyxLQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztZQUMzQixLQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDbEIsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsTUFBTSxFQUFFLEtBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNyQyxDQUFDLENBQUMsQ0FBQztRQUdILElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO1FBQ3BCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDN0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNsRCxDQUFDO1FBQ0QsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUM5QixJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQztRQUN2RCxDQUFDO1FBQ0QsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUM3QixJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQztRQUN2RCxDQUFDO1FBQ0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7UUFDbEIsSUFBSSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUM7UUFFaEIsSUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQXFCLENBQUM7UUFDekUsYUFBYSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxVQUFDLENBQUM7WUFDekMsS0FBSSxDQUFDLE1BQU0sR0FBRyxhQUFhLENBQUMsS0FBSyxDQUFDO1lBQ2xDLEtBQUksQ0FBQyxTQUFTLENBQUMsS0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzVCLEtBQUksQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLE1BQU0sRUFBRSxLQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckMsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBcUIsQ0FBQztRQUN6RSxhQUFhLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLFVBQUMsQ0FBQztZQUN6QyxLQUFJLENBQUMsSUFBSSxHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUM7WUFDaEMsS0FBSSxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsTUFBTSxFQUFFLEtBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNyQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxpQ0FBUyxHQUFULFVBQVUsTUFBYztRQUV0QixFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUMxRCxNQUFNLENBQUM7UUFDVCxDQUFDO1FBR0QsSUFBTSxTQUFTLEdBQTJCLEVBQUUsQ0FBQztRQUM3QyxJQUFNLGdCQUFnQixHQUNsQixJQUFJLENBQUMsU0FBUyxDQUFDLG1EQUFtRCxDQUFDLENBQUM7UUFDeEUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUNuRCxJQUFNLEdBQUcsR0FBRyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDN0MsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBQyxDQUFDLENBQUM7UUFDeEMsQ0FBQztRQUVBLElBQVksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFRCxvQ0FBWSxHQUFaLFVBQWEsQ0FBUTtRQUNuQixJQUFNLE9BQU8sR0FBRyxDQUFDLENBQUMsTUFBNEIsQ0FBQztRQUMvQyxJQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUVoRSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsR0FBSSxPQUFlLENBQUMsY0FBYyxDQUFDO1FBRTVELElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDckMsQ0FBQztJQUVELGtDQUFVLEdBQVY7UUFDRSxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBNkIsQ0FBQztRQUNoRCxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUUzQixJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUU1QixJQUFNLFFBQVEsR0FBRyxpQ0FBaUMsQ0FBQztRQUNuRCxJQUFNLFFBQVEsR0FBRyxnQ0FBZ0MsQ0FBQztRQUNsRCxJQUFNLFFBQVEsR0FBRyxpQ0FBaUMsQ0FBQztRQUNuRCxJQUFNLFFBQVEsR0FBRyxnQ0FBZ0MsQ0FBQztRQUNsRCxJQUFNLFFBQVEsR0FBRyxpQ0FBaUMsQ0FBQztRQUNuRCxJQUFNLFFBQVEsR0FBRyxnQ0FBZ0MsQ0FBQztRQUNsRCxJQUFNLFFBQVEsR0FBRyxpQ0FBaUMsQ0FBQztRQUNuRCxJQUFNLFFBQVEsR0FBRyxnQ0FBZ0MsQ0FBQztRQUNsRCxJQUFNLFFBQVEsR0FBRyx5QkFBeUIsQ0FBQztRQUMzQyxJQUFNLFFBQVEsR0FBRyx3QkFBd0IsQ0FBQztRQUUxQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksZUFBSyxFQUFFLENBQUM7UUFDekIsSUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztRQUNyQixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUVqRCxJQUFNLEtBQUssR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FDeEIsS0FBSyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQzFELFVBQUMsQ0FBQyxJQUFLLE9BQUEsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBVCxDQUFTLEVBQUUsSUFBSSxFQUN0QixJQUFJLDRCQUFrQixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsRUFDaEQsSUFBSSw0QkFBa0IsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0RCxJQUFNLEtBQUssR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FDeEIsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxVQUFDLENBQUMsSUFBSyxPQUFBLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQVQsQ0FBUyxFQUFFLElBQUksRUFDdkUsSUFBSSw0QkFBa0IsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQ2hELElBQUksNEJBQWtCLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEQsSUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQ3hCLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsVUFBQyxDQUFDLElBQUssT0FBQSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFULENBQVMsRUFBRSxJQUFJLEVBQ3ZFLElBQUksNEJBQWtCLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUNoRCxJQUFJLDRCQUFrQixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RELElBQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUN4QixLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQUMsQ0FBQyxJQUFLLE9BQUEsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBVCxDQUFTLEVBQUUsSUFBSSxFQUN2RSxJQUFJLDRCQUFrQixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsRUFDaEQsSUFBSSw0QkFBa0IsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUM5QixLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQUMsQ0FBQyxJQUFLLE9BQUEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBWixDQUFZLEVBQ3BFLElBQUksRUFBRSxJQUFJLDRCQUFrQixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsRUFDdEQsSUFBSSw0QkFBa0IsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV0RCxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksd0JBQWMsRUFBRSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxpQkFBTyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVELDZCQUFLLEdBQUwsVUFBTSxNQUFjLEVBQUUsSUFBWTtRQUFsQyxpQkErQkM7UUE5QkMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUs7WUFDckQsSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLE1BQU0sQ0FBQztRQUNULENBQUM7UUFDRCxJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5QyxFQUFFLENBQUMsQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNuQixNQUFNLENBQUM7UUFDVCxDQUFDO1FBRUQsSUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO2FBQzVDLEdBQUcsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNyRCxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRW5CLElBQU0sU0FBUyxHQUNYLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQUMsUUFBOEIsSUFBSyxPQUFBLFFBQVEsQ0FBQyxHQUFHLEVBQVosQ0FBWSxDQUFDLENBQUM7UUFFekUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBQyxJQUFJLEVBQUUsS0FBSztZQUMxQixJQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsaUJBQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFL0QsSUFBTSxLQUFLLEdBQUcsS0FBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQzNCLEtBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxLQUFJLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUMsQ0FBQyxDQUFDLENBQUM7WUFJdEUsSUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLGdCQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDdEMsSUFBTSxNQUFNLEdBQUcsS0FBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDekQsSUFBTSxRQUFRLEdBQUcsS0FBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFDNUQsS0FBSSxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1RCxLQUFJLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ2xCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUNILG9CQUFDO0FBQUQsQ0F2S0EsQUF1S0MsQ0F2S2tDLDRCQUFvQixHQXVLdEQ7QUF2S1ksc0NBQWE7QUF3SzFCLFFBQVEsQ0FBQyxlQUFlLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsYUFBYSxDQUFDLENBQUM7Ozs7Ozs7O0FDbE1wRSxrQ0FBNkI7Ozs7Ozs7Ozs7Ozs7OztBQ0M3QiwrQ0FBa0U7QUFHdkQsUUFBQSw2QkFBNkIsR0FDcEMsNkJBQWMsQ0FBQyxFQUFDLEVBQUUsRUFBRSwwQkFBMEIsRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFDLENBQUMsQ0FBQztBQUVyRTtJQUE0QywwQ0FBNkI7SUFBekU7O0lBK0RBLENBQUM7SUExREMsc0NBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQXNCLENBQUM7UUFDakUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUN2QixJQUFJLENBQUMsYUFBYTtZQUNkLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBNkIsQ0FBQztRQUM3RCxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO0lBQ3JDLENBQUM7SUFFRCx5Q0FBUSxHQUFSLFVBQVMsS0FBZTtRQUN0QixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDN0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFRCx3Q0FBTyxHQUFQLFVBQVEsS0FBYSxFQUFFLE1BQWM7UUFDbkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDdkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUM7SUFDM0MsQ0FBQztJQUVELHlEQUF3QixHQUF4QixVQUF5QixPQUFnQjtRQUN2QyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUMvQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMzQixJQUFJLENBQUMsc0JBQXNCLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdkMsQ0FBQztRQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2pDLENBQUM7SUFDSCxDQUFDO0lBRUQsaURBQWdCLEdBQWhCLFVBQWlCLE9BQWdCO1FBQy9CLElBQUksV0FBVyxHQUFHLENBQUMsQ0FBQztRQUNwQixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUMxQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDMUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzFELElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUMxRCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDMUQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUM7WUFDM0MsQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDO0lBRUQsdURBQXNCLEdBQXRCLFVBQXVCLE9BQWdCO1FBQ3JDLElBQUksV0FBVyxHQUFHLENBQUMsQ0FBQztRQUNwQixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUMxQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDMUMsSUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNuQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQztnQkFDM0MsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUM7Z0JBQzNDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDO2dCQUMzQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQztZQUMzQyxDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFFRCxxQ0FBSSxHQUFKO1FBQ0UsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztRQUMvQixJQUFJLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN4RCxDQUFDO0lBQ0gsNkJBQUM7QUFBRCxDQS9EQSxBQStEQyxDQS9EMkMscUNBQTZCLEdBK0R4RTtBQS9EWSx3REFBc0I7QUFnRW5DLFFBQVEsQ0FBQyxlQUFlLENBQ3BCLHNCQUFzQixDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsc0JBQXNCLENBQUMsQ0FBQzs7Ozs7QUMvQmpFLHdCQUErQixJQUFVO0lBRXZDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQVcsQ0FBaUMsQ0FBQztBQUNwRSxDQUFDO0FBSEQsd0NBR0M7Ozs7O0FDOUNELDBDQUF1QztBQWlCdkMsSUFBTSxhQUFhLEdBQUcsZUFBZSxDQUFDO0FBRXRDO0lBSUUsMEJBQW9CLE9BQWU7UUFBZixZQUFPLEdBQVAsT0FBTyxDQUFRO1FBQ2pDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDekQsSUFBSSxDQUFDLE9BQU8sSUFBSSxHQUFHLENBQUM7UUFDdEIsQ0FBQztJQUNILENBQUM7SUFFTyx1Q0FBWSxHQUFwQjtRQUFBLGlCQWVDO1FBZEMsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFPLFVBQUMsT0FBTyxFQUFFLE1BQU07WUFDdkMsSUFBTSxHQUFHLEdBQUcsSUFBSSxjQUFjLEVBQUUsQ0FBQztZQUNqQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFJLENBQUMsT0FBTyxHQUFHLGFBQWEsQ0FBQyxDQUFDO1lBRTlDLEdBQUcsQ0FBQyxNQUFNLEdBQUc7Z0JBQ1gsS0FBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUN2RCxPQUFPLEVBQUUsQ0FBQztZQUNaLENBQUMsQ0FBQztZQUNGLEdBQUcsQ0FBQyxPQUFPLEdBQUcsVUFBQyxLQUFLO2dCQUNsQixNQUFNLElBQUksS0FBSyxDQUNSLGFBQWEsc0JBQWlCLEtBQUksQ0FBQyxPQUFPLE9BQUksR0FBRyxLQUFLLENBQUMsQ0FBQztZQUNqRSxDQUFDLENBQUM7WUFDRixHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDYixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxnREFBcUIsR0FBckI7UUFBQSxpQkFXQztRQVZDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3BDLE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBcUIsVUFBQyxPQUFPLEVBQUUsTUFBTTtnQkFDckQsS0FBSSxDQUFDLFlBQVksRUFBRSxDQUFDLElBQUksQ0FBQztvQkFDdkIsT0FBTyxDQUFDLEtBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO2dCQUNuQyxDQUFDLENBQUMsQ0FBQztZQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQztRQUNELE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBcUIsVUFBQyxPQUFPLEVBQUUsTUFBTTtZQUNyRCxPQUFPLENBQUMsS0FBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDbkMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsMENBQWUsR0FBZjtRQUFBLGlCQTBCQztRQXpCQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDM0IsTUFBTSxDQUFDLElBQUksT0FBTyxDQUErQixVQUFDLE9BQU8sRUFBRSxNQUFNO2dCQUMvRCxPQUFPLENBQUMsS0FBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzFCLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQztRQUVELE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBK0IsVUFBQyxPQUFPLEVBQUUsTUFBTTtZQUMvRCxLQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxJQUFJLENBQzdCLFVBQUMsb0JBQXdDO2dCQUN2QyxJQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO2dCQUUzRCxJQUFNLGdCQUFnQixHQUE0QixFQUFFLENBQUM7Z0JBQ3JELEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsYUFBYSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO29CQUM5QyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsS0FBSSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUM1RCxDQUFDO2dCQUVELE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQSxTQUFTO29CQUMxQyxLQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztvQkFDcEIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7d0JBQzFDLEtBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNsRCxDQUFDO29CQUNELE9BQU8sQ0FBQyxLQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQzFCLENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDVCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxzQ0FBVyxHQUFYLFVBQVksT0FBZTtRQUEzQixpQkFpQ0M7UUFoQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDMUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxvQ0FBb0MsR0FBRyxPQUFPLENBQUMsQ0FBQztRQUNsRSxDQUFDO1FBRUQsSUFBTSw0QkFBNEIsR0FDOUIsVUFBQyxPQUFtQyxFQUFFLE1BQWtCO1lBQ3RELElBQU0sR0FBRyxHQUFHLElBQUksY0FBYyxFQUFFLENBQUM7WUFDakMsR0FBRyxDQUFDLFlBQVksR0FBRyxhQUFhLENBQUM7WUFDakMsSUFBTSxLQUFLLEdBQUcsS0FBSSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQztZQUN4RCxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxDQUFDO1lBRXRDLEdBQUcsQ0FBQyxNQUFNLEdBQUc7Z0JBQ1gsSUFBTSxNQUFNLEdBQUcsSUFBSSxZQUFZLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUM5QyxJQUFNLE9BQU8sR0FDVCxpQkFBTyxDQUFDLElBQUksQ0FBQyxLQUFJLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUMsTUFBTSxRQUFBLEVBQUMsQ0FBQyxDQUFDO2dCQUNuRSxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDbkIsQ0FBQyxDQUFDO1lBQ0YsR0FBRyxDQUFDLE9BQU8sR0FBRyxVQUFDLEtBQUs7Z0JBQ2xCLE1BQU0sSUFBSSxLQUFLLENBQ1gsMkJBQTJCLEdBQUcsT0FBTyxHQUFHLElBQUksR0FBRyxLQUFLLENBQUMsQ0FBQztZQUM1RCxDQUFDLENBQUM7WUFDRixHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDYixDQUFDLENBQUM7UUFFTixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNwQyxNQUFNLENBQUMsSUFBSSxPQUFPLENBQVUsVUFBQyxPQUFPLEVBQUUsTUFBTTtnQkFDMUMsS0FBSSxDQUFDLFlBQVksRUFBRSxDQUFDLElBQUksQ0FBQztvQkFDdkIsSUFBSSxPQUFPLENBQVUsNEJBQTRCLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQ25FLENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBQ0QsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFVLDRCQUE0QixDQUFDLENBQUM7SUFDNUQsQ0FBQztJQUNILHVCQUFDO0FBQUQsQ0F0R0EsQUFzR0MsSUFBQTtBQXRHWSw0Q0FBZ0I7Ozs7O0FDbEI3QiwwQ0FBdUM7QUFDdkMsNkJBQStCO0FBRS9CLElBQU0sdUJBQXVCLEdBQUcsR0FBRyxDQUFDO0FBc0JwQztJQU9FLHlCQUFzQixVQUFzQjtRQUF0QixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQzFDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxFQUFFLENBQUM7SUFDOUIsQ0FBQztJQUVELHNDQUFZLEdBQVosVUFBYSxTQUFpQjtRQUM1QixNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBSUQsaUNBQU8sR0FBUDtRQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3RCLENBQUM7SUFFRCxrQ0FBUSxHQUFSO1FBQUEsaUJBTUM7UUFMQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDekIsTUFBTSxJQUFJLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNuQyxDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsS0FBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsRUFBdkIsQ0FBdUIsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFHTyx5Q0FBZSxHQUF2QixVQUF3QixJQUFlO1FBQ3JDLElBQUksUUFBUSxHQUFHLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQztRQUN4QyxJQUFJLFFBQVEsR0FBRyxNQUFNLENBQUMsaUJBQWlCLENBQUM7UUFFeEMsSUFBSSxjQUFjLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFDLE9BQU8sRUFBRSxDQUFDLElBQUssT0FBQSxDQUFDLEVBQUQsQ0FBQyxDQUFDLENBQUM7UUFDakQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUM3QixjQUFjO1lBQ1YsY0FBYyxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsTUFBTSxHQUFHLHVCQUF1QixDQUFDLENBQUM7UUFFMUUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxjQUFjLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDL0MsSUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3hELEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUM1QyxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzlDLFFBQVEsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoRCxDQUFDO1FBQ0gsQ0FBQztRQUVELE1BQU0sQ0FBQztZQUNMLFFBQVEsVUFBQTtZQUNSLFFBQVEsVUFBQTtZQUNSLFlBQVksRUFBRSxJQUFJLENBQUMsTUFBTTtZQUN6QixLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUs7U0FDckIsQ0FBQztJQUNKLENBQUM7SUFhTyxrREFBd0IsR0FBaEMsVUFDSSxRQUFtQixFQUFFLGNBQW1DLEVBQ3hELGNBQW1DLEVBQUUsY0FBbUMsRUFDeEUsY0FBbUM7UUFDckMsSUFBTSx1QkFBdUIsR0FDekIsQ0FBQyxjQUFjLFlBQVksWUFBWTtZQUN0QyxjQUFjLFlBQVksWUFBWSxDQUFDLENBQUM7UUFDN0MsSUFBTSx1QkFBdUIsR0FDekIsQ0FBQyxjQUFjLFlBQVksWUFBWTtZQUN0QyxjQUFjLFlBQVksWUFBWSxDQUFDLENBQUM7UUFFN0MsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDeEQsSUFBTSxXQUFXLEdBQWMsRUFBRSxDQUFDO1FBRWxDLFFBQVEsQ0FBQyxPQUFPLENBQUMsVUFBQSxPQUFPO1lBQ3RCLElBQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUN4QyxJQUFNLGdCQUFnQixHQUFHLElBQUksWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3JELEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQ25DLElBQU0sYUFBYSxHQUFHLHVCQUF1QjtvQkFDeEMsY0FBK0IsQ0FBQyxDQUFDLENBQUM7b0JBQ25DLGNBQXdCLENBQUM7Z0JBQzdCLElBQU0sYUFBYSxHQUFHLHVCQUF1QjtvQkFDeEMsY0FBK0IsQ0FBQyxDQUFDLENBQUM7b0JBQ25DLGNBQXdCLENBQUM7Z0JBQzdCLElBQU0sUUFBUSxHQUFHLGFBQWEsR0FBRyxhQUFhLENBQUM7Z0JBRS9DLElBQU0sYUFBYSxHQUFHLHVCQUF1QjtvQkFDeEMsY0FBK0IsQ0FBQyxDQUFDLENBQUM7b0JBQ25DLGNBQXdCLENBQUM7Z0JBQzdCLElBQU0sYUFBYSxHQUFHLHVCQUF1QjtvQkFDeEMsY0FBK0IsQ0FBQyxDQUFDLENBQUM7b0JBQ25DLGNBQXdCLENBQUM7Z0JBQzdCLElBQU0sUUFBUSxHQUFHLGFBQWEsR0FBRyxhQUFhLENBQUM7Z0JBRS9DLEVBQUUsQ0FBQyxDQUFDLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNuQixnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsR0FBRyxhQUFhLENBQUM7Z0JBQ3RDLENBQUM7Z0JBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ04sZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLEdBQUcsYUFBYTt3QkFDL0IsUUFBUSxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxHQUFHLFFBQVEsQ0FBQztnQkFDN0QsQ0FBQztZQUNILENBQUM7WUFDRCxXQUFXLENBQUMsSUFBSSxDQUFDLGlCQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsRUFBQyxNQUFNLEVBQUUsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDLENBQUM7UUFDNUUsQ0FBQyxDQUFDLENBQUM7UUFDSCxNQUFNLENBQUMsV0FBVyxDQUFDO0lBQ3JCLENBQUM7SUFFTyx1Q0FBYSxHQUFyQixVQUFzQixTQUFpQjtRQUF2QyxpQkE0QkM7UUEzQkMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLE1BQU0sSUFBSSxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDbkMsQ0FBQztRQUVELElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUdsRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLEdBQUc7WUFDbEMsWUFBWSxFQUFFLEtBQUs7WUFDbkIsU0FBUyxFQUFFLElBQUksWUFBWSxDQUFDLElBQUksQ0FBQztZQUNqQyxTQUFTLEVBQUUsSUFBSSxZQUFZLENBQUMsSUFBSSxDQUFDO1NBQ2xDLENBQUM7UUFFRixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQzlCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLGlCQUFpQixDQUFDO1lBQzFFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLGlCQUFpQixDQUFDO1FBQzVFLENBQUM7UUFFRCxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFBLE9BQU87WUFDckMsSUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3hDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQzlCLEtBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FDckQsS0FBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDcEUsS0FBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUNyRCxLQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RFLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCwrQ0FBcUIsR0FBckIsVUFDSSxTQUFpQixFQUFFLFVBQWtCLEVBQUUsVUFBa0I7UUFDM0QsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLE1BQU0sSUFBSSxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDbkMsQ0FBQztRQUNELEVBQUUsQ0FBQyxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDckMsTUFBTSxJQUFJLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO1FBQzlDLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUM5QyxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ2hDLENBQUM7UUFLRCxJQUFJLGNBQW1DLENBQUM7UUFDeEMsSUFBSSxjQUFtQyxDQUFDO1FBRXhDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBQ25ELGNBQWMsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUMsVUFBVyxDQUFDO1lBQy9ELGNBQWMsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUMsVUFBVyxDQUFDO1FBQ2pFLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLGNBQWMsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDO1lBQzdELGNBQWMsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDO1FBQy9ELENBQUM7UUFFRCxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FDbkQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFBRSxjQUFjLEVBQUUsY0FBYyxFQUFFLFVBQVUsRUFDbkUsVUFBVSxDQUFDLENBQUM7UUFDaEIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7UUFDdEQsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDMUQsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7SUFDNUQsQ0FBQztJQUVPLHNDQUFZLEdBQXBCLFVBQXFCLFNBQWlCO1FBQ3BDLE1BQU0sQ0FBQyxJQUFJLENBQUMsaUJBQWlCLElBQUksSUFBSTtZQUNqQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUMsWUFBWSxDQUFDO0lBQ3JELENBQUM7SUFFRCw2Q0FBbUIsR0FBbkIsVUFBb0IsU0FBaUI7UUFDbkMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLE1BQU0sSUFBSSxLQUFLLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztRQUNwRCxDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxNQUFNLENBQUM7UUFDVCxDQUFDO1FBRUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUMsd0JBQXdCLENBQ25ELElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDLFVBQVcsRUFDdEUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDLFVBQVcsRUFDN0MsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsRUFDM0MsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ2pELElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO0lBQ3pELENBQUM7SUFFRCw2Q0FBbUIsR0FBbkIsVUFBb0IsUUFBbUIsRUFBRSxTQUFpQjtRQUN4RCxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLE1BQU0sQ0FBQyxRQUFRLENBQUM7UUFDbEIsQ0FBQztRQUVELE1BQU0sQ0FBQyxJQUFJLENBQUMsd0JBQXdCLENBQ2hDLFFBQVEsRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUMsVUFBVyxFQUN2RCxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUMsVUFBVyxFQUM3QyxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxFQUMzQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUVELGlDQUFPLEdBQVA7UUFDRSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDekIsTUFBTSxDQUFDO1FBQ1QsQ0FBQztRQUVELEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUM3QyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQ2hELElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDL0IsQ0FBQztRQUNILENBQUM7UUFDRCxJQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztJQUNwQixDQUFDO0lBQ0gsc0JBQUM7QUFBRCxDQS9OQSxBQStOQyxJQUFBO0FBL05xQiwwQ0FBZTs7Ozs7Ozs7Ozs7Ozs7O0FDMUJyQywrQ0FBMkM7QUFDM0Msb0RBQXNEO0FBQ3RELDRDQUE4QztBQUM5QywwQ0FBK0M7QUFDL0MsNkJBQStCO0FBTS9CO0lBR0U7UUFrU1EsVUFBSyxHQUFXLEVBQUUsQ0FBQztRQWpTekIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLDBCQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQVVELHdCQUFRLEdBQVIsVUFBUyxJQUFZLEVBQUUsSUFBYTtRQUNsQyxNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksWUFBWSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN6RSxDQUFDO0lBV0QsMkJBQVcsR0FBWCxVQUFZLElBQVksRUFBRSxLQUFlO1FBQ3ZDLE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQzdFLENBQUM7SUFPRCx3QkFBUSxHQUFSLFVBQVMsS0FBZ0I7UUFDdkIsSUFBSSxVQUFtQixDQUFDO1FBQ3hCLEVBQUUsQ0FBQyxDQUFDLE9BQU8sS0FBSyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDOUIsVUFBVSxHQUFHLGdCQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2pDLENBQUM7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxZQUFZLGlCQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ3BDLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFDckIsQ0FBQztRQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQztZQUNsQyxJQUFNLElBQUksR0FBRyxJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDbkQsVUFBVSxHQUFHLGlCQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQztRQUNwRSxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDTixNQUFNLElBQUksS0FBSyxDQUFDLDhCQUE4QixDQUFDLENBQUM7UUFDbEQsQ0FBQztRQUNELE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxZQUFZLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUM7SUFDekUsQ0FBQztJQVFELHVCQUFPLEdBQVAsVUFBUSxDQUFTLEVBQUUsS0FBZTtRQUNoQyxNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUM5QixJQUFJLFdBQVcsQ0FBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFVRCxzQ0FBc0IsR0FBdEIsVUFBdUIsRUFBVSxFQUFFLEVBQVUsRUFBRSxFQUFVLEVBQUUsRUFBVTtRQUVuRSxNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUM5QixJQUFJLDBCQUEwQixDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFTRCxtQkFBRyxHQUFILFVBQUksRUFBVSxFQUFFLEVBQVU7UUFDeEIsTUFBTSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDaEUsQ0FBQztJQVNELHdCQUFRLEdBQVIsVUFBUyxFQUFVLEVBQUUsRUFBVTtRQUM3QixNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksWUFBWSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBU0Qsd0JBQVEsR0FBUixVQUFTLEVBQVUsRUFBRSxFQUFVO1FBQzdCLE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxZQUFZLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3JFLENBQUM7SUFTRCxzQkFBTSxHQUFOLFVBQU8sRUFBVSxFQUFFLEVBQVU7UUFDM0IsTUFBTSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDbkUsQ0FBQztJQU1ELHlCQUFTLEdBQVQsVUFBVSxDQUFTO1FBQ2pCLE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxhQUFhLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakUsQ0FBQztJQVFELHdCQUFRLEdBQVIsVUFBUyxFQUFVLEVBQUUsRUFBVSxFQUFFLElBQVk7UUFDM0MsTUFBTSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLFlBQVksQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQzNFLENBQUM7SUFRRCxzQkFBTSxHQUFOLFVBQU8sRUFBVSxFQUFFLEVBQVU7UUFDM0IsTUFBTSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDbkUsQ0FBQztJQWFELHNCQUFNLEdBQU4sVUFDSSxDQUFTLEVBQUUsQ0FBUyxFQUFFLENBQVMsRUFBRSxTQUFpQixFQUFFLFdBQW1CLEVBQ3ZFLE1BQVUsRUFBRSxPQUFnQjtRQUE1Qix1QkFBQSxFQUFBLFVBQVU7UUFDWixNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksaUJBQWlCLENBQ3BELElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQy9ELENBQUM7SUFVRCx1QkFBTyxHQUFQLFVBQVEsQ0FBUyxFQUFFLFNBQWlCLEVBQUUsTUFBVSxFQUFFLE9BQWdCO1FBQTVCLHVCQUFBLEVBQUEsVUFBVTtRQUM5QyxNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUM5QixJQUFJLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBT0QsbUJBQUcsR0FBSCxVQUFJLENBQVM7UUFDWCxNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFPRCxtQkFBRyxHQUFILFVBQUksQ0FBUztRQUNYLE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM0QsQ0FBQztJQU9ELG9CQUFJLEdBQUosVUFBSyxDQUFTO1FBQ1osTUFBTSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBT0Qsb0JBQUksR0FBSixVQUFLLENBQVM7UUFDWixNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFPRCx1QkFBTyxHQUFQLFVBQVEsQ0FBUztRQUNmLE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQU1ELHNCQUFNLEdBQU4sVUFBTyxDQUFTO1FBQ2QsTUFBTSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM5RCxDQUFDO0lBUUQsdUJBQU8sR0FBUCxVQUFRLENBQVM7UUFDZixNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQy9ELENBQUM7SUFPRCx1Q0FBdUIsR0FBdkIsVUFBd0IsQ0FBUyxFQUFFLE1BQWM7UUFDL0MsTUFBTSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FDOUIsSUFBSSwyQkFBMkIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDeEQsQ0FBQztJQVFELCtCQUFlLEdBQWYsVUFBZ0IsS0FBYSxFQUFFLFVBQWtCO1FBQy9DLE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQzlCLElBQUksbUJBQW1CLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFPRCxzQkFBTSxHQUFOLFVBQU8sQ0FBUztRQUNkLE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDOUQsQ0FBQztJQVFELDRCQUFZLEdBQVosVUFBYSxFQUFVLEVBQUUsRUFBVTtRQUNqQyxNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksZ0JBQWdCLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3pFLENBQUM7SUFFTyxzQ0FBc0IsR0FBOUIsVUFBK0IsSUFBVTtRQUN2QyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN0QixJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDaEIsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDckIsQ0FBQztJQUVELHdCQUFRLEdBQVI7UUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNwQixDQUFDO0lBR0gsWUFBQztBQUFELENBdFNBLEFBc1NDLElBQUE7QUF0U1ksc0JBQUs7QUErU2xCO0lBTUUsZ0JBQW1CLEtBQWU7UUFBZixVQUFLLEdBQUwsS0FBSyxDQUFVO1FBQ2hDLElBQUksQ0FBQyxFQUFFLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQzVCLENBQUM7SUFFSCxhQUFDO0FBQUQsQ0FWQSxBQVVDO0FBRGdCLGFBQU0sR0FBRyxDQUFDLENBQUM7QUFUZix3QkFBTTtBQW1CbkI7SUFRRSxjQUNXLEtBQVksRUFBUyxJQUFZLEVBQ2pDLE1BQWdDLEVBQVMsTUFBYztRQUR2RCxVQUFLLEdBQUwsS0FBSyxDQUFPO1FBQVMsU0FBSSxHQUFKLElBQUksQ0FBUTtRQUNqQyxXQUFNLEdBQU4sTUFBTSxDQUEwQjtRQUFTLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDaEUsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDeEIsTUFBTSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7SUFDckIsQ0FBQztJQUlILFdBQUM7QUFBRCxDQWpCQSxBQWlCQztBQURnQixXQUFNLEdBQUcsQ0FBQyxDQUFDO0FBaEJOLG9CQUFJO0FBeUIxQjtJQUFrQyxnQ0FBSTtJQUNwQyxzQkFBWSxLQUFZLEVBQUUsSUFBWSxFQUFTLElBQWE7UUFBNUQsWUFDRSxrQkFBTSxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsU0FDL0M7UUFGOEMsVUFBSSxHQUFKLElBQUksQ0FBUzs7SUFFNUQsQ0FBQztJQUNELCtCQUFRLEdBQVI7UUFDRSxJQUFJLENBQUMsTUFBTSxDQUNQLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxFQUNqQixnREFBZ0QsR0FBRyxJQUFJLENBQUMsSUFBSTtZQUN4RCx5QkFBeUIsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFDSCxtQkFBQztBQUFELENBVkEsQUFVQyxDQVZpQyxJQUFJLEdBVXJDO0FBVlksb0NBQVk7QUFrQnpCO0lBQXFDLG1DQUFJO0lBQ3ZDLHlCQUFZLEtBQVksRUFBRSxJQUFZLEVBQUUsS0FBZTtlQUNyRCxrQkFBTSxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBQ0Qsa0NBQVEsR0FBUixjQUFZLENBQUM7SUFDZixzQkFBQztBQUFELENBTEEsQUFLQyxDQUxvQyxJQUFJLEdBS3hDO0FBTFksMENBQWU7QUFZNUI7SUFBa0MsZ0NBQUk7SUFDcEMsc0JBQVksS0FBWSxFQUFTLElBQWE7UUFBOUMsWUFDRSxrQkFBTSxLQUFLLEVBQUUsVUFBVSxFQUFFLEVBQUUsRUFBRSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsU0FDckQ7UUFGZ0MsVUFBSSxHQUFKLElBQUksQ0FBUzs7SUFFOUMsQ0FBQztJQUNELCtCQUFRLEdBQVI7UUFDRSxJQUFJLENBQUMsTUFBTSxDQUNQLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxFQUNqQixnREFBZ0QsR0FBRyxJQUFJLENBQUMsSUFBSTtZQUN4RCx5QkFBeUIsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFDSCxtQkFBQztBQUFELENBVkEsQUFVQyxDQVZpQyxJQUFJLEdBVXJDO0FBVlksb0NBQVk7QUFpQnpCO0lBQWlDLCtCQUFJO0lBRW5DLHFCQUNJLEtBQVksRUFBUyxJQUFZLEVBQVUsQ0FBUyxFQUM1QyxLQUFlO1FBRjNCLFlBR0Usa0JBQU0sS0FBSyxFQUFFLElBQUksRUFBRSxFQUFDLENBQUMsR0FBQSxFQUFDLEVBQUUsSUFBSSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsU0FDM0M7UUFId0IsVUFBSSxHQUFKLElBQUksQ0FBUTtRQUFVLE9BQUMsR0FBRCxDQUFDLENBQVE7UUFDNUMsV0FBSyxHQUFMLEtBQUssQ0FBVTs7SUFFM0IsQ0FBQztJQUNELDhCQUFRLEdBQVI7UUFDRSxJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDL0MsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDakQsSUFBSSxDQUFDLE1BQU0sQ0FDUCxLQUFLLEtBQUssU0FBUyxFQUNuQiw0REFBNEQ7WUFDeEQsSUFBSSxDQUFDLElBQUksR0FBRyxlQUFlLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLO1lBQzFDLDJDQUEyQyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUUsQ0FBQztJQUNILGtCQUFDO0FBQUQsQ0FoQkEsQUFnQkMsQ0FoQmdDLElBQUk7QUFDbkIsYUFBQyxHQUFHLEdBQUcsQ0FBQztBQURiLGtDQUFXO0FBc0J4QjtJQUFnRCw4Q0FBSTtJQUtsRCxvQ0FDSSxLQUFZLEVBQVUsRUFBVSxFQUFVLEVBQVUsRUFBVSxFQUFVLEVBQ2hFLEVBQVU7UUFGdEIsWUFHRSxrQkFBTSxLQUFLLEVBQUUsb0JBQW9CLEVBQUUsRUFBQyxFQUFFLElBQUEsRUFBRSxFQUFFLElBQUEsRUFBRSxFQUFFLElBQUEsRUFBRSxFQUFFLElBQUEsRUFBQyxFQUFFLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUMzRTtRQUh5QixRQUFFLEdBQUYsRUFBRSxDQUFRO1FBQVUsUUFBRSxHQUFGLEVBQUUsQ0FBUTtRQUFVLFFBQUUsR0FBRixFQUFFLENBQVE7UUFDaEUsUUFBRSxHQUFGLEVBQUUsQ0FBUTs7SUFFdEIsQ0FBQztJQUVELDZDQUFRLEdBQVI7UUFDRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNyRCxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkMsTUFBTSxJQUFJLEtBQUssQ0FDWCwrREFBK0Q7Z0JBQy9ELFNBQVMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2pDLENBQUM7UUFDRCxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkMsTUFBTSxJQUFJLEtBQUssQ0FDWCwrREFBK0Q7Z0JBQy9ELFNBQVMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2pDLENBQUM7SUFDSCxDQUFDO0lBQ0gsaUNBQUM7QUFBRCxDQXhCQSxBQXdCQyxDQXhCK0MsSUFBSTtBQUNsQyw2QkFBRSxHQUFHLElBQUksQ0FBQztBQUNWLDZCQUFFLEdBQUcsSUFBSSxDQUFDO0FBQ1YsNkJBQUUsR0FBRyxJQUFJLENBQUM7QUFDViw2QkFBRSxHQUFHLElBQUksQ0FBQztBQUpmLGdFQUEwQjtBQTZCdkM7SUFBNkIsMkJBQUk7SUFJL0IsaUJBQVksS0FBWSxFQUFVLEVBQVUsRUFBVSxFQUFVO1FBQWhFLFlBQ0Usa0JBQ0ksS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFDLEVBQUUsSUFBQSxFQUFFLEVBQUUsSUFBQSxFQUFDLEVBQ3RCLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUMxRTtRQUppQyxRQUFFLEdBQUYsRUFBRSxDQUFRO1FBQVUsUUFBRSxHQUFGLEVBQUUsQ0FBUTs7SUFJaEUsQ0FBQztJQUVELDBCQUFRLEdBQVI7UUFDRSxJQUFJLENBQUMsTUFBTSxDQUNQLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO1lBQ25DLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO1lBQ3ZDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFDbEQscUVBQXFFO1lBQ2pFLFNBQVMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssR0FBRyxPQUFPLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLO1lBQ25ELGNBQWMsQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUFDSCxjQUFDO0FBQUQsQ0FuQkEsQUFtQkMsQ0FuQjRCLElBQUk7QUFDZixVQUFFLEdBQUcsSUFBSSxDQUFDO0FBQ1YsVUFBRSxHQUFHLElBQUksQ0FBQztBQUZmLDBCQUFPO0FBd0JwQjtJQUFrQyxnQ0FBSTtJQUlwQyxzQkFBWSxLQUFZLEVBQVUsRUFBVSxFQUFVLEVBQVU7UUFBaEUsWUFDRSxrQkFDSSxLQUFLLEVBQUUsVUFBVSxFQUFFLEVBQUMsRUFBRSxJQUFBLEVBQUUsRUFBRSxJQUFBLEVBQUMsRUFDM0IsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLFNBQzFFO1FBSmlDLFFBQUUsR0FBRixFQUFFLENBQVE7UUFBVSxRQUFFLEdBQUYsRUFBRSxDQUFROztJQUloRSxDQUFDO0lBRUQsK0JBQVEsR0FBUjtRQUNFLElBQUksQ0FBQyxNQUFNLENBQ1AsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7WUFDbkMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7WUFDdkMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUNsRCxnRUFBZ0U7WUFDNUQsU0FBUyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxHQUFHLE9BQU8sR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUs7WUFDbkQsY0FBYyxDQUFDLENBQUM7SUFDMUIsQ0FBQztJQUNILG1CQUFDO0FBQUQsQ0FuQkEsQUFtQkMsQ0FuQmlDLElBQUk7QUFDcEIsZUFBRSxHQUFHLElBQUksQ0FBQztBQUNWLGVBQUUsR0FBRyxJQUFJLENBQUM7QUFGZixvQ0FBWTtBQXdCekI7SUFBa0MsZ0NBQUk7SUFJcEMsc0JBQVksS0FBWSxFQUFVLEVBQVUsRUFBVSxFQUFVO1FBQWhFLFlBQ0Usa0JBQ0ksS0FBSyxFQUFFLFVBQVUsRUFBRSxFQUFDLEVBQUUsSUFBQSxFQUFFLEVBQUUsSUFBQSxFQUFDLEVBQzNCLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUMxRTtRQUppQyxRQUFFLEdBQUYsRUFBRSxDQUFRO1FBQVUsUUFBRSxHQUFGLEVBQUUsQ0FBUTs7SUFJaEUsQ0FBQztJQUVELCtCQUFRLEdBQVI7UUFDRSxJQUFJLENBQUMsTUFBTSxDQUNQLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO1lBQ25DLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO1lBQ3ZDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFDbEQsZ0VBQWdFO1lBQzVELFNBQVMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssR0FBRyxPQUFPLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLO1lBQ25ELGNBQWMsQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUFDSCxtQkFBQztBQUFELENBbkJBLEFBbUJDLENBbkJpQyxJQUFJO0FBQ3BCLGVBQUUsR0FBRyxJQUFJLENBQUM7QUFDVixlQUFFLEdBQUcsSUFBSSxDQUFDO0FBRmYsb0NBQVk7QUF3QnpCO0lBQWdDLDhCQUFJO0lBSWxDLG9CQUFZLEtBQVksRUFBVSxFQUFVLEVBQVUsRUFBVTtRQUFoRSxZQUNFLGtCQUNJLEtBQUssRUFBRSxRQUFRLEVBQUUsRUFBQyxFQUFFLElBQUEsRUFBRSxFQUFFLElBQUEsRUFBQyxFQUN6QixJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsU0FDMUU7UUFKaUMsUUFBRSxHQUFGLEVBQUUsQ0FBUTtRQUFVLFFBQUUsR0FBRixFQUFFLENBQVE7O0lBSWhFLENBQUM7SUFFRCw2QkFBUSxHQUFSO1FBQ0UsSUFBSSxDQUFDLE1BQU0sQ0FDUCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQztZQUNuQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQztZQUN2QyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQ2xELDhEQUE4RDtZQUMxRCxTQUFTLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLEdBQUcsT0FBTyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSztZQUNuRCxjQUFjLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBQ0gsaUJBQUM7QUFBRCxDQW5CQSxBQW1CQyxDQW5CK0IsSUFBSTtBQUNsQixhQUFFLEdBQUcsSUFBSSxDQUFDO0FBQ1YsYUFBRSxHQUFHLElBQUksQ0FBQztBQUZmLGdDQUFVO0FBd0J2QjtJQUFtQyxpQ0FBSTtJQUdyQyx1QkFBWSxLQUFZLEVBQUUsQ0FBUztlQUNqQyxrQkFBTSxLQUFLLEVBQUUsV0FBVyxFQUFFLEVBQUMsQ0FBQyxHQUFBLEVBQUMsRUFBRSxJQUFJLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNoRCxDQUFDO0lBRUQsZ0NBQVEsR0FBUixjQUFZLENBQUM7SUFDZixvQkFBQztBQUFELENBUkEsQUFRQyxDQVJrQyxJQUFJO0FBQ3JCLGVBQUMsR0FBRyxHQUFHLENBQUM7QUFEYixzQ0FBYTtBQWMxQjtJQUFrQyxnQ0FBSTtJQUlwQyxzQkFDSSxLQUFZLEVBQVUsRUFBVSxFQUFVLEVBQVUsRUFDN0MsSUFBWTtRQUZ2QixZQUdFLGtCQUNJLEtBQUssRUFBRSxVQUFVLEVBQUUsRUFBQyxFQUFFLElBQUEsRUFBRSxFQUFFLElBQUEsRUFBQyxFQUMzQixJQUFJLE1BQU0sQ0FBQyxhQUFhLENBQUMsMEJBQTBCLENBQy9DLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLFNBQ3BDO1FBTnlCLFFBQUUsR0FBRixFQUFFLENBQVE7UUFBVSxRQUFFLEdBQUYsRUFBRSxDQUFRO1FBQzdDLFVBQUksR0FBSixJQUFJLENBQVE7O0lBS3ZCLENBQUM7SUFDRCwrQkFBUSxHQUFSO1FBQ0UsYUFBYSxDQUFDLHlCQUF5QixDQUNuQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUNILG1CQUFDO0FBQUQsQ0FoQkEsQUFnQkMsQ0FoQmlDLElBQUk7QUFDcEIsZUFBRSxHQUFHLElBQUksQ0FBQztBQUNWLGVBQUUsR0FBRyxJQUFJLENBQUM7QUFDVixpQkFBSSxHQUFHLE1BQU0sQ0FBQztBQUhuQixvQ0FBWTtBQWtCekIsOEJBQThCLE9BQWlCLEVBQUUsT0FBaUI7SUFDaEUsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksT0FBTyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pELE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2IsQ0FBQztJQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEQsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdEIsQ0FBQztJQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEQsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdEIsQ0FBQztJQUNELE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQyxDQUFDO0FBTUQ7SUFBZ0MsOEJBQUk7SUFHbEMsb0JBQVksS0FBWSxFQUFVLEVBQVUsRUFBVSxFQUFVO1FBQWhFLFlBQ0Usa0JBQ0ksS0FBSyxFQUFFLFFBQVEsRUFBRSxFQUFDLEVBQUUsSUFBQSxFQUFFLEVBQUUsSUFBQSxFQUFDLEVBQ3pCLElBQUksTUFBTSxDQUFDLG9CQUFvQixDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FDMUQ7UUFKaUMsUUFBRSxHQUFGLEVBQUUsQ0FBUTtRQUFVLFFBQUUsR0FBRixFQUFFLENBQVE7O0lBSWhFLENBQUM7SUFFRCw2QkFBUSxHQUFSO1FBQ0UsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM3RCxJQUFJLENBQUMsTUFBTSxDQUNQLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUNyQywrREFBK0Q7Z0JBQzNELElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxHQUFHLE9BQU8sR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssR0FBRyxjQUFjLENBQUMsQ0FBQztRQUNwRSxDQUFDO1FBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEUsSUFBSSxDQUFDLE1BQU0sQ0FDUCxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFDckMsZ0VBQWdFO2dCQUM1RCxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssR0FBRyx3Q0FBd0M7Z0JBQ3hELElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQy9CLENBQUM7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwRSxJQUFJLENBQUMsTUFBTSxDQUNQLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUNyQyxvREFBb0QsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUs7Z0JBQ2hFLDZDQUE2QztnQkFDN0MsUUFBUSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQzFDLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLE1BQU0sSUFBSSxLQUFLLENBQ1gsNkRBQTZELENBQUMsQ0FBQztRQUNyRSxDQUFDO0lBQ0gsQ0FBQztJQUNILGlCQUFDO0FBQUQsQ0FoQ0EsQUFnQ0MsQ0FoQytCLElBQUk7QUFDbEIsYUFBRSxHQUFHLElBQUksQ0FBQztBQUNWLGFBQUUsR0FBRyxJQUFJLENBQUM7QUFGZixnQ0FBVTtBQXNDdkI7SUFBdUMscUNBQUk7SUFJekMsMkJBQ0ksS0FBWSxFQUFVLENBQVMsRUFBVSxDQUFTLEVBQVUsQ0FBUyxFQUM5RCxTQUFpQixFQUFTLFdBQW1CLEVBQVMsTUFBVSxFQUNoRSxPQUFnQjtRQURzQyx1QkFBQSxFQUFBLFVBQVU7UUFGM0UsWUFJRSxrQkFDSSxLQUFLLEVBQUUsZ0JBQWdCLEVBQUUsRUFBQyxDQUFDLEdBQUEsRUFBRSxDQUFDLEdBQUEsRUFBRSxDQUFDLEdBQUEsRUFBQyxFQUNsQyxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsb0JBQW9CLENBQ3JDLENBQUMsQ0FBQyxLQUFpQyxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUNuRSxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQ25CO1FBUnlCLE9BQUMsR0FBRCxDQUFDLENBQVE7UUFBVSxPQUFDLEdBQUQsQ0FBQyxDQUFRO1FBQVUsT0FBQyxHQUFELENBQUMsQ0FBUTtRQUM5RCxlQUFTLEdBQVQsU0FBUyxDQUFRO1FBQVMsaUJBQVcsR0FBWCxXQUFXLENBQVE7UUFBUyxZQUFNLEdBQU4sTUFBTSxDQUFJO1FBQ2hFLGFBQU8sR0FBUCxPQUFPLENBQVM7O0lBTTNCLENBQUM7SUFDRCxvQ0FBUSxHQUFSO1FBQ0UsSUFBSSxDQUFDLE1BQU0sQ0FDUCxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUN6QixrRUFBa0U7WUFDOUQsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDNUIsSUFBSSxDQUFDLE1BQU0sQ0FDUCxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUN6QixvRUFBb0U7WUFDaEUsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDNUIsSUFBSSxDQUFDLE1BQU0sQ0FDUCxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUN6QixtRUFBbUU7WUFDL0QsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFFNUIsSUFBSSxDQUFDLE1BQU0sQ0FDUCxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFDbkMsMENBQTBDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ3hELHdDQUF3QyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO0lBQzdFLENBQUM7SUFDSCx3QkFBQztBQUFELENBakNBLEFBaUNDLENBakNzQyxJQUFJO0FBQ3pCLG1CQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ1IsbUJBQUMsR0FBRyxHQUFHLENBQUM7QUFDUixtQkFBQyxHQUFHLEdBQUcsQ0FBQztBQUhiLDhDQUFpQjtBQXVDOUI7SUFBaUMsK0JBQUk7SUFFbkMscUJBQ0ksS0FBWSxFQUFVLENBQVMsRUFBUyxTQUFpQixFQUNsRCxNQUFVLEVBQVMsT0FBZ0I7UUFBbkMsdUJBQUEsRUFBQSxVQUFVO1FBRnJCLFlBR0Usa0JBQ0ksS0FBSyxFQUFFLFVBQVUsRUFBRSxFQUFDLENBQUMsR0FBQSxFQUFDLEVBQ3RCLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsQ0FDckMsQ0FBQyxDQUFDLEtBQWlDLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUNsRSxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQ25CO1FBUHlCLE9BQUMsR0FBRCxDQUFDLENBQVE7UUFBUyxlQUFTLEdBQVQsU0FBUyxDQUFRO1FBQ2xELFlBQU0sR0FBTixNQUFNLENBQUk7UUFBUyxhQUFPLEdBQVAsT0FBTyxDQUFTOztJQU05QyxDQUFDO0lBQ0QsOEJBQVEsR0FBUjtRQUNFLElBQUksQ0FBQyxNQUFNLENBQ1AsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsRUFDekIsbUVBQW1FO1lBQy9ELElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFDSCxrQkFBQztBQUFELENBakJBLEFBaUJDLENBakJnQyxJQUFJO0FBQ25CLGFBQUMsR0FBRyxHQUFHLENBQUM7QUFEYixrQ0FBVztBQXVCeEI7SUFBOEIsNEJBQUk7SUFFaEMsa0JBQVksS0FBWSxFQUFFLENBQVM7ZUFDakMsa0JBQU0sS0FBSyxFQUFFLE1BQU0sRUFBRSxFQUFDLENBQUMsR0FBQSxFQUFDLEVBQUUsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFDRCwyQkFBUSxHQUFSLGNBQVksQ0FBQztJQUNmLGVBQUM7QUFBRCxDQU5BLEFBTUMsQ0FONkIsSUFBSTtBQUNoQixVQUFDLEdBQUcsR0FBRyxDQUFDO0FBRGIsNEJBQVE7QUFZckI7SUFBNkIsMkJBQUk7SUFFL0IsaUJBQVksS0FBWSxFQUFFLENBQVM7ZUFDakMsa0JBQU0sS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFDLENBQUMsR0FBQSxFQUFDLEVBQUUsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFDRCwwQkFBUSxHQUFSLGNBQVksQ0FBQztJQUNmLGNBQUM7QUFBRCxDQU5BLEFBTUMsQ0FONEIsSUFBSTtBQUNmLFNBQUMsR0FBRyxHQUFHLENBQUM7QUFEYiwwQkFBTztBQVlwQjtJQUE2QiwyQkFBSTtJQUUvQixpQkFBWSxLQUFZLEVBQUUsQ0FBUztlQUNqQyxrQkFBTSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUMsQ0FBQyxHQUFBLEVBQUMsRUFBRSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUNELDBCQUFRLEdBQVIsY0FBWSxDQUFDO0lBQ2YsY0FBQztBQUFELENBTkEsQUFNQyxDQU40QixJQUFJO0FBQ2YsU0FBQyxHQUFHLEdBQUcsQ0FBQztBQURiLDBCQUFPO0FBWXBCO0lBQThCLDRCQUFJO0lBRWhDLGtCQUFZLEtBQVksRUFBRSxDQUFTO2VBQ2pDLGtCQUFNLEtBQUssRUFBRSxNQUFNLEVBQUUsRUFBQyxDQUFDLEdBQUEsRUFBQyxFQUFFLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNoRCxDQUFDO0lBQ0QsMkJBQVEsR0FBUixjQUFZLENBQUM7SUFDZixlQUFDO0FBQUQsQ0FOQSxBQU1DLENBTjZCLElBQUk7QUFDaEIsVUFBQyxHQUFHLEdBQUcsQ0FBQztBQURiLDRCQUFRO0FBWXJCO0lBQWlDLCtCQUFJO0lBRW5DLHFCQUFZLEtBQVksRUFBRSxDQUFTO2VBQ2pDLGtCQUFNLEtBQUssRUFBRSxTQUFTLEVBQUUsRUFBQyxDQUFDLEdBQUEsRUFBQyxFQUFFLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNuRCxDQUFDO0lBQ0QsOEJBQVEsR0FBUixjQUFZLENBQUM7SUFDZixrQkFBQztBQUFELENBTkEsQUFNQyxDQU5nQyxJQUFJO0FBQ25CLGFBQUMsR0FBRyxHQUFHLENBQUM7QUFEYixrQ0FBVztBQVl4QjtJQUFnQyw4QkFBSTtJQUVsQyxvQkFBWSxLQUFZLEVBQUUsQ0FBUztlQUNqQyxrQkFBTSxLQUFLLEVBQUUsUUFBUSxFQUFFLEVBQUMsQ0FBQyxHQUFBLEVBQUMsRUFBRSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUNELDZCQUFRLEdBQVIsY0FBWSxDQUFDO0lBQ2YsaUJBQUM7QUFBRCxDQU5BLEFBTUMsQ0FOK0IsSUFBSTtBQUNsQixZQUFDLEdBQUcsR0FBRyxDQUFDO0FBRGIsZ0NBQVU7QUFhdkI7SUFBaUQsK0NBQUk7SUFHbkQscUNBQVksS0FBWSxFQUFVLENBQVMsRUFBVSxNQUFjO1FBQW5FLFlBQ0Usa0JBQU0sS0FBSyxFQUFFLHlCQUF5QixFQUFFLEVBQUMsQ0FBQyxHQUFBLEVBQUUsTUFBTSxRQUFBLEVBQUMsRUFBRSxJQUFJLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUNyRTtRQUZpQyxPQUFDLEdBQUQsQ0FBQyxDQUFRO1FBQVUsWUFBTSxHQUFOLE1BQU0sQ0FBUTs7SUFFbkUsQ0FBQztJQUNELDhDQUFRLEdBQVI7UUFDRSxJQUFJLENBQUMsTUFBTSxDQUNQLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFDakQsb0RBQW9ELEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLO1lBQy9ELDZCQUE2QixHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDO0lBQ3BFLENBQUM7SUFDSCxrQ0FBQztBQUFELENBWkEsQUFZQyxDQVpnRCxJQUFJO0FBQ25DLDZCQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ1Isa0NBQU0sR0FBRyxRQUFRLENBQUM7QUFGdkIsa0VBQTJCO0FBaUJ4QztJQUFpQywrQkFBSTtJQUduQyxxQkFBWSxLQUFZLEVBQVUsQ0FBUztRQUEzQyxZQUNFLGtCQUFNLEtBQUssRUFBRSxTQUFTLEVBQUUsRUFBQyxDQUFDLEdBQUEsRUFBQyxFQUFFLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUNsRDtRQUZpQyxPQUFDLEdBQUQsQ0FBQyxDQUFROztJQUUzQyxDQUFDO0lBQ0QsOEJBQVEsR0FBUjtRQUNFLElBQUksQ0FBQyxNQUFNLENBQ1AsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsRUFDekIsNkNBQTZDLENBQUMsQ0FBQztRQUNuRCxJQUFJLENBQUMsTUFBTSxDQUNQLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFDcEIsb0RBQW9ELENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBQ0gsa0JBQUM7QUFBRCxDQWRBLEFBY0MsQ0FkZ0MsSUFBSTtBQUNuQixhQUFDLEdBQUcsR0FBRyxDQUFDO0FBRGIsa0NBQVc7QUFzQnhCO0lBQXlDLHVDQUFJO0lBRzNDLDZCQUFZLEtBQVksRUFBVSxLQUFhLEVBQVUsVUFBa0I7UUFBM0UsWUFDRSxrQkFBTSxLQUFLLEVBQUUsbUJBQW1CLEVBQUUsRUFBQyxLQUFLLE9BQUEsRUFBRSxVQUFVLFlBQUEsRUFBQyxFQUFFLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQ3ZFO1FBRmlDLFdBQUssR0FBTCxLQUFLLENBQVE7UUFBVSxnQkFBVSxHQUFWLFVBQVUsQ0FBUTs7SUFFM0UsQ0FBQztJQUNELHNDQUFRLEdBQVI7UUFDRSxJQUFJLENBQUMsTUFBTSxDQUNQLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsRUFDekQsZ0RBQWdELEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLO1lBQy9ELGlDQUFpQyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDO0lBQzVFLENBQUM7SUFDSCwwQkFBQztBQUFELENBWkEsQUFZQyxDQVp3QyxJQUFJO0FBQzNCLHlCQUFLLEdBQUcsT0FBTyxDQUFDO0FBQ2hCLDhCQUFVLEdBQUcsWUFBWSxDQUFDO0FBRi9CLGtEQUFtQjtBQWtCaEM7SUFBZ0MsOEJBQUk7SUFFbEMsb0JBQVksS0FBWSxFQUFTLENBQVM7UUFBMUMsWUFDRSxrQkFBTSxLQUFLLEVBQUUsUUFBUSxFQUFFLEVBQUMsQ0FBQyxHQUFBLEVBQUMsRUFBRSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FDN0M7UUFGZ0MsT0FBQyxHQUFELENBQUMsQ0FBUTs7SUFFMUMsQ0FBQztJQUNELDZCQUFRLEdBQVI7UUFDRSxJQUFJLENBQUMsTUFBTSxDQUNQLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQ3BDLG9FQUFvRSxDQUFDLENBQUM7SUFDNUUsQ0FBQztJQUNILGlCQUFDO0FBQUQsQ0FWQSxBQVVDLENBVitCLElBQUk7QUFDbEIsWUFBQyxHQUFHLEdBQUcsQ0FBQztBQURiLGdDQUFVO0FBZ0J2QjtJQUFzQyxvQ0FBSTtJQUd4QywwQkFBWSxLQUFZLEVBQVUsRUFBVSxFQUFVLEVBQVU7UUFBaEUsWUFDRSxrQkFBTSxLQUFLLEVBQUUsY0FBYyxFQUFFLEVBQUMsRUFBRSxJQUFBLEVBQUUsRUFBRSxJQUFBLEVBQUMsRUFBRSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FDeEQ7UUFGaUMsUUFBRSxHQUFGLEVBQUUsQ0FBUTtRQUFVLFFBQUUsR0FBRixFQUFFLENBQVE7O0lBRWhFLENBQUM7SUFDRCxtQ0FBUSxHQUFSO1FBQ0UsSUFBSSxDQUFDLE1BQU0sQ0FDUCxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQzlDLDBDQUEwQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSztZQUN0RCx5QkFBeUIsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBQ0gsdUJBQUM7QUFBRCxDQVpBLEFBWUMsQ0FacUMsSUFBSTtBQUN4QixtQkFBRSxHQUFHLElBQUksQ0FBQztBQUNWLG1CQUFFLEdBQUcsSUFBSSxDQUFDO0FBRmYsNENBQWdCO0FBbUI3QjtJQUErQiw2QkFBSTtJQUtqQyxtQkFBWSxLQUFZLEVBQUUsQ0FBUztRQUFuQyxZQUNFLGtCQUFNLEtBQUssRUFBRSxXQUFXLEVBQUUsRUFBQyxDQUFDLEdBQUEsRUFBQyxFQUFFLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUNwRDtRQUpELGFBQU8sR0FBYSxFQUFFLENBQUM7O0lBSXZCLENBQUM7SUFNRCxzQ0FBa0IsR0FBbEI7UUFDRSxJQUFNLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMxRCxNQUFNLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNuQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMxQixNQUFNLENBQUMsTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFDRCw0QkFBUSxHQUFSLGNBQVksQ0FBQztJQUNmLGdCQUFDO0FBQUQsQ0FwQkEsQUFvQkMsQ0FwQjhCLElBQUk7QUFDakIsV0FBQyxHQUFHLEdBQUcsQ0FBQztBQURiLDhCQUFTOzs7OztBQzkxQnRCLCtDQUF5RjtBQU96RjtJQUNFLHFCQUFvQixDQUFRO1FBQVIsTUFBQyxHQUFELENBQUMsQ0FBTztJQUFHLENBQUM7SUFFaEMsMkJBQUssR0FBTCxVQUNJLElBQVksRUFBRSxDQUFTLEVBQUUsS0FBYSxFQUN0QyxVQUErQyxFQUFFLE9BQWMsRUFDL0QsaUJBQWlFLEVBQ2pFLGVBQXFEO1FBRnJELDJCQUFBLEVBQUEsaUJBQStDO1FBQUUsd0JBQUEsRUFBQSxjQUFjO1FBQy9ELGtDQUFBLEVBQUEsd0JBQXFDLHlDQUEwQixFQUFFO1FBQ2pFLGdDQUFBLEVBQUEsc0JBQW1DLCtCQUFnQixFQUFFO1FBQ3ZELElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUMzQixJQUFJLEdBQUcsVUFBVSxFQUNqQixpQkFBaUIsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUUxRSxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFFcEMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNaLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUN4QixJQUFJLEdBQUcsT0FBTyxFQUNkLGVBQWUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDNUQsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUM5QixDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDdkIsR0FBRyxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN4QixDQUFDO1FBRUQsTUFBTSxDQUFDLEdBQUcsQ0FBQztJQUNiLENBQUM7SUFDSCxrQkFBQztBQUFELENBM0JBLEFBMkJDLElBQUE7QUEzQlksa0NBQVc7Ozs7O0FDSHhCLDBDQUErQztBQUUvQyxxQ0FBNEQ7QUFFNUQsSUFBTSx3QkFBd0IsR0FBRyxJQUFJLENBQUM7QUFDdEMsSUFBTSx3QkFBd0IsR0FBRyxHQUFHLENBQUM7QUFDckMsSUFBTSxxQ0FBcUMsR0FBRyxJQUFJLENBQUM7QUFjbkQsSUFBWSxlQUdYO0FBSEQsV0FBWSxlQUFlO0lBQ3pCLG1EQUFHLENBQUE7SUFDSCxxREFBSSxDQUFBO0FBQ04sQ0FBQyxFQUhXLGVBQWUsR0FBZix1QkFBZSxLQUFmLHVCQUFlLFFBRzFCO0FBT0Q7SUF1Q0UscUJBQ1ksSUFBaUIsRUFBVSxPQUFnQixFQUMzQyxhQUF1QztRQUR2QyxTQUFJLEdBQUosSUFBSSxDQUFhO1FBQVUsWUFBTyxHQUFQLE9BQU8sQ0FBUztRQUMzQyxrQkFBYSxHQUFiLGFBQWEsQ0FBMEI7UUFYM0Msc0JBQWlCLEdBQUcsQ0FBQyxDQUFDO1FBQ3RCLHNCQUFpQixHQUFHLENBQUMsQ0FBQztRQUd0QixvQkFBZSxHQUFHLENBQUMsQ0FBQztRQVExQixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLFVBQVUsR0FBRyxnQkFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsQyxDQUFDO0lBRUQscUNBQWUsR0FBZjtRQUNFLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxDQUFDLENBQUM7UUFDN0IsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQztJQUNoQyxDQUFDO0lBT0QsMkJBQUssR0FBTCxVQUNJLFVBQWtCLEVBQUUsZ0JBQTZCLEVBQUUsU0FBaUIsRUFDcEUsU0FBb0IsRUFBRSxVQUFtQixFQUFFLFlBQXFCLEVBQ2hFLGlCQUErQixFQUFFLGVBQXdCLEVBQ3pELGVBQXNDLEVBQ3RDLGNBQXlDLEVBQ3pDLGNBQXlDO1FBRnpDLGdDQUFBLEVBQUEsa0JBQWtCLGVBQWUsQ0FBQyxJQUFJO1FBQ3RDLCtCQUFBLEVBQUEseUNBQXlDO1FBQ3pDLCtCQUFBLEVBQUEseUNBQXlDO1FBQzNDLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxnQkFBZ0IsQ0FBQztRQUN6QyxJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztRQUNqQyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsaUJBQWlCLENBQUM7UUFDM0MsRUFBRSxDQUFDLENBQUMsZUFBZSxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsZUFBZSxLQUFLLGVBQWUsQ0FBQyxDQUFDLENBQUM7WUFDeEUsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLHFCQUFxQixJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUN2QyxDQUFDO1lBQ0QsSUFBSSxDQUFDLHFCQUFxQixHQUFHLGdCQUFNLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQzNELENBQUM7UUFDRCxJQUFJLENBQUMsZUFBZSxHQUFHLGVBQWUsQ0FBQztRQUN2QyxJQUFJLENBQUMsZUFBZSxHQUFHLGVBQWUsQ0FBQztRQUN2QyxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztRQUMzQixJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztRQUUzQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsY0FBYyxDQUFDO1FBQ3ZDLElBQUksQ0FBQyxjQUFjLEdBQUcsY0FBYyxDQUFDO1FBQ3JDLElBQUksQ0FBQywwQkFBMEIsR0FBRyxVQUFVLENBQUM7UUFFN0MsSUFBSSxDQUFDLHFCQUFxQixHQUFHLENBQUMsQ0FBQztRQUMvQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztRQUN2QixJQUFJLENBQUMsbUJBQW1CLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzdDLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN0QixDQUFDO0lBRUQsa0NBQVksR0FBWjtRQUNFLElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO1FBQ3hCLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDN0MsQ0FBQztJQUVELG9DQUFjLEdBQWQ7UUFDRSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztRQUN2QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNuQyxJQUFJLENBQUMsZUFBZSxJQUFJLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUM7UUFDckUsQ0FBQztRQUNELElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN0QixDQUFDO0lBRU8sa0NBQVksR0FBcEI7UUFBQSxpQkFnRUM7UUEvREMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLHFCQUFxQixLQUFLLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxDQUFDLENBQUM7WUFDbkUsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3RCLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQ3JCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsb0JBQW9CLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDcEQsSUFBSSxDQUFDLGFBQWEsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO1lBQzVDLENBQUM7WUFDRCxNQUFNLENBQUM7UUFDVCxDQUFDO1FBRUQsSUFBTSxLQUFLLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ2hDLElBQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxlQUFlLElBQUksSUFBSTtZQUNoRSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQzNELEVBQUUsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQztZQUN0QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDO1FBQ2pDLENBQUM7UUFFRCxJQUFNLGFBQWEsR0FDZixpQkFBaUIsR0FBRyx1QkFBYSxDQUFDLElBQUksR0FBRyx1QkFBYSxDQUFDLElBQUksQ0FBQztRQUVoRSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFDLElBQUk7WUFDbkIsSUFBTSxPQUFPLEdBQUcsS0FBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQzlCLEtBQUksQ0FBQyxVQUFVLEVBQUUsS0FBSSxDQUFDLGdCQUFnQixFQUFFLEtBQUksQ0FBQyxTQUFTLEVBQ3RELEtBQUksQ0FBQyxTQUFTLEVBQUUsYUFBYSxDQUFDLENBQUM7WUFFbkMsRUFBRSxDQUFDLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO2dCQUN0QixJQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLEdBQUcsS0FBSyxDQUFDO2dCQUU1QyxLQUFJLENBQUMsYUFBYSxDQUFDLGVBQWdCLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBRTdDLEVBQUUsQ0FBQyxDQUFDLEtBQUksQ0FBQyxhQUFhLENBQUMsMkJBQTJCLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztvQkFDM0QsSUFBTSxjQUFjLEdBQUcsQ0FBQyxLQUFJLENBQUMsU0FBUyxHQUFHLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQztvQkFDM0QsS0FBSSxDQUFDLGFBQWEsQ0FBQywyQkFBMkIsQ0FBQyxjQUFjLENBQUMsQ0FBQztnQkFDakUsQ0FBQztZQUNILENBQUM7WUFFRCxFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsSUFBSSxJQUFJO2dCQUN6QyxLQUFJLENBQUMsaUJBQWlCLElBQUksSUFBSTtnQkFDOUIsS0FBSyxHQUFHLEtBQUksQ0FBQyxpQkFBaUIsR0FBRyxLQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO2dCQUMzRCxLQUFJLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDO2dCQUUvQixFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsa0JBQWtCLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztvQkFDcEMsS0FBSSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUNwQyxDQUFDO2dCQUNELEtBQUksQ0FBQyxrQkFBa0IsR0FBRyxLQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7Z0JBQy9DLEtBQUksQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLEtBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBQzdELENBQUM7WUFFRCxFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsYUFBYSxDQUFDLGlCQUFpQixJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ2pELEtBQUksQ0FBQyxhQUFhLENBQUMsaUJBQWlCLENBQ2hDLENBQUMsS0FBSyxHQUFHLEtBQUksQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO1lBQ2pELENBQUM7WUFFRCxLQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztZQUM3QixLQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztZQUUzQixFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsYUFBYSxDQUFDLHNCQUFzQixJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ3RELEtBQUksQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQUMsS0FBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7WUFDdEUsQ0FBQztRQUVILENBQUMsQ0FBQyxDQUFDO1FBQ0gsVUFBVSxDQUFDLGNBQU0sT0FBQSxLQUFJLENBQUMsWUFBWSxFQUFFLEVBQW5CLENBQW1CLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBRUQsMkJBQUssR0FBTCxVQUNJLGVBQXVCLEVBQUUsb0JBQWlDLEVBQzFELDBCQUFrRSxFQUNsRSxxQkFBeUIsRUFBRSxTQUFrQjtRQUhqRCxpQkFnQ0M7UUE5QkcsMkNBQUEsRUFBQSxrRUFBa0U7UUFDbEUsc0NBQUEsRUFBQSx5QkFBeUI7UUFDM0IsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyx5QkFBeUIsSUFBSSxJQUFJO1lBQ3BELElBQUksQ0FBQyxhQUFhLENBQUMsK0JBQStCLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUMvRCxNQUFNLElBQUksS0FBSyxDQUNYLHVEQUF1RDtnQkFDdkQsaUNBQWlDLENBQUMsQ0FBQztRQUN6QyxDQUFDO1FBR0QsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxvQkFBb0IsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUNyRCxJQUFNLFNBQVMsR0FBRyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUUxQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxZQUFZLGlCQUFPLENBQUMsQ0FBQyxDQUFDO2dCQUN0QyxNQUFNLElBQUksS0FBSyxDQUNYLGtFQUFrRTtvQkFDbEUsMENBQTBDLENBQUMsQ0FBQztZQUNsRCxDQUFDO1FBQ0gsQ0FBQztRQUVELElBQUksQ0FBQywwQkFBMEIsR0FBRywwQkFBMEIsQ0FBQztRQUM3RCxJQUFJLENBQUMsZUFBZSxHQUFHLGVBQWUsQ0FBQztRQUN2QyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsb0JBQW9CLENBQUM7UUFDakQsSUFBSSxDQUFDLHFCQUFxQixHQUFHLHFCQUFxQixDQUFDO1FBQ25ELElBQUksQ0FBQyw2QkFBNkIsR0FBRyxTQUFTLENBQUM7UUFDL0MsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztZQUN0QixJQUFJLENBQUMsc0JBQXNCLEdBQUcsQ0FBQyxDQUFDO1lBQ2hDLFVBQVUsQ0FBQyxjQUFNLE9BQUEsS0FBSSxDQUFDLFlBQVksRUFBRSxFQUFuQixDQUFtQixDQUFDLENBQUM7UUFDeEMsQ0FBQztRQUNELElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO0lBQzFCLENBQUM7SUFFTyxrQ0FBWSxHQUFwQjtRQUFBLGlCQWdEQztRQS9DQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXO1lBQ2pCLElBQUksQ0FBQyxzQkFBc0IsS0FBSyxJQUFJLENBQUMsNkJBQTZCLENBQUMsQ0FBQyxDQUFDO1lBQ3ZFLE1BQU0sQ0FBQztRQUNULENBQUM7UUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFDLElBQUksRUFBRSxLQUFLO1lBQzFCLElBQU0sS0FBSyxHQUFrQixFQUFFLENBQUM7WUFDaEMsSUFBTSxlQUFlLEdBQWMsRUFBRSxDQUFDO1lBRXRDLElBQU0sS0FBSyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUNoQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUVwRCxJQUFNLGtCQUFrQixHQUFnQixFQUFFLENBQUM7Z0JBQzNDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSSxDQUFDLG9CQUFxQixDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO29CQUMzRCxJQUFNLFNBQVMsR0FBRyxLQUFJLENBQUMsb0JBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ2hELGtCQUFrQixDQUFDLElBQUksQ0FBQzt3QkFDdEIsTUFBTSxFQUFFLFNBQVMsQ0FBQyxNQUFNO3dCQUN4QixJQUFJLEVBQ0EsS0FBSyxDQUFFLFNBQVMsQ0FBQyxJQUFzQixDQUFDLFdBQVcsQ0FBQyxLQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7cUJBQ3BFLENBQUMsQ0FBQztnQkFDTCxDQUFDO2dCQUNELEtBQUssQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQztnQkFFL0IsZUFBZSxDQUFDLElBQUksQ0FDaEIsS0FBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSSxDQUFDLGVBQWUsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDLENBQUM7WUFDbkUsQ0FBQztZQUVELEVBQUUsQ0FBQyxDQUFDLEtBQUksQ0FBQyxhQUFhLENBQUMsK0JBQStCLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFJL0QsZUFBZSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7Z0JBRXhELElBQU0sMkJBQTJCLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLEtBQUssQ0FBQztnQkFFOUQsSUFBTSxjQUFjLEdBQ2hCLENBQUMsS0FBSSxDQUFDLHFCQUFxQixHQUFHLElBQUksR0FBRywyQkFBMkIsQ0FBQyxDQUFDO2dCQUN0RSxLQUFJLENBQUMsYUFBYSxDQUFDLCtCQUFnQyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ3RFLENBQUM7WUFFRCxFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsYUFBYSxDQUFDLHlCQUF5QixJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ3pELEtBQUksQ0FBQyxhQUFhLENBQUMseUJBQXlCLENBQUMsS0FBSyxFQUFFLGVBQWUsQ0FBQyxDQUFDO1lBQ3ZFLENBQUM7WUFDRCxLQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztRQUVoQyxDQUFDLENBQUMsQ0FBQztRQUNILFVBQVUsQ0FBQyxjQUFNLE9BQUEsS0FBSSxDQUFDLFlBQVksRUFBRSxFQUFuQixDQUFtQixFQUFFLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0lBQ3pFLENBQUM7SUFFRCxtQ0FBYSxHQUFiO1FBQ0UsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7SUFDM0IsQ0FBQztJQUVELHdDQUFrQixHQUFsQjtRQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzFCLENBQUM7SUFFRCxtQ0FBYSxHQUFiO1FBQUEsaUJBcUJDO1FBcEJDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ25DLE1BQU0sSUFBSSxLQUFLLENBQUMsd0RBQXdELENBQUMsQ0FBQztRQUM1RSxDQUFDO1FBRUQsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQztRQUU3QixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBQyxJQUFJO1lBQzFCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSSxDQUFDLGVBQWdCLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDL0MsSUFBTSxXQUFXLEdBQ2IsS0FBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSSxDQUFDLFlBQWEsRUFBRSxLQUFJLENBQUMsaUJBQWtCLENBQUMsQ0FBQztnQkFFbkUsTUFBTSxHQUFHLEtBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsQ0FBQztZQUM5QyxDQUFDO1lBRUQsRUFBRSxDQUFDLENBQUMsS0FBSSxDQUFDLGVBQWUsS0FBSyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDbEQsTUFBTSxHQUFHLEtBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxLQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQztZQUNoRSxDQUFDO1lBRUQsTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUNoQixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCw0Q0FBc0IsR0FBdEI7UUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDO0lBQ2xDLENBQUM7SUFFRCwyQ0FBcUIsR0FBckI7UUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDO0lBQ2pDLENBQUM7SUFFRCw2QkFBTyxHQUFQLFVBQVEsSUFBaUI7UUFDdkIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7SUFDbkIsQ0FBQztJQUVELGdDQUFVLEdBQVYsVUFBVyxPQUFnQjtRQUN6QixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztJQUN6QixDQUFDO0lBRUQsd0NBQWtCLEdBQWxCLFVBQW1CLGVBQXVCO1FBQ3hDLElBQUksQ0FBQyxlQUFlLEdBQUcsZUFBZSxDQUFDO0lBQ3pDLENBQUM7SUFFRCw4Q0FBd0IsR0FBeEIsVUFBeUIscUJBQTZCO1FBQ3BELElBQUksQ0FBQyxxQkFBcUIsR0FBRyxxQkFBcUIsQ0FBQztJQUNyRCxDQUFDO0lBQ0gsa0JBQUM7QUFBRCxDQWxUQSxBQWtUQyxJQUFBO0FBbFRZLGtDQUFXOzs7OztBQ25DeEIsaUNBQXlGO0FBQ3pGLGlEQUFtRDtBQUNuRCxtREFBK0M7QUFXL0MsbUNBQ0ksS0FBYSxFQUFFLGdCQUF3QjtJQUN6QyxJQUFNLGtCQUFrQixHQUF5QixFQUFFLENBQUM7SUFDcEQsSUFBTSxJQUFJLEdBQXlCLEVBQUUsQ0FBQztJQUN0QyxJQUFNLEdBQUcsR0FBVyxFQUFFLENBQUM7SUFDdkIsSUFBTSxLQUFLLEdBQVcsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3BDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxVQUFBLElBQUksSUFBSSxPQUFBLGtCQUFrQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLEVBQWxDLENBQWtDLENBQUMsQ0FBQzs7UUFLbkUsSUFBTSxHQUFHLEdBQUcsS0FBSyxDQUFDLEdBQUcsRUFBRyxDQUFDO1FBQ3pCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUN6QixFQUFFLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDdkMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDO3FCQUNsQixHQUFHLENBQUMsVUFBQSxTQUFTLElBQUksT0FBQSxHQUFHLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFyQixDQUFxQixDQUFDO3FCQUN2QyxPQUFPLENBQUMsVUFBQSxLQUFLLElBQUksT0FBQSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBdEIsQ0FBc0IsQ0FBQyxDQUFDO1lBQ2hELENBQUM7WUFDRCxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDckIsQ0FBQztJQUNILENBQUM7SUFYRCxPQUFPLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQzs7S0FXeEI7SUFDRCxNQUFNLENBQUMsR0FBRyxDQUFDO0FBQ2IsQ0FBQztBQXZCRCw4REF1QkM7QUFVRCxpQ0FBd0Msc0JBQThCO0lBS3BFLElBQU0sR0FBRyxHQUFXLEVBQUUsQ0FBQztJQUN2QixJQUFNLFdBQVcsR0FBMkIsRUFBRSxDQUFDO0lBQy9DLElBQU0sbUJBQW1CLEdBQTJCLEVBQUUsQ0FBQztJQUt2RCxJQUFNLFNBQVMsR0FBRyxJQUFJLDhCQUFhLENBQy9CLFVBQUMsQ0FBTyxFQUFFLENBQU8sSUFBSyxPQUFBLGNBQWMsQ0FBQyxjQUFjLENBQy9DLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFEbkMsQ0FDbUMsRUFDekQsVUFBQyxJQUFVLEVBQUUsUUFBZ0IsSUFBSyxPQUFBLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsUUFBUSxFQUEvQixDQUErQixDQUFDLENBQUM7SUFFdkUsc0JBQXNCLENBQUMsT0FBTyxDQUFDLFVBQUEsSUFBSSxJQUFJLE9BQUEsbUJBQW1CLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBaEMsQ0FBZ0MsQ0FBQyxDQUFDO0lBS3pFLHNCQUFzQixDQUFDLE9BQU8sQ0FDMUIsVUFBQSxJQUFJLElBQUksT0FBQSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7U0FDbkIsR0FBRyxDQUFDLFVBQUEsR0FBRyxJQUFJLE9BQUEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBaEIsQ0FBZ0IsQ0FBQztTQUM1QixPQUFPLENBQUMsVUFBQSxLQUFLO1FBQ1osRUFBRSxDQUFDLENBQUMsc0JBQXNCLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEQsbUJBQW1CLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO1FBQ3ZDLENBQUM7SUFDSCxDQUFDLENBQUMsRUFOTixDQU1NLENBQUMsQ0FBQztJQUVwQixzQkFBc0IsQ0FBQyxPQUFPLENBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxTQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUF2QixDQUF1QixDQUFDLENBQUM7SUFFaEUsT0FBTyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDO1FBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFJakMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQUEsR0FBRyxJQUFJLE9BQUEsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBbEIsQ0FBa0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFBLEtBQUs7WUFDckUsRUFBRSxDQUFDLENBQUMsc0JBQXNCLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3RELE1BQU0sQ0FBQztZQUNULENBQUM7WUFDRCxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDckMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDM0QsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsTUFBTSxDQUFDLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFoREQsMERBZ0RDO0FBS0QscUJBQTRCLElBQVU7SUFDcEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUM7QUFDL0MsQ0FBQztBQUZELGtDQUVDO0FBRUQsd0JBQStCLENBQVM7SUFDdEMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxZQUFZLG9CQUFZLENBQUMsQ0FBQztBQUMzQyxDQUFDO0FBRkQsd0NBRUM7QUFFRCwyQkFBa0MsSUFBVSxFQUFFLEdBQW1CO0lBQy9ELElBQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3RDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBQ3JDLElBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN4RCxNQUFNLENBQUMsSUFBSSxDQUFDO1FBQ2QsQ0FBQztJQUNILENBQUM7SUFDRCxNQUFNLENBQUMsS0FBSyxDQUFDO0FBQ2YsQ0FBQztBQVRELDhDQVNDOzs7OztBQ3BIRCw0Q0FBOEM7QUFxQnRDLDhCQUFTO0FBcEJqQixvREFBc0Q7QUFvQm5DLGdDQUFVO0FBbkI3Qiw4RUFBZ0Y7QUFtQmpELDBEQUF1QjtBQWxCdEQsb0RBQXNEO0FBa0JRLGdDQUFVO0FBakJ4RSw2QkFBK0I7QUFpQnlCLG9CQUFJO0FBZjVELHlEQUFxRDtBQUE3QywrQ0FBQSxnQkFBZ0IsQ0FBQTtBQUN4QixxQ0FBcUQ7QUFBbEMsb0NBQUEsZUFBZSxDQUFBO0FBQ2xDLGlDQUFzQztBQUE5Qix3QkFBQSxLQUFLLENBQUE7QUFBRSx5QkFBQSxNQUFNLENBQUE7QUFDckIsK0NBQXNGO0FBQTlFLHFDQUFBLFdBQVcsQ0FBQTtBQUE0Qix5Q0FBQSxlQUFlLENBQUE7QUFDOUQsK0NBQXdPO0FBQWhPLDZDQUFBLG1CQUFtQixDQUFBO0FBQWUsNENBQUEsa0JBQWtCLENBQUE7QUFBRSx5Q0FBQSxlQUFlLENBQUE7QUFBRSxpREFBQSx1QkFBdUIsQ0FBQTtBQUFFLDBEQUFBLGdDQUFnQyxDQUFBO0FBQUUsa0RBQUEsd0JBQXdCLENBQUE7QUFBRSxvREFBQSwwQkFBMEIsQ0FBQTtBQUFFLDBDQUFBLGdCQUFnQixDQUFBO0FBQ2hOLG1EQUFpSTtBQUF6SCxtRUFBQSx1Q0FBdUMsQ0FBQTtBQUFFLG1FQUFBLHVDQUF1QyxDQUFBO0FBQ3hGLG9DQUEyRDtBQUFuRCxtQ0FBQSxpQkFBaUIsQ0FBQTtBQUFFLDZCQUFBLFdBQVcsQ0FBQTtBQUN0Qyw0Q0FBK0M7QUFBdkMsb0NBQUEsY0FBYyxDQUFBO0FBQ3RCLDRDQUErQztBQUF2QyxvQ0FBQSxjQUFjLENBQUE7QUFDdEIsMENBQW1GO0FBQTNFLDRCQUFBLE9BQU8sQ0FBQTtBQUFFLDRCQUFBLE9BQU8sQ0FBQTtBQUFFLDRCQUFBLE9BQU8sQ0FBQTtBQUFFLDRCQUFBLE9BQU8sQ0FBQTtBQUFFLDRCQUFBLE9BQU8sQ0FBQTtBQUFFLDJCQUFBLE1BQU0sQ0FBQTtBQUMzRCw0REFBd0Q7QUFBaEQsdUNBQUEsWUFBWSxDQUFBO0FBQ3BCLHlDQUFzQztBQUE5QixnQ0FBQSxTQUFTLENBQUE7QUFDakIscUNBQTREO0FBQXBELGtDQUFBLGFBQWEsQ0FBQTtBQUFhLDRCQUFBLE9BQU8sQ0FBQTtBQUN6QyxpREFBNkM7QUFBckMsdUNBQUEsWUFBWSxDQUFBOzs7OztBQ25CcEIsMENBQXVDO0FBVXZDO0lBQ0Usb0NBQ1ksS0FBVyxFQUNYLElBQTZDLEVBQzdDLFlBQTJDO1FBRjNDLHNCQUFBLEVBQUEsV0FBVztRQUNYLHFCQUFBLEVBQUEsZUFBNkM7UUFDN0MsNkJBQUEsRUFBQSx1QkFBMkM7UUFGM0MsVUFBSyxHQUFMLEtBQUssQ0FBTTtRQUNYLFNBQUksR0FBSixJQUFJLENBQXlDO1FBQzdDLGlCQUFZLEdBQVosWUFBWSxDQUErQjtJQUFHLENBQUM7SUFFM0QsK0NBQVUsR0FBVixVQUFXLFlBQXNCLEVBQUUsVUFBa0IsRUFBRSxXQUFtQjtRQUV4RSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDVixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDM0IsQ0FBQyxHQUFHLFVBQVUsQ0FBQztRQUNqQixDQUFDO1FBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUNuQyxDQUFDLEdBQUcsV0FBVyxDQUFDO1FBQ2xCLENBQUM7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ25DLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDckMsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ04sTUFBTSxJQUFJLEtBQUssQ0FDWCxvREFBb0QsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDeEUsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNuQyxNQUFNLENBQUMsaUJBQU8sQ0FBQyxtQkFBbUIsQ0FDOUIsWUFBWSxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwRCxDQUFDO1FBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUMzQyxNQUFNLENBQUMsaUJBQU8sQ0FBQyxXQUFXLENBQ3RCLFlBQVksRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hELENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLE1BQU0sSUFBSSxLQUFLLENBQ1gsNERBQTREO2dCQUM1RCxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDekIsQ0FBQztJQUNILENBQUM7SUFDSCxpQ0FBQztBQUFELENBaENBLEFBZ0NDLElBQUE7QUFoQ1ksZ0VBQTBCO0FBa0N2QztJQUNFO0lBQWUsQ0FBQztJQUVoQixxQ0FBVSxHQUFWLFVBQVcsWUFBc0IsRUFBRSxVQUFrQixFQUFFLFdBQW1CO1FBRXhFLE1BQU0sQ0FBQyxpQkFBTyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBQ0gsdUJBQUM7QUFBRCxDQVBBLEFBT0MsSUFBQTtBQVBZLDRDQUFnQjtBQVM3QjtJQUNFO0lBQWUsQ0FBQztJQUVoQixvQ0FBVSxHQUFWLFVBQVcsWUFBc0IsRUFBRSxVQUFrQixFQUFFLFdBQW1CO1FBRXhFLElBQU0sTUFBTSxHQUFHLGlCQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQzNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDZixNQUFNLENBQUMsTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFDSCxzQkFBQztBQUFELENBVEEsQUFTQyxJQUFBO0FBVFksMENBQWU7QUFXNUI7SUFDRSw2QkFBb0IsS0FBUztRQUFULHNCQUFBLEVBQUEsU0FBUztRQUFULFVBQUssR0FBTCxLQUFLLENBQUk7SUFBRyxDQUFDO0lBRWpDLHdDQUFVLEdBQVYsVUFBVyxZQUFzQixFQUFFLFVBQWtCLEVBQUUsV0FBbUI7UUFFeEUsSUFBTSxNQUFNLEdBQUcsaUJBQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDM0MsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDeEIsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBQ0gsMEJBQUM7QUFBRCxDQVRBLEFBU0MsSUFBQTtBQVRZLGtEQUFtQjtBQVdoQztJQUNFLDRCQUFvQixPQUFnQjtRQUFoQixZQUFPLEdBQVAsT0FBTyxDQUFTO0lBQUcsQ0FBQztJQUV4Qyx1Q0FBVSxHQUFWLFVBQVcsWUFBc0IsRUFBRSxVQUFrQixFQUFFLFdBQW1CO1FBRXhFLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3RCLENBQUM7SUFDSCx5QkFBQztBQUFELENBUEEsQUFPQyxJQUFBO0FBUFksZ0RBQWtCO0FBUy9CO0lBQ0UsaUNBQW9CLElBQVEsRUFBVSxLQUFXO1FBQTdCLHFCQUFBLEVBQUEsUUFBUTtRQUFVLHNCQUFBLEVBQUEsV0FBVztRQUE3QixTQUFJLEdBQUosSUFBSSxDQUFJO1FBQVUsVUFBSyxHQUFMLEtBQUssQ0FBTTtJQUFHLENBQUM7SUFFckQsNENBQVUsR0FBVixVQUFXLFlBQXNCLEVBQUUsVUFBa0IsRUFBRSxXQUFtQjtRQUV4RSxNQUFNLENBQUMsaUJBQU8sQ0FBQyxVQUFVLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2pFLENBQUM7SUFDSCw4QkFBQztBQUFELENBUEEsQUFPQyxJQUFBO0FBUFksMERBQXVCO0FBU3BDO0lBQ0UsMENBQW9CLElBQVEsRUFBVSxLQUFXO1FBQTdCLHFCQUFBLEVBQUEsUUFBUTtRQUFVLHNCQUFBLEVBQUEsV0FBVztRQUE3QixTQUFJLEdBQUosSUFBSSxDQUFJO1FBQVUsVUFBSyxHQUFMLEtBQUssQ0FBTTtJQUFHLENBQUM7SUFFckQscURBQVUsR0FBVixVQUFXLFlBQXNCLEVBQUUsVUFBa0IsRUFBRSxXQUFtQjtRQUV4RSxNQUFNLENBQUMsaUJBQU8sQ0FBQyxtQkFBbUIsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDMUUsQ0FBQztJQUNILHVDQUFDO0FBQUQsQ0FQQSxBQU9DLElBQUE7QUFQWSw0RUFBZ0M7QUFTN0M7SUFDRSxrQ0FBb0IsTUFBYSxFQUFVLE1BQVk7UUFBbkMsdUJBQUEsRUFBQSxVQUFVLEdBQUc7UUFBVSx1QkFBQSxFQUFBLFlBQVk7UUFBbkMsV0FBTSxHQUFOLE1BQU0sQ0FBTztRQUFVLFdBQU0sR0FBTixNQUFNLENBQU07SUFBRyxDQUFDO0lBRTNELDZDQUFVLEdBQVYsVUFBVyxZQUFzQixFQUFFLFVBQWtCLEVBQUUsV0FBbUI7UUFFeEUsTUFBTSxDQUFDLGlCQUFPLENBQUMsV0FBVyxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBQ0gsK0JBQUM7QUFBRCxDQVBBLEFBT0MsSUFBQTtBQVBZLDREQUF3Qjs7Ozs7Ozs7Ozs7Ozs7O0FDckdyQywwQ0FBdUM7QUFDdkMsNkJBQStCO0FBZ0MvQjtJQWlCRSw4Q0FBc0IsTUFBbUI7UUFBbkIsV0FBTSxHQUFOLE1BQU0sQ0FBYTtRQVovQixRQUFHLEdBQUcsQ0FBQyxDQUFDO1FBR1IsaUJBQVksR0FBRyxDQUFDLENBQUM7UUFDakIsVUFBSyxHQUFHLENBQUMsQ0FBQztRQVNsQixJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDcEUsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO1FBRy9CLElBQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO1FBQzFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3hDLElBQUksQ0FBQyxNQUFNLENBQ1AsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEtBQUssV0FBVyxFQUNyQyx3REFBd0QsQ0FBQyxDQUFDO1FBQ2hFLENBQUM7UUFHRCxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUN4QyxJQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztZQUMzQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQy9DLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUM5RCxDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFFUyxxRUFBc0IsR0FBaEM7UUFDRSxJQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO1FBRTNCLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUNwQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3hDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUNYLElBQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDO1lBRXRCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUN0QyxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztnQkFDYixJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDZixDQUFDO1FBQ0gsQ0FBQztRQUNELE1BQU0sQ0FBQyxTQUFTLENBQUM7SUFDbkIsQ0FBQztJQUVTLDJEQUFZLEdBQXRCLFVBQXVCLE9BQWU7UUFDcEMsSUFBTSxtQkFBbUIsR0FBRyxJQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztRQUUxRCxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQztJQUN6RSxDQUFDO0lBRUQsdURBQVEsR0FBUjtRQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3BCLENBQUM7SUFLRCxnRUFBaUIsR0FBakI7UUFDRSxJQUFNLGNBQWMsR0FBb0IsRUFBRSxDQUFDO1FBRTNDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3hDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDaEQsQ0FBQztRQUNELE1BQU0sQ0FBQyxjQUFjLENBQUM7SUFDeEIsQ0FBQztJQUdILDJDQUFDO0FBQUQsQ0E3RUEsQUE2RUMsSUFBQTtBQTdFcUIsb0ZBQW9DO0FBbUYxRDtJQUNJLDJEQUFvQztJQUR4Qzs7SUFjQSxDQUFDO0lBWkMsa0VBQWdCLEdBQWhCLFVBQWlCLE9BQWU7UUFDOUIsSUFBTSxxQkFBcUIsR0FBRyxJQUFJLENBQUM7UUFFbkMsTUFBTSxDQUFDO1lBQ0wsV0FBVyxFQUFYLFVBQVksSUFBaUI7Z0JBQzNCLE1BQU0sQ0FBQyxpQkFBTyxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNuRSxDQUFDO1lBQ0QsV0FBVyxZQUFDLElBQWlCLEVBQUUsSUFBYTtnQkFDMUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ2pCLENBQUM7U0FDRixDQUFDO0lBQ0osQ0FBQztJQUNILDhDQUFDO0FBQUQsQ0FkQSxBQWNDLENBYkcsb0NBQW9DLEdBYXZDO0FBZFksMEZBQXVDO0FBc0JwRDtJQUNJLDJEQUFvQztJQUR4Qzs7SUFjQSxDQUFDO0lBWkMsa0VBQWdCLEdBQWhCLFVBQWlCLE9BQWU7UUFDOUIsSUFBTSxxQkFBcUIsR0FBRyxJQUFJLENBQUM7UUFFbkMsTUFBTSxDQUFDO1lBQ0wsV0FBVyxFQUFYLFVBQVksSUFBaUI7Z0JBQzNCLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLHFCQUFxQixDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ2pFLENBQUM7WUFDRCxXQUFXLFlBQUMsSUFBaUIsRUFBRSxJQUFhO2dCQUMxQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDakIsQ0FBQztTQUNGLENBQUM7SUFDSixDQUFDO0lBQ0gsOENBQUM7QUFBRCxDQWRBLEFBY0MsQ0FiRyxvQ0FBb0MsR0FhdkM7QUFkWSwwRkFBdUM7Ozs7O0FDMUlwRCxxQ0FBMEM7QUFRMUM7SUFBQTtJQWNBLENBQUM7SUFiQyx5QkFBTSxHQUFOLFVBQU8sSUFBaUIsRUFBRSxDQUFVO1FBQ2xDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQ2hCLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELHNCQUFHLEdBQUgsVUFBSSxJQUFpQixFQUFFLENBQVUsRUFBRSxDQUFVO1FBQzNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQ2hCLElBQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBRTNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsZ0JBQU0sQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDckQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBQ0gsZUFBQztBQUFELENBZEEsQUFjQyxJQUFBO0FBZFksNEJBQVE7QUFnQnJCO0lBQUE7SUFZQSxDQUFDO0lBWEMseUJBQU0sR0FBTixVQUFPLElBQWlCLEVBQUUsQ0FBVTtRQUNsQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUNoQixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxzQkFBRyxHQUFILFVBQUksSUFBaUIsRUFBRSxDQUFVLEVBQUUsQ0FBVTtRQUMzQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUNoQixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFDSCxlQUFDO0FBQUQsQ0FaQSxBQVlDLElBQUE7QUFaWSw0QkFBUTtBQWNyQjtJQUFBO0lBY0EsQ0FBQztJQWJDLDRCQUFNLEdBQU4sVUFBTyxJQUFpQixFQUFFLENBQVU7UUFDbEMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7WUFDaEIsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQseUJBQUcsR0FBSCxVQUFJLElBQWlCLEVBQUUsQ0FBVSxFQUFFLENBQVU7UUFDM0MsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7WUFFaEIsSUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDM0MsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQy9CLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUNILGtCQUFDO0FBQUQsQ0FkQSxBQWNDLElBQUE7QUFkWSxrQ0FBVztBQWdCeEI7SUFBQTtJQWFBLENBQUM7SUFaQywyQkFBTSxHQUFOLFVBQU8sSUFBaUIsRUFBRSxDQUFVO1FBQ2xDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQ2hCLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNuQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCx3QkFBRyxHQUFILFVBQUksSUFBaUIsRUFBRSxDQUFVLEVBQUUsQ0FBVTtRQUMzQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUVoQixNQUFNLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLGdCQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzlDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUNILGlCQUFDO0FBQUQsQ0FiQSxBQWFDLElBQUE7QUFiWSxnQ0FBVTs7Ozs7QUN2RHZCLDhCQUFnQztBQUVoQyxtQ0FDSSxPQUFpQixFQUFFLE9BQWlCLEVBQUUsSUFBWSxFQUNsRCxrQkFBdUI7SUFBdkIsbUNBQUEsRUFBQSx1QkFBdUI7SUFDekIsSUFBSSxDQUFDLE1BQU0sQ0FDUCxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsRUFDcEIsa0JBQWtCLEdBQUcsd0NBQXdDLENBQUMsQ0FBQztJQUNuRSxJQUFJLENBQUMsTUFBTSxDQUNQLE9BQU8sQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUNwQixrQkFBa0IsR0FBRyx3Q0FBd0MsQ0FBQyxDQUFDO0lBRW5FLElBQUksQ0FBQyxNQUFNLENBQ1AsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFLDRDQUE0QyxDQUFDLENBQUM7SUFFekUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUMzQixJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUMzQyxrQkFBa0I7YUFDZCxZQUFVLE9BQU8sMEJBQXFCLE9BQU8sYUFBVSxDQUFBO1lBQ3ZELHdCQUF3QixDQUFDLENBQUM7SUFDcEMsQ0FBQztBQUNILENBQUM7QUFwQkQsOERBb0JDO0FBRUQsb0NBQ0ksT0FBaUIsRUFBRSxPQUFpQixFQUNwQyxJQUFZO0lBQ2QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSx3Q0FBd0MsQ0FBQyxDQUFDO0lBQzVFLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsdUNBQXVDLENBQUMsQ0FBQztJQUUzRSxJQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDcEMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQyxNQUFNLENBQUMsV0FBdUMsQ0FBQztBQUNqRCxDQUFDO0FBVEQsZ0VBU0M7Ozs7O0FDakNELDhCQUFnQztBQUVoQyw4QkFDSSxxQkFBK0MsRUFBRSxTQUFpQixFQUNsRSxLQUFhLEVBQUUsTUFBYyxFQUFFLE9BQWdCO0lBQ2pELEVBQUUsQ0FBQyxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3BCLE9BQU8sR0FBRyxpQkFBaUIsQ0FBQyxxQkFBcUIsRUFBRSxTQUFTLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDeEUsQ0FBQztJQUNELElBQU0sU0FBUyxHQUFHLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNDLElBQU0sU0FBUyxHQUFHLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNDLElBQU0sVUFBVSxHQUFHLENBQUMsU0FBUyxHQUFHLFNBQVMsR0FBRyxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUN0RSxJQUFJLENBQUMsTUFBTSxDQUNQLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEVBQ3RCLDJCQUF5QixVQUFVLHNDQUFtQztRQUNsRSxtQ0FBbUMsQ0FBQyxDQUFDO0lBRTdDLElBQU0sVUFBVSxHQUFHLENBQUMsU0FBUyxHQUFHLFNBQVMsR0FBRyxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUN0RSxJQUFJLENBQUMsTUFBTSxDQUNQLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEVBQ3RCLDhCQUE0QixVQUFVLGtDQUErQjtRQUNqRSx1Q0FBdUMsQ0FBQyxDQUFDO0lBRWpELE1BQU0sQ0FBQyxDQUFDLFVBQVUsRUFBRSxVQUFVLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDekMsQ0FBQztBQXJCRCxvREFxQkM7QUFFRCwyQkFDSSxVQUFvQyxFQUFFLFNBQWlCLEVBQ3ZELE1BQWM7SUFDaEIsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzdFLENBQUM7QUFKRCw4Q0FJQztBQUVELCtCQUNJLGdCQUEwQztJQUM1QyxNQUFNLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzFFLENBQUM7QUFIRCxzREFHQztBQUVELCtCQUNJLFVBQWtCLEVBQUUsV0FBbUIsRUFDdkMsS0FBYTtJQUNmLE1BQU0sQ0FBQyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ2pELENBQUM7QUFKRCxzREFJQztBQUVELGdDQUNJLFVBQWtCLEVBQUUsV0FBbUIsRUFDdkMsU0FBaUI7SUFDbkIsTUFBTSxDQUFDLENBQUMsU0FBUyxHQUFHLFNBQVMsR0FBRyxVQUFVLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDM0QsQ0FBQztBQUpELHdEQUlDO0FBRUQsK0JBQXNDLFdBQW1CO0lBQ3ZELE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxXQUFXLENBQUMsQ0FBQztBQUMxQixDQUFDO0FBRkQsc0RBRUM7QUFFRCwwQkFDSSxFQUFvQixFQUFFLFVBQWtCO0lBQzFDLElBQU0sV0FBVyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLFVBQVUsR0FBRyxDQUFDLENBQUM7SUFDakQsSUFBTSxXQUFXLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsVUFBVSxHQUFHLENBQUMsQ0FBQztJQUNqRCxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDcEMsQ0FBQztBQUxELDRDQUtDOzs7OztBQ3pERCx3QkFDSSxVQUE0QixFQUFFLFFBQTBCO0lBQzFELElBQU0sT0FBTyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDOUMsSUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxQyxFQUFFLENBQUMsQ0FBQyxPQUFPLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQztRQUN4QixJQUFNLE1BQU0sR0FBRyxHQUFHLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO1FBQ2hFLElBQU0sTUFBTSxHQUFHLEdBQUcsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDNUQsTUFBTSxJQUFJLEtBQUssQ0FDWCxvREFBb0QsR0FBRyxNQUFNO1lBQzdELFNBQVMsR0FBRyxPQUFPLEdBQUcsZUFBZSxHQUFHLE1BQU0sR0FBRyxTQUFTLEdBQUcsT0FBTyxDQUFDLENBQUM7SUFDNUUsQ0FBQztBQUNILENBQUM7QUFYRCx3Q0FXQzs7Ozs7QUNWRCxxQ0FBMEM7QUFXMUM7SUFBQTtRQUNVLFlBQU8sR0FBRyxnQkFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQW9CcEMsQ0FBQztJQWxCQyw2QkFBSSxHQUFKLFVBQUssSUFBaUIsRUFBRSxFQUFXLEVBQUUsRUFBVztRQUM5QyxJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUM5QixJQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNwRCxJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQztRQUVoRSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDZixXQUFXLENBQUMsT0FBTyxFQUFFLENBQUM7UUFFdEIsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBRUQsNEJBQUcsR0FBSCxVQUFJLElBQWlCLEVBQUUsRUFBVyxFQUFFLEVBQVc7UUFDN0MsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUFFRCxnQ0FBTyxHQUFQO1FBQ0UsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN6QixDQUFDO0lBQ0gscUJBQUM7QUFBRCxDQXJCQSxBQXFCQyxJQUFBO0FBckJZLHdDQUFjOzs7OztBQ1ozQiw4QkFBZ0M7QUFDaEMsK0NBQWlEO0FBQ2pELDJDQUE2QztBQUU3QyxxQ0FBOEU7QUFJOUU7SUFXRSxxQkFBb0IsUUFBaUI7UUFBakIsYUFBUSxHQUFSLFFBQVEsQ0FBUztRQVY3QixrQkFBYSxHQUFnQixFQUFFLENBQUM7UUFHaEMsbUJBQWMsR0FBZ0IsRUFBRSxDQUFDO1FBQ2pDLDhCQUF5QixHQUFjLEVBQUUsQ0FBQztJQU1WLENBQUM7SUFVekMsMkJBQUssR0FBTCxVQUNJLE9BRXlEO1FBSDdELGlCQWFDO1FBVEMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBRWxCLElBQU0sTUFBTSxHQUFHLFVBQW9CLE9BQVUsSUFBUSxPQUFBLEtBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQWxCLENBQWtCLENBQUM7UUFDeEUsSUFBTSxPQUFPLEdBQUcsVUFBb0IsT0FBVSxJQUFRLE9BQUEsS0FBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBbkIsQ0FBbUIsQ0FBQztRQUMxRSxJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBRXhDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFdEIsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBTUQsZ0NBQVUsR0FBVjtRQUNFLElBQU0sUUFBUSxHQUFjLEVBQUUsQ0FBQztRQUMvQixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNsQyxJQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQztRQUU1QixJQUFNLGlCQUFpQixHQUFjLEVBQUUsQ0FBQztRQUN4QyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQzVDLElBQUksQ0FBQyx5QkFBeUIsR0FBRyxpQkFBaUIsQ0FBQztJQUNyRCxDQUFDO0lBTUQsOEJBQVEsR0FBUixVQUFTLE1BQW1CO1FBQTVCLGlCQW9DQztRQWxDQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDakQsSUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVwQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyx5QkFBeUIsQ0FBQztnQkFDakUsQ0FBQyxNQUFNLElBQUksSUFBSSxJQUFJLE1BQU0sWUFBWSxpQkFBTztvQkFDM0MsT0FBTyxDQUFDLE9BQU8sRUFBRSxLQUFNLE1BQWtCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzFELFFBQVEsQ0FBQztZQUNYLENBQUM7WUFDRCxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDcEIsQ0FBQztRQUdELElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDekIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sS0FBSyxDQUFDO1lBQzlDLElBQUs7WUFDTCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBR3RELEVBQUUsQ0FBQyxDQUFDLE1BQU0sWUFBWSxpQkFBTztZQUN6QixDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RFLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDckIsQ0FBQztRQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqQyxNQUFNLENBQUMsT0FBTyxDQUFDLFVBQUEsQ0FBQztnQkFDZCxFQUFFLENBQUMsQ0FBQyxDQUFDLFlBQVksaUJBQU87b0JBQ3BCLENBQUMsS0FBSSxDQUFDLG1CQUFtQixDQUFDLENBQUMsRUFBRSxLQUFJLENBQUMseUJBQXlCLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ2pFLEtBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2hCLENBQUM7WUFDSCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUM7UUFFRCxJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzFCLElBQUksQ0FBQyx5QkFBeUIsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sS0FBSyxDQUFDO1lBQzdELElBQUs7WUFDTCxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFFTyx5Q0FBbUIsR0FBM0IsVUFBNEIsT0FBZ0IsRUFBRSxXQUFzQjtRQUNsRSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUM1QyxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLEtBQUssT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDbkQsTUFBTSxDQUFDLElBQUksQ0FBQztZQUNkLENBQUM7UUFDSCxDQUFDO1FBQ0QsTUFBTSxDQUFDLEtBQUssQ0FBQztJQUNmLENBQUM7SUFNRCwwQkFBSSxHQUFKLFVBQXdCLE1BQVM7UUFDL0IsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzdCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO2dCQUNsQixNQUFNLElBQUksS0FBSyxDQUNYLCtDQUErQztvQkFDL0Msc0NBQXNDO29CQUN0Qyx3REFBd0Q7b0JBQ3hELFFBQVEsQ0FBQyxDQUFDO1lBQ2hCLENBQUM7WUFDRCxNQUFNLENBQUMsTUFBTSxDQUFDO1FBQ2hCLENBQUM7UUFDRCxJQUFJLENBQUMseUJBQXlCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzVDLE1BQU0sQ0FBQyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQU9ELDJCQUFLLEdBQUwsVUFBeUIsTUFBUztRQUNoQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDN0IsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7Z0JBQ2xCLE1BQU0sSUFBSSxLQUFLLENBQ1gsK0NBQStDO29CQUMvQyxzQ0FBc0M7b0JBQ3RDLHdEQUF3RDtvQkFDeEQsUUFBUSxDQUFDLENBQUM7WUFDaEIsQ0FBQztZQUNELE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDaEIsQ0FBQztRQUNELElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzlCLE1BQU0sQ0FBQyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQWFELDRCQUFNLEdBQU4sVUFDSSxDQUFVLEVBQUUsQ0FBVSxFQUFFLFlBQXdDLEVBQ2hFLFlBQXdDO1FBRGhCLDZCQUFBLEVBQUEsZUFBZSxpQkFBaUIsQ0FBQyxPQUFPO1FBQ2hFLDZCQUFBLEVBQUEsZUFBZSxpQkFBaUIsQ0FBQyxPQUFPO1FBQzFDLElBQU0sV0FBVyxHQUNiLENBQUMsWUFBWSxLQUFLLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzRSxJQUFNLFdBQVcsR0FDYixDQUFDLFlBQVksS0FBSyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFM0UsSUFBSSxDQUFDLE1BQU0sQ0FDUCxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsRUFDNUIsdURBQXFELENBQUMsQ0FBQyxJQUFNO2FBQ3pELFNBQU8sQ0FBQyxDQUFDLElBQUksTUFBRyxDQUFBLENBQUMsQ0FBQztRQUUxQixJQUFJLENBQUMsTUFBTSxDQUNQLFdBQVcsS0FBSyxXQUFXLEVBQzNCLG9DQUFrQyxXQUFXLFlBQVM7YUFDL0MsV0FBVyxrQ0FBNkIsQ0FBQyxDQUFDLEtBQUssVUFBTyxDQUFBO2FBQ3RELENBQUMsQ0FBQyxLQUFLLDBCQUFxQixpQkFBaUIsQ0FBQyxZQUFZLENBQUcsQ0FBQTthQUNoRSxVQUFRLGlCQUFpQixDQUFDLFlBQVksQ0FBQyxpQkFBYyxDQUFBLENBQUMsQ0FBQztRQUUvRCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsWUFBWSxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUM7SUFDM0UsQ0FBQztJQVVELHVDQUFpQixHQUFqQixVQUFrQixDQUFVLEVBQUUsTUFBZTtRQUMzQyxJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUNaLGtFQUFrRTthQUM5RCxVQUFRLENBQUMsQ0FBQyxJQUFJLE1BQUcsQ0FBQSxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLE1BQU0sQ0FDUCxNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMsRUFDakIsbUVBQW1FO2FBQy9ELFVBQVEsTUFBTSxDQUFDLElBQUksTUFBRyxDQUFBLENBQUMsQ0FBQztRQUNoQyxJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxJQUFJLEtBQUssTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFDMUIsNkRBQTJELENBQUMsQ0FBQyxJQUFJLE9BQUk7WUFDakUsNkRBQTZEO2FBQzdELFVBQVEsTUFBTSxDQUFDLElBQUksTUFBRyxDQUFBLENBQUMsQ0FBQztRQUVoQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDdkQsQ0FBQztJQU9ELHVDQUFpQixHQUFqQixVQUFrQixNQUFlLEVBQUUsQ0FBVTtRQUMzQyxJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUNaLGdFQUFnRTthQUM1RCxVQUFRLENBQUMsQ0FBQyxJQUFJLE1BQUcsQ0FBQSxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLE1BQU0sQ0FDUCxNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMsRUFDakIsb0VBQW9FO2FBQ2hFLFVBQVEsTUFBTSxDQUFDLElBQUksTUFBRyxDQUFBLENBQUMsQ0FBQztRQUNoQyxJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxJQUFJLEtBQUssTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFDMUIsNERBQTBELENBQUMsQ0FBQyxJQUFJLE1BQUc7WUFDL0QsNkRBQTZEO2FBQzdELFdBQVMsTUFBTSxDQUFDLEtBQUssTUFBRyxDQUFBLENBQUMsQ0FBQztRQUVsQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDdkQsQ0FBQztJQU9ELGdDQUFVLEdBQVYsVUFBVyxFQUFXLEVBQUUsRUFBVztRQUNqQyxJQUFJLENBQUMsTUFBTSxDQUNQLEVBQUUsQ0FBQyxJQUFJLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUM5Qiw0REFBNEQ7YUFDckQsRUFBRSxDQUFDLElBQUksYUFBUSxFQUFFLENBQUMsSUFBSSxNQUFHLENBQUEsQ0FBQyxDQUFDO1FBQ3RDLElBQUksQ0FBQyxNQUFNLENBQ1AsRUFBRSxDQUFDLElBQUksS0FBSyxFQUFFLENBQUMsSUFBSSxFQUNuQiwwQ0FBd0MsRUFBRSxDQUFDLElBQUksWUFBUzthQUNqRCxFQUFFLENBQUMsSUFBSSxrQkFBZSxDQUFBLENBQUMsQ0FBQztRQUNuQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDMUUsQ0FBQztJQU9ELGtDQUFZLEdBQVosVUFBYSxFQUFXLEVBQUUsRUFBVztRQUNuQyxJQUFJLENBQUMsTUFBTSxDQUNQLEVBQUUsQ0FBQyxJQUFJLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUM5Qiw4REFBOEQ7YUFDdkQsRUFBRSxDQUFDLElBQUksYUFBUSxFQUFFLENBQUMsSUFBSSxNQUFHLENBQUEsQ0FBQyxDQUFDO1FBRXRDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUMvRCxDQUFDO0lBVUQsMkJBQUssR0FBTCxVQUF5QixPQUFVO1FBQ2pDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUNqRCxDQUFDO0lBVUQsNkJBQU8sR0FBUCxVQUNJLE9BQVcsRUFBRSxRQUFrQjtRQUNqQyxJQUFJLENBQUMsTUFBTSxDQUNQLE9BQU8sQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsRUFDN0MsZ0NBQThCLE9BQU8sQ0FBQyxJQUFJLDBCQUF1QjthQUMxRCxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxNQUFHLENBQUEsQ0FBQyxDQUFDO1FBQzVDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQVMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDckUsQ0FBQztJQVlELDZCQUFPLEdBQVAsVUFBUSxLQUFjLEVBQUUsS0FBdUIsRUFBRSxJQUFzQjtRQUVyRSxJQUFJLENBQUMsTUFBTSxDQUNQLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDaEMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUN4QyxnREFBOEMsS0FBSyxlQUFZO2FBQ3hELElBQUksdUNBQWtDLEtBQUssQ0FBQyxLQUFLLE1BQUcsQ0FBQSxDQUFDLENBQUM7UUFDakUsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDOUQsQ0FBQztJQWVELDRCQUFNLEdBQU4sVUFDSSxNQUFlLEVBQUUsV0FBNkIsRUFDOUMsVUFBNEIsRUFBRSxJQUFhLEVBQUUsU0FBMkIsRUFDeEUsUUFBMEI7UUFDNUIsSUFBSSxDQUFDLE1BQU0sQ0FDUCxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQzdDLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFDckQsc0RBQW9ELFdBQVcsTUFBRzthQUM5RCxxQkFBbUIsVUFBVSxtQ0FBZ0MsQ0FBQTthQUM3RCxjQUFZLE1BQU0sQ0FBQyxLQUFLLE1BQUcsQ0FBQSxDQUFDLENBQUM7UUFDckMsSUFBSSxDQUFDLE1BQU0sQ0FDUCxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ3ZDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFDL0Msb0RBQWtELFNBQVMsTUFBRzthQUMxRCxxQkFBbUIsUUFBUSxvQ0FBaUMsQ0FBQTthQUM1RCxXQUFTLElBQUksQ0FBQyxLQUFLLE1BQUcsQ0FBQSxDQUFDLENBQUM7UUFDaEMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFFakQsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQ3RCLE1BQU0sRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDbEUsQ0FBQztJQW9DRCw4QkFBUSxHQUFSLFVBQVMsUUFBaUIsRUFBRSxRQUFpQixFQUFFLElBQVk7UUFDekQsYUFBYSxDQUFDLHlCQUF5QixDQUNuQyxRQUFRLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLHFCQUFxQixDQUFDLENBQUM7UUFDakUsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBWUQsK0JBQVMsR0FBVCxVQUFVLE9BQWdCO1FBQ3hCLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ3JELENBQUM7SUFPRCx5QkFBRyxHQUFILFVBQUksT0FBZ0I7UUFDbEIsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFPRCw0QkFBTSxHQUFOLFVBQU8sT0FBZ0I7UUFDckIsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFPRCw0QkFBTSxHQUFOLFVBQU8sT0FBZ0I7UUFDckIsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFRRCxrQ0FBWSxHQUFaLFVBQWEsRUFBVyxFQUFFLEVBQVc7UUFDbkMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSx5QkFBeUIsQ0FBQyxDQUFDO1FBQ3RFLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBUUQsMEJBQUksR0FBSixVQUFLLE9BQWdCLEVBQUUsQ0FBUztRQUM5QixJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsSUFBSSxPQUFPLENBQUMsSUFBSSxFQUNqQiw2QkFBMkIsQ0FBQyx1Q0FBb0M7YUFDNUQsd0JBQXNCLE9BQU8sQ0FBQyxLQUFLLE1BQUcsQ0FBQSxDQUFDLENBQUM7UUFDaEQsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDN0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDMUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDM0IsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBUUQseUJBQUcsR0FBSCxVQUFJLE9BQWdCO1FBQ2xCLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBT0QseUJBQUcsR0FBSCxVQUFJLE9BQWdCO1FBQ2xCLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBT0QsNkJBQU8sR0FBUCxVQUFRLENBQVU7UUFBbEIsaUJBUUM7UUFQQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUdoQixJQUFNLEdBQUcsR0FBRyxLQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzlCLElBQU0sU0FBUyxHQUFHLEtBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDaEQsTUFBTSxDQUFDLEtBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDN0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBV0QsK0JBQVMsR0FBVCxVQUE2QixDQUFJLEVBQUUsTUFBZ0I7UUFDakQsSUFBSSxDQUFDLE1BQU0sQ0FDUCxDQUFDLENBQUMsSUFBSSxLQUFLLE1BQU0sQ0FBQyxNQUFNLEVBQ3hCLCtDQUE2QyxDQUFDLENBQUMsS0FBSyxNQUFHO2FBQ25ELHFDQUFtQyxNQUFNLE1BQUcsQ0FBQSxDQUFDLENBQUM7UUFDdEQsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQ3ZELENBQUM7SUFTRCxxQ0FBZSxHQUFmLFVBQW1DLENBQVMsRUFBRSxDQUFJO1FBQ2hELElBQUksQ0FBQyxNQUFNLENBQ1AsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLEVBQ1osbUVBQW1FO2FBQy9ELFVBQVEsQ0FBQyxDQUFDLElBQUksTUFBRyxDQUFBLENBQUMsQ0FBQztRQUMzQixNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDeEQsQ0FBQztJQVNELHNDQUFnQixHQUFoQixVQUFvQyxDQUFTLEVBQUUsQ0FBSTtRQUNqRCxJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUNaLG9FQUFvRTthQUNoRSxVQUFRLENBQUMsQ0FBQyxJQUFJLE1BQUcsQ0FBQSxDQUFDLENBQUM7UUFDM0IsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLHdCQUF3QixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3pELENBQUM7SUFTRCxzQ0FBZ0IsR0FBaEIsVUFBb0MsQ0FBSSxFQUFFLENBQVM7UUFDakQsSUFBSSxDQUFDLE1BQU0sQ0FDUCxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsRUFDWixpRUFBaUU7YUFDN0QsY0FBWSxDQUFDLENBQUMsSUFBSSxNQUFHLENBQUEsQ0FBQyxDQUFDO1FBQy9CLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBUUQseUJBQUcsR0FBSCxVQUF1QixDQUFJO1FBQ3pCLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBUUQseUJBQUcsR0FBSCxVQUF1QixDQUFJLEVBQUUsQ0FBSTtRQUMvQixJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLGdCQUFnQixDQUFDLENBQUM7UUFDM0QsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBUUQseUJBQUcsR0FBSCxVQUF1QixDQUFJLEVBQUUsQ0FBSTtRQUMvQixJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLGdCQUFnQixDQUFDLENBQUM7UUFDM0QsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBU0Qsb0NBQWMsR0FBZCxVQUFrQyxDQUFJLEVBQUUsQ0FBSTtRQUMxQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLDJCQUEyQixDQUFDLENBQUM7UUFDdEUsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3ZELENBQUM7SUFTRCw0QkFBTSxHQUFOLFVBQTBCLENBQUksRUFBRSxDQUFJO1FBQ2xDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztRQUM5RCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFTRCwwQ0FBb0IsR0FBcEIsVUFBd0MsQ0FBUyxFQUFFLENBQUk7UUFDckQsSUFBSSxDQUFDLE1BQU0sQ0FDUCxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsRUFDWixvRUFBb0U7YUFDaEUseUJBQXVCLENBQUMsQ0FBQyxJQUFJLE1BQUcsQ0FBQSxDQUFDLENBQUM7UUFDMUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLDRCQUE0QixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdELENBQUM7SUFVRCwwQ0FBb0IsR0FBcEIsVUFBd0MsQ0FBSSxFQUFFLENBQVM7UUFDckQsSUFBSSxDQUFDLE1BQU0sQ0FDUCxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsRUFDWixpRUFBaUU7YUFDN0QsNkJBQTJCLENBQUMsQ0FBQyxJQUFJLE1BQUcsQ0FBQSxDQUFDLENBQUM7UUFDOUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLDRCQUE0QixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdELENBQUM7SUFRRCx5QkFBRyxHQUFILFVBQXVCLE9BQVU7UUFDL0IsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFPRCx5QkFBRyxHQUFILFVBQXVCLE9BQVU7UUFDL0IsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFPRCwwQkFBSSxHQUFKLFVBQXdCLE9BQVU7UUFDaEMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFPRCw2QkFBTyxHQUFQLFVBQTJCLE9BQVU7UUFDbkMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ25ELENBQUM7SUFPRCwwQkFBSSxHQUFKLFVBQXdCLE9BQVU7UUFDaEMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFPRCx5QkFBRyxHQUFILFVBQXVCLE9BQVU7UUFDL0IsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFRRCwwQkFBSSxHQUFKLFVBQXdCLE9BQVU7UUFDaEMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFVRCxvQ0FBYyxHQUFkLFVBQWtDLEVBQVUsRUFBRSxDQUFJLEVBQUUsRUFBVSxFQUFFLENBQUk7UUFDbEUsSUFBSSxDQUFDLE1BQU0sQ0FDUCxFQUFFLENBQUMsSUFBSSxLQUFLLENBQUMsRUFDYiwrREFBK0Q7YUFDM0QsV0FBUyxFQUFFLENBQUMsSUFBSSxNQUFHLENBQUEsQ0FBQyxDQUFDO1FBQzdCLElBQUksQ0FBQyxNQUFNLENBQ1AsRUFBRSxDQUFDLElBQUksS0FBSyxDQUFDLEVBQ2Isa0VBQWtFO2FBQzlELHFCQUFtQixFQUFFLENBQUMsSUFBSSxNQUFHLENBQUEsQ0FBQyxDQUFDO1FBQ3ZDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsMkJBQTJCLENBQUMsQ0FBQztRQUV0RSxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMvRCxDQUFDO0lBVUQsc0NBQWdCLEdBQWhCLFVBQW9DLENBQVMsRUFBRSxDQUFJO1FBQ2pELElBQUksQ0FBQyxNQUFNLENBQ1AsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLEVBQ1osb0VBQW9FO2FBQ2hFLGNBQVksQ0FBQyxDQUFDLElBQUksTUFBRyxDQUFBLENBQUMsQ0FBQztRQUMvQixNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDekQsQ0FBQztJQVdELDZDQUF1QixHQUF2QixVQUF3QixDQUFVLEVBQUUsQ0FBVTtRQUM1QyxJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUNaLDJEQUEyRDthQUN2RCwwQkFBd0IsQ0FBQyxDQUFDLElBQUksTUFBRyxDQUFBLENBQUMsQ0FBQztRQUMzQyxJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUNaLDREQUE0RDthQUN4RCwwQkFBd0IsQ0FBQyxDQUFDLElBQUksTUFBRyxDQUFBLENBQUMsQ0FBQztRQUMzQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsK0JBQStCLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEUsQ0FBQztJQWtCRCw0QkFBTSxHQUFOLFVBQ0ksQ0FBVSxFQUFFLE9BQWdCLEVBQUUsTUFBb0IsRUFBRSxNQUFjLEVBQ2xFLE9BQWU7UUFDakIsSUFBSSxDQUFDLE1BQU0sQ0FDUCxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsRUFDWixxREFBbUQsQ0FBQyxDQUFDLElBQUksTUFBRyxDQUFDLENBQUM7UUFDbEUsSUFBSSxDQUFDLE1BQU0sQ0FDUCxPQUFPLENBQUMsSUFBSSxLQUFLLENBQUMsRUFDbEIsd0RBQXdEO2FBQ2pELE9BQU8sQ0FBQyxJQUFJLE1BQUcsQ0FBQSxDQUFDLENBQUM7UUFDNUIsRUFBRSxDQUFDLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDbkIsSUFBSSxDQUFDLE1BQU0sQ0FDUCxNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMsRUFDakIsdURBQXVEO2lCQUNoRCxNQUFNLENBQUMsSUFBSSxNQUFHLENBQUEsQ0FBQyxDQUFDO1FBQzdCLENBQUM7UUFFRCxJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFDL0Isc0NBQW9DLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLG1CQUFnQjthQUMxRCw2QkFBMkIsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsTUFBRyxDQUFBLENBQUMsQ0FBQztRQUd4RCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQzlFLENBQUM7SUFjRCxvQ0FBYyxHQUFkLFVBQ0ksQ0FBVSxFQUFFLEVBQVcsRUFBRSxPQUFnQixFQUFFLE1BQWMsRUFDekQsR0FBVztRQUNiLElBQUksQ0FBQyxNQUFNLENBQ1AsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLEVBQ1osMkRBQTJEO2FBQ3BELENBQUMsQ0FBQyxLQUFLLE1BQUcsQ0FBQSxDQUFDLENBQUM7UUFDdkIsSUFBSSxDQUFDLE1BQU0sQ0FDUCxFQUFFLENBQUMsSUFBSSxLQUFLLENBQUMsRUFDYiw0REFBNEQ7YUFDckQsRUFBRSxDQUFDLEtBQUssTUFBRyxDQUFBLENBQUMsQ0FBQztRQUN4QixJQUFJLENBQUMsTUFBTSxDQUNQLE9BQU8sQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUNsQixpRUFBaUU7YUFDMUQsT0FBTyxDQUFDLEtBQUssTUFBRyxDQUFBLENBQUMsQ0FBQztRQUM3QixJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFDL0IseUNBQXVDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFlBQVM7YUFDdEQsb0NBQWtDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQUcsQ0FBQSxDQUFDLENBQUM7UUFDL0QsSUFBSSxDQUFDLE1BQU0sQ0FDUCxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQ2hDLDJDQUF5QyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxZQUFTO2FBQ3pELHFDQUFtQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxPQUFJLENBQUEsQ0FBQyxDQUFDO1FBRWpFLElBQU0sY0FBYyxHQUNoQixJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBRTdELElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzlCLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzlCLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRTlCLE1BQU0sQ0FBQyxjQUFjLENBQUM7SUFDeEIsQ0FBQztJQWdCRCxxQ0FBZSxHQUFmLFVBQ0ksQ0FBVSxFQUFFLE9BQWdCLEVBQUUsTUFBb0IsRUFBRSxNQUFjLEVBQ2xFLEdBQVc7UUFDYixJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUNaLDJEQUEyRDthQUNwRCxDQUFDLENBQUMsSUFBSSxNQUFHLENBQUEsQ0FBQyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxNQUFNLENBQ1AsT0FBTyxDQUFDLElBQUksS0FBSyxDQUFDLEVBQ2xCLDREQUE0RDthQUN4RCxVQUFRLE9BQU8sQ0FBQyxJQUFNLENBQUEsQ0FBQyxDQUFDO1FBQ2hDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ25CLElBQUksQ0FBQyxNQUFNLENBQ1AsTUFBTSxDQUFDLElBQUksS0FBSyxDQUFDLEVBQ2pCLHVGQUNZLE1BQU0sQ0FBQyxJQUFJLE1BQUcsQ0FBQyxDQUFDO1FBQ2xDLENBQUM7UUFDRCxJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFDL0IsK0NBQTZDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFlBQVM7YUFDNUQsbUNBQWlDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQUcsQ0FBQSxDQUFDLENBQUM7UUFFOUQsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQ2IsSUFBSSxDQUFDLHVCQUF1QixDQUFDLENBQUMsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3JFLENBQUM7SUFhRCw2QkFBTyxHQUFQLFVBQVEsQ0FBVSxFQUFFLEtBQWEsRUFBRSxNQUFjLEVBQUUsR0FBVztRQUM1RCxJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUNaLGtEQUFrRCxHQUFHLENBQUMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDdkUsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ2pFLENBQUM7SUFhRCxxQ0FBZSxHQUFmLFVBQ0ksRUFBVyxFQUFFLENBQVUsRUFBRSxLQUFhLEVBQUUsTUFBYyxFQUN0RCxHQUFXO1FBQ2IsSUFBSSxDQUFDLE1BQU0sQ0FDUCxFQUFFLENBQUMsSUFBSSxLQUFLLENBQUMsRUFDYiwyREFBMkQ7YUFDcEQsRUFBRSxDQUFDLElBQUksTUFBRyxDQUFBLENBQUMsQ0FBQztRQUN2QixJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUNaLDBEQUEwRDthQUNuRCxDQUFDLENBQUMsSUFBSSxNQUFHLENBQUEsQ0FBQyxDQUFDO1FBRXRCLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUM3RSxDQUFDO0lBYUQsNkJBQU8sR0FBUCxVQUFRLENBQVUsRUFBRSxLQUFhLEVBQUUsTUFBYyxFQUFFLEdBQVc7UUFDNUQsSUFBSSxDQUFDLE1BQU0sQ0FDUCxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsRUFDWixxREFBbUQsQ0FBQyxDQUFDLElBQUksTUFBRyxDQUFDLENBQUM7UUFDbEUsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ2pFLENBQUM7SUFZRCw2QkFBTyxHQUFQLFVBQVEsQ0FBVSxFQUFFLEtBQWEsRUFBRSxNQUFjLEVBQUUsR0FBVztRQUM1RCxJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUNaLHFEQUFtRCxDQUFDLENBQUMsSUFBSSxNQUFHLENBQUMsQ0FBQztRQUNsRSxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDakUsQ0FBQztJQWNELHNDQUFnQixHQUFoQixVQUNJLENBQVUsRUFBRSxVQUE0QixFQUFFLFlBQW9CO1FBQXBCLDZCQUFBLEVBQUEsb0JBQW9CO1FBQ2hFLElBQUksQ0FBQyxNQUFNLENBQ1AsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLEVBQ1osOERBQTRELENBQUMsQ0FBQyxJQUFJLE1BQUcsQ0FBQyxDQUFDO1FBQzNFLElBQUksQ0FBQyxNQUFNLENBQ1AsVUFBVSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQ3ZCLDhEQUE4RDthQUN2RCxVQUFVLE1BQUcsQ0FBQSxDQUFDLENBQUM7UUFDMUIsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQ2IsSUFBSSxDQUFDLHdCQUF3QixDQUFDLENBQUMsRUFBRSxVQUFVLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQztJQUNsRSxDQUFDO0lBZ0JELDBDQUFvQixHQUFwQixVQUNJLENBQVUsRUFBRSxJQUFxQixFQUFFLFFBQXlCLEVBQzVELGVBQXNCLEVBQUUsS0FBdUIsRUFDL0MsTUFBd0I7UUFEeEIsZ0NBQUEsRUFBQSxzQkFBc0I7UUFFeEIsSUFBSSxDQUFDLE1BQU0sQ0FDUCxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsRUFDWiwrREFBK0Q7YUFDeEQsQ0FBQyxDQUFDLElBQUksTUFBRyxDQUFBLENBQUMsQ0FBQztRQUN0QixJQUFJLENBQUMsTUFBTSxDQUNQLElBQUksQ0FBQyxJQUFJLEtBQUssQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUNsQyxtRUFBbUU7YUFDL0QsY0FBWSxJQUFJLENBQUMsSUFBSSxNQUFHLENBQUEsQ0FBQyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxNQUFNLENBQ1AsUUFBUSxDQUFDLElBQUksS0FBSyxDQUFDLElBQUksUUFBUSxDQUFDLElBQUksS0FBSyxDQUFDLEVBQzFDLG1FQUFtRTthQUMvRCxrQkFBZ0IsUUFBUSxDQUFDLElBQUksTUFBRyxDQUFBLENBQUMsQ0FBQztRQUMxQyxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNsQixJQUFJLENBQUMsTUFBTSxDQUNQLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUNwQyxnRUFBZ0U7aUJBQzVELGtCQUFnQixLQUFNLENBQUMsSUFBSSxNQUFHLENBQUEsQ0FBQyxDQUFDO1FBQzFDLENBQUM7UUFDRCxFQUFFLENBQUMsQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNuQixJQUFJLENBQUMsTUFBTSxDQUNQLE1BQU0sQ0FBQyxJQUFJLEtBQUssQ0FBQyxJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUN0QyxpRUFBaUU7aUJBQzdELGtCQUFnQixNQUFPLENBQUMsSUFBSSxNQUFHLENBQUEsQ0FBQyxDQUFDO1FBQzNDLENBQUM7UUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsNEJBQTRCLENBQy9DLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLGVBQWUsRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBS0gsa0JBQUM7QUFBRCxDQTVnQ0EsQUE0Z0NDLElBQUE7QUE1Z0NxQixrQ0FBVztBQThnQ2pDLElBQVksaUJBR1g7QUFIRCxXQUFZLGlCQUFpQjtJQUMzQiwrREFBTyxDQUFBO0lBQ1AscUVBQVUsQ0FBQTtBQUNaLENBQUMsRUFIVyxpQkFBaUIsR0FBakIseUJBQWlCLEtBQWpCLHlCQUFpQixRQUc1Qjs7Ozs7Ozs7Ozs7Ozs7O0FDemhDRCw2Q0FBK0M7QUFDL0MsOEJBQWdDO0FBRWhDLCtDQUFpRDtBQUNqRCwyQ0FBNkM7QUFDN0MsK0JBQXNEO0FBQ3RELHFDQUE4RTtBQUU5RTtJQUFvQyxrQ0FBVztJQUM3Qyx3QkFBWSxRQUFnQjtRQUFoQix5QkFBQSxFQUFBLGdCQUFnQjtlQUMxQixrQkFBTSxRQUFRLENBQUM7SUFDakIsQ0FBQztJQUVTLHNDQUFhLEdBQXZCLFVBQTJDLE9BQVU7UUFDbkQsTUFBTSxDQUFDLGlCQUFPLENBQUMsSUFBSSxDQUNmLE9BQU8sQ0FBQyxLQUFLLEVBQUUsRUFBQyxNQUFNLEVBQUUsSUFBSSxZQUFZLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQ3RFLENBQUM7SUFFUyx3Q0FBZSxHQUF6QixVQUNJLE9BQVcsRUFBRSxRQUFrQjtRQUNqQyxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUssUUFBUSxDQUFDLENBQUM7SUFDM0QsQ0FBQztJQUVTLHdDQUFlLEdBQXpCLFVBQ0ksS0FBYyxFQUFFLFdBQTZCLEVBQzdDLFVBQTRCO1FBQzlCLElBQU0sTUFBTSxHQUFHLGlCQUFPLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxjQUFjLENBQ2YsS0FBSyxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ2hFLE1BQU0sQ0FBQyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVTLHVDQUFjLEdBQXhCLFVBQ0ksTUFBZSxFQUFFLGlCQUFtQyxFQUNwRCxnQkFBa0MsRUFBRSxJQUFhLEVBQ2pELGVBQWlDLEVBQ2pDLGNBQWdDO1FBQ2xDLFdBQVcsQ0FBQyxjQUFjLENBQUMsZ0JBQWdCLEVBQUUsY0FBYyxDQUFDLENBQUM7UUFDN0QsSUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ3JDLElBQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNuQyxJQUFNLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwRCxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQzNCLElBQU0sTUFBTSxHQUFHLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDMUUsSUFBTSxNQUFNLEdBQUcsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoRSxJQUFNLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUM7WUFDakQsSUFBTSxNQUFNLEdBQUcsZUFBZSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RFLElBQU0sTUFBTSxHQUFHLGVBQWUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1RCxJQUFNLE1BQU0sR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUM7WUFDL0MsU0FBUyxDQUFDLE1BQU0sQ0FBQyxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN4QyxDQUFDO0lBQ0gsQ0FBQztJQUVTLHlDQUFnQixHQUExQixVQUEyQixFQUFXLEVBQUUsRUFBVyxFQUFFLElBQVk7UUFDL0QsSUFBTSxXQUFXLEdBQ2IsYUFBYSxDQUFDLDBCQUEwQixDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztRQUV2RSxJQUFNLE1BQU0sR0FBRyxpQkFBTyxDQUFDLEtBQUssQ0FBVSxXQUFXLENBQUMsQ0FBQztRQUVuRCxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3hDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQ3hDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7b0JBRXhDLElBQU0sS0FBSyxHQUE2QixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7b0JBQ2xELElBQUksS0FBSyxTQUFRLENBQUM7b0JBQ2xCLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDakMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFDMUIsQ0FBQztvQkFBQyxJQUFJLENBQUMsQ0FBQzt3QkFDTixLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQzt3QkFDdkIsSUFBQSxhQUFFLEVBQUUsYUFBRSxFQUFFLGFBQUUsQ0FBVTt3QkFDM0IsS0FBSyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztvQkFDN0IsQ0FBQztvQkFFRCxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUM3QixDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7UUFFRCxNQUFNLENBQUMsTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFFUyxnREFBdUIsR0FBakMsVUFBcUQsQ0FBUyxFQUFFLENBQUk7UUFDbEUsSUFBTSxZQUFZLEdBQUcsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlDLElBQU0sT0FBTyxHQUFHLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUM5QixJQUFNLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDckIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxZQUFZLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDN0MsWUFBWSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEMsQ0FBQztRQUNELE1BQU0sQ0FBQyxpQkFBTyxDQUFDLElBQUksQ0FBSSxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUMsTUFBTSxFQUFFLFlBQVksRUFBQyxDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUVTLCtDQUFzQixHQUFoQyxVQUNJLEVBQVUsRUFBRSxDQUFJLEVBQUUsRUFBVSxFQUFFLENBQUk7UUFDcEMsSUFBTSxPQUFPLEdBQUcsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pDLElBQU0sT0FBTyxHQUFHLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUM5QixJQUFNLE9BQU8sR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDOUIsSUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ3ZCLElBQU0sS0FBSyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUN2QixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUN4QyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZELENBQUM7UUFDRCxNQUFNLENBQUMsaUJBQU8sQ0FBQyxJQUFJLENBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUMsQ0FBQyxDQUFDO0lBQ3JELENBQUM7SUFFUyxpREFBd0IsR0FBbEMsVUFBc0QsQ0FBUyxFQUFFLENBQUk7UUFDbkUsSUFBTSxTQUFTLEdBQUcsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzNDLElBQU0sT0FBTyxHQUFHLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUM5QixJQUFNLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDckIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDeEMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkMsQ0FBQztRQUNELE1BQU0sQ0FBQyxpQkFBTyxDQUFDLElBQUksQ0FBSSxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUMsTUFBTSxFQUFFLFNBQVMsRUFBQyxDQUFDLENBQUM7SUFDdkQsQ0FBQztJQUVTLGlEQUF3QixHQUFsQyxVQUFzRCxDQUFTLEVBQUUsQ0FBSTtRQUNuRSxJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFFckQsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRWYsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBRVMsaURBQXdCLEdBQWxDLFVBQXNELENBQUksRUFBRSxDQUFTO1FBQ25FLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakMsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLHVCQUF1QixDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztRQUVyRCxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFFZixNQUFNLENBQUMsTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFFUyxvQ0FBVyxHQUFyQixVQUF5QyxDQUFJO1FBQzNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsd0JBQXdCLENBQUMsZ0JBQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUVTLG9DQUFXLEdBQXJCLFVBQXlDLENBQUksRUFBRSxDQUFJO1FBQ2pELE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUksZ0JBQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLGdCQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3RFLENBQUM7SUFFUyxvQ0FBVyxHQUFyQixVQUF5QyxDQUFJLEVBQUUsQ0FBSTtRQUNqRCxNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFJLGdCQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxnQkFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMxRSxDQUFDO0lBRVMsdUNBQWMsR0FBeEIsVUFDSSxDQUFVLEVBQUUsQ0FBVSxFQUFFLFlBQXdDLEVBQ2hFLFlBQXdDO1FBRGhCLDZCQUFBLEVBQUEsZUFBZSx3QkFBaUIsQ0FBQyxPQUFPO1FBQ2hFLDZCQUFBLEVBQUEsZUFBZSx3QkFBaUIsQ0FBQyxPQUFPO1FBQzFDLElBQU0sU0FBUyxHQUNYLENBQUMsWUFBWSxLQUFLLHdCQUFpQixDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUUzRSxJQUFNLE9BQU8sR0FDVCxDQUFDLFlBQVksS0FBSyx3QkFBaUIsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0UsSUFBTSxRQUFRLEdBQ1YsQ0FBQyxZQUFZLEtBQUssd0JBQWlCLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTNFLElBQU0sWUFBWSxHQUFHLFVBQUMsTUFBZSxFQUFFLENBQVMsRUFBRSxDQUFTO1lBQ3ZELE9BQUEsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQWhCLENBQWdCLENBQUM7UUFDckIsSUFBTSxnQkFBZ0IsR0FBRyxVQUFDLE1BQWUsRUFBRSxDQUFTLEVBQUUsQ0FBUztZQUMzRCxPQUFBLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUFoQixDQUFnQixDQUFDO1FBRXJCLElBQU0sT0FBTyxHQUFHLENBQUMsWUFBWSxLQUFLLHdCQUFpQixDQUFDLE9BQU8sQ0FBQztZQUN4RCxZQUFZO1lBQ1osZ0JBQWdCLENBQUM7UUFDckIsSUFBTSxPQUFPLEdBQUcsQ0FBQyxZQUFZLEtBQUssd0JBQWlCLENBQUMsT0FBTyxDQUFDO1lBQ3hELFlBQVk7WUFDWixnQkFBZ0IsQ0FBQztRQUNyQixJQUFNLE1BQU0sR0FBRyxJQUFJLFlBQVksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLENBQUM7UUFDcEQsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBRWQsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUNqQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFFBQVEsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO2dCQUNsQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7Z0JBQ1osR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztvQkFFbkMsR0FBRyxJQUFJLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUM3QyxDQUFDO2dCQUNELE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQztZQUN4QixDQUFDO1FBQ0gsQ0FBQztRQUNELE1BQU0sQ0FBQyxpQkFBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBRVMsK0NBQXNCLEdBQWhDLFVBQW9ELENBQUksRUFBRSxDQUFJO1FBQzVELElBQU0sU0FBUyxHQUFHLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxJQUFNLE9BQU8sR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDOUIsSUFBTSxPQUFPLEdBQUcsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQzlCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ3hDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLENBQUM7UUFDRCxNQUFNLENBQUMsaUJBQU8sQ0FBQyxJQUFJLENBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUMsQ0FBQyxDQUFDO0lBQ3ZELENBQUM7SUFFUyx3REFBK0IsR0FBekMsVUFBMEMsQ0FBVSxFQUFFLENBQVU7UUFDOUQsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoRCxJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWhELElBQU0sTUFBTSxHQUFHLElBQUksWUFBWSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsQ0FBQztRQUNqRCxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDZCxHQUFHLENBQUMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLE1BQU0sRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO1lBQ3RDLEdBQUcsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsTUFBTSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7Z0JBQ3RDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3ZELENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoRCxDQUFDO1FBQ0gsQ0FBQztRQUNELE1BQU0sQ0FBQyxpQkFBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBRVMsdUNBQWMsR0FBeEIsVUFBNEMsQ0FBSSxFQUFFLENBQUk7UUFDcEQsSUFBTSxTQUFTLEdBQUcsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzNDLElBQU0sT0FBTyxHQUFHLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUM5QixJQUFNLE9BQU8sR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDOUIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDeEMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekMsQ0FBQztRQUNELE1BQU0sQ0FBQyxpQkFBTyxDQUFDLElBQUksQ0FBSSxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUMsTUFBTSxFQUFFLFNBQVMsRUFBQyxDQUFDLENBQUM7SUFDdkQsQ0FBQztJQUVTLHFEQUE0QixHQUF0QyxVQUEwRCxDQUFTLEVBQUUsQ0FBSTtRQUV2RSxJQUFNLFNBQVMsR0FBRyxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0MsSUFBTSxPQUFPLEdBQUcsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQzlCLElBQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUN2QixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUN4QyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyQyxDQUFDO1FBQ0QsTUFBTSxDQUFDLGlCQUFPLENBQUMsSUFBSSxDQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBQyxNQUFNLEVBQUUsU0FBUyxFQUFDLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBRVMscURBQTRCLEdBQXRDLFVBQTBELENBQUksRUFBRSxDQUFTO1FBRXZFLElBQU0sU0FBUyxHQUFHLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxJQUFNLE9BQU8sR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDOUIsSUFBTSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ3ZCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ3hDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDO1FBQ3JDLENBQUM7UUFDRCxNQUFNLENBQUMsaUJBQU8sQ0FBQyxJQUFJLENBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUMsQ0FBQyxDQUFDO0lBQ3ZELENBQUM7SUFFUyxvQ0FBVyxHQUFyQixVQUFzQixPQUFnQjtRQUNwQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDWixJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDbkMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDdkMsR0FBRyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuQixDQUFDO1FBQ0QsTUFBTSxDQUFDLGdCQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3pCLENBQUM7SUFFUyx1Q0FBYyxHQUF4QixVQUF5QixPQUFnQjtRQUN2QyxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDO1FBQzNCLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2xCLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNuQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUN2QyxJQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDeEIsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDakIsTUFBTSxDQUFDLGdCQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3pCLENBQUM7WUFDRCxFQUFFLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDaEIsR0FBRyxHQUFHLEtBQUssQ0FBQztnQkFDWixRQUFRLEdBQUcsQ0FBQyxDQUFDO1lBQ2YsQ0FBQztRQUNILENBQUM7UUFDRCxNQUFNLENBQUMsZ0JBQU0sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVTLHVDQUFjLEdBQXhCLFVBQXlCLE9BQWdCO1FBQ3ZDLElBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQztRQUNuQyxJQUFJLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNsQixJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDbkMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDdkMsSUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2pCLE1BQU0sQ0FBQyxnQkFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN6QixDQUFDO1lBQ0QsRUFBRSxDQUFDLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ2hCLEdBQUcsR0FBRyxLQUFLLENBQUM7Z0JBQ1osUUFBUSxHQUFHLENBQUMsQ0FBQztZQUNmLENBQUM7UUFDSCxDQUFDO1FBQ0QsTUFBTSxDQUFDLGdCQUFNLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFUyw2Q0FBb0IsR0FBOUIsVUFBK0IsRUFBVyxFQUFFLEVBQVc7UUFDckQsSUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUM5QyxJQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzlDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JDLE1BQU0sQ0FBQyxnQkFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6QixDQUFDO1FBQ0QsTUFBTSxDQUFDLGdCQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxPQUFPLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRVMscUNBQVksR0FBdEIsVUFBdUIsT0FBZ0IsRUFBRSxDQUFTO1FBRWhELElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNuQyxJQUFNLGdCQUFnQixHQUEwQyxFQUFFLENBQUM7UUFDbkUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDdkMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFDLENBQUMsQ0FBQztRQUN0RCxDQUFDO1FBQ0QsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFVBQUMsQ0FBQyxFQUFFLENBQUM7WUFDekIsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUMzQixDQUFDLENBQUMsQ0FBQztRQUNILElBQU0sVUFBVSxHQUFHLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLElBQU0sV0FBVyxHQUFHLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDM0IsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztZQUMxQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQzdDLENBQUM7UUFDRCxNQUFNLENBQUMsRUFBQyxNQUFNLEVBQUUsaUJBQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEVBQUUsT0FBTyxFQUFFLGlCQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxFQUFDLENBQUM7SUFDOUUsQ0FBQztJQUVTLG9DQUFXLEdBQXJCLFVBQXNCLE9BQWdCO1FBQ3BDLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNuQyxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDcEIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDdkMsSUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2pCLE1BQU0sQ0FBQyxnQkFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN6QixDQUFDO1lBQ0QsRUFBRSxDQUFDLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ2hCLEdBQUcsR0FBRyxLQUFLLENBQUM7WUFDZCxDQUFDO1FBQ0gsQ0FBQztRQUNELE1BQU0sQ0FBQyxnQkFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN6QixDQUFDO0lBRVMsb0NBQVcsR0FBckIsVUFBc0IsT0FBZ0I7UUFDcEMsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ25DLElBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwQixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUN2QyxJQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDeEIsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDakIsTUFBTSxDQUFDLGdCQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3pCLENBQUM7WUFDRCxFQUFFLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDaEIsR0FBRyxHQUFHLEtBQUssQ0FBQztZQUNkLENBQUM7UUFDSCxDQUFDO1FBQ0QsTUFBTSxDQUFDLGdCQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3pCLENBQUM7SUFFUyxvQ0FBVyxHQUFyQixVQUF5QyxPQUFVO1FBQ2pELElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNuQyxJQUFNLFNBQVMsR0FBRyxJQUFJLFlBQVksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDbEQsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDdkMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckMsQ0FBQztRQUNELE1BQU0sQ0FBQyxpQkFBTyxDQUFDLElBQUksQ0FBSSxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUMsTUFBTSxFQUFFLFNBQVMsRUFBQyxDQUFDLENBQUM7SUFDN0QsQ0FBQztJQUVTLG9DQUFXLEdBQXJCLFVBQXlDLE9BQVU7UUFDakQsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ25DLElBQU0sU0FBUyxHQUFHLElBQUksWUFBWSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNsRCxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUN2QyxJQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDeEIsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDakMsQ0FBQztRQUNELE1BQU0sQ0FBQyxpQkFBTyxDQUFDLElBQUksQ0FBSSxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUMsTUFBTSxFQUFFLFNBQVMsRUFBQyxDQUFDLENBQUM7SUFDN0QsQ0FBQztJQUVTLDBDQUFpQixHQUEzQixVQUE0QixPQUFnQjtRQUMxQyxJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQy9CLElBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDL0MsSUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QixJQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RCLElBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEIsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFakMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ2YsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ1osQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ1osQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ1osQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRVosTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBRVMscUNBQVksR0FBdEIsVUFBMEMsT0FBVTtRQUNsRCxJQUFNLFlBQVksR0FBRyxJQUFJLFlBQVksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDcEQsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ25DLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ3ZDLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzQyxDQUFDO1FBQ0QsTUFBTSxDQUFDLGlCQUFPLENBQUMsSUFBSSxDQUFJLE9BQU8sQ0FBQyxLQUFLLEVBQUUsRUFBQyxNQUFNLEVBQUUsWUFBWSxFQUFDLENBQUMsQ0FBQztJQUNoRSxDQUFDO0lBRVMsd0NBQWUsR0FBekIsVUFBNkMsT0FBVTtRQUNyRCxJQUFNLFlBQVksR0FBRyxJQUFJLFlBQVksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDcEQsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ25DLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ3ZDLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkQsQ0FBQztRQUNELE1BQU0sQ0FBQyxpQkFBTyxDQUFDLElBQUksQ0FBSSxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUMsTUFBTSxFQUFFLFlBQVksRUFBQyxDQUFDLENBQUM7SUFDaEUsQ0FBQztJQUVTLHFDQUFZLEdBQXRCLFVBQTBDLE9BQVU7UUFDbEQsSUFBTSxZQUFZLEdBQUcsSUFBSSxZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3BELElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNuQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUN2QyxZQUFZLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QyxDQUFDO1FBQ0QsTUFBTSxDQUFDLGlCQUFPLENBQUMsSUFBSSxDQUFJLE9BQU8sQ0FBQyxLQUFLLEVBQUUsRUFBQyxNQUFNLEVBQUUsWUFBWSxFQUFDLENBQUMsQ0FBQztJQUNoRSxDQUFDO0lBRVMsb0NBQVcsR0FBckIsVUFBeUMsT0FBVTtRQUNqRCxJQUFNLFlBQVksR0FBRyxJQUFJLFlBQVksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDcEQsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ25DLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ3ZDLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLENBQUM7UUFDRCxNQUFNLENBQUMsaUJBQU8sQ0FBQyxJQUFJLENBQUksT0FBTyxDQUFDLEtBQUssRUFBRSxFQUFDLE1BQU0sRUFBRSxZQUFZLEVBQUMsQ0FBQyxDQUFDO0lBQ2hFLENBQUM7SUFFUyxxQ0FBWSxHQUF0QixVQUEwQyxPQUFVO1FBQ2xELElBQU0sWUFBWSxHQUFHLElBQUksWUFBWSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNwRCxJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDbkMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDdkMsSUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDO1FBQzVELENBQUM7UUFDRCxNQUFNLENBQUMsaUJBQU8sQ0FBQyxJQUFJLENBQUksT0FBTyxDQUFDLEtBQUssRUFBRSxFQUFDLE1BQU0sRUFBRSxZQUFZLEVBQUMsQ0FBQyxDQUFDO0lBQ2hFLENBQUM7SUFNUyx1Q0FBYyxHQUF4QixVQUNJLENBQVUsRUFBRSxPQUFnQixFQUFFLE1BQW9CLEVBQUUsTUFBYyxFQUNsRSxHQUFXO1FBQ1AsSUFBQSxZQUFvQyxFQUFuQyxhQUFLLEVBQUUsYUFBSyxFQUFFLGtCQUFVLENBQVk7UUFDM0MsSUFBTSxTQUFTLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuQyxJQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLElBQU0sV0FBVyxHQUFHLFNBQVMsQ0FBQyxvQkFBb0IsQ0FDOUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLFVBQVUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3JFLElBQU0sQ0FBQyxHQUFHLGlCQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsV0FBVyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUM7WUFDeEMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUM7Z0JBQ3ZDLElBQU0sUUFBUSxHQUFHLEVBQUUsR0FBRyxNQUFNLEdBQUcsR0FBRyxDQUFDO2dCQUNuQyxJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztnQkFDcEMsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsU0FBUyxHQUFHLFFBQVEsQ0FBQyxDQUFDO2dCQUNwRCxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQztvQkFDdkMsSUFBTSxRQUFRLEdBQUcsRUFBRSxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUM7b0JBQ25DLElBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDO29CQUNwQyxJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxTQUFTLEdBQUcsUUFBUSxDQUFDLENBQUM7b0JBQ3BELElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQztvQkFDaEIsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQUcsS0FBSyxFQUFFLEVBQUUsR0FBRyxLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQzt3QkFDdEMsSUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLFFBQVEsQ0FBQzt3QkFDekIsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQUcsS0FBSyxFQUFFLEVBQUUsR0FBRyxLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQzs0QkFDdEMsSUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLFFBQVEsQ0FBQzs0QkFDekIsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxVQUFVLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQztnQ0FDdkMsSUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dDQUNoQyxJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dDQUMzQyxPQUFPLElBQUksS0FBSyxHQUFHLE1BQU0sQ0FBQzs0QkFDNUIsQ0FBQzt3QkFDSCxDQUFDO29CQUNILENBQUM7b0JBQ0QsSUFBTSxJQUFJLEdBQUcsQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQ25ELENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxHQUFHLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dCQUNwQyxDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7UUFDRCxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQ1gsQ0FBQztJQUVTLCtDQUFzQixHQUFoQyxVQUNJLENBQVUsRUFBRSxFQUFXLEVBQUUsT0FBZ0IsRUFBRSxNQUFjLEVBQ3pELEdBQVc7UUFDYixJQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9CLElBQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDNUQsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNsQyxJQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsdUJBQXVCLENBQUMsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3hFLE1BQU0sQ0FBQyxFQUFDLEVBQUUsSUFBQSxFQUFFLEVBQUUsSUFBQSxFQUFFLEVBQUUsSUFBQSxFQUFDLENBQUM7SUFDdEIsQ0FBQztJQU1TLGdEQUF1QixHQUFqQyxVQUNJLENBQVUsRUFBRSxPQUFnQixFQUFFLE1BQW9CLEVBQUUsVUFBa0IsRUFDdEUsT0FBZTtRQUNqQixJQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9CLElBQU0sR0FBRyxHQUFHLEtBQUssR0FBRyxDQUFDLEdBQUcsT0FBTyxDQUFDO1FBQ2hDLElBQU0sY0FBYyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEMsSUFBTSxlQUFlLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuQyxJQUFBLFlBQWdDLEVBQS9CLGFBQUssRUFBRSxhQUFLLEVBQUUsY0FBTSxDQUFZO1FBR3ZDLElBQU0sWUFBWSxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLFVBQVUsR0FBRyxDQUFDLENBQUM7UUFDbEQsSUFBTSxZQUFZLEdBQUcsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsVUFBVSxHQUFHLENBQUMsQ0FBQztRQUVsRCxJQUFNLFdBQVcsR0FBRyxTQUFTLENBQUMsb0JBQW9CLENBQzlDLENBQUMsWUFBWSxFQUFFLFlBQVksRUFBRSxlQUFlLENBQUMsRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFFLENBQUMsRUFDdkUsR0FBRyxDQUFDLENBQUM7UUFDVCxJQUFNLENBQUMsR0FBRyxpQkFBTyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNyQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLGNBQWMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDO1lBQzNDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDO2dCQUN2QyxJQUFNLFFBQVEsR0FBRyxFQUFFLEdBQUcsR0FBRyxDQUFDO2dCQUMxQixJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDO2dCQUM1RCxJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQztnQkFFL0QsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUM7b0JBQ3ZDLElBQU0sUUFBUSxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUM7b0JBQzFCLElBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUM7b0JBQzVELElBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDO29CQUUvRCxJQUFJLE9BQU8sR0FBRyxDQUFDLENBQUM7b0JBQ2hCLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxHQUFHLEtBQUssRUFBRSxFQUFFLEdBQUcsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUM7d0JBQ3RDLElBQU0sRUFBRSxHQUFHLEVBQUUsR0FBRyxVQUFVLEdBQUcsUUFBUSxDQUFDO3dCQUV0QyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxLQUFLLEVBQUUsRUFBRSxHQUFHLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDOzRCQUN0QyxJQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsVUFBVSxHQUFHLFFBQVEsQ0FBQzs0QkFFdEMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxlQUFlLEVB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Q04sSUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDNUIsTUFBTSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQy9CLENBQUM7QUFDSCxDQUFDO0FBZEQsb0JBY0M7QUFFRCw2QkFBb0MsSUFBWTtJQUM5QyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7UUFDckQsRUFBRSxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ25CLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsQ0FBQztJQUNILENBQUM7SUFDRCxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDbkIsQ0FBQztBQVBELGtEQU9DO0FBRUQsK0JBQXNDLENBQVM7SUFDN0MsSUFBTSxlQUFlLEdBQUcsSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM0MsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztRQUMzQixlQUFlLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3pCLENBQUM7SUFDRCxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDekIsTUFBTSxDQUFDLGVBQWUsQ0FBQztBQUN6QixDQUFDO0FBUEQsc0RBT0MiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuUG9seW1lcih7aXM6ICdkZW1vLWZvb3Rlcid9KTtcbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblBvbHltZXIoe2lzOiAnZGVtby1oZWFkZXInfSk7XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCAnLi4vbmRhcnJheS1pbWFnZS12aXN1YWxpemVyJztcbmltcG9ydCAnLi4vZGVtby1oZWFkZXInO1xuaW1wb3J0ICcuLi9kZW1vLWZvb3Rlcic7XG5cbmltcG9ydCB7QXJyYXkxRCwgQ2hlY2twb2ludExvYWRlciwgR3JhcGgsIE5EQXJyYXksIE5EQXJyYXlJbml0aWFsaXplciwgTkRBcnJheU1hdGgsIE5EQXJyYXlNYXRoR1BVLCBTY2FsYXIsIFNlc3Npb24sIFRlbnNvcn0gZnJvbSAnLi4vbGVhcm5qcyc7XG5pbXBvcnQge05EQXJyYXlJbWFnZVZpc3VhbGl6ZXJ9IGZyb20gJy4uL25kYXJyYXktaW1hZ2UtdmlzdWFsaXplcic7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tdW51c2VkLXZhcmlhYmxlXG5pbXBvcnQge1BvbHltZXJFbGVtZW50LCBQb2x5bWVySFRNTEVsZW1lbnR9IGZyb20gJy4uL3BvbHltZXItc3BlYyc7XG5cbmNvbnN0IEdPT0dMRV9DTE9VRF9TVE9SQUdFX0RJUiA9XG4gICAgJ2h0dHBzOi8vc3RvcmFnZS5nb29nbGVhcGlzLmNvbS9sZWFybmpzLWRhdGEvY2hlY2twb2ludF96b28vJztcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcbmV4cG9ydCBsZXQgRm9udEVtYmVkZGluZ1BvbHltZXIgPSBQb2x5bWVyRWxlbWVudCh7XG4gIGlzOiAnZm9udC1lbWJlZGRpbmcnLFxuICBwcm9wZXJ0aWVzOiB7XG4gICAgY2hhcjogU3RyaW5nLFxuICAgIGZvbnRJZDogU3RyaW5nLFxuICAgIGVtYmVkZGluZzogQXJyYXksXG4gICAgbnVtYmVyT2ZWYWxpZENoYXJzOiB7dHlwZTogTnVtYmVyLCB2YWx1ZTogNjIsIHJlYWRvbmx5OiB0cnVlfSxcbiAgfVxufSk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW1iZWRkaW5nRGltU2V0dGluZ3Mge1xuICB2YWw6IG51bWJlcjtcbiAgaW5pdDogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgRm9udEVtYmVkZGluZyBleHRlbmRzIEZvbnRFbWJlZGRpbmdQb2x5bWVyIHtcbiAgcHJpdmF0ZSB2YXJpYWJsZXM6IHtbdmFyTmFtZTogc3RyaW5nXTogTkRBcnJheX07XG5cbiAgLy8gRW1iZWRkaW5nIGRpbWVuc2lvbiBzZXR0aW5ncyBmb3IgdGhlIHNsaWRlcnNcbiAgZW1iZWRkaW5nOiBFbWJlZGRpbmdEaW1TZXR0aW5nc1tdO1xuXG4gIC8vIE1hcHBpbmcgb2YgY2hhcmFjdGVycyB0byB0aGUgSUQgZm9yIHRoZSBvbmUtaG90IGluIHRoZSBtb2RlbC5cbiAgY2hhcklkTWFwOiB7W2NoYXI6IHN0cmluZ106IG51bWJlcn07XG5cbiAgLy8gRm9udCBJRCBzdHJpbmcgZnJvbSB0aGUgcGFwZXItaW5wdXQuXG4gIGZvbnRJZDogc3RyaW5nO1xuXG4gIC8vIENoYXJhY3RlciBzdHJpbmcgZnJvbSB0aGUgcGFwZXItaW5wdXQuXG4gIGNoYXI6IHN0cmluZztcblxuICBncmFwaDogR3JhcGg7XG4gIHNlc3Npb246IFNlc3Npb247XG4gIGlucHV0VGVuc29yOiBUZW5zb3I7XG4gIG91dHB1dFRlbnNvcjogVGVuc29yO1xuICBtYXRoOiBOREFycmF5TWF0aDtcbiAgdmlzOiBOREFycmF5SW1hZ2VWaXN1YWxpemVyO1xuICBudW1iZXJPZlZhbGlkQ2hhcnM6IG51bWJlcjtcblxuICByZWFkeSgpIHtcbiAgICBjb25zdCBjaGVja3BvaW50TG9hZGVyID1cbiAgICAgICAgbmV3IENoZWNrcG9pbnRMb2FkZXIoR09PR0xFX0NMT1VEX1NUT1JBR0VfRElSICsgJ2ZvbnRzLycpO1xuICAgIGNoZWNrcG9pbnRMb2FkZXIuZ2V0QWxsVmFyaWFibGVzKCkudGhlbih2YXJpYWJsZXMgPT4ge1xuICAgICAgdGhpcy52YXJpYWJsZXMgPSB2YXJpYWJsZXM7XG4gICAgICB0aGlzLmJ1aWxkTW9kZWwoKTtcbiAgICAgIHRoaXMuaW5mZXIodGhpcy5mb250SWQsIHRoaXMuY2hhcik7XG4gICAgfSk7XG5cbiAgICAvLyBTZXQgdXAgY2hhcmFjdGVyIElEIG1hcHBpbmcuXG4gICAgdGhpcy5jaGFySWRNYXAgPSB7fTtcbiAgICBmb3IgKGxldCBpID0gNjU7IGkgPCA5MTsgaSsrKSB7XG4gICAgICB0aGlzLmNoYXJJZE1hcFtTdHJpbmcuZnJvbUNoYXJDb2RlKGkpXSA9IGkgLSA2NTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDk3OyBpIDwgMTIzOyBpKyspIHtcbiAgICAgIHRoaXMuY2hhcklkTWFwW1N0cmluZy5mcm9tQ2hhckNvZGUoaSldID0gaSAtIDk3ICsgMjY7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSA0ODsgaSA8IDU4OyBpKyspIHtcbiAgICAgIHRoaXMuY2hhcklkTWFwW1N0cmluZy5mcm9tQ2hhckNvZGUoaSldID0gaSAtIDQ4ICsgNTI7XG4gICAgfVxuICAgIHRoaXMuZm9udElkID0gJzAnO1xuICAgIHRoaXMuY2hhciA9ICdBJztcblxuICAgIGNvbnN0IGZvbnRJZEVsZW1lbnQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJyNmb250LWlkJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBmb250SWRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICB0aGlzLmZvbnRJZCA9IGZvbnRJZEVsZW1lbnQudmFsdWU7XG4gICAgICB0aGlzLm5ld0ZvbnRJZCh0aGlzLmZvbnRJZCk7XG4gICAgICB0aGlzLmluZmVyKHRoaXMuZm9udElkLCB0aGlzLmNoYXIpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgY2hhcklkRWxlbWVudCA9IHRoaXMucXVlcnlTZWxlY3RvcignI2NoYXItaWQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNoYXJJZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgIHRoaXMuY2hhciA9IGNoYXJJZEVsZW1lbnQudmFsdWU7XG4gICAgICB0aGlzLmluZmVyKHRoaXMuZm9udElkLCB0aGlzLmNoYXIpO1xuICAgIH0pO1xuICB9XG5cbiAgbmV3Rm9udElkKGZvbnRJZDogc3RyaW5nKSB7XG4gICAgLy8gSWdub3JlIGludmFsaWQgSURzIGFuZCBuby1vcCBiZWZvcmUgd2VpZ2h0cyBsb2FkZWQuXG4gICAgaWYgKGZvbnRJZC5sZW5ndGggPT09IDAgfHwgK2ZvbnRJZCA8IDAgfHwgK2ZvbnRJZCA+IDU2NDQzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTG9hZCB1cCBlbWJlZGRpbmdzIGZvciB0aGUgc2VsZWN0ZWQgZm9udC5cbiAgICBjb25zdCBlbWJlZGRpbmc6IEVtYmVkZGluZ0RpbVNldHRpbmdzW10gPSBbXTtcbiAgICBjb25zdCBlbWJlZGRpbmdOREFycmF5ID1cbiAgICAgICAgdGhpcy52YXJpYWJsZXNbJ2lucHV0X2Zyb21fZmVhdHVyZV9jb2x1bW5zL2ZvbnRfZW1iZWRkaW5nL3dlaWdodHMnXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVtYmVkZGluZ05EQXJyYXkuc2hhcGVbMV07IGkrKykge1xuICAgICAgY29uc3QgbnVtID0gZW1iZWRkaW5nTkRBcnJheS5nZXQoK2ZvbnRJZCwgaSk7XG4gICAgICBlbWJlZGRpbmcucHVzaCh7aW5pdDogbnVtLCB2YWw6IG51bX0pO1xuICAgIH1cbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG4gICAgKHRoaXMgYXMgYW55KS5zZXQoJ2VtYmVkZGluZycsIGVtYmVkZGluZyk7XG4gIH1cblxuICBzbGlkZXJDaGFuZ2UoZTogRXZlbnQpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZS50YXJnZXQgYXMgUG9seW1lckhUTUxFbGVtZW50O1xuICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgnKSEsIDEwKTtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG4gICAgdGhpcy5lbWJlZGRpbmdbaW5kZXhdLnZhbCA9IChlbGVtZW50IGFzIGFueSkuaW1tZWRpYXRlVmFsdWU7XG4gICAgLy8gQ2F1c2UgaW5mZXJlbmNlIG9uY2UgYSBzbGlkZXIgY2hhbmdlcy5cbiAgICB0aGlzLmluZmVyKHRoaXMuZm9udElkLCB0aGlzLmNoYXIpO1xuICB9XG5cbiAgYnVpbGRNb2RlbCgpIHtcbiAgICB0aGlzLnZpcyA9IHRoaXMuJC52aXMgYXMgTkRBcnJheUltYWdlVmlzdWFsaXplcjtcbiAgICB0aGlzLnZpcy5zZXRTaGFwZShbNjQsIDY0XSk7XG4gICAgdGhpcy52aXMuc2V0U2l6ZSgxMjgsIDEyOCk7XG5cbiAgICB0aGlzLm5ld0ZvbnRJZCh0aGlzLmZvbnRJZCk7XG5cbiAgICBjb25zdCBmYzF3TmFtZSA9ICdTdGFjay9mdWxseV9jb25uZWN0ZWRfMS93ZWlnaHRzJztcbiAgICBjb25zdCBmYzFiTmFtZSA9ICdTdGFjay9mdWxseV9jb25uZWN0ZWRfMS9iaWFzZXMnO1xuICAgIGNvbnN0IGZjMndOYW1lID0gJ1N0YWNrL2Z1bGx5X2Nvbm5lY3RlZF8yL3dlaWdodHMnO1xuICAgIGNvbnN0IGZjMmJOYW1lID0gJ1N0YWNrL2Z1bGx5X2Nvbm5lY3RlZF8yL2JpYXNlcyc7XG4gICAgY29uc3QgZmMzd05hbWUgPSAnU3RhY2svZnVsbHlfY29ubmVjdGVkXzMvd2VpZ2h0cyc7XG4gICAgY29uc3QgZmMzYk5hbWUgPSAnU3RhY2svZnVsbHlfY29ubmVjdGVkXzMvYmlhc2VzJztcbiAgICBjb25zdCBmYzR3TmFtZSA9ICdTdGFjay9mdWxseV9jb25uZWN0ZWRfNC93ZWlnaHRzJztcbiAgICBjb25zdCBmYzRiTmFtZSA9ICdTdGFjay9mdWxseV9jb25uZWN0ZWRfNC9iaWFzZXMnO1xuICAgIGNvbnN0IGZjNXdOYW1lID0gJ2Z1bGx5X2Nvbm5lY3RlZC93ZWlnaHRzJztcbiAgICBjb25zdCBmYzViTmFtZSA9ICdmdWxseV9jb25uZWN0ZWQvYmlhc2VzJztcblxuICAgIHRoaXMuZ3JhcGggPSBuZXcgR3JhcGgoKTtcbiAgICBjb25zdCBnID0gdGhpcy5ncmFwaDtcbiAgICB0aGlzLmlucHV0VGVuc29yID0gZy5wbGFjZWhvbGRlcignaW5wdXQnLCBbMTAyXSk7XG5cbiAgICBjb25zdCByZWx1MSA9IGcubGF5ZXJzLmRlbnNlKFxuICAgICAgICAnZmMxJywgdGhpcy5pbnB1dFRlbnNvciwgdGhpcy52YXJpYWJsZXNbZmMxYk5hbWVdLnNoYXBlWzFdLFxuICAgICAgICAoeCkgPT4gZy5yZWx1KHgpLCB0cnVlLFxuICAgICAgICBuZXcgTkRBcnJheUluaXRpYWxpemVyKHRoaXMudmFyaWFibGVzW2ZjMXdOYW1lXSksXG4gICAgICAgIG5ldyBOREFycmF5SW5pdGlhbGl6ZXIodGhpcy52YXJpYWJsZXNbZmMxYk5hbWVdKSk7XG4gICAgY29uc3QgcmVsdTIgPSBnLmxheWVycy5kZW5zZShcbiAgICAgICAgJ2ZjMicsIHJlbHUxLCB0aGlzLnZhcmlhYmxlc1tmYzJiTmFtZV0uc2hhcGVbMV0sICh4KSA9PiBnLnJlbHUoeCksIHRydWUsXG4gICAgICAgIG5ldyBOREFycmF5SW5pdGlhbGl6ZXIodGhpcy52YXJpYWJsZXNbZmMyd05hbWVdKSxcbiAgICAgICAgbmV3IE5EQXJyYXlJbml0aWFsaXplcih0aGlzLnZhcmlhYmxlc1tmYzJiTmFtZV0pKTtcbiAgICBjb25zdCByZWx1MyA9IGcubGF5ZXJzLmRlbnNlKFxuICAgICAgICAnZmMzJywgcmVsdTIsIHRoaXMudmFyaWFibGVzW2ZjM2JOYW1lXS5zaGFwZVsxXSwgKHgpID0+IGcucmVsdSh4KSwgdHJ1ZSxcbiAgICAgICAgbmV3IE5EQXJyYXlJbml0aWFsaXplcih0aGlzLnZhcmlhYmxlc1tmYzN3TmFtZV0pLFxuICAgICAgICBuZXcgTkRBcnJheUluaXRpYWxpemVyKHRoaXMudmFyaWFibGVzW2ZjM2JOYW1lXSkpO1xuICAgIGNvbnN0IHJlbHU0ID0gZy5sYXllcnMuZGVuc2UoXG4gICAgICAgICdmYzQnLCByZWx1MywgdGhpcy52YXJpYWJsZXNbZmM0Yk5hbWVdLnNoYXBlWzFdLCAoeCkgPT4gZy5yZWx1KHgpLCB0cnVlLFxuICAgICAgICBuZXcgTkRBcnJheUluaXRpYWxpemVyKHRoaXMudmFyaWFibGVzW2ZjNHdOYW1lXSksXG4gICAgICAgIG5ldyBOREFycmF5SW5pdGlhbGl6ZXIodGhpcy52YXJpYWJsZXNbZmM0Yk5hbWVdKSk7XG4gICAgdGhpcy5vdXRwdXRUZW5zb3IgPSBnLmxheWVycy5kZW5zZShcbiAgICAgICAgJ2ZjNScsIHJlbHU0LCB0aGlzLnZhcmlhYmxlc1tmYzViTmFtZV0uc2hhcGVbMV0sICh4KSA9PiBnLnNpZ21vaWQoeCksXG4gICAgICAgIHRydWUsIG5ldyBOREFycmF5SW5pdGlhbGl6ZXIodGhpcy52YXJpYWJsZXNbZmM1d05hbWVdKSxcbiAgICAgICAgbmV3IE5EQXJyYXlJbml0aWFsaXplcih0aGlzLnZhcmlhYmxlc1tmYzViTmFtZV0pKTtcblxuICAgIHRoaXMubWF0aCA9IG5ldyBOREFycmF5TWF0aEdQVSgpO1xuICAgIHRoaXMuc2Vzc2lvbiA9IG5ldyBTZXNzaW9uKGcsIHRoaXMubWF0aCk7XG4gIH1cblxuICBpbmZlcihmb250SWQ6IHN0cmluZywgY2hhcjogc3RyaW5nKSB7XG4gICAgaWYgKGZvbnRJZC5sZW5ndGggPT09IDAgfHwgK2ZvbnRJZCA8IDAgfHwgK2ZvbnRJZCA+IDU2NDQzIHx8XG4gICAgICAgIGNoYXIubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNoYXJJZCA9IHRoaXMuY2hhcklkTWFwW2NoYXIuY2hhckF0KDApXTtcbiAgICBpZiAoY2hhcklkID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBvbmVob3QgPSBBcnJheS5hcHBseShudWxsLCBBcnJheSh0aGlzLm51bWJlck9mVmFsaWRDaGFycykpXG4gICAgICAgICAgICAgICAgICAgICAgIC5tYXAoTnVtYmVyLnByb3RvdHlwZS52YWx1ZU9mLCAwKTtcbiAgICBvbmVob3RbY2hhcklkXSA9IDE7XG4gICAgLy8gVE9ETzogVXNlIHNsaWNlIGhlcmUgc28gd2UgZG9uJ3QgaGF2ZSB0byBrZWVwIHJldXBsb2FkaW5nIHRoZSBlbWJlZGRpbmcuXG4gICAgY29uc3QgZW1iZWRkaW5nID1cbiAgICAgICAgdGhpcy5lbWJlZGRpbmcubWFwKChzZXR0aW5nczogRW1iZWRkaW5nRGltU2V0dGluZ3MpID0+IHNldHRpbmdzLnZhbCk7XG5cbiAgICB0aGlzLm1hdGguc2NvcGUoKGtlZXAsIHRyYWNrKSA9PiB7XG4gICAgICBjb25zdCBpbnB1dERhdGEgPSB0cmFjayhBcnJheTFELm5ldyhlbWJlZGRpbmcuY29uY2F0KG9uZWhvdCkpKTtcblxuICAgICAgY29uc3QgaW5mZXIgPSB0aGlzLnNlc3Npb24uZXZhbChcbiAgICAgICAgICB0aGlzLm91dHB1dFRlbnNvciwgW3t0ZW5zb3I6IHRoaXMuaW5wdXRUZW5zb3IsIGRhdGE6IGlucHV0RGF0YX1dKTtcblxuICAgICAgLy8gQ29udmVydCB0aGUgaW5mZXJyZWQgdGVuc29yIHRvIHRoZSBwcm9wZXIgc2NhbGluZyBmb3IgZGlzcGxheSB0aGVuIGRyYXdcbiAgICAgIC8vIGl0LlxuICAgICAgY29uc3Qgc2NhbGFyID0gdHJhY2soU2NhbGFyLm5ldygyNTUpKTtcbiAgICAgIGNvbnN0IHNjYWxlZCA9IHRoaXMubWF0aC5zY2FsYXJUaW1lc0FycmF5KHNjYWxhciwgaW5mZXIpO1xuICAgICAgY29uc3QgYWRqdXN0ZWQgPSB0aGlzLm1hdGguc2NhbGFyTWludXNBcnJheShzY2FsYXIsIHNjYWxlZCk7XG4gICAgICB0aGlzLnZpcy5zYXZlSW1hZ2VEYXRhRnJvbU5EQXJyYXkoYWRqdXN0ZWQuYXMzRCg2NCwgNjQsIDEpKTtcbiAgICAgIHRoaXMudmlzLmRyYXcoKTtcbiAgICB9KTtcbiAgfVxufVxuZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KEZvbnRFbWJlZGRpbmcucHJvdG90eXBlLmlzLCBGb250RW1iZWRkaW5nKTtcbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuLy8gVGhpcyBmaWxlIGlzIGp1c3QgYW4gYWxpYXMgdGhhdCBwb2ludHMgdG8gdGhlIGN1cnJlbnQgbGVhcm5qcyB2ZXJzaW9uXG4vLyBhdCB0aGlzIGJyYW5jaCwgc28gZGVtb3MgY2FuIGltcG9ydCB0aGUgbGlicmFyeSBhcyAnLi4vbGVhcm5qcycuXG5leHBvcnQgKiBmcm9tICcuLi9zcmMvaW5kZXgnO1xuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tdW51c2VkLXZhcmlhYmxlXG5pbXBvcnQge0FycmF5M0R9IGZyb20gJy4uL3NyYy9tYXRoL25kYXJyYXknO1xuXG5pbXBvcnQge1BvbHltZXJFbGVtZW50LCBQb2x5bWVySFRNTEVsZW1lbnR9IGZyb20gJy4vcG9seW1lci1zcGVjJztcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG5leHBvcnQgbGV0IE5EQXJyYXlJbWFnZVZpc3VhbGl6ZXJQb2x5bWVyID1cbiAgICBQb2x5bWVyRWxlbWVudCh7aXM6ICduZGFycmF5LWltYWdlLXZpc3VhbGl6ZXInLCBwcm9wZXJ0aWVzOiB7fX0pO1xuXG5leHBvcnQgY2xhc3MgTkRBcnJheUltYWdlVmlzdWFsaXplciBleHRlbmRzIE5EQXJyYXlJbWFnZVZpc3VhbGl6ZXJQb2x5bWVyIHtcbiAgcHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcml2YXRlIGNhbnZhc0NvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgcHJpdmF0ZSBpbWFnZURhdGE6IEltYWdlRGF0YTtcblxuICByZWFkeSgpIHtcbiAgICB0aGlzLmNhbnZhcyA9IHRoaXMucXVlcnlTZWxlY3RvcignI2NhbnZhcycpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuICAgIHRoaXMuY2FudmFzLndpZHRoID0gMDtcbiAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSAwO1xuICAgIHRoaXMuY2FudmFzQ29udGV4dCA9XG4gICAgICAgIHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJykgYXMgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICAgIHRoaXMuY2FudmFzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH1cblxuICBzZXRTaGFwZShzaGFwZTogbnVtYmVyW10pIHtcbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHNoYXBlWzFdO1xuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHNoYXBlWzBdO1xuICB9XG5cbiAgc2V0U2l6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMuY2FudmFzLnN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnO1xuICAgIHRoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7XG4gIH1cblxuICBzYXZlSW1hZ2VEYXRhRnJvbU5EQXJyYXkobmRhcnJheTogQXJyYXkzRCkge1xuICAgIHRoaXMuaW1hZ2VEYXRhID0gdGhpcy5jYW52YXNDb250ZXh0LmNyZWF0ZUltYWdlRGF0YShcbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG4gICAgaWYgKG5kYXJyYXkuc2hhcGVbMl0gPT09IDEpIHtcbiAgICAgIHRoaXMuZHJhd0dyYXlzY2FsZUltYWdlRGF0YShuZGFycmF5KTtcbiAgICB9IGVsc2UgaWYgKG5kYXJyYXkuc2hhcGVbMl0gPT09IDMpIHtcbiAgICAgIHRoaXMuZHJhd1JHQkltYWdlRGF0YShuZGFycmF5KTtcbiAgICB9XG4gIH1cblxuICBkcmF3UkdCSW1hZ2VEYXRhKG5kYXJyYXk6IEFycmF5M0QpIHtcbiAgICBsZXQgcGl4ZWxPZmZzZXQgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmRhcnJheS5zaGFwZVswXTsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG5kYXJyYXkuc2hhcGVbMV07IGorKykge1xuICAgICAgICB0aGlzLmltYWdlRGF0YS5kYXRhW3BpeGVsT2Zmc2V0KytdID0gbmRhcnJheS5nZXQoaSwgaiwgMCk7XG4gICAgICAgIHRoaXMuaW1hZ2VEYXRhLmRhdGFbcGl4ZWxPZmZzZXQrK10gPSBuZGFycmF5LmdldChpLCBqLCAxKTtcbiAgICAgICAgdGhpcy5pbWFnZURhdGEuZGF0YVtwaXhlbE9mZnNldCsrXSA9IG5kYXJyYXkuZ2V0KGksIGosIDIpO1xuICAgICAgICB0aGlzLmltYWdlRGF0YS5kYXRhW3BpeGVsT2Zmc2V0KytdID0gMjU1O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRyYXdHcmF5c2NhbGVJbWFnZURhdGEobmRhcnJheTogQXJyYXkzRCkge1xuICAgIGxldCBwaXhlbE9mZnNldCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZGFycmF5LnNoYXBlWzBdOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbmRhcnJheS5zaGFwZVsxXTsgaisrKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gbmRhcnJheS5nZXQoaSwgaiwgMCk7XG4gICAgICAgIHRoaXMuaW1hZ2VEYXRhLmRhdGFbcGl4ZWxPZmZzZXQrK10gPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5pbWFnZURhdGEuZGF0YVtwaXhlbE9mZnNldCsrXSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmltYWdlRGF0YS5kYXRhW3BpeGVsT2Zmc2V0KytdID0gdmFsdWU7XG4gICAgICAgIHRoaXMuaW1hZ2VEYXRhLmRhdGFbcGl4ZWxPZmZzZXQrK10gPSAyNTU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZHJhdygpIHtcbiAgICB0aGlzLmNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgdGhpcy5jYW52YXNDb250ZXh0LnB1dEltYWdlRGF0YSh0aGlzLmltYWdlRGF0YSwgMCwgMCk7XG4gIH1cbn1cbmRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudChcbiAgICBOREFycmF5SW1hZ2VWaXN1YWxpemVyLnByb3RvdHlwZS5pcywgTkRBcnJheUltYWdlVmlzdWFsaXplcik7XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbi8qKlxuICogQGZpbGVvdmVydmlld1xuICpcbiAqIERlZmluZXMgYW4gaW50ZXJmYWNlIGZvciBjcmVhdGluZyBQb2x5bWVyIGVsZW1lbnRzIGluIFR5cGVzY3JpcHQgd2l0aCB0aGVcbiAqIGNvcnJlY3QgdHlwaW5ncy4gQSBQb2x5bWVyIGVsZW1lbnQgc2hvdWxkIGJlIGRlZmluZWQgbGlrZSB0aGlzOlxuICpcbiAqIGBgYFxuICogbGV0IE15RWxlbWVudFBvbHltZXIgPSBQb2x5bWVyRWxlbWVudCh7XG4gKiAgIGlzOiAnbXktcG9seW1lci1lbGVtZW50JyxcbiAqICAgcHJvcGVydGllczoge1xuICogICAgIGZvbzogc3RyaW5nLFxuICogICAgIGJhcjogQXJyYXlcbiAqICAgfVxuICogfSk7XG4gKlxuICogY2xhc3MgTXlFbGVtZW50IGV4dGVuZHMgTXlFbGVtZW50UG9seW1lciB7XG4gKiAgIGZvbzogc3RyaW5nO1xuICogICBiYXI6IG51bWJlcltdO1xuICpcbiAqICAgcmVhZHkoKSB7XG4gKiAgICAgY29uc29sZS5sb2coJ015RWxlbWVudCBpbml0aWFsaXplZCEnKTtcbiAqICAgfVxuICogfVxuICpcbiAqIGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudChNeUVsZW1lbnQucHJvdG90eXBlLmlzLCBNeUVsZW1lbnQpO1xuICogYGBgXG4gKi9cblxuZXhwb3J0IHR5cGUgU3BlYyA9IHtcbiAgaXM6IHN0cmluZzsgcHJvcGVydGllczoge1xuICAgIFtrZXk6IHN0cmluZ106IChGdW5jdGlvbnx7XG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG4gICAgICB0eXBlOiBGdW5jdGlvbiwgdmFsdWU/OiBhbnk7XG4gICAgICByZWZsZWN0VG9BdHRyaWJ1dGU/OiBib29sZWFuO1xuICAgICAgcmVhZG9ubHk/OiBib29sZWFuO1xuICAgICAgbm90aWZ5PzogYm9vbGVhbjtcbiAgICAgIGNvbXB1dGVkPzogc3RyaW5nO1xuICAgICAgb2JzZXJ2ZXI/OiBzdHJpbmc7XG4gICAgfSlcbiAgfTtcbiAgb2JzZXJ2ZXJzPzogc3RyaW5nW107XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gUG9seW1lckVsZW1lbnQoc3BlYzogU3BlYykge1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG4gIHJldHVybiBQb2x5bWVyLkNsYXNzKHNwZWMgYXMgYW55KSBhcyB7bmV3ICgpOiBQb2x5bWVySFRNTEVsZW1lbnR9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBvbHltZXJIVE1MRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50LCBwb2x5bWVyLkJhc2Uge31cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtOREFycmF5fSBmcm9tICcuL21hdGgvbmRhcnJheSc7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgaW50ZXJmYWNlIENoZWNrcG9pbnRWYXJpYWJsZSB7XG4gIGZpbGVuYW1lOiBzdHJpbmc7XG4gIHNoYXBlOiBudW1iZXJbXTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCB0eXBlIENoZWNrcG9pbnRNYW5pZmVzdCA9IHtcbiAgW3Zhck5hbWU6IHN0cmluZ106IENoZWNrcG9pbnRWYXJpYWJsZVxufTtcblxuY29uc3QgTUFOSUZFU1RfRklMRSA9ICdtYW5pZmVzdC5qc29uJztcblxuZXhwb3J0IGNsYXNzIENoZWNrcG9pbnRMb2FkZXIge1xuICBwcml2YXRlIGNoZWNrcG9pbnRNYW5pZmVzdDogQ2hlY2twb2ludE1hbmlmZXN0O1xuICBwcml2YXRlIHZhcmlhYmxlczoge1t2YXJOYW1lOiBzdHJpbmddOiBOREFycmF5fTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHVybFBhdGg6IHN0cmluZykge1xuICAgIGlmICh0aGlzLnVybFBhdGguY2hhckF0KHRoaXMudXJsUGF0aC5sZW5ndGggLSAxKSAhPT0gJy8nKSB7XG4gICAgICB0aGlzLnVybFBhdGggKz0gJy8nO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgbG9hZE1hbmlmZXN0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIHhoci5vcGVuKCdHRVQnLCB0aGlzLnVybFBhdGggKyBNQU5JRkVTVF9GSUxFKTtcblxuICAgICAgeGhyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5jaGVja3BvaW50TWFuaWZlc3QgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9O1xuICAgICAgeGhyLm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYCR7TUFOSUZFU1RfRklMRX0gbm90IGZvdW5kIGF0ICR7dGhpcy51cmxQYXRofS4gYCArIGVycm9yKTtcbiAgICAgIH07XG4gICAgICB4aHIuc2VuZCgpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0Q2hlY2twb2ludE1hbmlmZXN0KCk6IFByb21pc2U8Q2hlY2twb2ludE1hbmlmZXN0PiB7XG4gICAgaWYgKHRoaXMuY2hlY2twb2ludE1hbmlmZXN0ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxDaGVja3BvaW50TWFuaWZlc3Q+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgdGhpcy5sb2FkTWFuaWZlc3QoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHRoaXMuY2hlY2twb2ludE1hbmlmZXN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPENoZWNrcG9pbnRNYW5pZmVzdD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgcmVzb2x2ZSh0aGlzLmNoZWNrcG9pbnRNYW5pZmVzdCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRBbGxWYXJpYWJsZXMoKTogUHJvbWlzZTx7W3Zhck5hbWU6IHN0cmluZ106IE5EQXJyYXl9PiB7XG4gICAgaWYgKHRoaXMudmFyaWFibGVzICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx7W3Zhck5hbWU6IHN0cmluZ106IE5EQXJyYXl9PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHJlc29sdmUodGhpcy52YXJpYWJsZXMpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHtbdmFyTmFtZTogc3RyaW5nXTogTkRBcnJheX0+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuZ2V0Q2hlY2twb2ludE1hbmlmZXN0KCkudGhlbihcbiAgICAgICAgICAoY2hlY2twb2ludERlZmluaXRpb246IENoZWNrcG9pbnRNYW5pZmVzdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFyaWFibGVOYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMuY2hlY2twb2ludE1hbmlmZXN0KTtcblxuICAgICAgICAgICAgY29uc3QgdmFyaWFibGVQcm9taXNlczogQXJyYXk8UHJvbWlzZTxOREFycmF5Pj4gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFyaWFibGVOYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICB2YXJpYWJsZVByb21pc2VzLnB1c2godGhpcy5nZXRWYXJpYWJsZSh2YXJpYWJsZU5hbWVzW2ldKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFByb21pc2UuYWxsKHZhcmlhYmxlUHJvbWlzZXMpLnRoZW4odmFyaWFibGVzID0+IHtcbiAgICAgICAgICAgICAgdGhpcy52YXJpYWJsZXMgPSB7fTtcbiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YXJpYWJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhcmlhYmxlc1t2YXJpYWJsZU5hbWVzW2ldXSA9IHZhcmlhYmxlc1tpXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXNvbHZlKHRoaXMudmFyaWFibGVzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0VmFyaWFibGUodmFyTmFtZTogc3RyaW5nKTogUHJvbWlzZTxOREFycmF5PiB7XG4gICAgaWYgKCEodmFyTmFtZSBpbiB0aGlzLmNoZWNrcG9pbnRNYW5pZmVzdCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGxvYWQgbm9uLWV4aXN0YW50IHZhcmlhYmxlICcgKyB2YXJOYW1lKTtcbiAgICB9XG5cbiAgICBjb25zdCB2YXJpYWJsZVJlcXVlc3RQcm9taXNlTWV0aG9kID1cbiAgICAgICAgKHJlc29sdmU6IChuZGFycmF5OiBOREFycmF5KSA9PiB2b2lkLCByZWplY3Q6ICgpID0+IHZvaWQpID0+IHtcbiAgICAgICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICAgICAgICBjb25zdCBmbmFtZSA9IHRoaXMuY2hlY2twb2ludE1hbmlmZXN0W3Zhck5hbWVdLmZpbGVuYW1lO1xuICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB0aGlzLnVybFBhdGggKyBmbmFtZSk7XG5cbiAgICAgICAgICB4aHIub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheSh4aHIucmVzcG9uc2UpO1xuICAgICAgICAgICAgY29uc3QgbmRhcnJheSA9XG4gICAgICAgICAgICAgICAgTkRBcnJheS5tYWtlKHRoaXMuY2hlY2twb2ludE1hbmlmZXN0W3Zhck5hbWVdLnNoYXBlLCB7dmFsdWVzfSk7XG4gICAgICAgICAgICByZXNvbHZlKG5kYXJyYXkpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgeGhyLm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAnQ291bGQgbm90IGZldGNoIHZhcmlhYmxlICcgKyB2YXJOYW1lICsgJzogJyArIGVycm9yKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHhoci5zZW5kKCk7XG4gICAgICAgIH07XG5cbiAgICBpZiAodGhpcy5jaGVja3BvaW50TWFuaWZlc3QgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPE5EQXJyYXk+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgdGhpcy5sb2FkTWFuaWZlc3QoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBuZXcgUHJvbWlzZTxOREFycmF5Pih2YXJpYWJsZVJlcXVlc3RQcm9taXNlTWV0aG9kKS50aGVuKHJlc29sdmUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFByb21pc2U8TkRBcnJheT4odmFyaWFibGVSZXF1ZXN0UHJvbWlzZU1ldGhvZCk7XG4gIH1cbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtOREFycmF5TWF0aH0gZnJvbSAnLi9tYXRoL21hdGgnO1xuaW1wb3J0IHtOREFycmF5fSBmcm9tICcuL21hdGgvbmRhcnJheSc7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gJy4vdXRpbCc7XG5cbmNvbnN0IFNUQVRTX1NBTVBMRV9QRVJDRU5UQUdFID0gMC4xO1xuXG5leHBvcnQgaW50ZXJmYWNlIERhdGFTdGF0cyB7XG4gIGV4YW1wbGVDb3VudDogbnVtYmVyO1xuICBpbnB1dE1pbjogbnVtYmVyO1xuICBpbnB1dE1heDogbnVtYmVyO1xuICBzaGFwZTogbnVtYmVyW107XG59XG5cbmludGVyZmFjZSBOb3JtYWxpemF0aW9uSW5mbyB7XG4gIGlzTm9ybWFsaXplZDogYm9vbGVhbjtcbiAgLy8gQm91bmRzIG9mIHRoZSBub3JtYWxpemF0aW9uIGlmIG5vcm1hbGl6ZWQuXG4gIGxvd2VyQm91bmQ/OiBudW1iZXI7XG4gIHVwcGVyQm91bmQ/OiBudW1iZXI7XG4gIC8vIE1pbmltdW0gYW5kIG1heGltdW0gdmFsdWVzIGZvciBlYWNoIGRpbWVuc2lvbiBvZiB0aGUgb3JpZ2luYWwgZGF0YS4gVGhlc2VcbiAgLy8gYXJlIHRoZSBzYW1lIHNpemUgYXMgYW4gaW5wdXQgZXhhbXBsZS4gVGhlc2UgYXJlIGNvbXB1dGVkIGxhemlseSwgb25seSBpZlxuICAvLyBub3JtYWxpemF0aW9uIGlzIHJlcXVlc3RlZC4gSWYgdGhlIGRhdGEgaXMgdW4tbm9ybWFsaXplZCwgdGhlc2UgYXJlIGtlcHRcbiAgLy8gYXJvdW5kIHNvIHRoZXkgZG9uJ3QgaGF2ZSB0byBiZSByZWNvbXB1dGVkLlxuICBtaW5WYWx1ZXM6IEZsb2F0MzJBcnJheTtcbiAgbWF4VmFsdWVzOiBGbG9hdDMyQXJyYXk7XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBJbk1lbW9yeURhdGFzZXQge1xuICBwcm90ZWN0ZWQgZGF0YXNldDogTkRBcnJheVtdW118bnVsbDtcblxuICAvLyBDb250YWlucyBpbmZvcm1hdGlvbiBuZWNlc3NhcnkgZm9yIHJlY29uc3RydWN0aW9uIG9mIHRoZSBvcmlnaW5hbCBkYXRhXG4gIC8vIGFmdGVyIG5vcm1hbGl6YXRpb24uXG4gIHByaXZhdGUgbm9ybWFsaXphdGlvbkluZm86IHtbZGF0YUluZGV4OiBudW1iZXJdOiBOb3JtYWxpemF0aW9uSW5mb307XG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIGRhdGFTaGFwZXM6IG51bWJlcltdW10pIHtcbiAgICB0aGlzLm5vcm1hbGl6YXRpb25JbmZvID0ge307XG4gIH1cblxuICBnZXREYXRhU2hhcGUoZGF0YUluZGV4OiBudW1iZXIpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YVNoYXBlc1tkYXRhSW5kZXhdO1xuICB9XG5cbiAgYWJzdHJhY3QgZmV0Y2hEYXRhKCk6IFByb21pc2U8dm9pZD47XG5cbiAgZ2V0RGF0YSgpOiBOREFycmF5W11bXXxudWxsIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhc2V0O1xuICB9XG5cbiAgZ2V0U3RhdHMoKTogRGF0YVN0YXRzW10ge1xuICAgIGlmICh0aGlzLmRhdGFzZXQgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhIGlzIG51bGwuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGF0YXNldC5tYXAoZCA9PiB0aGlzLmdldFN0YXRzRm9yRGF0YShkKSk7XG4gIH1cblxuICAvLyBDb21wdXRlcyBzdGF0cyBhY3Jvc3MgYSBzYW1wbGVkIHBvcnRpb24gb2YgdGhlIGRhdGEuXG4gIHByaXZhdGUgZ2V0U3RhdHNGb3JEYXRhKGRhdGE6IE5EQXJyYXlbXSk6IERhdGFTdGF0cyB7XG4gICAgbGV0IGlucHV0TWluID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgIGxldCBpbnB1dE1heCA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcblxuICAgIGxldCBleGFtcGxlSW5kaWNlcyA9IGRhdGEubWFwKChleGFtcGxlLCBpKSA9PiBpKTtcbiAgICB1dGlsLnNodWZmbGUoZXhhbXBsZUluZGljZXMpO1xuICAgIGV4YW1wbGVJbmRpY2VzID1cbiAgICAgICAgZXhhbXBsZUluZGljZXMuc2xpY2UoZXhhbXBsZUluZGljZXMubGVuZ3RoICogU1RBVFNfU0FNUExFX1BFUkNFTlRBR0UpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBleGFtcGxlSW5kaWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSBkYXRhW2V4YW1wbGVJbmRpY2VzW2ldXS5nZXRWYWx1ZXMoKTtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaW5wdXRWYWx1ZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaW5wdXRNaW4gPSBNYXRoLm1pbihpbnB1dE1pbiwgaW5wdXRWYWx1ZXNbal0pO1xuICAgICAgICBpbnB1dE1heCA9IE1hdGgubWF4KGlucHV0TWF4LCBpbnB1dFZhbHVlc1tqXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlucHV0TWluLFxuICAgICAgaW5wdXRNYXgsXG4gICAgICBleGFtcGxlQ291bnQ6IGRhdGEubGVuZ3RoLFxuICAgICAgc2hhcGU6IGRhdGFbMF0uc2hhcGUsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gZXhhbXBsZXMgTkRBcnJheXMgdG8gYmUgbm9ybWFsaXplZC5cbiAgICogQHBhcmFtIGN1ckxvd2VyQm91bmRzIEFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIG1pbmltdW0gdmFsdWUgZm9yIGVhY2hcbiAgICogZGltZW5zaW9uIG9yIGEgZml4ZWQgbWluaW11bSB2YWx1ZS5cbiAgICogQHBhcmFtIGN1clVwcGVyQm91bmRzIEFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIG1heGltdW0gdmFsdWUgZm9yIGVhY2hcbiAgICogZGltZW5zaW9uIG9yIGEgZml4ZWQgbWF4aW11bSB2YWx1ZS5cbiAgICogQHBhcmFtIG5ld0xvd2VyQm91bmRzIEFuIGFycmF5IGNvbnRhaW5pbmcgbmV3IG1pbmltdW0gdmFsdWVzIGZvciBlYWNoXG4gICAqIGRpbWVuc2lvbiwgb3IgYSBmaXhlZCBtaW51bXVtIHZhbHVlIHRvIG5vcm1hbGl6ZSB0aGUgZGF0YSB0by5cbiAgICogQHBhcmFtIG5ld1VwcGVyQm91bmRzIEFuIGFycmF5IGNvbnRhaW5pbmcgbmV3IG1heGltdW0gdmFsdWVzIGZvciBlYWNoXG4gICAqIGRpbWVuc2lvbiwgb3IgYSBmaXhlZCBtYXhpbXVtIHZhbHVlIHRvIG5vcm1hbGl6ZSB0aGUgZGF0YSB0by5cbiAgICovXG4gIHByaXZhdGUgbm9ybWFsaXplRXhhbXBsZXNUb1JhbmdlKFxuICAgICAgZXhhbXBsZXM6IE5EQXJyYXlbXSwgY3VyTG93ZXJCb3VuZHM6IEZsb2F0MzJBcnJheXxudW1iZXIsXG4gICAgICBjdXJVcHBlckJvdW5kczogRmxvYXQzMkFycmF5fG51bWJlciwgbmV3TG93ZXJCb3VuZHM6IEZsb2F0MzJBcnJheXxudW1iZXIsXG4gICAgICBuZXdVcHBlckJvdW5kczogRmxvYXQzMkFycmF5fG51bWJlcik6IE5EQXJyYXlbXSB7XG4gICAgY29uc3QgY3VyQm91bmRzSXNQZXJEaW1lbnNpb24gPVxuICAgICAgICAoY3VyVXBwZXJCb3VuZHMgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkgJiZcbiAgICAgICAgIGN1ckxvd2VyQm91bmRzIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5KTtcbiAgICBjb25zdCBuZXdCb3VuZHNJc1BlckRpbWVuc2lvbiA9XG4gICAgICAgIChuZXdMb3dlckJvdW5kcyBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSAmJlxuICAgICAgICAgbmV3VXBwZXJCb3VuZHMgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpO1xuXG4gICAgY29uc3QgaW5wdXRTaXplID0gdXRpbC5zaXplRnJvbVNoYXBlKGV4YW1wbGVzWzBdLnNoYXBlKTtcbiAgICBjb25zdCBuZXdFeGFtcGxlczogTkRBcnJheVtdID0gW107XG5cbiAgICBleGFtcGxlcy5mb3JFYWNoKGV4YW1wbGUgPT4ge1xuICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSBleGFtcGxlLmdldFZhbHVlcygpO1xuICAgICAgY29uc3Qgbm9ybWFsaXplZFZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkoaW5wdXRTaXplKTtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaW5wdXRTaXplOyBqKyspIHtcbiAgICAgICAgY29uc3QgY3VyTG93ZXJCb3VuZCA9IGN1ckJvdW5kc0lzUGVyRGltZW5zaW9uID9cbiAgICAgICAgICAgIChjdXJMb3dlckJvdW5kcyBhcyBGbG9hdDMyQXJyYXkpW2pdIDpcbiAgICAgICAgICAgIGN1ckxvd2VyQm91bmRzIGFzIG51bWJlcjtcbiAgICAgICAgY29uc3QgY3VyVXBwZXJCb3VuZCA9IGN1ckJvdW5kc0lzUGVyRGltZW5zaW9uID9cbiAgICAgICAgICAgIChjdXJVcHBlckJvdW5kcyBhcyBGbG9hdDMyQXJyYXkpW2pdIDpcbiAgICAgICAgICAgIGN1clVwcGVyQm91bmRzIGFzIG51bWJlcjtcbiAgICAgICAgY29uc3QgY3VyUmFuZ2UgPSBjdXJVcHBlckJvdW5kIC0gY3VyTG93ZXJCb3VuZDtcblxuICAgICAgICBjb25zdCBuZXdMb3dlckJvdW5kID0gbmV3Qm91bmRzSXNQZXJEaW1lbnNpb24gP1xuICAgICAgICAgICAgKG5ld0xvd2VyQm91bmRzIGFzIEZsb2F0MzJBcnJheSlbal0gOlxuICAgICAgICAgICAgbmV3TG93ZXJCb3VuZHMgYXMgbnVtYmVyO1xuICAgICAgICBjb25zdCBuZXdVcHBlckJvdW5kID0gbmV3Qm91bmRzSXNQZXJEaW1lbnNpb24gP1xuICAgICAgICAgICAgKG5ld1VwcGVyQm91bmRzIGFzIEZsb2F0MzJBcnJheSlbal0gOlxuICAgICAgICAgICAgbmV3VXBwZXJCb3VuZHMgYXMgbnVtYmVyO1xuICAgICAgICBjb25zdCBuZXdSYW5nZSA9IG5ld1VwcGVyQm91bmQgLSBuZXdMb3dlckJvdW5kO1xuXG4gICAgICAgIGlmIChjdXJSYW5nZSA9PT0gMCkge1xuICAgICAgICAgIG5vcm1hbGl6ZWRWYWx1ZXNbal0gPSBuZXdMb3dlckJvdW5kO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vcm1hbGl6ZWRWYWx1ZXNbal0gPSBuZXdMb3dlckJvdW5kICtcbiAgICAgICAgICAgICAgbmV3UmFuZ2UgKiAoaW5wdXRWYWx1ZXNbal0gLSBjdXJMb3dlckJvdW5kKSAvIGN1clJhbmdlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBuZXdFeGFtcGxlcy5wdXNoKE5EQXJyYXkubWFrZShleGFtcGxlLnNoYXBlLCB7dmFsdWVzOiBub3JtYWxpemVkVmFsdWVzfSkpO1xuICAgIH0pO1xuICAgIHJldHVybiBuZXdFeGFtcGxlcztcbiAgfVxuXG4gIHByaXZhdGUgY29tcHV0ZUJvdW5kcyhkYXRhSW5kZXg6IG51bWJlcikge1xuICAgIGlmICh0aGlzLmRhdGFzZXQgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhIGlzIG51bGwuJyk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2l6ZSA9IHV0aWwuc2l6ZUZyb21TaGFwZSh0aGlzLmRhdGFzZXRbZGF0YUluZGV4XVswXS5zaGFwZSk7XG5cbiAgICAvLyBDb21wdXRlIG1pbiBhbmQgbWF4IHZhbHVlcyBmb3IgZXZlcnkgZGltZW5zaW9uLlxuICAgIHRoaXMubm9ybWFsaXphdGlvbkluZm9bZGF0YUluZGV4XSA9IHtcbiAgICAgIGlzTm9ybWFsaXplZDogZmFsc2UsXG4gICAgICBtaW5WYWx1ZXM6IG5ldyBGbG9hdDMyQXJyYXkoc2l6ZSksXG4gICAgICBtYXhWYWx1ZXM6IG5ldyBGbG9hdDMyQXJyYXkoc2l6ZSlcbiAgICB9O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgIHRoaXMubm9ybWFsaXphdGlvbkluZm9bZGF0YUluZGV4XS5taW5WYWx1ZXNbaV0gPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICB0aGlzLm5vcm1hbGl6YXRpb25JbmZvW2RhdGFJbmRleF0ubWF4VmFsdWVzW2ldID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO1xuICAgIH1cblxuICAgIHRoaXMuZGF0YXNldFtkYXRhSW5kZXhdLmZvckVhY2goZXhhbXBsZSA9PiB7XG4gICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IGV4YW1wbGUuZ2V0VmFsdWVzKCk7XG4gICAgICBmb3IgKGxldCBrID0gMDsgayA8IHNpemU7IGsrKykge1xuICAgICAgICB0aGlzLm5vcm1hbGl6YXRpb25JbmZvW2RhdGFJbmRleF0ubWluVmFsdWVzW2tdID0gTWF0aC5taW4oXG4gICAgICAgICAgICB0aGlzLm5vcm1hbGl6YXRpb25JbmZvW2RhdGFJbmRleF0ubWluVmFsdWVzW2tdLCBpbnB1dFZhbHVlc1trXSk7XG4gICAgICAgIHRoaXMubm9ybWFsaXphdGlvbkluZm9bZGF0YUluZGV4XS5tYXhWYWx1ZXNba10gPSBNYXRoLm1heChcbiAgICAgICAgICAgIHRoaXMubm9ybWFsaXphdGlvbkluZm9bZGF0YUluZGV4XS5tYXhWYWx1ZXNba10sIGlucHV0VmFsdWVzW2tdKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIG5vcm1hbGl6ZVdpdGhpbkJvdW5kcyhcbiAgICAgIGRhdGFJbmRleDogbnVtYmVyLCBsb3dlckJvdW5kOiBudW1iZXIsIHVwcGVyQm91bmQ6IG51bWJlcikge1xuICAgIGlmICh0aGlzLmRhdGFzZXQgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhIGlzIG51bGwuJyk7XG4gICAgfVxuICAgIGlmIChkYXRhSW5kZXggPj0gdGhpcy5kYXRhc2V0Lmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhSW5kZXggb3V0IG9mIGJvdW5kcy4nKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5ub3JtYWxpemF0aW9uSW5mb1tkYXRhSW5kZXhdID09IG51bGwpIHtcbiAgICAgIHRoaXMuY29tcHV0ZUJvdW5kcyhkYXRhSW5kZXgpO1xuICAgIH1cblxuICAgIC8vIGN1ckxvd2VyL1VwcGVyQm91bmRzIG9mIHRoZSBjdXJyZW50IGRhdGEgc2V0IGNhbiBlaXRoZXIgYmUgZml4ZWQgbnVtYmVyc1xuICAgIC8vIGlmIHRoZSBkYXRhIGhhcyBhbHJlYWR5IGJlZW4gbm9ybWFsaXplZCwgb3IgY3VyTG93ZXIvVXBwZXIgZm9yIGVhY2hcbiAgICAvLyBkaW1lbnNpb24gaWYgaXQgaGFzbid0IGJlZW4gbm9ybWFsaXplZCB5ZXQuXG4gICAgbGV0IGN1ckxvd2VyQm91bmRzOiBGbG9hdDMyQXJyYXl8bnVtYmVyO1xuICAgIGxldCBjdXJVcHBlckJvdW5kczogRmxvYXQzMkFycmF5fG51bWJlcjtcblxuICAgIGlmICh0aGlzLm5vcm1hbGl6YXRpb25JbmZvW2RhdGFJbmRleF0uaXNOb3JtYWxpemVkKSB7XG4gICAgICBjdXJMb3dlckJvdW5kcyA9IHRoaXMubm9ybWFsaXphdGlvbkluZm9bZGF0YUluZGV4XS5sb3dlckJvdW5kITtcbiAgICAgIGN1clVwcGVyQm91bmRzID0gdGhpcy5ub3JtYWxpemF0aW9uSW5mb1tkYXRhSW5kZXhdLnVwcGVyQm91bmQhO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJMb3dlckJvdW5kcyA9IHRoaXMubm9ybWFsaXphdGlvbkluZm9bZGF0YUluZGV4XS5taW5WYWx1ZXM7XG4gICAgICBjdXJVcHBlckJvdW5kcyA9IHRoaXMubm9ybWFsaXphdGlvbkluZm9bZGF0YUluZGV4XS5tYXhWYWx1ZXM7XG4gICAgfVxuXG4gICAgdGhpcy5kYXRhc2V0W2RhdGFJbmRleF0gPSB0aGlzLm5vcm1hbGl6ZUV4YW1wbGVzVG9SYW5nZShcbiAgICAgICAgdGhpcy5kYXRhc2V0W2RhdGFJbmRleF0sIGN1ckxvd2VyQm91bmRzLCBjdXJVcHBlckJvdW5kcywgbG93ZXJCb3VuZCxcbiAgICAgICAgdXBwZXJCb3VuZCk7XG4gICAgdGhpcy5ub3JtYWxpemF0aW9uSW5mb1tkYXRhSW5kZXhdLmlzTm9ybWFsaXplZCA9IHRydWU7XG4gICAgdGhpcy5ub3JtYWxpemF0aW9uSW5mb1tkYXRhSW5kZXhdLmxvd2VyQm91bmQgPSBsb3dlckJvdW5kO1xuICAgIHRoaXMubm9ybWFsaXphdGlvbkluZm9bZGF0YUluZGV4XS51cHBlckJvdW5kID0gdXBwZXJCb3VuZDtcbiAgfVxuXG4gIHByaXZhdGUgaXNOb3JtYWxpemVkKGRhdGFJbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubm9ybWFsaXphdGlvbkluZm8gIT0gbnVsbCAmJlxuICAgICAgICB0aGlzLm5vcm1hbGl6YXRpb25JbmZvW2RhdGFJbmRleF0uaXNOb3JtYWxpemVkO1xuICB9XG5cbiAgcmVtb3ZlTm9ybWFsaXphdGlvbihkYXRhSW5kZXg6IG51bWJlcikge1xuICAgIGlmICh0aGlzLmRhdGFzZXQgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUcmFpbmluZyBvciB0ZXN0IGRhdGEgaXMgbnVsbC4nKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNOb3JtYWxpemVkKGRhdGFJbmRleCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmRhdGFzZXRbZGF0YUluZGV4XSA9IHRoaXMubm9ybWFsaXplRXhhbXBsZXNUb1JhbmdlKFxuICAgICAgICB0aGlzLmRhdGFzZXRbZGF0YUluZGV4XSwgdGhpcy5ub3JtYWxpemF0aW9uSW5mb1tkYXRhSW5kZXhdLmxvd2VyQm91bmQhLFxuICAgICAgICB0aGlzLm5vcm1hbGl6YXRpb25JbmZvW2RhdGFJbmRleF0udXBwZXJCb3VuZCEsXG4gICAgICAgIHRoaXMubm9ybWFsaXphdGlvbkluZm9bZGF0YUluZGV4XS5taW5WYWx1ZXMsXG4gICAgICAgIHRoaXMubm9ybWFsaXphdGlvbkluZm9bZGF0YUluZGV4XS5tYXhWYWx1ZXMpO1xuICAgIHRoaXMubm9ybWFsaXphdGlvbkluZm9bZGF0YUluZGV4XS5pc05vcm1hbGl6ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHVubm9ybWFsaXplRXhhbXBsZXMoZXhhbXBsZXM6IE5EQXJyYXlbXSwgZGF0YUluZGV4OiBudW1iZXIpOiBOREFycmF5W10ge1xuICAgIGlmICghdGhpcy5pc05vcm1hbGl6ZWQoZGF0YUluZGV4KSkge1xuICAgICAgcmV0dXJuIGV4YW1wbGVzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZUV4YW1wbGVzVG9SYW5nZShcbiAgICAgICAgZXhhbXBsZXMsIHRoaXMubm9ybWFsaXphdGlvbkluZm9bZGF0YUluZGV4XS5sb3dlckJvdW5kISxcbiAgICAgICAgdGhpcy5ub3JtYWxpemF0aW9uSW5mb1tkYXRhSW5kZXhdLnVwcGVyQm91bmQhLFxuICAgICAgICB0aGlzLm5vcm1hbGl6YXRpb25JbmZvW2RhdGFJbmRleF0ubWluVmFsdWVzLFxuICAgICAgICB0aGlzLm5vcm1hbGl6YXRpb25JbmZvW2RhdGFJbmRleF0ubWF4VmFsdWVzKTtcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgaWYgKHRoaXMuZGF0YXNldCA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGFzZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5kYXRhc2V0W2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHRoaXMuZGF0YXNldFtpXVtqXS5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZGF0YXNldCA9IFtdO1xuICB9XG59XG5cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtHcmFwaExheWVyc30gZnJvbSAnLi9ncmFwaF9sYXllcnMnO1xuaW1wb3J0ICogYXMgY29uY2F0M2RfdXRpbCBmcm9tICcuL21hdGgvY29uY2F0M2RfdXRpbCc7XG5pbXBvcnQgKiBhcyBjb252X3V0aWwgZnJvbSAnLi9tYXRoL2NvbnZfdXRpbCc7XG5pbXBvcnQge05EQXJyYXksIFNjYWxhcn0gZnJvbSAnLi9tYXRoL25kYXJyYXknO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuL3V0aWwnO1xuXG4vKipcbiAqIEdyYXBoIGlzIHRoZSBwcmltYXJ5IGNvbnRhaW5lciBzdHJ1Y3R1cmUgZm9yIGxlYXJuLmpzIG9wZXJhdGlvbnMuIEdyYXBoXG4gKiBob2xkcyB0aGUgdG9wb2xvZ3kgb2Ygb3BlcmF0aW9uIG5vZGVzIGFuZCB0aGUgY29ubmVjdGl2aXR5IGJldHdlZW4gdGhlbS5cbiAqL1xuZXhwb3J0IGNsYXNzIEdyYXBoIHtcbiAgbGF5ZXJzOiBHcmFwaExheWVycztcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmxheWVycyA9IG5ldyBHcmFwaExheWVycyh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmFtZWQgdmFyaWFibGUuIFZhcmlhYmxlcyBhcmUgdGVuc29ycyB0aGF0IG1haW50YWluIHN0YXRlIGFjcm9zc1xuICAgKiBzZXNzaW9uIGNhbGxzIGFuZCB3aG9zZSB2YWx1ZXMgYXJlIGFkanVzdGVkIGR1cmluZyBiYWNrcHJvcGFnYXRpb25cbiAgICogdHJhaW5pbmcuXG4gICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoaXMgdmFyaWFibGUuXG4gICAqIEBwYXJhbSBkYXRhIFRoZSBOREFycmF5IHRvIGFzc29jaWF0ZSB3aXRoIHRoaXMgdmFyaWFibGUgdGVuc29yLlxuICAgKiBAcmV0dXJuIFRoZSB0ZW5zb3IgcmVwcmVzZW50aW5nIHRoZSB2YXJpYWJsZS5cbiAgICovXG4gIHZhcmlhYmxlKG5hbWU6IHN0cmluZywgZGF0YTogTkRBcnJheSk6IFRlbnNvciB7XG4gICAgcmV0dXJuIHRoaXMuYWRkTm9kZUFuZFJldHVybk91dHB1dChuZXcgVmFyaWFibGVOb2RlKHRoaXMsIG5hbWUsIGRhdGEpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgcGxhY2Vob2xkZXIgZm9yIGEgdGVuc29yIHRoYXQgd2lsbCBiZSBhbHdheXMgZmVkLiBQbGFjZWhvbGRlcnNcbiAgICogYXJlIGlucHV0IHRlbnNvcnMgd2hvc2UgdmFsdWVzIGFyZSBwcm92aWRlZCBieSB0aGUgY2xpZW50IHZpYSBmZWVkXG4gICAqIGRpY3Rpb25hcmllcy4gUGxhY2Vob2xkZXJzIGFyZSBub3QgdXBkYXRlZCBhcyBwYXJ0IG9mIHRyYWluaW5nOyB0aGV5IGFyZVxuICAgKiBvbmx5IHVzZWQgYXMgaW1tdXRhYmxlIGlucHV0LlxuICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGlzIHBsYWNlaG9sZGVyLlxuICAgKiBAcGFyYW0gc2hhcGUgVGhlIHNoYXBlIG9mIHRoZSBwbGFjZWhvbGRlciB0ZW5zb3IuXG4gICAqIEByZXR1cm4gVGhlIHRlbnNvciByZXByZXNlbnRpbmcgdGhlIHBsYWNlaG9sZGVyLlxuICAgKi9cbiAgcGxhY2Vob2xkZXIobmFtZTogc3RyaW5nLCBzaGFwZTogbnVtYmVyW10pOiBUZW5zb3Ige1xuICAgIHJldHVybiB0aGlzLmFkZE5vZGVBbmRSZXR1cm5PdXRwdXQobmV3IFBsYWNlaG9sZGVyTm9kZSh0aGlzLCBuYW1lLCBzaGFwZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0YW50IHZhbHVlIHRoYXQgcGVyc2lzdHMgYWNyb3NzIHNlc3Npb24gY2FsbHMuXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gcmV0dXJuLlxuICAgKiBAcmV0dXJuIEEgbm9kZSBvdXRwdXRpbmcgdGhlIGNvbnN0YW50IHZhbHVlLlxuICAgKi9cbiAgY29uc3RhbnQodmFsdWU6IEFycmF5RGF0YSk6IFRlbnNvciB7XG4gICAgbGV0IGZpbmFsVmFsdWU6IE5EQXJyYXk7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIGZpbmFsVmFsdWUgPSBTY2FsYXIubmV3KHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgTkRBcnJheSkge1xuICAgICAgZmluYWxWYWx1ZSA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgY29uc3QgdmFscyA9IG5ldyBGbG9hdDMyQXJyYXkodXRpbC5mbGF0dGVuKHZhbHVlKSk7XG4gICAgICBmaW5hbFZhbHVlID0gTkRBcnJheS5tYWtlKHV0aWwuaW5mZXJTaGFwZSh2YWx1ZSksIHt2YWx1ZXM6IHZhbHN9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmltcGxlbWVudGVkIGNvbnN0YW50IHR5cGUuJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmFkZE5vZGVBbmRSZXR1cm5PdXRwdXQobmV3IENvbnN0YW50Tm9kZSh0aGlzLCBmaW5hbFZhbHVlKSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzaGFwZSB0aGUgaW5wdXQgdGVuc29yLlxuICAgKiBAcGFyYW0geCBUaGUgaW5wdXQgdGVuc29yIHRvIGJlIHJlc2hhcGVkLlxuICAgKiBAcGFyYW0gc2hhcGUgVGhlIHNoYXBlIG9mIHRoZSBvdXRwdXQgdGVuc29yLlxuICAgKiBAcmV0dXJuIFRoZSB0ZW5zb3IgcmVwcmVzZW50aW5nIHRoZSByZXNoYXBlIG9wZXJhdGlvbi5cbiAgICovXG4gIHJlc2hhcGUoeDogVGVuc29yLCBzaGFwZTogbnVtYmVyW10pOiBUZW5zb3Ige1xuICAgIHJldHVybiB0aGlzLmFkZE5vZGVBbmRSZXR1cm5PdXRwdXQoXG4gICAgICAgIG5ldyBSZXNoYXBlTm9kZSh0aGlzLCAnUmVzaGFwZScsIHgsIHNoYXBlKSk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcHV0ZXMgYSBmdXNlZCBsaW5lYXIgY29tYmluYXRpb24gb2YgdHdvIHRlbnNvcnMuXG4gICAqIEBwYXJhbSB4MSBUaGUgZmlyc3QgaW5wdXQgdGVuc29yLlxuICAgKiBAcGFyYW0geDIgVGhlIHNlY29uZCBpbnB1dCB0ZW5zb3IuIFNhbWUgc2hhcGUgYXMgdDEuXG4gICAqIEBwYXJhbSBjMSBDb2VmZmljaWVudCBvZiB0MS4gTXVzdCBiZSBzaXplIDEuXG4gICAqIEBwYXJhbSBjMiBDb2VmZmljaWVudCBvZiB0Mi4gTXVzdCBiZSBzaXplIDEuXG4gICAqIEByZXR1cm4gVGhlIHRlbnNvciByZXByZXNlbnRpbmcgYzEqdDErYzIqdDIuXG4gICAqL1xuICBmdXNlZExpbmVhckNvbWJpbmF0aW9uKHgxOiBUZW5zb3IsIHgyOiBUZW5zb3IsIGMxOiBUZW5zb3IsIGMyOiBUZW5zb3IpOlxuICAgICAgVGVuc29yIHtcbiAgICByZXR1cm4gdGhpcy5hZGROb2RlQW5kUmV0dXJuT3V0cHV0KFxuICAgICAgICBuZXcgRnVzZWRMaW5lYXJDb21iaW5hdGlvbk5vZGUodGhpcywgeDEsIHgyLCBjMSwgYzIpKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEFkZHMgdHdvIHRlbnNvcnMgKGVsZW1lbnR3aXNlKS4gQnJvYWRjYXN0cyBpZiBvbmUgb2YgdGhlIHRlbnNvcnMgaXMgc2NhbGFyLlxuICAgKiBAcGFyYW0geDEgVGhlIGZpcnN0IGlucHV0IHRlbnNvci5cbiAgICogQHBhcmFtIHgyIFRoZSBzZWNvbmQgaW5wdXQgdGVuc29yLlxuICAgKiBAcmV0dXJuIFRoZSB0ZW5zb3IgcmVwcmVzZW50aW5nIHQxK3QyLlxuICAgKi9cbiAgYWRkKHgxOiBUZW5zb3IsIHgyOiBUZW5zb3IpOiBUZW5zb3Ige1xuICAgIHJldHVybiB0aGlzLmFkZE5vZGVBbmRSZXR1cm5PdXRwdXQobmV3IEFkZE5vZGUodGhpcywgeDEsIHgyKSk7XG4gIH1cblxuICAvKipcbiAgICogU3VidHJhY3RzIHR3byB0ZW5zb3JzIChlbGVtZW50d2lzZSkuIEJyb2FkY2FzdHMgaWYgb25lIG9mIHRoZSB0ZW5zb3JzIGlzXG4gICAqIHNjYWxhci5cbiAgICogQHBhcmFtIHgxIFRoZSBmaXJzdCBpbnB1dCB0ZW5zb3IuXG4gICAqIEBwYXJhbSB4MiBUaGUgc2Vjb25kIGlucHV0IHRlbnNvci5cbiAgICogQHJldHVybiBUaGUgdGVuc29yIHJlcHJlc2VudGluZyB0MS10Mi5cbiAgICovXG4gIHN1YnRyYWN0KHgxOiBUZW5zb3IsIHgyOiBUZW5zb3IpOiBUZW5zb3Ige1xuICAgIHJldHVybiB0aGlzLmFkZE5vZGVBbmRSZXR1cm5PdXRwdXQobmV3IFN1YnRyYWN0Tm9kZSh0aGlzLCB4MSwgeDIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNdWx0aXBseSB0d28gdGVuc29ycyAoZWxlbWVudHdpc2UpLiBCcm9hZGNhc3RzIGlmIG9uZSBvZiB0aGUgdGVuc29ycyBpc1xuICAgKiBzY2FsYXIuXG4gICAqIEBwYXJhbSB4MSBUaGUgZmlyc3QgaW5wdXQgdGVuc29yLlxuICAgKiBAcGFyYW0geDIgVGhlIHNlY29uZCBpbnB1dCB0ZW5zb3IuXG4gICAqIEByZXR1cm4gVGhlIHRlbnNvciByZXByZXNlbnRpbmcgdDEqdDIuXG4gICAqL1xuICBtdWx0aXBseSh4MTogVGVuc29yLCB4MjogVGVuc29yKTogVGVuc29yIHtcbiAgICByZXR1cm4gdGhpcy5hZGROb2RlQW5kUmV0dXJuT3V0cHV0KG5ldyBNdWx0aXBseU5vZGUodGhpcywgeDEsIHgyKSk7XG4gIH1cblxuICAvKipcbiAgICogRGl2aWRlIHR3byB0ZW5zb3JzIChlbGVtZW50d2lzZSkuIEJyb2FkY2FzdHMgaWYgb25lIG9mIHRoZSB0ZW5zb3JzIGlzXG4gICAqIHNjYWxhci5cbiAgICogQHBhcmFtIHgxIFRoZSBmaXJzdCBpbnB1dCB0ZW5zb3IuXG4gICAqIEBwYXJhbSB4MiBUaGUgc2Vjb25kIGlucHV0IHRlbnNvci5cbiAgICogQHJldHVybiBUaGUgdGVuc29yIHJlcHJlc2VudGluZyB0MSAvIHQyLlxuICAgKi9cbiAgZGl2aWRlKHgxOiBUZW5zb3IsIHgyOiBUZW5zb3IpOiBUZW5zb3Ige1xuICAgIHJldHVybiB0aGlzLmFkZE5vZGVBbmRSZXR1cm5PdXRwdXQobmV3IERpdmlkZU5vZGUodGhpcywgeDEsIHgyKSk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIHN1bSBvZiBlbGVtZW50cyBpbiB0aGUgdGVuc29yLlxuICAgKiBAcGFyYW0geCBUaGUgaW5wdXQgdGVuc29yLlxuICAgKi9cbiAgcmVkdWNlU3VtKHg6IFRlbnNvcik6IFRlbnNvciB7XG4gICAgcmV0dXJuIHRoaXMuYWRkTm9kZUFuZFJldHVybk91dHB1dChuZXcgUmVkdWNlU3VtTm9kZSh0aGlzLCB4KSk7XG4gIH1cblxuICAvKipcbiAgICogQ29uY2F0cyB0d28gM0QgdGVuc29ycyBhbG9uZyBhIGdpdmVuIGF4aXMuXG4gICAqIEBwYXJhbSB4MSBUaGUgZmlyc3QgaW5wdXQgdGVuc29yLlxuICAgKiBAcGFyYW0geDIgVGhlIHNlY29uZCBpbnB1dCB0ZW5zb3IuXG4gICAqIEByZXR1cm4gVGhlIHRlbnNvciByZXByZXNlbnRpbmcgY29uY2F0IG9mIHR3byB0ZW5zb3JzIGFsb25nIGF4aXMuXG4gICAqL1xuICBjb25jYXQzZCh4MTogVGVuc29yLCB4MjogVGVuc29yLCBheGlzOiBudW1iZXIpOiBUZW5zb3Ige1xuICAgIHJldHVybiB0aGlzLmFkZE5vZGVBbmRSZXR1cm5PdXRwdXQobmV3IENvbmNhdDNETm9kZSh0aGlzLCB4MSwgeDIsIGF4aXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wdXRlcyB0aGUgZG90IHByb2R1Y3QgYmV0d2VlbiB0d28gbWF0cmljZXMuXG4gICAqIEBwYXJhbSB4MSBUaGUgZmlyc3QgaW5wdXQgdGVuc29yLlxuICAgKiBAcGFyYW0geDIgVGhlIHNlY29uZCBpbnB1dCB0ZW5zb3IuXG4gICAqIEByZXR1cm4gVGhlIHRlbnNvciByZXByZXNlbnRpbmcgdGhlIGRvdCBwcm9kdWN0IG9mIHgxIGFuZCB4Mi5cbiAgICovXG4gIG1hdG11bCh4MTogVGVuc29yLCB4MjogVGVuc29yKTogVGVuc29yIHtcbiAgICByZXR1cm4gdGhpcy5hZGROb2RlQW5kUmV0dXJuT3V0cHV0KG5ldyBNYXRNdWxOb2RlKHRoaXMsIHgxLCB4MikpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIGEgMkQgY29udm9sdXRpb24uXG4gICAqIEBwYXJhbSB4IFRoZSBpbnB1dCB0ZW5zb3IgdG8gdGhlIGNvbnZvbHV0aW9uIG9wZXJhdGlvbi5cbiAgICogQHBhcmFtIHcgVGhlIHdlaWdodCB0ZW5zb3IgdXNlZCBieSB0aGUgY29udm9sdXRpb24gb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gYiBUaGUgYmlhcyB0ZW5zb3IgdXNlZCBieSB0aGUgY29udm9sdXRpb24gb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gZmllbGRTaXplIFRoZSBzaXplIG9mIHRoZSBjb252b2x1dGlvbmFsIGtlcm5lbC5cbiAgICogQHBhcmFtIG91dHB1dERlcHRoIFRoZSBvdXRwdXQgZGVwdGggb2YgdGhlIGNvbnZvbHV0aW9uIG9wZXJhdGlvbi5cbiAgICogQHBhcmFtIHN0cmlkZSBUaGUgc3RyaWRlIG9mIHRoZSBjb252b2x1dGlvbiBvcGVyYXRpb24uXG4gICAqIEBwYXJhbSB6ZXJvUGFkIFRoZSBhbW91bnQgb2YgemVybyBwYWRkaW5nIG9uIGFsbCBzaWRlcyBvZiB0aGUgaW5wdXQgdGVuc29yLlxuICAgKiBAcmV0dXJuIFRoZSB0ZW5zb3IgcmVwcmVzZW50aW5nIHRoZSBjb252b2x1dGlvbiBvcGVyYXRpb24uXG4gICAqL1xuICBjb252MmQoXG4gICAgICB4OiBUZW5zb3IsIHc6IFRlbnNvciwgYjogVGVuc29yLCBmaWVsZFNpemU6IG51bWJlciwgb3V0cHV0RGVwdGg6IG51bWJlcixcbiAgICAgIHN0cmlkZSA9IDEsIHplcm9QYWQ/OiBudW1iZXIpOiBUZW5zb3Ige1xuICAgIHJldHVybiB0aGlzLmFkZE5vZGVBbmRSZXR1cm5PdXRwdXQobmV3IENvbnZvbHV0aW9uMkROb2RlKFxuICAgICAgICB0aGlzLCB4LCB3LCBiLCBmaWVsZFNpemUsIG91dHB1dERlcHRoLCBzdHJpZGUsIHplcm9QYWQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wdXRlcyBhIDJEIG1heCBwb29sIG9mIHguXG4gICAqIEBwYXJhbSB4IFRoZSBpbnB1dCB0ZW5zb3IgdG8gdGhlIG1heCBwb29sIG9wZXJhdGlvbi5cbiAgICogQHBhcmFtIGZpZWxkU2l6ZSBUaGUgc2l6ZSBvZiB0aGUgY29udm9sdXRpb25hbCBrZXJuZWwuXG4gICAqIEBwYXJhbSBzdHJpZGUgVGhlIHN0cmlkZSBvZiB0aGUgY29udm9sdXRpb24gb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gemVyb1BhZCBUaGUgYW1vdW50IG9mIHplcm8gcGFkZGluZyBvbiBhbGwgc2lkZXMgb2YgdGhlIGlucHV0IHRlbnNvci5cbiAgICogQHJldHVybiBUaGUgdGVuc29yIHJlcHJlc2VudGluZyB0aGUgbWF4IHBvb2wgb3BlcmF0aW9uLlxuICAgKi9cbiAgbWF4UG9vbCh4OiBUZW5zb3IsIGZpZWxkU2l6ZTogbnVtYmVyLCBzdHJpZGUgPSAxLCB6ZXJvUGFkPzogbnVtYmVyKTogVGVuc29yIHtcbiAgICByZXR1cm4gdGhpcy5hZGROb2RlQW5kUmV0dXJuT3V0cHV0KFxuICAgICAgICBuZXcgTWF4UG9vbE5vZGUodGhpcywgeCwgZmllbGRTaXplLCBzdHJpZGUsIHplcm9QYWQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wdXRlcyBleHBvbmVudGlhbCBvZiB4IGVsZW1lbnQtd2lzZS5cbiAgICogQHBhcmFtIHggVGhlIGlucHV0IHRlbnNvciB0byB0aGUgZXhwLlxuICAgKiBAcmV0dXJuIFRoZSB0ZW5zb3IgcmVwcmVzZW50aW5nIHRoZSBlIF4geCBvcGVyYXRpb24uXG4gICAqL1xuICBleHAoeDogVGVuc29yKTogVGVuc29yIHtcbiAgICByZXR1cm4gdGhpcy5hZGROb2RlQW5kUmV0dXJuT3V0cHV0KG5ldyBFeHBOb2RlKHRoaXMsIHgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wdXRlcyBsb2cgb2YgeCBlbGVtZW50LXdpc2UuXG4gICAqIEBwYXJhbSB4IFRoZSBpbnB1dCB0ZW5zb3IgdG8gdGhlIGxvZy5cbiAgICogQHJldHVybiBUaGUgdGVuc29yIHJlcHJlc2VudGluZyB0aGUgbG4oeCkgb3BlcmF0aW9uLlxuICAgKi9cbiAgbG9nKHg6IFRlbnNvcik6IFRlbnNvciB7XG4gICAgcmV0dXJuIHRoaXMuYWRkTm9kZUFuZFJldHVybk91dHB1dChuZXcgTG9nTm9kZSh0aGlzLCB4KSk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcHV0ZXMgUmVMVSBvZiB4IGVsZW1lbnQtd2lzZS5cbiAgICogQHBhcmFtIHggVGhlIGlucHV0IHRlbnNvciB0byB0aGUgUmVMVS5cbiAgICogQHJldHVybiBUaGUgdGVuc29yIHJlcHJlc2VudGluZyB0aGUgUmVMVSBvcGVyYXRpb24uXG4gICAqL1xuICByZWx1KHg6IFRlbnNvcik6IFRlbnNvciB7XG4gICAgcmV0dXJuIHRoaXMuYWRkTm9kZUFuZFJldHVybk91dHB1dChuZXcgUmVMVU5vZGUodGhpcywgeCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIFRhbkggb2YgeCBlbGVtZW50LXdpc2UuXG4gICAqIEBwYXJhbSB4IFRoZSBpbnB1dCB0ZW5zb3IgdG8gdGhlIFRhbkguXG4gICAqIEByZXR1cm4gVGhlIHRlbnNvciByZXByZXNlbnRpbmcgdGhlIFRhbkggb3BlcmF0aW9uLlxuICAgKi9cbiAgdGFuaCh4OiBUZW5zb3IpOiBUZW5zb3Ige1xuICAgIHJldHVybiB0aGlzLmFkZE5vZGVBbmRSZXR1cm5PdXRwdXQobmV3IFRhbkhOb2RlKHRoaXMsIHgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wdXRlcyBTaWdtb2lkIG9mIHggZWxlbWVudC13aXNlLlxuICAgKiBAcGFyYW0geCBUaGUgaW5wdXQgdGVuc29yIHRvIHRoZSBzaWdtb2lkLlxuICAgKiBAcmV0dXJuIFRoZSB0ZW5zb3IgcmVwcmVzZW50aW5nIHRoZSBzaWdtb2lkIG9wZXJhdGlvbi5cbiAgICovXG4gIHNpZ21vaWQoeDogVGVuc29yKTogVGVuc29yIHtcbiAgICByZXR1cm4gdGhpcy5hZGROb2RlQW5kUmV0dXJuT3V0cHV0KG5ldyBTaWdtb2lkTm9kZSh0aGlzLCB4KSk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcHV0ZXMgc3F1YXJlIG9mIHggZWxlbWVudC13aXNlLlxuICAgKiBAcGFyYW0geCBUaGUgaW5wdXQgdGVuc29yIHRvIHRoZSBzcXVhcmUuXG4gICAqL1xuICBzcXVhcmUoeDogVGVuc29yKTogVGVuc29yIHtcbiAgICByZXR1cm4gdGhpcy5hZGROb2RlQW5kUmV0dXJuT3V0cHV0KG5ldyBTcXVhcmVOb2RlKHRoaXMsIHgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wdXRlcyBzb2Z0bWF4IHByb2JhYmlsaXRpZXMgZnJvbSBsb2dpdHMuXG4gICAqXG4gICAqIEBwYXJhbSB4IFRoZSBpbnB1dCBsb2dpdHMuXG4gICAqIEByZXR1cm4gVGhlIHNvZnRtYXggcHJvYmFiaWxpdGllcy5cbiAgICovXG4gIHNvZnRtYXgoeDogVGVuc29yKTogVGVuc29yIHtcbiAgICByZXR1cm4gdGhpcy5hZGROb2RlQW5kUmV0dXJuT3V0cHV0KG5ldyBTb2Z0bWF4Tm9kZSh0aGlzLCB4KSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHNvZnRtYXggY3Jvc3MtZW50cm9weSBjb3N0IG9wZXJhdGlvbiBpbiB0aGUgZ3JhcGguXG4gICAqIEBwYXJhbSB4IFRoZSBpbnB1dCB0ZW5zb3IgdG8gY2xhc3NpZnkuXG4gICAqIEByZXR1cm4gVGhlIHRlbnNvciByZXByZXNlbnRpbmcgdGhlIHNvZnRtYXggY3Jvc3MtZW50cm9weSBjb3N0IG9wZXJhdGlvbi5cbiAgICovXG4gIHNvZnRtYXhDcm9zc0VudHJvcHlDb3N0KHg6IFRlbnNvciwgdGFyZ2V0OiBUZW5zb3IpOiBUZW5zb3Ige1xuICAgIHJldHVybiB0aGlzLmFkZE5vZGVBbmRSZXR1cm5PdXRwdXQoXG4gICAgICAgIG5ldyBTb2Z0bWF4Q3Jvc3NFbnRyb3B5Q29zdE5vZGUodGhpcywgeCwgdGFyZ2V0KSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG1lYW4tc3F1YXJlZCBjb3N0IG9wZXJhdGlvbiBpbiB0aGUgZ3JhcGguXG4gICAqIEBwYXJhbSBsYWJlbCBUaGUgbGFiZWwgdGVuc29yLlxuICAgKiBAcGFyYW0gcHJlZGljdGlvbiBUaGUgcHJlZGljdGlvbiB0ZW5zb3IuXG4gICAqIEByZXR1cm4gVGhlIHRlbnNvciByZXByZXNlbnRpbmcgdGhlIG1lYW4tc3F1YXJlZCBjb3N0IG9wZXJhdGlvbi5cbiAgICovXG4gIG1lYW5TcXVhcmVkQ29zdChsYWJlbDogVGVuc29yLCBwcmVkaWN0aW9uOiBUZW5zb3IpIHtcbiAgICByZXR1cm4gdGhpcy5hZGROb2RlQW5kUmV0dXJuT3V0cHV0KFxuICAgICAgICBuZXcgTWVhblNxdWFyZWRDb3N0Tm9kZSh0aGlzLCBsYWJlbCwgcHJlZGljdGlvbikpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGZsYXR0ZW5lZCBpbmRleCBvZiB0aGUgbWF4aW11bSBlbnRyeSBpbiB0aGUgdGVuc29yLlxuICAgKiBAcGFyYW0geCBUaGUgdGVuc29yIHdpdGggdGhlIHZhbHVlLlxuICAgKiBAcmV0dXJuIEEgU2NhbGFyIHRlbnNvciB3aXRoIHRoZSBpbmRleCBvZiB0aGUgbWF4aW11bSBlbnRyeS5cbiAgICovXG4gIGFyZ21heCh4OiBUZW5zb3IpOiBUZW5zb3Ige1xuICAgIHJldHVybiB0aGlzLmFkZE5vZGVBbmRSZXR1cm5PdXRwdXQobmV3IEFyZ01heE5vZGUodGhpcywgeCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gYXJnbWF4IGVxdWFscyBvcGVyYXRpb24gaW4gdGhlIGdyYXBoLlxuICAgKiBAcGFyYW0geDEgRmlyc3QgaW5wdXQgdGVuc29yIHRvIGNoZWNrIGFnYWluc3QuXG4gICAqIEBwYXJhbSB4MiBTZWNvbmQgaW5wdXQgdGVuc29yIHRvIGNoZWNrIGFnYWluc3QuXG4gICAqIEByZXR1cm4gVGhlIHRlbnNvciByZXByZXNlbnRpbmcgdGhlIGFyZ21heCBlcXVhbHMgb3BlcmF0aW9uLlxuICAgKi9cbiAgYXJnbWF4RXF1YWxzKHgxOiBUZW5zb3IsIHgyOiBUZW5zb3IpOiBUZW5zb3Ige1xuICAgIHJldHVybiB0aGlzLmFkZE5vZGVBbmRSZXR1cm5PdXRwdXQobmV3IEFyZ01heEVxdWFsc05vZGUodGhpcywgeDEsIHgyKSk7XG4gIH1cblxuICBwcml2YXRlIGFkZE5vZGVBbmRSZXR1cm5PdXRwdXQobm9kZTogTm9kZSk6IFRlbnNvciB7XG4gICAgdGhpcy5ub2Rlcy5wdXNoKG5vZGUpO1xuICAgIG5vZGUudmFsaWRhdGUoKTtcbiAgICByZXR1cm4gbm9kZS5vdXRwdXQ7XG4gIH1cblxuICBnZXROb2RlcygpOiBOb2RlW10ge1xuICAgIHJldHVybiB0aGlzLm5vZGVzO1xuICB9XG5cbiAgcHJpdmF0ZSBub2RlczogTm9kZVtdID0gW107XG59XG5cbi8qKlxuICogVGVuc29yIHJlcHJlc2VudHMgdGhlIG91dHB1dCBvZiBhbiBvcGVyYXRpb24gbm9kZSBpbiB0aGUgZ3JhcGguXG4gKiBUZW5zb3JzIGhhdmUgbm8gZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlbSwgYnV0IG1haW50YWluIGEgc2hhcGUgYXJyYXlcbiAqIHRvIGRldGVybWluZSBvcGVyYXRpb24gY29tcGF0aWJpbGl0eS4gQWxsIGdyYXBoIG1ldGhvZHMgdGhhdCBjcmVhdGUgZ3JhcGhcbiAqIG9wZXJhdGlvbnMgcmV0dXJuIFRlbnNvciBvYmplY3RzLCB3aGljaCBjYW4gYmUgdGhvdWdodCBvZiBhcyAnaGFuZGxlcycgdG9cbiAqIG9wZXJhdGlvbnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUZW5zb3Ige1xuICBub2RlOiBOb2RlO1xuICBpZDogbnVtYmVyO1xuICAvKipcbiAgICogQHBhcmFtIHNoYXBlIFRoZSBzaGFwZSBvZiB0aGlzIHRlbnNvciwgaW4gZGltZW5zaW9uIHNpemVzLlxuICAgKi9cbiAgY29uc3RydWN0b3IocHVibGljIHNoYXBlOiBudW1iZXJbXSkge1xuICAgIHRoaXMuaWQgPSBUZW5zb3IubmV4dElEKys7XG4gIH1cbiAgcHJpdmF0ZSBzdGF0aWMgbmV4dElEID0gMDtcbn1cblxuLyoqXG4gKiBOb2RlIGlzIHRoZSBjb25jcmV0ZSBiYXNlIGNsYXNzIGZvciBhbGwgb3BlcmF0aW9ucyBpbiB0aGUgZ3JhcGguXG4gKiBVc2VycyBnZW5lcmFsbHkgZG9uJ3QgbmVlZCB0byBpbnRlcmFjdCBkaXJlY3RseSB3aXRoIE5vZGUgaW5zdGFuY2VzLCBidXQgdGhleVxuICogYXJlIHByb3ZpZGVkIGZvciBpbmZvcm1hdGlvbmFsIGFuZCBpbnRyb3NwZWN0aW9uIHB1cnBvc2VzLlxuICpcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIE5vZGUge1xuICAvKipcbiAgICogQHBhcmFtIGdyYXBoIFRoZSBncmFwaCBjb250YWluaW5nIHRoaXMgbm9kZVxuICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGlzIG5vZGVcbiAgICogQHBhcmFtIGlucHV0cyBBIGRpY3Rpb25hcnkgb2YgbmFtZWQgVGVuc29ycyB0aGF0IGNvbXByaXNlIHRoaXMgbm9kZSdzXG4gICAqIGlucHV0cy5cbiAgICogQHBhcmFtIG91dHB1dCBUaGlzIG5vZGUncyBvdXRwdXQgVGVuc29yXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICAgIHB1YmxpYyBncmFwaDogR3JhcGgsIHB1YmxpYyBuYW1lOiBzdHJpbmcsXG4gICAgICBwdWJsaWMgaW5wdXRzOiB7W25hbWU6IHN0cmluZ106IFRlbnNvcn0sIHB1YmxpYyBvdXRwdXQ6IFRlbnNvcikge1xuICAgIHRoaXMuaWQgPSBOb2RlLm5leHRJRCsrO1xuICAgIG91dHB1dC5ub2RlID0gdGhpcztcbiAgfVxuICBhYnN0cmFjdCB2YWxpZGF0ZSgpOiB2b2lkO1xuICBpZDogbnVtYmVyO1xuICBwcml2YXRlIHN0YXRpYyBuZXh0SUQgPSAwO1xufVxuXG4vKipcbiAqIFZhcmlhYmxlTm9kZSByZXByZXNlbnRzIGEgdmFyaWFibGUsIGEgdXNlci1wcm92aWRlZCBOREFycmF5IHRoYXQnc1xuICogYWRqdXN0ZWQgZHVyaW5nIGJhY2twcm9wYWdhdGlvbiB0cmFpbmluZy5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBWYXJpYWJsZU5vZGUgZXh0ZW5kcyBOb2RlIHtcbiAgY29uc3RydWN0b3IoZ3JhcGg6IEdyYXBoLCBuYW1lOiBzdHJpbmcsIHB1YmxpYyBkYXRhOiBOREFycmF5KSB7XG4gICAgc3VwZXIoZ3JhcGgsIG5hbWUsIHt9LCBuZXcgVGVuc29yKGRhdGEuc2hhcGUpKTtcbiAgfVxuICB2YWxpZGF0ZSgpIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgdGhpcy5kYXRhICE9IG51bGwsXG4gICAgICAgICdFcnJvciBhZGRpbmcgdmFyaWFibGUgb3A6IERhdGEgZm9yIHZhcmlhYmxlIFxcJycgKyB0aGlzLm5hbWUgK1xuICAgICAgICAgICAgJ1xcJyBpcyBudWxsIG9yIHVuZGVmaW5lZCcpO1xuICB9XG59XG5cbi8qKlxuICogUGxhY2Vob2xkZXJOb2RlIHJlcHJlc2VudHMgYSBwbGFjZWhvbGRlciwgYSB1c2VyLXByb3ZpZGVkIE5EQXJyYXlcbiAqIHRoYXQncyB1c2VkIGFzIGltbXV0YWJsZSBpbnB1dCBkdXJpbmcgaW5mZXJlbmNlIGFuZCB0cmFpbmluZy5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBQbGFjZWhvbGRlck5vZGUgZXh0ZW5kcyBOb2RlIHtcbiAgY29uc3RydWN0b3IoZ3JhcGg6IEdyYXBoLCBuYW1lOiBzdHJpbmcsIHNoYXBlOiBudW1iZXJbXSkge1xuICAgIHN1cGVyKGdyYXBoLCBuYW1lLCB7fSwgbmV3IFRlbnNvcihzaGFwZSkpO1xuICB9XG4gIHZhbGlkYXRlKCkge31cbn1cblxuLyoqXG4gKiBDb25zdGFudE5vZGUgcmVwcmVzZW50cyBhIGNvbnN0YW50IHZhbHVlIGluIHRoZSBncmFwaC5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb25zdGFudE5vZGUgZXh0ZW5kcyBOb2RlIHtcbiAgY29uc3RydWN0b3IoZ3JhcGg6IEdyYXBoLCBwdWJsaWMgZGF0YTogTkRBcnJheSkge1xuICAgIHN1cGVyKGdyYXBoLCAnQ29uc3RhbnQnLCB7fSwgbmV3IFRlbnNvcihkYXRhLnNoYXBlKSk7XG4gIH1cbiAgdmFsaWRhdGUoKSB7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHRoaXMuZGF0YSAhPSBudWxsLFxuICAgICAgICAnRXJyb3IgYWRkaW5nIGNvbnN0YW50OiBkYXRhIGZvciBwbGFjZWhvbGRlciBcXCcnICsgdGhpcy5uYW1lICtcbiAgICAgICAgICAgICdcXCcgaXMgbnVsbCBvciB1bmRlZmluZWQnKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlc2hhcGVOb2RlIHJlcHJlc2VudHMgYSByZXNoYXBlIG9wZXJhdGlvbiBpbiB0aGUgZ3JhcGguXG4gKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgUmVzaGFwZU5vZGUgZXh0ZW5kcyBOb2RlIHtcbiAgc3RhdGljIHJlYWRvbmx5IFggPSAneCc7XG4gIGNvbnN0cnVjdG9yKFxuICAgICAgZ3JhcGg6IEdyYXBoLCBwdWJsaWMgbmFtZTogc3RyaW5nLCBwcml2YXRlIHg6IFRlbnNvcixcbiAgICAgIHByaXZhdGUgc2hhcGU6IG51bWJlcltdKSB7XG4gICAgc3VwZXIoZ3JhcGgsIG5hbWUsIHt4fSwgbmV3IFRlbnNvcihzaGFwZSkpO1xuICB9XG4gIHZhbGlkYXRlKCkge1xuICAgIGNvbnN0IHhTaXplID0gdXRpbC5zaXplRnJvbVNoYXBlKHRoaXMueC5zaGFwZSk7XG4gICAgY29uc3Qgc2hhcGVTaXplID0gdXRpbC5zaXplRnJvbVNoYXBlKHRoaXMuc2hhcGUpO1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB4U2l6ZSA9PT0gc2hhcGVTaXplLFxuICAgICAgICAnRXJyb3IgbWFraW5nIHJlc2hhcGUgb3BlcmF0aW9uOiBpbnB1dCBUZW5zb3IgdG8gcmVzaGFwZSBcXCcnICtcbiAgICAgICAgICAgIHRoaXMubmFtZSArICdcXCcgb2Ygc2hhcGUgKCcgKyB0aGlzLnguc2hhcGUgK1xuICAgICAgICAgICAgJykgZG9lcyBub3QgbWF0Y2ggc2l6ZSBvZiByZXF1ZXN0ZWQgc2hhcGUgJyArIHRoaXMuc2hhcGUgKyAnLicpO1xuICB9XG59XG5cbi8qKlxuICogTGluZWFyQ29tYmluYXRpb25Ob2RlIHJlcHJlc2VudHMgYSBsaW5lYXIgY29tYmluYXRpb24gb2YgdHdvIHRlbnNvcnMuXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBGdXNlZExpbmVhckNvbWJpbmF0aW9uTm9kZSBleHRlbmRzIE5vZGUge1xuICBzdGF0aWMgcmVhZG9ubHkgVDEgPSAndDEnO1xuICBzdGF0aWMgcmVhZG9ubHkgVDIgPSAndDInO1xuICBzdGF0aWMgcmVhZG9ubHkgQzEgPSAnYzEnO1xuICBzdGF0aWMgcmVhZG9ubHkgQzIgPSAnYzInO1xuICBjb25zdHJ1Y3RvcihcbiAgICAgIGdyYXBoOiBHcmFwaCwgcHJpdmF0ZSB0MTogVGVuc29yLCBwcml2YXRlIHQyOiBUZW5zb3IsIHByaXZhdGUgYzE6IFRlbnNvcixcbiAgICAgIHByaXZhdGUgYzI6IFRlbnNvcikge1xuICAgIHN1cGVyKGdyYXBoLCAnTGluZWFyIENvbWJpbmF0aW9uJywge3QxLCB0MiwgYzEsIGMyfSwgbmV3IFRlbnNvcih0MS5zaGFwZSkpO1xuICB9XG5cbiAgdmFsaWRhdGUoKSB7XG4gICAgdXRpbC5hc3NlcnRTaGFwZXNNYXRjaCh0aGlzLnQxLnNoYXBlLCB0aGlzLnQyLnNoYXBlKTtcbiAgICBpZiAoIXV0aWwuaXNTY2FsYXJTaGFwZSh0aGlzLmMxLnNoYXBlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICdFcnJvciBhZGRpbmcgZnVzZWRMaW5lYXJDb21iaW5hdGlvbjogYzEgaXMgbm90IGEgc2NhbGFyLCBnb3QgJyArXG4gICAgICAgICAgJ3NoYXBlOiAnICsgdGhpcy5jMS5zaGFwZSk7XG4gICAgfVxuICAgIGlmICghdXRpbC5pc1NjYWxhclNoYXBlKHRoaXMuYzIuc2hhcGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ0Vycm9yIGFkZGluZyBmdXNlZExpbmVhckNvbWJpbmF0aW9uOiBjMiBpcyBub3QgYSBzY2FsYXIsIGdvdCAnICtcbiAgICAgICAgICAnc2hhcGU6ICcgKyB0aGlzLmMyLnNoYXBlKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZGROb2RlIGV4dGVuZHMgTm9kZSB7XG4gIHN0YXRpYyByZWFkb25seSBUMSA9ICd0MSc7XG4gIHN0YXRpYyByZWFkb25seSBUMiA9ICd0Mic7XG5cbiAgY29uc3RydWN0b3IoZ3JhcGg6IEdyYXBoLCBwcml2YXRlIHQxOiBUZW5zb3IsIHByaXZhdGUgdDI6IFRlbnNvcikge1xuICAgIHN1cGVyKFxuICAgICAgICBncmFwaCwgJ0FkZCcsIHt0MSwgdDJ9LFxuICAgICAgICBuZXcgVGVuc29yKHV0aWwuc2l6ZUZyb21TaGFwZSh0MS5zaGFwZSkgPT09IDEgPyB0Mi5zaGFwZSA6IHQxLnNoYXBlKSk7XG4gIH1cblxuICB2YWxpZGF0ZSgpIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgdXRpbC5zaXplRnJvbVNoYXBlKHRoaXMudDEuc2hhcGUpID09PSAxIHx8XG4gICAgICAgICAgICB1dGlsLnNpemVGcm9tU2hhcGUodGhpcy50Mi5zaGFwZSkgPT09IDEgfHxcbiAgICAgICAgICAgIHV0aWwuYXJyYXlzRXF1YWwodGhpcy50MS5zaGFwZSwgdGhpcy50Mi5zaGFwZSksXG4gICAgICAgICdFcnJvciBhZGRpbmcgYWRkIG9wZXJhdGlvbiBvcDogb25lIG9mIGlucHV0cyBtdXN0IGJlIHNjYWxhciBvciB0aGUgJyArXG4gICAgICAgICAgICAnc2hhcGVzICcgKyB0aGlzLnQxLnNoYXBlICsgJyBhbmQgJyArIHRoaXMudDIuc2hhcGUgK1xuICAgICAgICAgICAgJyBtdXN0IG1hdGNoLicpO1xuICB9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgU3VidHJhY3ROb2RlIGV4dGVuZHMgTm9kZSB7XG4gIHN0YXRpYyByZWFkb25seSBUMSA9ICd0MSc7XG4gIHN0YXRpYyByZWFkb25seSBUMiA9ICd0Mic7XG5cbiAgY29uc3RydWN0b3IoZ3JhcGg6IEdyYXBoLCBwcml2YXRlIHQxOiBUZW5zb3IsIHByaXZhdGUgdDI6IFRlbnNvcikge1xuICAgIHN1cGVyKFxuICAgICAgICBncmFwaCwgJ1N1YnRyYWN0Jywge3QxLCB0Mn0sXG4gICAgICAgIG5ldyBUZW5zb3IodXRpbC5zaXplRnJvbVNoYXBlKHQxLnNoYXBlKSA9PT0gMSA/IHQyLnNoYXBlIDogdDEuc2hhcGUpKTtcbiAgfVxuXG4gIHZhbGlkYXRlKCkge1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB1dGlsLnNpemVGcm9tU2hhcGUodGhpcy50MS5zaGFwZSkgPT09IDEgfHxcbiAgICAgICAgICAgIHV0aWwuc2l6ZUZyb21TaGFwZSh0aGlzLnQyLnNoYXBlKSA9PT0gMSB8fFxuICAgICAgICAgICAgdXRpbC5hcnJheXNFcXVhbCh0aGlzLnQxLnNoYXBlLCB0aGlzLnQyLnNoYXBlKSxcbiAgICAgICAgJ0Vycm9yIGFkZGluZyBzdWJ0cmFjdCBvcDogb25lIG9mIGlucHV0cyBtdXN0IGJlIHNjYWxhciBvciB0aGUgJyArXG4gICAgICAgICAgICAnc2hhcGVzICcgKyB0aGlzLnQxLnNoYXBlICsgJyBhbmQgJyArIHRoaXMudDIuc2hhcGUgK1xuICAgICAgICAgICAgJyBtdXN0IG1hdGNoLicpO1xuICB9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgTXVsdGlwbHlOb2RlIGV4dGVuZHMgTm9kZSB7XG4gIHN0YXRpYyByZWFkb25seSBUMSA9ICd0MSc7XG4gIHN0YXRpYyByZWFkb25seSBUMiA9ICd0Mic7XG5cbiAgY29uc3RydWN0b3IoZ3JhcGg6IEdyYXBoLCBwcml2YXRlIHQxOiBUZW5zb3IsIHByaXZhdGUgdDI6IFRlbnNvcikge1xuICAgIHN1cGVyKFxuICAgICAgICBncmFwaCwgJ011bHRpcGx5Jywge3QxLCB0Mn0sXG4gICAgICAgIG5ldyBUZW5zb3IodXRpbC5zaXplRnJvbVNoYXBlKHQxLnNoYXBlKSA9PT0gMSA/IHQyLnNoYXBlIDogdDEuc2hhcGUpKTtcbiAgfVxuXG4gIHZhbGlkYXRlKCkge1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB1dGlsLnNpemVGcm9tU2hhcGUodGhpcy50MS5zaGFwZSkgPT09IDEgfHxcbiAgICAgICAgICAgIHV0aWwuc2l6ZUZyb21TaGFwZSh0aGlzLnQyLnNoYXBlKSA9PT0gMSB8fFxuICAgICAgICAgICAgdXRpbC5hcnJheXNFcXVhbCh0aGlzLnQxLnNoYXBlLCB0aGlzLnQyLnNoYXBlKSxcbiAgICAgICAgJ0Vycm9yIGFkZGluZyBtdWx0aXBseSBvcDogb25lIG9mIGlucHV0cyBtdXN0IGJlIHNjYWxhciBvciB0aGUgJyArXG4gICAgICAgICAgICAnc2hhcGVzICcgKyB0aGlzLnQxLnNoYXBlICsgJyBhbmQgJyArIHRoaXMudDIuc2hhcGUgK1xuICAgICAgICAgICAgJyBtdXN0IG1hdGNoLicpO1xuICB9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgRGl2aWRlTm9kZSBleHRlbmRzIE5vZGUge1xuICBzdGF0aWMgcmVhZG9ubHkgVDEgPSAndDEnO1xuICBzdGF0aWMgcmVhZG9ubHkgVDIgPSAndDInO1xuXG4gIGNvbnN0cnVjdG9yKGdyYXBoOiBHcmFwaCwgcHJpdmF0ZSB0MTogVGVuc29yLCBwcml2YXRlIHQyOiBUZW5zb3IpIHtcbiAgICBzdXBlcihcbiAgICAgICAgZ3JhcGgsICdEaXZpZGUnLCB7dDEsIHQyfSxcbiAgICAgICAgbmV3IFRlbnNvcih1dGlsLnNpemVGcm9tU2hhcGUodDEuc2hhcGUpID09PSAxID8gdDIuc2hhcGUgOiB0MS5zaGFwZSkpO1xuICB9XG5cbiAgdmFsaWRhdGUoKSB7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHV0aWwuc2l6ZUZyb21TaGFwZSh0aGlzLnQxLnNoYXBlKSA9PT0gMSB8fFxuICAgICAgICAgICAgdXRpbC5zaXplRnJvbVNoYXBlKHRoaXMudDIuc2hhcGUpID09PSAxIHx8XG4gICAgICAgICAgICB1dGlsLmFycmF5c0VxdWFsKHRoaXMudDEuc2hhcGUsIHRoaXMudDIuc2hhcGUpLFxuICAgICAgICAnRXJyb3IgYWRkaW5nIGRpdmlkZSBvcDogb25lIG9mIGlucHV0cyBtdXN0IGJlIHNjYWxhciBvciB0aGUgJyArXG4gICAgICAgICAgICAnc2hhcGVzICcgKyB0aGlzLnQxLnNoYXBlICsgJyBhbmQgJyArIHRoaXMudDIuc2hhcGUgK1xuICAgICAgICAgICAgJyBtdXN0IG1hdGNoLicpO1xuICB9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgUmVkdWNlU3VtTm9kZSBleHRlbmRzIE5vZGUge1xuICBzdGF0aWMgcmVhZG9ubHkgWCA9ICd4JztcblxuICBjb25zdHJ1Y3RvcihncmFwaDogR3JhcGgsIHg6IFRlbnNvcikge1xuICAgIHN1cGVyKGdyYXBoLCAnUmVkdWNlU3VtJywge3h9LCBuZXcgVGVuc29yKFtdKSk7XG4gIH1cblxuICB2YWxpZGF0ZSgpIHt9XG59XG5cbi8qKlxuICogQ29uY2F0M0ROb2RlIHJlcHJlc2VudHMgYSAzRCBjb25jYXRlbmF0aW9uIG9mIHR3byB0ZW5zb3JzIGFsb25nIGFuIGF4aXMuXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb25jYXQzRE5vZGUgZXh0ZW5kcyBOb2RlIHtcbiAgc3RhdGljIHJlYWRvbmx5IFgxID0gJ3gxJztcbiAgc3RhdGljIHJlYWRvbmx5IFgyID0gJ3gyJztcbiAgc3RhdGljIHJlYWRvbmx5IEFYSVMgPSAnYXhpcyc7XG4gIGNvbnN0cnVjdG9yKFxuICAgICAgZ3JhcGg6IEdyYXBoLCBwcml2YXRlIHgxOiBUZW5zb3IsIHByaXZhdGUgeDI6IFRlbnNvcixcbiAgICAgIHB1YmxpYyBheGlzOiBudW1iZXIpIHtcbiAgICBzdXBlcihcbiAgICAgICAgZ3JhcGgsICdDb25jYXQzRCcsIHt4MSwgeDJ9LFxuICAgICAgICBuZXcgVGVuc29yKGNvbmNhdDNkX3V0aWwuY29tcHV0ZUNvbmNhdDNET3V0cHV0U2hhcGUoXG4gICAgICAgICAgICB4MS5zaGFwZSwgeDIuc2hhcGUsIGF4aXMpKSk7XG4gIH1cbiAgdmFsaWRhdGUoKSB7XG4gICAgY29uY2F0M2RfdXRpbC5hc3NlcnRDb25jYXQzRFNoYXBlc01hdGNoKFxuICAgICAgICB0aGlzLngxLnNoYXBlLCB0aGlzLngyLnNoYXBlLCB0aGlzLmF4aXMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldE1hdE11bE91dHB1dFNoYXBlKHgxU2hhcGU6IG51bWJlcltdLCB4MlNoYXBlOiBudW1iZXJbXSk6IG51bWJlcltdIHtcbiAgaWYgKHgxU2hhcGUubGVuZ3RoID09PSAxICYmIHgyU2hhcGUubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIFsxXTtcbiAgfSBlbHNlIGlmICh4MVNoYXBlLmxlbmd0aCA9PT0gMSAmJiB4MlNoYXBlLmxlbmd0aCA9PT0gMikge1xuICAgIHJldHVybiBbeDJTaGFwZVsxXV07XG4gIH0gZWxzZSBpZiAoeDFTaGFwZS5sZW5ndGggPT09IDIgJiYgeDJTaGFwZS5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gW3gxU2hhcGVbMF1dO1xuICB9XG4gIHJldHVybiBbeDFTaGFwZVswXSwgeDJTaGFwZVsxXV07XG59XG5cbi8qKlxuICogTWF0TXVsTm9kZSByZXByZXNlbnRzIGEgZnVsbHkgY29ubmVjdGVkIGxheWVyIGluIHRoZSBncmFwaC5cbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIE1hdE11bE5vZGUgZXh0ZW5kcyBOb2RlIHtcbiAgc3RhdGljIHJlYWRvbmx5IFgxID0gJ3gxJztcbiAgc3RhdGljIHJlYWRvbmx5IFgyID0gJ3gyJztcbiAgY29uc3RydWN0b3IoZ3JhcGg6IEdyYXBoLCBwcml2YXRlIHgxOiBUZW5zb3IsIHByaXZhdGUgeDI6IFRlbnNvcikge1xuICAgIHN1cGVyKFxuICAgICAgICBncmFwaCwgJ01hdE11bCcsIHt4MSwgeDJ9LFxuICAgICAgICBuZXcgVGVuc29yKGdldE1hdE11bE91dHB1dFNoYXBlKHgxLnNoYXBlLCB4Mi5zaGFwZSkpKTtcbiAgfVxuXG4gIHZhbGlkYXRlKCkge1xuICAgIGlmICh0aGlzLngxLnNoYXBlLmxlbmd0aCA9PT0gMiAmJiB0aGlzLngyLnNoYXBlLmxlbmd0aCA9PT0gMikge1xuICAgICAgdXRpbC5hc3NlcnQoXG4gICAgICAgICAgdGhpcy54MS5zaGFwZVsxXSA9PT0gdGhpcy54Mi5zaGFwZVswXSxcbiAgICAgICAgICAnRXJyb3IgYWRkaW5nIG1hdG11bCBvcDogaW5uZXIgc2hhcGVzIG9mIG1hdHJpY2VzIHdpdGggc2hhcGVzICcgK1xuICAgICAgICAgICAgICB0aGlzLngxLnNoYXBlICsgJyBhbmQgJyArIHRoaXMueDIuc2hhcGUgKyAnIG11c3QgbWF0Y2guJyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLngxLnNoYXBlLmxlbmd0aCA9PT0gMiAmJiB0aGlzLngyLnNoYXBlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdXRpbC5hc3NlcnQoXG4gICAgICAgICAgdGhpcy54MS5zaGFwZVsxXSA9PT0gdGhpcy54Mi5zaGFwZVswXSxcbiAgICAgICAgICAnRXJyb3IgYWRkaW5nIG1hdG11bCBvcDogc2Vjb25kIGRpbWVuc2lvbiBvZiBtYXRyaXggd2l0aCBzaGFwZSAnICtcbiAgICAgICAgICAgICAgdGhpcy54MS5zaGFwZSArICcgbXVzdCBtYXRjaCBzaXplIG9mIHZlY3RvciB3aXRoIHNoYXBlICcgK1xuICAgICAgICAgICAgICB0aGlzLngyLnNoYXBlICsgJy4nKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMueDEuc2hhcGUubGVuZ3RoID09PSAxICYmIHRoaXMueDIuc2hhcGUubGVuZ3RoID09PSAyKSB7XG4gICAgICB1dGlsLmFzc2VydChcbiAgICAgICAgICB0aGlzLngxLnNoYXBlWzBdID09PSB0aGlzLngyLnNoYXBlWzBdLFxuICAgICAgICAgICdFcnJvciBhZGRpbmcgbWF0bXVsIG9wOiBzaXplIG9mIHZlY3RvciB3aXRoIHNoYXBlICcgKyB0aGlzLngxLnNoYXBlICtcbiAgICAgICAgICAgICAgJyBtdXN0IG1hdGNoIGZpcnN0IGRpbWVuc2lvbiBvZiBtYXRyaXggd2l0aCAnICtcbiAgICAgICAgICAgICAgJ3NoYXBlICcgKyB0aGlzLngyLnNoYXBlICsgJy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICdFcnJvciBhZGRpbmcgbWF0bXVsIG9wOiBpbnB1dHMgbXVzdCBiZSB2ZWN0b3JzIG9yIG1hdHJpY2VzLicpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENvbnZvbHV0aW9uMkROb2RlIHJlcHJlc2VudHMgYSAyZCBjb252b2x1dGlvbiBvcGVyYXRpb24gaW4gdGhlIGdyYXBoLlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQ29udm9sdXRpb24yRE5vZGUgZXh0ZW5kcyBOb2RlIHtcbiAgc3RhdGljIHJlYWRvbmx5IFggPSAneCc7XG4gIHN0YXRpYyByZWFkb25seSBXID0gJ3cnO1xuICBzdGF0aWMgcmVhZG9ubHkgQiA9ICdiJztcbiAgY29uc3RydWN0b3IoXG4gICAgICBncmFwaDogR3JhcGgsIHByaXZhdGUgeDogVGVuc29yLCBwcml2YXRlIHc6IFRlbnNvciwgcHJpdmF0ZSBiOiBUZW5zb3IsXG4gICAgICBwdWJsaWMgZmllbGRTaXplOiBudW1iZXIsIHB1YmxpYyBvdXRwdXREZXB0aDogbnVtYmVyLCBwdWJsaWMgc3RyaWRlID0gMSxcbiAgICAgIHB1YmxpYyB6ZXJvUGFkPzogbnVtYmVyKSB7XG4gICAgc3VwZXIoXG4gICAgICAgIGdyYXBoLCAnQ29udm9sdXRpb24gMkQnLCB7eCwgdywgYn0sXG4gICAgICAgIG5ldyBUZW5zb3IoY29udl91dGlsLmNvbXB1dGVPdXRwdXRTaGFwZTNEKFxuICAgICAgICAgICAgeC5zaGFwZSBhcyBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIGZpZWxkU2l6ZSwgb3V0cHV0RGVwdGgsIHN0cmlkZSxcbiAgICAgICAgICAgIHplcm9QYWQpKSk7XG4gIH1cbiAgdmFsaWRhdGUoKSB7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHRoaXMueC5zaGFwZS5sZW5ndGggPT09IDMsXG4gICAgICAgICdFcnJvciBhZGRpbmcgY29udjJkIG9wOiBpbnB1dCBtdXN0IGJlIG9mIHJhbmsgMywgYnV0IGdvdCBzaGFwZTogJyArXG4gICAgICAgICAgICB0aGlzLnguc2hhcGUgKyAnLicpO1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB0aGlzLncuc2hhcGUubGVuZ3RoID09PSA0LFxuICAgICAgICAnRXJyb3IgYWRkaW5nIGNvbnYyZCBvcDogd2VpZ2h0cyBtdXN0IGJlIG9mIHJhbmsgNCwgYnV0IGdvdCBzaGFwZTogJyArXG4gICAgICAgICAgICB0aGlzLncuc2hhcGUgKyAnLicpO1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB0aGlzLmIuc2hhcGUubGVuZ3RoID09PSAxLFxuICAgICAgICAnRXJyb3IgYWRkaW5nIGNvbnYyZCBvcDogYmlhc2VzIG11c3QgYmUgb2YgcmFuayAxLCBidXQgZ290IHNoYXBlOiAnICtcbiAgICAgICAgICAgIHRoaXMuYi5zaGFwZSArICcuJyk7XG5cbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgdGhpcy54LnNoYXBlWzJdID09PSB0aGlzLncuc2hhcGVbMl0sXG4gICAgICAgICdFcnJvciBhZGRpbmcgY29udjJkIG9wOiBkZXB0aCBvZiBpbnB1dCAoJyArIHRoaXMueC5zaGFwZVsyXSArXG4gICAgICAgICAgICAnKSBtdXN0IG1hdGNoIGlucHV0IGRlcHRoIGZvciB3ZWlnaHRzICgnICsgdGhpcy53LnNoYXBlWzJdICsgJykuJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBNYXhQb29sTm9kZSByZXByZXNlbnRzIGEgMmQgbWF4IHBvb2wgb3BlcmF0aW9uIGluIHRoZSBncmFwaC5cbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIE1heFBvb2xOb2RlIGV4dGVuZHMgTm9kZSB7XG4gIHN0YXRpYyByZWFkb25seSBYID0gJ3gnO1xuICBjb25zdHJ1Y3RvcihcbiAgICAgIGdyYXBoOiBHcmFwaCwgcHJpdmF0ZSB4OiBUZW5zb3IsIHB1YmxpYyBmaWVsZFNpemU6IG51bWJlcixcbiAgICAgIHB1YmxpYyBzdHJpZGUgPSAxLCBwdWJsaWMgemVyb1BhZD86IG51bWJlcikge1xuICAgIHN1cGVyKFxuICAgICAgICBncmFwaCwgJ01heCBwb29sJywge3h9LFxuICAgICAgICBuZXcgVGVuc29yKGNvbnZfdXRpbC5jb21wdXRlT3V0cHV0U2hhcGUzRChcbiAgICAgICAgICAgIHguc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXJdLCBmaWVsZFNpemUsIHguc2hhcGVbMl0sIHN0cmlkZSxcbiAgICAgICAgICAgIHplcm9QYWQpKSk7XG4gIH1cbiAgdmFsaWRhdGUoKSB7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHRoaXMueC5zaGFwZS5sZW5ndGggPT09IDMsXG4gICAgICAgICdFcnJvciBhZGRpbmcgbWF4UG9vbCBvcDogaW5wdXQgbXVzdCBiZSBvZiByYW5rIDMsIGJ1dCBnb3Qgc2hhcGU6ICcgK1xuICAgICAgICAgICAgdGhpcy54LnNoYXBlICsgJy4nKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlTFVOb2RlIHJlcHJlc2VudHMgYSBSZUxVIG9wZXJhdGlvbiBpbiB0aGUgZ3JhcGguXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZUxVTm9kZSBleHRlbmRzIE5vZGUge1xuICBzdGF0aWMgcmVhZG9ubHkgWCA9ICd4JztcbiAgY29uc3RydWN0b3IoZ3JhcGg6IEdyYXBoLCB4OiBUZW5zb3IpIHtcbiAgICBzdXBlcihncmFwaCwgJ1JlTFUnLCB7eH0sIG5ldyBUZW5zb3IoeC5zaGFwZSkpO1xuICB9XG4gIHZhbGlkYXRlKCkge31cbn1cblxuLyoqXG4gKiBFeHBOb2RlIHJlcHJlc2VudHMgYSBFeHBvbmVudGlhdGlvbiBvcGVyYXRpb24gaW4gdGhlIGdyYXBoLlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgRXhwTm9kZSBleHRlbmRzIE5vZGUge1xuICBzdGF0aWMgcmVhZG9ubHkgWCA9ICd4JztcbiAgY29uc3RydWN0b3IoZ3JhcGg6IEdyYXBoLCB4OiBUZW5zb3IpIHtcbiAgICBzdXBlcihncmFwaCwgJ0V4cCcsIHt4fSwgbmV3IFRlbnNvcih4LnNoYXBlKSk7XG4gIH1cbiAgdmFsaWRhdGUoKSB7fVxufVxuXG4vKipcbiAqIExvZ05vZGUgcmVwcmVzZW50cyBhIEV4cG9uZW50aWF0aW9uIG9wZXJhdGlvbiBpbiB0aGUgZ3JhcGguXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dOb2RlIGV4dGVuZHMgTm9kZSB7XG4gIHN0YXRpYyByZWFkb25seSBYID0gJ3gnO1xuICBjb25zdHJ1Y3RvcihncmFwaDogR3JhcGgsIHg6IFRlbnNvcikge1xuICAgIHN1cGVyKGdyYXBoLCAnTG9nJywge3h9LCBuZXcgVGVuc29yKHguc2hhcGUpKTtcbiAgfVxuICB2YWxpZGF0ZSgpIHt9XG59XG5cbi8qKlxuICogVGFuSE5vZGUgcmVwcmVzZW50cyBhIHRhbmggb3BlcmF0aW9uIGluIHRoZSBncmFwaC5cbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIFRhbkhOb2RlIGV4dGVuZHMgTm9kZSB7XG4gIHN0YXRpYyByZWFkb25seSBYID0gJ3gnO1xuICBjb25zdHJ1Y3RvcihncmFwaDogR3JhcGgsIHg6IFRlbnNvcikge1xuICAgIHN1cGVyKGdyYXBoLCAnVGFuSCcsIHt4fSwgbmV3IFRlbnNvcih4LnNoYXBlKSk7XG4gIH1cbiAgdmFsaWRhdGUoKSB7fVxufVxuXG4vKipcbiAqIFNpZ21vaWROb2RlIHJlcHJlc2VudHMgYSBzaWdtb2lkIG9wZXJhdGlvbiBpbiB0aGUgZ3JhcGguXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBTaWdtb2lkTm9kZSBleHRlbmRzIE5vZGUge1xuICBzdGF0aWMgcmVhZG9ubHkgWCA9ICd4JztcbiAgY29uc3RydWN0b3IoZ3JhcGg6IEdyYXBoLCB4OiBUZW5zb3IpIHtcbiAgICBzdXBlcihncmFwaCwgJ1NpZ21vaWQnLCB7eH0sIG5ldyBUZW5zb3IoeC5zaGFwZSkpO1xuICB9XG4gIHZhbGlkYXRlKCkge31cbn1cblxuLyoqXG4gKiBTcXVhcmUgbm9kZSByZXByZXNlbnRzIGFuIGVsZW1lbnQtd2lzZSBzcXVhcmUgb3BlcmF0aW9uIGluIHRoZSBncmFwaC5cbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIFNxdWFyZU5vZGUgZXh0ZW5kcyBOb2RlIHtcbiAgc3RhdGljIHJlYWRvbmx5IFggPSAneCc7XG4gIGNvbnN0cnVjdG9yKGdyYXBoOiBHcmFwaCwgeDogVGVuc29yKSB7XG4gICAgc3VwZXIoZ3JhcGgsICdTcXVhcmUnLCB7eH0sIG5ldyBUZW5zb3IoeC5zaGFwZSkpO1xuICB9XG4gIHZhbGlkYXRlKCkge31cbn1cblxuLyoqXG4gKiBTb2Z0bWF4Q3Jvc3NFbnRyb3B5Q29zdE5vZGUgcmVwcmVzZW50cyBhIHNvZnRtYXggY3Jvc3MtZW50cm9weSBjb3N0IG9wZXJhdGlvblxuICogaW4gdGhlIGdyYXBoLlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgU29mdG1heENyb3NzRW50cm9weUNvc3ROb2RlIGV4dGVuZHMgTm9kZSB7XG4gIHN0YXRpYyByZWFkb25seSBYID0gJ3gnO1xuICBzdGF0aWMgcmVhZG9ubHkgVEFSR0VUID0gJ3RhcmdldCc7XG4gIGNvbnN0cnVjdG9yKGdyYXBoOiBHcmFwaCwgcHJpdmF0ZSB4OiBUZW5zb3IsIHByaXZhdGUgdGFyZ2V0OiBUZW5zb3IpIHtcbiAgICBzdXBlcihncmFwaCwgJ1NvZnRtYXhDcm9zc0VudHJvcHlDb3N0Jywge3gsIHRhcmdldH0sIG5ldyBUZW5zb3IoW10pKTtcbiAgfVxuICB2YWxpZGF0ZSgpIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgdXRpbC5hcnJheXNFcXVhbCh0aGlzLnguc2hhcGUsIHRoaXMudGFyZ2V0LnNoYXBlKSxcbiAgICAgICAgJ0Vycm9yIGFkZGluZyBzb2Z0bWF4Q3Jvc3NFbnRyb3B5Q29zdCBvcDogeCBzaGFwZSAoJyArIHRoaXMueC5zaGFwZSArXG4gICAgICAgICAgICAnKSBtdXN0IG1hdGNoIHRhcmdldCBzaGFwZSAoJyArIHRoaXMudGFyZ2V0LnNoYXBlICsgJykuJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBTb2Z0bWF4Tm9kZSBleHRlbmRzIE5vZGUge1xuICBzdGF0aWMgcmVhZG9ubHkgWCA9ICd4JztcblxuICBjb25zdHJ1Y3RvcihncmFwaDogR3JhcGgsIHByaXZhdGUgeDogVGVuc29yKSB7XG4gICAgc3VwZXIoZ3JhcGgsICdTb2Z0bWF4Jywge3h9LCBuZXcgVGVuc29yKHguc2hhcGUpKTtcbiAgfVxuICB2YWxpZGF0ZSgpIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgdGhpcy54LnNoYXBlLmxlbmd0aCA9PT0gMSxcbiAgICAgICAgJ1RoZSBpbnB1dCB0byBhIHNvZnRtYXggbXVzdCBiZSBhIDEtRCB0ZW5zb3InKTtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgdGhpcy54LnNoYXBlWzBdID49IDIsXG4gICAgICAgICdUaGUgaW5wdXQgdG8gYSBzb2Z0bWF4IG11c3QgaGF2ZSBhdCBsZWFzdCAyIHZhbHVlcycpO1xuICB9XG59XG5cbi8qKlxuICogTWVhblNxdWFyZWRDb3N0Tm9kZSByZXByZXNlbnRzIGEgbWVhbiBzcXVhcmVkIGNvc3Qgb3BlcmF0aW9uXG4gKiBpbiB0aGUgZ3JhcGguXG4gKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgTWVhblNxdWFyZWRDb3N0Tm9kZSBleHRlbmRzIE5vZGUge1xuICBzdGF0aWMgcmVhZG9ubHkgTEFCRUwgPSAnbGFiZWwnO1xuICBzdGF0aWMgcmVhZG9ubHkgUFJFRElDVElPTiA9ICdwcmVkaWN0aW9uJztcbiAgY29uc3RydWN0b3IoZ3JhcGg6IEdyYXBoLCBwcml2YXRlIGxhYmVsOiBUZW5zb3IsIHByaXZhdGUgcHJlZGljdGlvbjogVGVuc29yKSB7XG4gICAgc3VwZXIoZ3JhcGgsICdNZWFuIFNxdWFyZWQgQ29zdCcsIHtsYWJlbCwgcHJlZGljdGlvbn0sIG5ldyBUZW5zb3IoW10pKTtcbiAgfVxuICB2YWxpZGF0ZSgpIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgdXRpbC5hcnJheXNFcXVhbCh0aGlzLmxhYmVsLnNoYXBlLCB0aGlzLnByZWRpY3Rpb24uc2hhcGUpLFxuICAgICAgICAnRXJyb3IgYWRkaW5nIG1lYW5TcXVhcmVkQ29zdCBvcDogbGFiZWwgc2hhcGUgKCcgKyB0aGlzLmxhYmVsLnNoYXBlICtcbiAgICAgICAgICAgICcpIG11c3QgbWF0Y2ggcHJlZGljdGlvbiBzaGFwZSAoJyArIHRoaXMucHJlZGljdGlvbi5zaGFwZSArICcpLicpO1xuICB9XG59XG5cbi8qKlxuICogQXJnTWF4Tm9kZSByZXByZXNlbnRzIGFuIGFyZ21heCBvcGVyYXRpb24gaW4gdGhlIGdyYXBoLlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQXJnTWF4Tm9kZSBleHRlbmRzIE5vZGUge1xuICBzdGF0aWMgcmVhZG9ubHkgWCA9ICd4JztcbiAgY29uc3RydWN0b3IoZ3JhcGg6IEdyYXBoLCBwdWJsaWMgeDogVGVuc29yKSB7XG4gICAgc3VwZXIoZ3JhcGgsICdBcmdNYXgnLCB7eH0sIG5ldyBUZW5zb3IoWzFdKSk7XG4gIH1cbiAgdmFsaWRhdGUoKSB7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHV0aWwuc2l6ZUZyb21TaGFwZSh0aGlzLnguc2hhcGUpID4gMCxcbiAgICAgICAgJ0Vycm9yIGFkZGluZyBhcmdtYXggb3A6IGlucHV0IHRlbnNvciBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIGVudHJ5LicpO1xuICB9XG59XG5cbi8qKlxuICogQXJnTWF4RXF1YWxzTm9kZSByZXByZXNlbnRzIGEgYXJnbWF4IGVxdWFscyBvcGVyYXRpb24gaW4gdGhlIGdyYXBoLlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQXJnTWF4RXF1YWxzTm9kZSBleHRlbmRzIE5vZGUge1xuICBzdGF0aWMgcmVhZG9ubHkgWDEgPSAneDEnO1xuICBzdGF0aWMgcmVhZG9ubHkgWDIgPSAneDInO1xuICBjb25zdHJ1Y3RvcihncmFwaDogR3JhcGgsIHByaXZhdGUgeDE6IFRlbnNvciwgcHJpdmF0ZSB4MjogVGVuc29yKSB7XG4gICAgc3VwZXIoZ3JhcGgsICdBcmdNYXhFcXVhbHMnLCB7eDEsIHgyfSwgbmV3IFRlbnNvcihbMV0pKTtcbiAgfVxuICB2YWxpZGF0ZSgpIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgdXRpbC5hcnJheXNFcXVhbCh0aGlzLngxLnNoYXBlLCB0aGlzLngyLnNoYXBlKSxcbiAgICAgICAgJ0Vycm9yIGFkZGluZyBBcmdNYXhFcXVhbHMgb3A6IHgxIHNoYXBlICgnICsgdGhpcy54MS5zaGFwZSArXG4gICAgICAgICAgICAnKSBtdXN0IG1hdGNoIHgyIHNoYXBlICgnICsgdGhpcy54Mi5zaGFwZSArICcpLicpO1xuICB9XG59XG5cbi8qKlxuICogU3BsaXQgbm9kZXMgYXJlIHVzZWQgdG8gYWNjdW11bGF0ZSBiYWNrcHJvcCBkZXJpdmF0aXZlcyB3aGVuIGEgbm9kZSdzIG91dHB1dFxuICogdGVuc29yIGlzIGNvbnN1bWVkIGJ5IG11bHRpcGxlIG5vZGVzLlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgU3BsaXROb2RlIGV4dGVuZHMgTm9kZSB7XG4gIHN0YXRpYyByZWFkb25seSBYID0gJ3gnO1xuXG4gIG91dHB1dHM6IFRlbnNvcltdID0gW107XG5cbiAgY29uc3RydWN0b3IoZ3JhcGg6IEdyYXBoLCB4OiBUZW5zb3IpIHtcbiAgICBzdXBlcihncmFwaCwgJ1NwbGl0Tm9kZScsIHt4fSwgbmV3IFRlbnNvcih4LnNoYXBlKSk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbmV3IGNvbnN1bWVyIG9mIHRoaXMgc3BsaXQgbm9kZSwgaS5lLiBhIG5ldyBub2RlIHRoYXQgdXNlcyB0aGVcbiAgICogbm9kZSdzIG91dHB1dCB0ZW5zb3IuXG4gICAqL1xuICBnZXROZXdPdXRwdXRUZW5zb3IoKTogVGVuc29yIHtcbiAgICBjb25zdCBvdXRwdXQgPSBuZXcgVGVuc29yKHRoaXMuaW5wdXRzW1NwbGl0Tm9kZS5YXS5zaGFwZSk7XG4gICAgb3V0cHV0Lm5vZGUgPSB0aGlzO1xuICAgIHRoaXMub3V0cHV0cy5wdXNoKG91dHB1dCk7XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuICB2YWxpZGF0ZSgpIHt9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgdHlwZSBBcnJheURhdGEgPVxuICAgIE5EQXJyYXl8bnVtYmVyfG51bWJlcltdfG51bWJlcltdW118bnVtYmVyW11bXVtdfG51bWJlcltdW11bXVtdO1xuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge0dyYXBoLCBUZW5zb3J9IGZyb20gJy4vZ3JhcGgnO1xuaW1wb3J0IHtJbml0aWFsaXplciwgVmFyaWFuY2VTY2FsaW5nSW5pdGlhbGl6ZXIsIFplcm9zSW5pdGlhbGl6ZXJ9IGZyb20gJy4vaW5pdGlhbGl6ZXJzJztcbmltcG9ydCB7TkRBcnJheX0gZnJvbSAnLi9tYXRoL25kYXJyYXknO1xuXG4vKipcbiAqIEEgbGF5ZXJzIHN1Z2FyIGNsYXNzIGFyb3VuZCB0aGUgZ3JhcGggdGhhdCBpbml0aWFsaXplcyB2YXJpYWJsZXNcbiAqIGF1dG9tYXRpY2FsbHkgZm9yIGxheWVycy5cbiAqL1xuZXhwb3J0IGNsYXNzIEdyYXBoTGF5ZXJzIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBnOiBHcmFwaCkge31cblxuICBkZW5zZShcbiAgICAgIG5hbWU6IHN0cmluZywgeDogVGVuc29yLCB1bml0czogbnVtYmVyLFxuICAgICAgYWN0aXZhdGlvbjogKCh4OiBUZW5zb3IpID0+IFRlbnNvcil8bnVsbCA9IG51bGwsIHVzZUJpYXMgPSB0cnVlLFxuICAgICAga2VybmVsSW5pdGlhbGl6ZXI6IEluaXRpYWxpemVyID0gbmV3IFZhcmlhbmNlU2NhbGluZ0luaXRpYWxpemVyKCksXG4gICAgICBiaWFzSW5pdGlhbGl6ZXI6IEluaXRpYWxpemVyID0gbmV3IFplcm9zSW5pdGlhbGl6ZXIoKSkge1xuICAgIGNvbnN0IHdlaWdodHMgPSB0aGlzLmcudmFyaWFibGUoXG4gICAgICAgIG5hbWUgKyAnLXdlaWdodHMnLFxuICAgICAgICBrZXJuZWxJbml0aWFsaXplci5pbml0aWFsaXplKFt4LnNoYXBlWzBdLCB1bml0c10sIHguc2hhcGVbMF0sIHVuaXRzKSk7XG5cbiAgICBsZXQgb3V0ID0gdGhpcy5nLm1hdG11bCh4LCB3ZWlnaHRzKTtcblxuICAgIGlmICh1c2VCaWFzKSB7XG4gICAgICBjb25zdCBiaWFzID0gdGhpcy5nLnZhcmlhYmxlKFxuICAgICAgICAgIG5hbWUgKyAnLWJpYXMnLFxuICAgICAgICAgIGJpYXNJbml0aWFsaXplci5pbml0aWFsaXplKFt1bml0c10sIHguc2hhcGVbMF0sIHVuaXRzKSk7XG4gICAgICBvdXQgPSB0aGlzLmcuYWRkKG91dCwgYmlhcyk7XG4gICAgfVxuXG4gICAgaWYgKGFjdGl2YXRpb24gIT0gbnVsbCkge1xuICAgICAgb3V0ID0gYWN0aXZhdGlvbihvdXQpO1xuICAgIH1cblxuICAgIHJldHVybiBvdXQ7XG4gIH1cbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0ICogYXMgZGF0YXNldCBmcm9tICcuL2RhdGFzZXQnO1xuaW1wb3J0IHtHcmFwaCwgVGVuc29yfSBmcm9tICcuL2dyYXBoJztcbmltcG9ydCB7SW5wdXRQcm92aWRlcn0gZnJvbSAnLi9pbnB1dF9wcm92aWRlcic7XG5pbXBvcnQge05EQXJyYXlNYXRofSBmcm9tICcuL21hdGgvbWF0aCc7XG5pbXBvcnQge05EQXJyYXlNYXRoQ1BVfSBmcm9tICcuL21hdGgvbWF0aF9jcHUnO1xuaW1wb3J0IHtOREFycmF5LCBTY2FsYXJ9IGZyb20gJy4vbWF0aC9uZGFycmF5JztcbmltcG9ydCB7T3B0aW1pemVyfSBmcm9tICcuL29wdGltaXplcic7XG5pbXBvcnQge0Nvc3RSZWR1Y3Rpb24sIEZlZWRFbnRyeSwgU2Vzc2lvbn0gZnJvbSAnLi9zZXNzaW9uJztcblxuY29uc3QgREVGQVVMVF9FVkFMX0lOVEVSVkFMX01TID0gMTUwMDtcbmNvbnN0IERFRkFVTFRfQ09TVF9JTlRFUlZBTF9NUyA9IDUwMDtcbmNvbnN0IERFRkFVTFRfSU5GRVJFTkNFX0VYQU1QTEVfSU5URVJWQUxfTVMgPSAzMDAwO1xuXG5leHBvcnQgaW50ZXJmYWNlIEdyYXBoUnVubmVyRXZlbnRPYnNlcnZlciB7XG4gIGJhdGNoZXNUcmFpbmVkQ2FsbGJhY2s/OiAodG90YWxCYXRjaGVzVHJhaW5lZDogbnVtYmVyKSA9PiB2b2lkO1xuICBhdmdDb3N0Q2FsbGJhY2s/OiAoYXZnQ29zdDogU2NhbGFyKSA9PiB2b2lkO1xuICBtZXRyaWNDYWxsYmFjaz86IChtZXRyaWM6IE5EQXJyYXkpID0+IHZvaWQ7XG4gIGluZmVyZW5jZUV4YW1wbGVzQ2FsbGJhY2s/OlxuICAgICAgKGZlZWRzOiBGZWVkRW50cnlbXVtdLCBpbmZlcmVuY2VWYWx1ZXM6IE5EQXJyYXlbXSkgPT4gdm9pZDtcbiAgaW5mZXJlbmNlRXhhbXBsZXNQZXJTZWNDYWxsYmFjaz86IChleGFtcGxlc1BlclNlYzogbnVtYmVyKSA9PiB2b2lkO1xuICB0cmFpbkV4YW1wbGVzUGVyU2VjQ2FsbGJhY2s/OiAoZXhhbXBsZXNQZXJTZWM6IG51bWJlcikgPT4gdm9pZDtcbiAgdG90YWxUaW1lQ2FsbGJhY2s/OiAodG90YWxUaW1lU2VjOiBudW1iZXIpID0+IHZvaWQ7XG4gIGRvbmVUcmFpbmluZ0NhbGxiYWNrPzogKCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGVudW0gTWV0cmljUmVkdWN0aW9uIHtcbiAgU1VNLFxuICBNRUFOXG59XG5cbi8qKlxuICogQSBjbGFzcyB0aGF0IGRyaXZlcyB0aGUgdHJhaW5pbmcgb2YgYSBncmFwaCBtb2RlbCBnaXZlbiBhIGRhdGFzZXQuIEl0IGFsbG93c1xuICogdGhlIHVzZXIgdG8gcHJvdmlkZSBhIHNldCBvZiBjYWxsYmFja3MgZm9yIG1lYXN1cmVtZW50cyBsaWtlIGNvc3QsIGFjY3VyYWN5LFxuICogYW5kIHNwZWVkIG9mIHRyYWluaW5nLlxuICovXG5leHBvcnQgY2xhc3MgR3JhcGhSdW5uZXIge1xuICBwcml2YXRlIGNvc3RUZW5zb3I6IFRlbnNvcjtcbiAgcHJpdmF0ZSB0cmFpbkZlZWRFbnRyaWVzOiBGZWVkRW50cnlbXTtcbiAgcHJpdmF0ZSBiYXRjaFNpemU6IG51bWJlcjtcbiAgcHJpdmF0ZSBvcHRpbWl6ZXI6IE9wdGltaXplcjtcbiAgcHJpdmF0ZSBjdXJyZW50VHJhaW5Mb29wTnVtQmF0Y2hlczogbnVtYmVyfHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBjb3N0SW50ZXJ2YWxNczogbnVtYmVyO1xuXG4gIHByaXZhdGUgbWV0cmljVGVuc29yOiBUZW5zb3J8dW5kZWZpbmVkO1xuICBwcml2YXRlIG1ldHJpY0ZlZWRFbnRyaWVzOiBGZWVkRW50cnlbXXx1bmRlZmluZWQ7XG4gIHByaXZhdGUgbWV0cmljQmF0Y2hTaXplOiBudW1iZXJ8dW5kZWZpbmVkO1xuICBwcml2YXRlIG1ldHJpY1JlZHVjdGlvbjogTWV0cmljUmVkdWN0aW9uO1xuICBwcml2YXRlIG1ldHJpY0ludGVydmFsTXM6IG51bWJlcjtcblxuICBwcml2YXRlIGluZmVyZW5jZVRlbnNvcjogVGVuc29yO1xuICBwcml2YXRlIGluZmVyZW5jZUZlZWRFbnRyaWVzOiBGZWVkRW50cnlbXXx1bmRlZmluZWQ7XG4gIHByaXZhdGUgaW5mZXJlbmNlRXhhbXBsZUludGVydmFsTXM6IG51bWJlcjtcbiAgcHJpdmF0ZSBpbmZlcmVuY2VFeGFtcGxlQ291bnQ6IG51bWJlcjtcblxuICAvLyBSdW50aW1lIGluZm9ybWF0aW9uLlxuICBwcml2YXRlIGlzVHJhaW5pbmc6IGJvb2xlYW47XG4gIHByaXZhdGUgdG90YWxCYXRjaGVzVHJhaW5lZDogbnVtYmVyO1xuICBwcml2YXRlIGJhdGNoZXNUcmFpbmVkVGhpc1J1bjogbnVtYmVyO1xuICBwcml2YXRlIGxhc3RDb21wdXRlZE1ldHJpYzogTkRBcnJheTtcblxuICBwcml2YXRlIGlzSW5mZXJyaW5nOiBib29sZWFuO1xuICBwcml2YXRlIGN1cnJlbnRJbmZlcmVuY2VMb29wTnVtUGFzc2VzOiBudW1iZXJ8dW5kZWZpbmVkO1xuICBwcml2YXRlIGluZmVyZW5jZVBhc3Nlc1RoaXNSdW46IG51bWJlcjtcblxuICBwcml2YXRlIHRyYWluU3RhcnRUaW1lc3RhbXA6IG51bWJlcjtcbiAgcHJpdmF0ZSBsYXN0Q29zdFRpbWVzdGFtcCA9IDA7XG4gIHByaXZhdGUgbGFzdEV2YWxUaW1lc3RhbXAgPSAwO1xuXG4gIHByaXZhdGUgbGFzdFN0b3BUaW1lc3RhbXA6IG51bWJlcnxudWxsO1xuICBwcml2YXRlIHRvdGFsSWRsZVRpbWVNcyA9IDA7XG5cbiAgcHJpdmF0ZSB6ZXJvU2NhbGFyOiBTY2FsYXI7XG4gIHByaXZhdGUgbWV0cmljQmF0Y2hTaXplU2NhbGFyOiBTY2FsYXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICBwcml2YXRlIG1hdGg6IE5EQXJyYXlNYXRoLCBwcml2YXRlIHNlc3Npb246IFNlc3Npb24sXG4gICAgICBwcml2YXRlIGV2ZW50T2JzZXJ2ZXI6IEdyYXBoUnVubmVyRXZlbnRPYnNlcnZlcikge1xuICAgIHRoaXMucmVzZXRTdGF0aXN0aWNzKCk7XG4gICAgdGhpcy56ZXJvU2NhbGFyID0gU2NhbGFyLm5ldygwKTtcbiAgfVxuXG4gIHJlc2V0U3RhdGlzdGljcygpIHtcbiAgICB0aGlzLnRvdGFsQmF0Y2hlc1RyYWluZWQgPSAwO1xuICAgIHRoaXMudG90YWxJZGxlVGltZU1zID0gMDtcbiAgICB0aGlzLmxhc3RTdG9wVGltZXN0YW1wID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCB0aGUgdHJhaW5pbmcgbG9vcCB3aXRoIGFuIG9wdGlvbmFsIG51bWJlciBvZiBiYXRjaGVzIHRvIHRyYWluIGZvci5cbiAgICogT3B0aW9uYWxseSB0YWtlcyBhIG1ldHJpYyB0ZW5zb3IgYW5kIGZlZWQgZW50cmllcyB0byBjb21wdXRlIHBlcmlvZGljYWxseS5cbiAgICogVGhpcyBjYW4gYmUgdXNlZCBmb3IgY29tcHV0aW5nIGFjY3VyYWN5LCBvciBhIHNpbWlsYXIgbWV0cmljLlxuICAgKi9cbiAgdHJhaW4oXG4gICAgICBjb3N0VGVuc29yOiBUZW5zb3IsIHRyYWluRmVlZEVudHJpZXM6IEZlZWRFbnRyeVtdLCBiYXRjaFNpemU6IG51bWJlcixcbiAgICAgIG9wdGltaXplcjogT3B0aW1pemVyLCBudW1CYXRjaGVzPzogbnVtYmVyLCBtZXRyaWNUZW5zb3I/OiBUZW5zb3IsXG4gICAgICBtZXRyaWNGZWVkRW50cmllcz86IEZlZWRFbnRyeVtdLCBtZXRyaWNCYXRjaFNpemU/OiBudW1iZXIsXG4gICAgICBtZXRyaWNSZWR1Y3Rpb24gPSBNZXRyaWNSZWR1Y3Rpb24uTUVBTixcbiAgICAgIGV2YWxJbnRlcnZhbE1zID0gREVGQVVMVF9FVkFMX0lOVEVSVkFMX01TLFxuICAgICAgY29zdEludGVydmFsTXMgPSBERUZBVUxUX0NPU1RfSU5URVJWQUxfTVMpIHtcbiAgICB0aGlzLmNvc3RUZW5zb3IgPSBjb3N0VGVuc29yO1xuICAgIHRoaXMudHJhaW5GZWVkRW50cmllcyA9IHRyYWluRmVlZEVudHJpZXM7XG4gICAgdGhpcy5tZXRyaWNUZW5zb3IgPSBtZXRyaWNUZW5zb3I7XG4gICAgdGhpcy5tZXRyaWNGZWVkRW50cmllcyA9IG1ldHJpY0ZlZWRFbnRyaWVzO1xuICAgIGlmIChtZXRyaWNCYXRjaFNpemUgIT0gbnVsbCAmJiB0aGlzLm1ldHJpY0JhdGNoU2l6ZSAhPT0gbWV0cmljQmF0Y2hTaXplKSB7XG4gICAgICBpZiAodGhpcy5tZXRyaWNCYXRjaFNpemVTY2FsYXIgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLm1ldHJpY0JhdGNoU2l6ZVNjYWxhci5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgICB0aGlzLm1ldHJpY0JhdGNoU2l6ZVNjYWxhciA9IFNjYWxhci5uZXcobWV0cmljQmF0Y2hTaXplKTtcbiAgICB9XG4gICAgdGhpcy5tZXRyaWNCYXRjaFNpemUgPSBtZXRyaWNCYXRjaFNpemU7XG4gICAgdGhpcy5tZXRyaWNSZWR1Y3Rpb24gPSBtZXRyaWNSZWR1Y3Rpb247XG4gICAgdGhpcy5iYXRjaFNpemUgPSBiYXRjaFNpemU7XG4gICAgdGhpcy5vcHRpbWl6ZXIgPSBvcHRpbWl6ZXI7XG5cbiAgICB0aGlzLm1ldHJpY0ludGVydmFsTXMgPSBldmFsSW50ZXJ2YWxNcztcbiAgICB0aGlzLmNvc3RJbnRlcnZhbE1zID0gY29zdEludGVydmFsTXM7XG4gICAgdGhpcy5jdXJyZW50VHJhaW5Mb29wTnVtQmF0Y2hlcyA9IG51bUJhdGNoZXM7XG5cbiAgICB0aGlzLmJhdGNoZXNUcmFpbmVkVGhpc1J1biA9IDA7XG4gICAgdGhpcy5pc1RyYWluaW5nID0gdHJ1ZTtcbiAgICB0aGlzLnRyYWluU3RhcnRUaW1lc3RhbXAgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB0aGlzLnRyYWluTmV0d29yaygpO1xuICB9XG5cbiAgc3RvcFRyYWluaW5nKCkge1xuICAgIHRoaXMuaXNUcmFpbmluZyA9IGZhbHNlO1xuICAgIHRoaXMubGFzdFN0b3BUaW1lc3RhbXAgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgfVxuXG4gIHJlc3VtZVRyYWluaW5nKCkge1xuICAgIHRoaXMuaXNUcmFpbmluZyA9IHRydWU7XG4gICAgaWYgKHRoaXMubGFzdFN0b3BUaW1lc3RhbXAgIT0gbnVsbCkge1xuICAgICAgdGhpcy50b3RhbElkbGVUaW1lTXMgKz0gcGVyZm9ybWFuY2Uubm93KCkgLSB0aGlzLmxhc3RTdG9wVGltZXN0YW1wO1xuICAgIH1cbiAgICB0aGlzLnRyYWluTmV0d29yaygpO1xuICB9XG5cbiAgcHJpdmF0ZSB0cmFpbk5ldHdvcmsoKSB7XG4gICAgaWYgKHRoaXMuYmF0Y2hlc1RyYWluZWRUaGlzUnVuID09PSB0aGlzLmN1cnJlbnRUcmFpbkxvb3BOdW1CYXRjaGVzKSB7XG4gICAgICB0aGlzLnN0b3BUcmFpbmluZygpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc1RyYWluaW5nKSB7XG4gICAgICBpZiAodGhpcy5ldmVudE9ic2VydmVyLmRvbmVUcmFpbmluZ0NhbGxiYWNrICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5ldmVudE9ic2VydmVyLmRvbmVUcmFpbmluZ0NhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBjb25zdCBzaG91bGRDb21wdXRlQ29zdCA9IHRoaXMuZXZlbnRPYnNlcnZlci5hdmdDb3N0Q2FsbGJhY2sgIT0gbnVsbCAmJlxuICAgICAgICAoc3RhcnQgLSB0aGlzLmxhc3RDb3N0VGltZXN0YW1wID4gdGhpcy5jb3N0SW50ZXJ2YWxNcyk7XG4gICAgaWYgKHNob3VsZENvbXB1dGVDb3N0KSB7XG4gICAgICB0aGlzLmxhc3RDb3N0VGltZXN0YW1wID0gc3RhcnQ7XG4gICAgfVxuXG4gICAgY29uc3QgY29zdFJlZHVjdGlvbiA9XG4gICAgICAgIHNob3VsZENvbXB1dGVDb3N0ID8gQ29zdFJlZHVjdGlvbi5NRUFOIDogQ29zdFJlZHVjdGlvbi5OT05FO1xuXG4gICAgdGhpcy5tYXRoLnNjb3BlKChrZWVwKSA9PiB7XG4gICAgICBjb25zdCBhdmdDb3N0ID0gdGhpcy5zZXNzaW9uLnRyYWluKFxuICAgICAgICAgIHRoaXMuY29zdFRlbnNvciwgdGhpcy50cmFpbkZlZWRFbnRyaWVzLCB0aGlzLmJhdGNoU2l6ZSxcbiAgICAgICAgICB0aGlzLm9wdGltaXplciwgY29zdFJlZHVjdGlvbik7XG5cbiAgICAgIGlmIChzaG91bGRDb21wdXRlQ29zdCkge1xuICAgICAgICBjb25zdCB0cmFpblRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0O1xuXG4gICAgICAgIHRoaXMuZXZlbnRPYnNlcnZlci5hdmdDb3N0Q2FsbGJhY2shKGF2Z0Nvc3QpO1xuXG4gICAgICAgIGlmICh0aGlzLmV2ZW50T2JzZXJ2ZXIudHJhaW5FeGFtcGxlc1BlclNlY0NhbGxiYWNrICE9IG51bGwpIHtcbiAgICAgICAgICBjb25zdCBleGFtcGxlc1BlclNlYyA9ICh0aGlzLmJhdGNoU2l6ZSAqIDEwMDAgLyB0cmFpblRpbWUpO1xuICAgICAgICAgIHRoaXMuZXZlbnRPYnNlcnZlci50cmFpbkV4YW1wbGVzUGVyU2VjQ2FsbGJhY2soZXhhbXBsZXNQZXJTZWMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmV2ZW50T2JzZXJ2ZXIubWV0cmljQ2FsbGJhY2sgIT0gbnVsbCAmJlxuICAgICAgICAgIHRoaXMubWV0cmljRmVlZEVudHJpZXMgIT0gbnVsbCAmJlxuICAgICAgICAgIHN0YXJ0IC0gdGhpcy5sYXN0RXZhbFRpbWVzdGFtcCA+IHRoaXMubWV0cmljSW50ZXJ2YWxNcykge1xuICAgICAgICB0aGlzLmxhc3RFdmFsVGltZXN0YW1wID0gc3RhcnQ7XG5cbiAgICAgICAgaWYgKHRoaXMubGFzdENvbXB1dGVkTWV0cmljICE9IG51bGwpIHtcbiAgICAgICAgICB0aGlzLmxhc3RDb21wdXRlZE1ldHJpYy5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0Q29tcHV0ZWRNZXRyaWMgPSB0aGlzLmNvbXB1dGVNZXRyaWMoKTtcbiAgICAgICAgdGhpcy5ldmVudE9ic2VydmVyLm1ldHJpY0NhbGxiYWNrKHRoaXMubGFzdENvbXB1dGVkTWV0cmljKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZXZlbnRPYnNlcnZlci50b3RhbFRpbWVDYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuZXZlbnRPYnNlcnZlci50b3RhbFRpbWVDYWxsYmFjayhcbiAgICAgICAgICAgIChzdGFydCAtIHRoaXMudHJhaW5TdGFydFRpbWVzdGFtcCkgLyAxMDAwKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5iYXRjaGVzVHJhaW5lZFRoaXNSdW4rKztcbiAgICAgIHRoaXMudG90YWxCYXRjaGVzVHJhaW5lZCsrO1xuXG4gICAgICBpZiAodGhpcy5ldmVudE9ic2VydmVyLmJhdGNoZXNUcmFpbmVkQ2FsbGJhY2sgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLmV2ZW50T2JzZXJ2ZXIuYmF0Y2hlc1RyYWluZWRDYWxsYmFjayh0aGlzLnRvdGFsQmF0Y2hlc1RyYWluZWQpO1xuICAgICAgfVxuXG4gICAgfSk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnRyYWluTmV0d29yaygpKTtcbiAgfVxuXG4gIGluZmVyKFxuICAgICAgaW5mZXJlbmNlVGVuc29yOiBUZW5zb3IsIGluZmVyZW5jZUZlZWRFbnRyaWVzOiBGZWVkRW50cnlbXSxcbiAgICAgIGluZmVyZW5jZUV4YW1wbGVJbnRlcnZhbE1zID0gREVGQVVMVF9JTkZFUkVOQ0VfRVhBTVBMRV9JTlRFUlZBTF9NUyxcbiAgICAgIGluZmVyZW5jZUV4YW1wbGVDb3VudCA9IDUsIG51bVBhc3Nlcz86IG51bWJlcikge1xuICAgIGlmICh0aGlzLmV2ZW50T2JzZXJ2ZXIuaW5mZXJlbmNlRXhhbXBsZXNDYWxsYmFjayA9PSBudWxsICYmXG4gICAgICAgIHRoaXMuZXZlbnRPYnNlcnZlci5pbmZlcmVuY2VFeGFtcGxlc1BlclNlY0NhbGxiYWNrID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnQ2Fubm90IHN0YXJ0IGluZmVyZW5jZSBsb29wLCBubyBpbmZlcmVuY2UgZXhhbXBsZSBvciAnICtcbiAgICAgICAgICAnZXhhbXBsZXMvc2VjIG9ic2VydmVyIHByb3ZpZGVkLicpO1xuICAgIH1cblxuICAgIC8vIE1ha2Ugc3VyZSB0aGUgZmVlZCB2YWx1ZXMgYXJlIHByb3ZpZGVycywgYW5kIG5vdCBOREFycmF5cy5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluZmVyZW5jZUZlZWRFbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBmZWVkRW50cnkgPSBpbmZlcmVuY2VGZWVkRW50cmllc1tpXTtcblxuICAgICAgaWYgKGZlZWRFbnRyeS5kYXRhIGluc3RhbmNlb2YgTkRBcnJheSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAnQ2Fubm90IHN0YXJ0IGluZmVyZW5jZSBvbiB0aGUgbW9kZWwgcnVubmVyIHdpdGggZmVlZCBlbnRyaWVzIG9mICcgK1xuICAgICAgICAgICAgJ3R5cGUgTkRBcnJheS4gUGxlYXNlIHVzZSBJbnB1dFByb3ZpZGVycy4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmluZmVyZW5jZUV4YW1wbGVJbnRlcnZhbE1zID0gaW5mZXJlbmNlRXhhbXBsZUludGVydmFsTXM7XG4gICAgdGhpcy5pbmZlcmVuY2VUZW5zb3IgPSBpbmZlcmVuY2VUZW5zb3I7XG4gICAgdGhpcy5pbmZlcmVuY2VGZWVkRW50cmllcyA9IGluZmVyZW5jZUZlZWRFbnRyaWVzO1xuICAgIHRoaXMuaW5mZXJlbmNlRXhhbXBsZUNvdW50ID0gaW5mZXJlbmNlRXhhbXBsZUNvdW50O1xuICAgIHRoaXMuY3VycmVudEluZmVyZW5jZUxvb3BOdW1QYXNzZXMgPSBudW1QYXNzZXM7XG4gICAgaWYgKCF0aGlzLmlzSW5mZXJyaW5nKSB7XG4gICAgICB0aGlzLmluZmVyZW5jZVBhc3Nlc1RoaXNSdW4gPSAwO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmluZmVyTmV0d29yaygpKTtcbiAgICB9XG4gICAgdGhpcy5pc0luZmVycmluZyA9IHRydWU7XG4gIH1cblxuICBwcml2YXRlIGluZmVyTmV0d29yaygpIHtcbiAgICBpZiAoIXRoaXMuaXNJbmZlcnJpbmcgfHxcbiAgICAgICAgdGhpcy5pbmZlcmVuY2VQYXNzZXNUaGlzUnVuID09PSB0aGlzLmN1cnJlbnRJbmZlcmVuY2VMb29wTnVtUGFzc2VzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5tYXRoLnNjb3BlKChrZWVwLCB0cmFjaykgPT4ge1xuICAgICAgY29uc3QgZmVlZHM6IEZlZWRFbnRyeVtdW10gPSBbXTtcbiAgICAgIGNvbnN0IGluZmVyZW5jZVZhbHVlczogTkRBcnJheVtdID0gW107XG5cbiAgICAgIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5mZXJlbmNlRXhhbXBsZUNvdW50OyBpKyspIHtcbiAgICAgICAgLy8gUG9wdWxhdGUgYSBuZXcgRmVlZEVudHJ5W10gcG9wdWxhdGVkIHdpdGggTkRBcnJheXMuXG4gICAgICAgIGNvbnN0IG5kYXJyYXlGZWVkRW50cmllczogRmVlZEVudHJ5W10gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmluZmVyZW5jZUZlZWRFbnRyaWVzIS5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGNvbnN0IGZlZWRFbnRyeSA9IHRoaXMuaW5mZXJlbmNlRmVlZEVudHJpZXMhW2pdO1xuICAgICAgICAgIG5kYXJyYXlGZWVkRW50cmllcy5wdXNoKHtcbiAgICAgICAgICAgIHRlbnNvcjogZmVlZEVudHJ5LnRlbnNvcixcbiAgICAgICAgICAgIGRhdGE6XG4gICAgICAgICAgICAgICAgdHJhY2soKGZlZWRFbnRyeS5kYXRhIGFzIElucHV0UHJvdmlkZXIpLmdldE5leHRDb3B5KHRoaXMubWF0aCkpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZmVlZHMucHVzaChuZGFycmF5RmVlZEVudHJpZXMpO1xuXG4gICAgICAgIGluZmVyZW5jZVZhbHVlcy5wdXNoKFxuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLmV2YWwodGhpcy5pbmZlcmVuY2VUZW5zb3IsIG5kYXJyYXlGZWVkRW50cmllcykpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5ldmVudE9ic2VydmVyLmluZmVyZW5jZUV4YW1wbGVzUGVyU2VjQ2FsbGJhY2sgIT0gbnVsbCkge1xuICAgICAgICAvLyBGb3JjZSBhIEdQVSBkb3dubG9hZCwgc2luY2UgaW5mZXJlbmNlIHJlc3VsdHMgYXJlIGdlbmVyYWxseSBuZWVkZWQgb25cbiAgICAgICAgLy8gdGhlIENQVSBhbmQgaXQncyBtb3JlIGZhaXIgdG8gaW5jbHVkZSBibG9ja2luZyBvbiB0aGUgR1BVIHRvIGNvbXBsZXRlXG4gICAgICAgIC8vIGl0cyB3b3JrIGZvciB0aGUgaW5mZXJlbmNlIG1lYXN1cmVtZW50LlxuICAgICAgICBpbmZlcmVuY2VWYWx1ZXNbaW5mZXJlbmNlVmFsdWVzLmxlbmd0aCAtIDFdLmdldFZhbHVlcygpO1xuXG4gICAgICAgIGNvbnN0IGluZmVyZW5jZUV4YW1wbGVzUGVyU2VjVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQ7XG5cbiAgICAgICAgY29uc3QgZXhhbXBsZXNQZXJTZWMgPVxuICAgICAgICAgICAgKHRoaXMuaW5mZXJlbmNlRXhhbXBsZUNvdW50ICogMTAwMCAvIGluZmVyZW5jZUV4YW1wbGVzUGVyU2VjVGltZSk7XG4gICAgICAgIHRoaXMuZXZlbnRPYnNlcnZlci5pbmZlcmVuY2VFeGFtcGxlc1BlclNlY0NhbGxiYWNrIShleGFtcGxlc1BlclNlYyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmV2ZW50T2JzZXJ2ZXIuaW5mZXJlbmNlRXhhbXBsZXNDYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuZXZlbnRPYnNlcnZlci5pbmZlcmVuY2VFeGFtcGxlc0NhbGxiYWNrKGZlZWRzLCBpbmZlcmVuY2VWYWx1ZXMpO1xuICAgICAgfVxuICAgICAgdGhpcy5pbmZlcmVuY2VQYXNzZXNUaGlzUnVuKys7XG5cbiAgICB9KTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuaW5mZXJOZXR3b3JrKCksIHRoaXMuaW5mZXJlbmNlRXhhbXBsZUludGVydmFsTXMpO1xuICB9XG5cbiAgc3RvcEluZmVycmluZygpIHtcbiAgICB0aGlzLmlzSW5mZXJyaW5nID0gZmFsc2U7XG4gIH1cblxuICBpc0luZmVyZW5jZVJ1bm5pbmcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNJbmZlcnJpbmc7XG4gIH1cblxuICBjb21wdXRlTWV0cmljKCk6IFNjYWxhciB7XG4gICAgaWYgKHRoaXMubWV0cmljRmVlZEVudHJpZXMgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgY29tcHV0ZSBtZXRyaWMsIG5vIG1ldHJpYyBGZWVkRW50cmllcyBwcm92aWRlZC4nKTtcbiAgICB9XG5cbiAgICBsZXQgbWV0cmljID0gdGhpcy56ZXJvU2NhbGFyO1xuXG4gICAgcmV0dXJuIHRoaXMubWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1ldHJpY0JhdGNoU2l6ZSE7IGkrKykge1xuICAgICAgICBjb25zdCBtZXRyaWNWYWx1ZSA9XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24uZXZhbCh0aGlzLm1ldHJpY1RlbnNvciEsIHRoaXMubWV0cmljRmVlZEVudHJpZXMhKTtcblxuICAgICAgICBtZXRyaWMgPSB0aGlzLm1hdGguYWRkKG1ldHJpYywgbWV0cmljVmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5tZXRyaWNSZWR1Y3Rpb24gPT09IE1ldHJpY1JlZHVjdGlvbi5NRUFOKSB7XG4gICAgICAgIG1ldHJpYyA9IHRoaXMubWF0aC5kaXZpZGUobWV0cmljLCB0aGlzLm1ldHJpY0JhdGNoU2l6ZVNjYWxhcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBtZXRyaWM7XG4gICAgfSk7XG4gIH1cblxuICBnZXRUb3RhbEJhdGNoZXNUcmFpbmVkKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMudG90YWxCYXRjaGVzVHJhaW5lZDtcbiAgfVxuXG4gIGdldExhc3RDb21wdXRlZE1ldHJpYygpOiBTY2FsYXIge1xuICAgIHJldHVybiB0aGlzLmxhc3RDb21wdXRlZE1ldHJpYztcbiAgfVxuXG4gIHNldE1hdGgobWF0aDogTkRBcnJheU1hdGgpIHtcbiAgICB0aGlzLm1hdGggPSBtYXRoO1xuICB9XG5cbiAgc2V0U2Vzc2lvbihzZXNzaW9uOiBTZXNzaW9uKSB7XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgfVxuXG4gIHNldEluZmVyZW5jZVRlbnNvcihpbmZlcmVuY2VUZW5zb3I6IFRlbnNvcikge1xuICAgIHRoaXMuaW5mZXJlbmNlVGVuc29yID0gaW5mZXJlbmNlVGVuc29yO1xuICB9XG5cbiAgc2V0SW5mZXJlbmNlRXhhbXBsZUNvdW50KGluZmVyZW5jZUV4YW1wbGVDb3VudDogbnVtYmVyKSB7XG4gICAgdGhpcy5pbmZlcmVuY2VFeGFtcGxlQ291bnQgPSBpbmZlcmVuY2VFeGFtcGxlQ291bnQ7XG4gIH1cbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtDb25zdGFudE5vZGUsIEdyYXBoLCBOb2RlLCBQbGFjZWhvbGRlck5vZGUsIFRlbnNvciwgVmFyaWFibGVOb2RlfSBmcm9tICcuL2dyYXBoJztcbmltcG9ydCAqIGFzIHByaW9yaXR5X3F1ZXVlIGZyb20gJy4vcHJpb3JpdHlfcXVldWUnO1xuaW1wb3J0IHtQcmlvcml0eVF1ZXVlfSBmcm9tICcuL3ByaW9yaXR5X3F1ZXVlJztcbmltcG9ydCB7VGVuc29yQXJyYXlNYXB9IGZyb20gJy4vdGVuc29yX2FycmF5X21hcCc7XG5cbi8qKlxuICogR2l2ZW4gYSB0YXJnZXQgbm9kZSBpbiBhIGdyYXBoLCBhY2N1bXVsYXRlIHRoZSBzZXQgb2YgYWxsIG5vZGVzIHRoYXQgbmVlZCB0b1xuICogYmUgZXZhbHVhdGVkIGluIG9yZGVyIHRvIGV2YWx1YXRlIHRoZSB0YXJnZXQgZ3JhcGguIFRyYXZlcnNhbCBzdG9wcyBhbnl3aGVyZVxuICogYSBub2RlJ3MgdmFsdWVzIGFyZSBmZWQgaW4gZXh0ZXJuYWxseSB2aWEgXCJmZWVkIGRpY3RzXCIuXG4gKiBAcGFyYW0gbm9kZXMgVGhlIG5vZGVzIHRvIGJlIGV2YWx1YXRlZC5cbiAqIEBwYXJhbSB0ZXJtaW5hdGluZ05vZGVzIFRoZSBzZXQgb2Ygbm9kZXMgdGhhdCBzdG9wIHRyYXZlcnNhbC5cbiAqIEByZXR1cm4gVGhlIHVub3JkZXJlZCBzZXQgb2Ygbm9kZXMgdGhhdCBuZWVkIHRvIGJlIGV2YWx1YXRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVub3JkZXJlZEV2YWx1YXRpb25TZXQoXG4gICAgbm9kZXM6IE5vZGVbXSwgdGVybWluYXRpbmdOb2RlczogTm9kZVtdKTogTm9kZVtdIHtcbiAgY29uc3QgdGVybWluYXRpbmdOb2RlTWFwOiB7W2lkOiBudW1iZXJdOiBOb2RlfSA9IHt9O1xuICBjb25zdCBzZWVuOiB7W2lkOiBudW1iZXJdOiBOb2RlfSA9IHt9O1xuICBjb25zdCBzZXQ6IE5vZGVbXSA9IFtdO1xuICBjb25zdCB2aXNpdDogTm9kZVtdID0gbm9kZXMuc2xpY2UoKTtcbiAgdGVybWluYXRpbmdOb2Rlcy5mb3JFYWNoKG5vZGUgPT4gdGVybWluYXRpbmdOb2RlTWFwW25vZGUuaWRdID0gbm9kZSk7XG4gIC8qIEZsb29kIGZpbGw6IFdoaWxlIHRoZSAndG8gdmlzaXQnIHN0YWNrIGlzIG5vdCBlbXB0eSwgcG9wIGEgbm9kZSBvZmYgb2YgaXQuXG4gICAqIElmIHRoZSBub2RlIGhhcyBub3QgeWV0IGJlZW4gdmlzaXRlZCwgYWRkIGl0IHRvIHRoZSBzZXQsIG1hcmsgaXQgYXMgc2VlbixcbiAgICogYW5kIGVucXVldWUgYWxsIG9mIGl0cyBhbmNlc3RvciAoaW5wdXQpIG5vZGVzLiAqL1xuICB3aGlsZSAodmlzaXQubGVuZ3RoICE9PSAwKSB7XG4gICAgY29uc3QgY3VyID0gdmlzaXQucG9wKCkhO1xuICAgIGlmIChzZWVuW2N1ci5pZF0gPT0gbnVsbCkge1xuICAgICAgaWYgKHRlcm1pbmF0aW5nTm9kZU1hcFtjdXIuaWRdID09IG51bGwpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoY3VyLmlucHV0cylcbiAgICAgICAgICAgIC5tYXAoaW5wdXROYW1lID0+IGN1ci5pbnB1dHNbaW5wdXROYW1lXSlcbiAgICAgICAgICAgIC5mb3JFYWNoKGlucHV0ID0+IHZpc2l0LnB1c2goaW5wdXQubm9kZSkpO1xuICAgICAgfVxuICAgICAgc2V0LnB1c2goY3VyKTtcbiAgICAgIHNlZW5bY3VyLmlkXSA9IGN1cjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNldDtcbn1cblxuLyoqXG4gKiBHaXZlbiBhIHNldCBvZiBub2RlcywgY29tcHV0ZSB0aGVpciBvcmRlciBzdWNoIHRoYXQgYWxsIGRlcGVuZGVudCBub2RlcyBhcmVcbiAqIGV2YWx1YXRlZCBhZnRlciB0aGVpciBkZXBlbmRlZXMuIFRoaXMgaXMgdGhlICdpbmZlcmVuY2Ugb3JkZXInIGZvciBub2RlcyBpblxuICogdGhlIG9wZXJhdGlvbiBncmFwaC5cbiAqIEBwYXJhbSB1bm9yZGVyZWRFdmFsdWF0aW9uU2V0IFRoZSB1bm9yZGVyZWQgc2V0IG9mIG5vZGVzIHRoYXQgbmVlZCB0byBiZVxuICogZXZhbHVhdGVkLlxuICogQHJldHVybiBUaGUgaW5wdXQgbm9kZXMgaW4gZm9yd2FyZCBldmFsdWF0aW9uIG9yZGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JkZXJlZEV2YWx1YXRpb25TZXQodW5vcmRlcmVkRXZhbHVhdGlvblNldDogTm9kZVtdKTpcbiAgICBOb2RlW10ge1xuICAvKiBBIHByaW9yaXR5IHF1ZXVlIGlzIHVzZWQsIHdoZXJlIHRoZSBwcmlvcml0eSBpcyB0aGUgcmVtYWluaW5nIG51bWJlciBvZlxuICAgKiB1bmV2YWx1YXRlZCBub2RlcyB3aG9zZSBpbnB1dHMgY29tZSBmcm9tIHRoZSBlbGVtZW50IG5vZGUuIFRoaXMgZ3VhcmFudGVlc1xuICAgKiB0aGF0IGFsbCBkb3duc3RyZWFtIG5vZGVzIHdpbGwgYmUgZGVxdWV1ZWQgYmVmb3JlIHRoZWlyIGFuY2VzdG9ycy4gKi9cbiAgY29uc3Qgc2V0OiBOb2RlW10gPSBbXTtcbiAgY29uc3Qgbm9kZUluZGljZXM6IHtbaWQ6IG51bWJlcl06IG51bWJlcn0gPSB7fTtcbiAgY29uc3QgcGVuZGluZ0RlcGVuZGVuY2llczoge1tpZDogbnVtYmVyXTogbnVtYmVyfSA9IHt9O1xuXG4gIC8qIFRoZSBxdWV1ZSBwcmlvcml0eSBjYWxsYmFjayBsb29rcyBhdCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgZGVwZW5kZW5jaWVzIG9mXG4gICAqIGEgZ2l2ZW4gbm9kZS4gVGhlIHF1ZXVlIGluZGV4IG9ic2VydmVyIGNhbGxiYWNrIG1haW50YWlucyB0aGUgbG9jYXRpb24gb2ZcbiAgICogZWFjaCBub2RlIGluIHRoZSBhcnJheSwgZm9yIHByaW9yaXR5IHVwZGF0ZXMuICovXG4gIGNvbnN0IG5vZGVRdWV1ZSA9IG5ldyBQcmlvcml0eVF1ZXVlPE5vZGU+KFxuICAgICAgKGE6IE5vZGUsIGI6IE5vZGUpID0+IHByaW9yaXR5X3F1ZXVlLmRlZmF1bHRDb21wYXJlKFxuICAgICAgICAgIHBlbmRpbmdEZXBlbmRlbmNpZXNbYS5pZF0sIHBlbmRpbmdEZXBlbmRlbmNpZXNbYi5pZF0pLFxuICAgICAgKG5vZGU6IE5vZGUsIG5ld0luZGV4OiBudW1iZXIpID0+IG5vZGVJbmRpY2VzW25vZGUuaWRdID0gbmV3SW5kZXgpO1xuXG4gIHVub3JkZXJlZEV2YWx1YXRpb25TZXQuZm9yRWFjaChub2RlID0+IHBlbmRpbmdEZXBlbmRlbmNpZXNbbm9kZS5pZF0gPSAwKTtcblxuICAvKiBGb3IgZXZlcnkgZGVzY2VuZGVudCBvZiBhIG5vZGUgKG91dHB1dCBvZiBhbmNlc3RvciBpcyBpbnB1dCB0byBkZXNjZW5kYW50KSxcbiAgICogaW5jcmVtZW50IHRoZSAncGVuZGluZyBkZXBlbmRlbmN5IGNvdW50JyBmb3IgdGhlIGFuY2VzdG9yLiBUaGlzIHByZXBhcmVzXG4gICAqIHRoZSAncGVuZGluZyBkZXBlbmRlbmN5IGNvdW50JyBhcyBhIHByaW9yaXR5IG1hcC4gKi9cbiAgdW5vcmRlcmVkRXZhbHVhdGlvblNldC5mb3JFYWNoKFxuICAgICAgbm9kZSA9PiBPYmplY3Qua2V5cyhub2RlLmlucHV0cylcbiAgICAgICAgICAgICAgICAgIC5tYXAoa2V5ID0+IG5vZGUuaW5wdXRzW2tleV0pXG4gICAgICAgICAgICAgICAgICAuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1bm9yZGVyZWRFdmFsdWF0aW9uU2V0LmluZGV4T2YoaW5wdXQubm9kZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0RlcGVuZGVuY2llc1tpbnB1dC5ub2RlLmlkXSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgdW5vcmRlcmVkRXZhbHVhdGlvblNldC5mb3JFYWNoKG5vZGUgPT4gbm9kZVF1ZXVlLmVucXVldWUobm9kZSkpO1xuXG4gIHdoaWxlICghbm9kZVF1ZXVlLmVtcHR5KCkpIHtcbiAgICBzZXQudW5zaGlmdChub2RlUXVldWUuZGVxdWV1ZSgpKTtcbiAgICAvKiBBcyBlYWNoIG5vZGUgaXMgdmlzaXRlZCwgZGVjcmVtZW50IHRoZSAncGVuZGluZyBkZXBlbmRlbmN5IGNvdW50JyBvZlxuICAgICAqIGVhY2ggYW5jZXN0b3IsIGFuZCB0ZWxsIHRoZSBwcmlvcml0eSBxdWV1ZSB0aGF0IHRoZSBwcmlvcml0eSBoYXMgY2hhbmdlZC5cbiAgICAgKi9cbiAgICBPYmplY3Qua2V5cyhzZXRbMF0uaW5wdXRzKS5tYXAoa2V5ID0+IHNldFswXS5pbnB1dHNba2V5XSkuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICBpZiAodW5vcmRlcmVkRXZhbHVhdGlvblNldC5pbmRleE9mKGlucHV0Lm5vZGUpID09PSAtMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBwZW5kaW5nRGVwZW5kZW5jaWVzW2lucHV0Lm5vZGUuaWRdLS07XG4gICAgICBub2RlUXVldWUudXBkYXRlKGlucHV0Lm5vZGUsIG5vZGVJbmRpY2VzW2lucHV0Lm5vZGUuaWRdKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBzZXQ7XG59XG5cbi8qKlxuICogQHJldHVybiBUcnVlIGlmZiB0aGUgbm9kZSBpcyBhbiBpbnB1dCBub2RlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJbnB1dE5vZGUobm9kZTogTm9kZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gT2JqZWN0LmtleXMobm9kZS5pbnB1dHMpLmxlbmd0aCA9PT0gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZEJhY2tQcm9wKHQ6IFRlbnNvcik6IGJvb2xlYW4ge1xuICByZXR1cm4gISh0Lm5vZGUgaW5zdGFuY2VvZiBDb25zdGFudE5vZGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQYXNzdGhyb3VnaE5vZGUobm9kZTogTm9kZSwgbWFwOiBUZW5zb3JBcnJheU1hcCk6IGJvb2xlYW4ge1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMobm9kZS5pbnB1dHMpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBpbnB1dCA9IG5vZGUuaW5wdXRzW2tleXNbaV1dO1xuICAgIGlmIChtYXAuZ2V0KGlucHV0LCB0cnVlKSA9PT0gbWFwLmdldChub2RlLm91dHB1dCwgdHJ1ZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCAqIGFzIGNvbnZfdXRpbCBmcm9tICcuL21hdGgvY29udl91dGlsJztcbmltcG9ydCAqIGFzIGdwZ3B1X3V0aWwgZnJvbSAnLi9tYXRoL3dlYmdsL2dwZ3B1X3V0aWwnO1xuaW1wb3J0ICogYXMgcmVuZGVyX25kYXJyYXlfZ3B1X3V0aWwgZnJvbSAnLi9tYXRoL3dlYmdsL3JlbmRlcl9uZGFycmF5X2dwdV91dGlsJztcbmltcG9ydCAqIGFzIHdlYmdsX3V0aWwgZnJvbSAnLi9tYXRoL3dlYmdsL3dlYmdsX3V0aWwnO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuL3V0aWwnO1xuXG5leHBvcnQge0NoZWNrcG9pbnRMb2FkZXJ9IGZyb20gJy4vY2hlY2twb2ludF9sb2FkZXInO1xuZXhwb3J0IHtEYXRhU3RhdHMsIEluTWVtb3J5RGF0YXNldH0gZnJvbSAnLi9kYXRhc2V0JztcbmV4cG9ydCB7R3JhcGgsIFRlbnNvcn0gZnJvbSAnLi9ncmFwaCc7XG5leHBvcnQge0dyYXBoUnVubmVyLCBHcmFwaFJ1bm5lckV2ZW50T2JzZXJ2ZXIsIE1ldHJpY1JlZHVjdGlvbn0gZnJvbSAnLi9ncmFwaF9ydW5uZXInO1xuZXhwb3J0IHtDb25zdGFudEluaXRpYWxpemVyLCBJbml0aWFsaXplciwgTkRBcnJheUluaXRpYWxpemVyLCBPbmVzSW5pdGlhbGl6ZXIsIFJhbmRvbU5vcm1hbEluaXRpYWxpemVyLCBSYW5kb21UcnVuY2F0ZWROb3JtYWxJbml0aWFsaXplciwgUmFuZG9tVW5pZm9ybUluaXRpYWxpemVyLCBWYXJpYW5jZVNjYWxpbmdJbml0aWFsaXplciwgWmVyb3NJbml0aWFsaXplcn0gZnJvbSAnLi9pbml0aWFsaXplcnMnO1xuZXhwb3J0IHtJbkNQVU1lbW9yeVNodWZmbGVkSW5wdXRQcm92aWRlckJ1aWxkZXIsIEluR1BVTWVtb3J5U2h1ZmZsZWRJbnB1dFByb3ZpZGVyQnVpbGRlciwgSW5wdXRQcm92aWRlcn0gZnJvbSAnLi9pbnB1dF9wcm92aWRlcic7XG5leHBvcnQge01hdHJpeE9yaWVudGF0aW9uLCBOREFycmF5TWF0aH0gZnJvbSAnLi9tYXRoL21hdGgnO1xuZXhwb3J0IHtOREFycmF5TWF0aENQVX0gZnJvbSAnLi9tYXRoL21hdGhfY3B1JztcbmV4cG9ydCB7TkRBcnJheU1hdGhHUFV9IGZyb20gJy4vbWF0aC9tYXRoX2dwdSc7XG5leHBvcnQge0FycmF5MUQsIEFycmF5MkQsIEFycmF5M0QsIEFycmF5NEQsIE5EQXJyYXksIFNjYWxhcn0gZnJvbSAnLi9tYXRoL25kYXJyYXknO1xuZXhwb3J0IHtHUEdQVUNvbnRleHR9IGZyb20gJy4vbWF0aC93ZWJnbC9ncGdwdV9jb250ZXh0JztcbmV4cG9ydCB7T3B0aW1pemVyfSBmcm9tICcuL29wdGltaXplcic7XG5leHBvcnQge0Nvc3RSZWR1Y3Rpb24sIEZlZWRFbnRyeSwgU2Vzc2lvbn0gZnJvbSAnLi9zZXNzaW9uJztcbmV4cG9ydCB7U0dET3B0aW1pemVyfSBmcm9tICcuL3NnZF9vcHRpbWl6ZXInO1xuLy8gU2Vjb25kIGxldmVsIGV4cG9ydHMuXG5leHBvcnQge2NvbnZfdXRpbCwgZ3BncHVfdXRpbCwgcmVuZGVyX25kYXJyYXlfZ3B1X3V0aWwsIHV0aWwsIHdlYmdsX3V0aWx9O1xuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge05EQXJyYXl9IGZyb20gJy4vbWF0aC9uZGFycmF5JztcblxuLyoqXG4gKiBJbml0aWFsaXplciBpbnRlcmZhY2UsIGFsbCBpbml0aWFsaXplciBpbXBsZW1lbnQgdGhpcyBpbnRlcmZhY2UuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSW5pdGlhbGl6ZXIge1xuICBpbml0aWFsaXplKHdlaWdodHNTaGFwZTogbnVtYmVyW10sIGlucHV0VW5pdHM6IG51bWJlciwgb3V0cHV0VW5pdHM6IG51bWJlcik6XG4gICAgICBOREFycmF5O1xufVxuXG5leHBvcnQgY2xhc3MgVmFyaWFuY2VTY2FsaW5nSW5pdGlhbGl6ZXIgaW1wbGVtZW50cyBJbml0aWFsaXplciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgICAgcHJpdmF0ZSBzY2FsZSA9IDEuMCxcbiAgICAgIHByaXZhdGUgbW9kZTogJ2Zhbl9pbid8J2Zhbl9vdXQnfCdmYW5fYXZnJyA9ICdmYW5faW4nLFxuICAgICAgcHJpdmF0ZSBkaXN0cmlidXRpb246ICd1bmlmb3JtJ3wnbm9ybWFsJyA9ICdub3JtYWwnKSB7fVxuXG4gIGluaXRpYWxpemUod2VpZ2h0c1NoYXBlOiBudW1iZXJbXSwgaW5wdXRVbml0czogbnVtYmVyLCBvdXRwdXRVbml0czogbnVtYmVyKTpcbiAgICAgIE5EQXJyYXkge1xuICAgIGxldCBuID0gMDtcbiAgICBpZiAodGhpcy5tb2RlID09PSAnZmFuX2luJykge1xuICAgICAgbiA9IGlucHV0VW5pdHM7XG4gICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09ICdmYW5fb3V0Jykge1xuICAgICAgbiA9IG91dHB1dFVuaXRzO1xuICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSAnZmFuX2F2ZycpIHtcbiAgICAgIG4gPSAoaW5wdXRVbml0cyArIG91dHB1dFVuaXRzKSAvIDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnVW5leHBlY3RlZCBtb2RlIGZvciB2YXJpYW5jZSBzY2FsaW5nIGluaXRpYWxpemVyOiAnICsgdGhpcy5tb2RlKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5kaXN0cmlidXRpb24gPT09ICdub3JtYWwnKSB7XG4gICAgICByZXR1cm4gTkRBcnJheS5yYW5kVHJ1bmNhdGVkTm9ybWFsKFxuICAgICAgICAgIHdlaWdodHNTaGFwZSwgMC4wLCBNYXRoLnNxcnQodGhpcy5zY2FsZSAvIG4pKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZGlzdHJpYnV0aW9uID09PSAndW5pZm9ybScpIHtcbiAgICAgIHJldHVybiBOREFycmF5LnJhbmRVbmlmb3JtKFxuICAgICAgICAgIHdlaWdodHNTaGFwZSwgMC4wLCBNYXRoLnNxcnQoMyAqIHRoaXMuc2NhbGUgLyBuKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnVW5leHBlY3RlZCBkaXN0cmlidXRpb24gZm9yIHZhcmlhbmNlIHNjYWxpbmcgaW5pdGlhbGl6ZXI6ICcgK1xuICAgICAgICAgIHRoaXMuZGlzdHJpYnV0aW9uKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFplcm9zSW5pdGlhbGl6ZXIgaW1wbGVtZW50cyBJbml0aWFsaXplciB7XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBpbml0aWFsaXplKHdlaWdodHNTaGFwZTogbnVtYmVyW10sIGlucHV0VW5pdHM6IG51bWJlciwgb3V0cHV0VW5pdHM6IG51bWJlcik6XG4gICAgICBOREFycmF5IHtcbiAgICByZXR1cm4gTkRBcnJheS56ZXJvcyh3ZWlnaHRzU2hhcGUpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBPbmVzSW5pdGlhbGl6ZXIgaW1wbGVtZW50cyBJbml0aWFsaXplciB7XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBpbml0aWFsaXplKHdlaWdodHNTaGFwZTogbnVtYmVyW10sIGlucHV0VW5pdHM6IG51bWJlciwgb3V0cHV0VW5pdHM6IG51bWJlcik6XG4gICAgICBOREFycmF5IHtcbiAgICBjb25zdCB2YWx1ZXMgPSBOREFycmF5Lnplcm9zKHdlaWdodHNTaGFwZSk7XG4gICAgdmFsdWVzLmZpbGwoMSk7XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29uc3RhbnRJbml0aWFsaXplciBpbXBsZW1lbnRzIEluaXRpYWxpemVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSB2YWx1ZSA9IDApIHt9XG5cbiAgaW5pdGlhbGl6ZSh3ZWlnaHRzU2hhcGU6IG51bWJlcltdLCBpbnB1dFVuaXRzOiBudW1iZXIsIG91dHB1dFVuaXRzOiBudW1iZXIpOlxuICAgICAgTkRBcnJheSB7XG4gICAgY29uc3QgdmFsdWVzID0gTkRBcnJheS56ZXJvcyh3ZWlnaHRzU2hhcGUpO1xuICAgIHZhbHVlcy5maWxsKHRoaXMudmFsdWUpO1xuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE5EQXJyYXlJbml0aWFsaXplciBpbXBsZW1lbnRzIEluaXRpYWxpemVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBuZGFycmF5OiBOREFycmF5KSB7fVxuXG4gIGluaXRpYWxpemUod2VpZ2h0c1NoYXBlOiBudW1iZXJbXSwgaW5wdXRVbml0czogbnVtYmVyLCBvdXRwdXRVbml0czogbnVtYmVyKTpcbiAgICAgIE5EQXJyYXkge1xuICAgIHJldHVybiB0aGlzLm5kYXJyYXk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJhbmRvbU5vcm1hbEluaXRpYWxpemVyIGltcGxlbWVudHMgSW5pdGlhbGl6ZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1lYW4gPSAwLCBwcml2YXRlIHN0ZGV2ID0gLjA1KSB7fVxuXG4gIGluaXRpYWxpemUod2VpZ2h0c1NoYXBlOiBudW1iZXJbXSwgaW5wdXRVbml0czogbnVtYmVyLCBvdXRwdXRVbml0czogbnVtYmVyKTpcbiAgICAgIE5EQXJyYXkge1xuICAgIHJldHVybiBOREFycmF5LnJhbmROb3JtYWwod2VpZ2h0c1NoYXBlLCB0aGlzLm1lYW4sIHRoaXMuc3RkZXYpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSYW5kb21UcnVuY2F0ZWROb3JtYWxJbml0aWFsaXplciBpbXBsZW1lbnRzIEluaXRpYWxpemVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBtZWFuID0gMCwgcHJpdmF0ZSBzdGRldiA9IC4wNSkge31cblxuICBpbml0aWFsaXplKHdlaWdodHNTaGFwZTogbnVtYmVyW10sIGlucHV0VW5pdHM6IG51bWJlciwgb3V0cHV0VW5pdHM6IG51bWJlcik6XG4gICAgICBOREFycmF5IHtcbiAgICByZXR1cm4gTkRBcnJheS5yYW5kVHJ1bmNhdGVkTm9ybWFsKHdlaWdodHNTaGFwZSwgdGhpcy5tZWFuLCB0aGlzLnN0ZGV2KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmFuZG9tVW5pZm9ybUluaXRpYWxpemVyIGltcGxlbWVudHMgSW5pdGlhbGl6ZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1pbnZhbCA9IC0uMDUsIHByaXZhdGUgbWF4dmFsID0gLjA1KSB7fVxuXG4gIGluaXRpYWxpemUod2VpZ2h0c1NoYXBlOiBudW1iZXJbXSwgaW5wdXRVbml0czogbnVtYmVyLCBvdXRwdXRVbml0czogbnVtYmVyKTpcbiAgICAgIE5EQXJyYXkge1xuICAgIHJldHVybiBOREFycmF5LnJhbmRVbmlmb3JtKHdlaWdodHNTaGFwZSwgdGhpcy5taW52YWwsIHRoaXMubWF4dmFsKTtcbiAgfVxufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge05EQXJyYXlNYXRofSBmcm9tICcuL21hdGgvbWF0aCc7XG5pbXBvcnQge05EQXJyYXl9IGZyb20gJy4vbWF0aC9uZGFycmF5JztcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi91dGlsJztcblxuLyoqXG4gKiBUaGUgaW50ZXJmYWNlIGZvciBpbnB1dCBwcm92aWRlcnMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSW5wdXRQcm92aWRlciB7XG4gIC8qKlxuICAgKiBHZXQgdGhlIG5leHQgaW5wdXQgYXMgYSBjb3B5LiBUaGlzIGlzIGltcG9ydGFudCBiZWNhdXNlIHRoZSBkYXRhIG1pZ2h0XG4gICAqIGdldCB1cGxvYWRlZCB0byB0aGUgR1BVIGFuZCBtb2RpZnkgdGhlIG9yaWdpbmFsIGRhdGEuXG4gICAqIEBwYXJhbSBtYXRoIE5EQXJyYXlNYXRoXG4gICAqL1xuICBnZXROZXh0Q29weShtYXRoOiBOREFycmF5TWF0aCk6IE5EQXJyYXk7XG4gIC8qKlxuICAgKiBEaXNwb3NlIHRoZSBpbnB1dCBjb3B5LlxuICAgKiBAcGFyYW0gbWF0aCBOREFycmF5TWF0aFxuICAgKiBAcGFyYW0gY29weSBUaGUgY29weSBwcm92aWRlZCBmcm9tIGdldE5leHRDb3B5XG4gICAqL1xuICBkaXNwb3NlQ29weShtYXRoOiBOREFycmF5TWF0aCwgY29weTogTkRBcnJheSk6IHZvaWQ7XG59XG5cbi8qKlxuICogQSBjb21tb24gaW50ZXJmYWNlIGZvciBzaHVmZmxlZCBpbnB1dCBwcm92aWRlciBidWlsZGVycy4gVGhpcyByZXR1cm5zXG4gKiBJbnB1dFByb3ZpZGVycyB0aGF0IGFyZSBzeW5jaHJvbml6ZWQuXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2h1ZmZsZWRJbnB1dFByb3ZpZGVyQnVpbGRlciB7XG4gIGdldElucHV0UHJvdmlkZXJzKCk6IElucHV0UHJvdmlkZXJbXTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBJbk1lbW9yeVNodWZmbGVkSW5wdXRQcm92aWRlckJ1aWxkZXIgaW1wbGVtZW50c1xuICAgIFNodWZmbGVkSW5wdXRQcm92aWRlckJ1aWxkZXIge1xuICBwcm90ZWN0ZWQgc2h1ZmZsZWRJbmRpY2VzOiBVaW50MzJBcnJheTtcbiAgcHJvdGVjdGVkIG51bUlucHV0czogbnVtYmVyO1xuXG4gIHByb3RlY3RlZCBpZHggPSAwO1xuICAvLyBDb3VudGVyIGZvciBob3cgbWFueSB0aW1lcyB0aGUgY3VycmVudCBpbmRleCBoYXMgYmVlbiBjYWxsZWQuIFJlc2V0cyB0byAwXG4gIC8vIHdoZW4gaXQgcmVhY2hlcyB0aGUgbnVtYmVyIG9mIGlucHV0cy5cbiAgcHJvdGVjdGVkIGlucHV0Q291bnRlciA9IDA7XG4gIHByb3RlY3RlZCBlcG9jaCA9IDA7XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYW4gYEluTWVtb3J5U2h1ZmZsZWRJbnB1dFByb3ZpZGVyYC4gQWxsIG9mIHRoZSBpbnB1dHMgbXVzdCBiZVxuICAgKiBpbiBtZW1vcnkuXG4gICAqIEBwYXJhbSBpbnB1dHMgQWxsIG9mIHRoZSBpbnB1dHMsIHNpemU6IFtudW1iZXIgb2YgaW5wdXRzXVtudW1iZXIgb2ZcbiAgICogZXhhbXBsZXNdLlxuICAgKi9cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIGlucHV0czogTkRBcnJheVtdW10pIHtcbiAgICB0aGlzLnNodWZmbGVkSW5kaWNlcyA9IHV0aWwuY3JlYXRlU2h1ZmZsZWRJbmRpY2VzKGlucHV0c1swXS5sZW5ndGgpO1xuICAgIHRoaXMubnVtSW5wdXRzID0gaW5wdXRzLmxlbmd0aDtcblxuICAgIC8vIE1ha2Ugc3VyZSB0aGUgbnVtYmVyIG9mIGV4YW1wbGVzIGluIGVhY2ggaW5wdXQgbWF0Y2hlcy5cbiAgICBjb25zdCBudW1FeGFtcGxlcyA9IHRoaXMuaW5wdXRzWzBdLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtSW5wdXRzOyBpKyspIHtcbiAgICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICAgIHRoaXMuaW5wdXRzW2ldLmxlbmd0aCA9PT0gbnVtRXhhbXBsZXMsXG4gICAgICAgICAgJ051bWJlciBvZiBleGFtcGxlcyBtdXN0IG1hdGNoIGFjcm9zcyBkaWZmZXJlbnQgaW5wdXRzLicpO1xuICAgIH1cblxuICAgIC8vIE1ha2Ugc3VyZSB0aGUgc2hhcGVzIHdpdGhpbiBpbnB1dHMgYWxsIG1hdGNoLlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1JbnB1dHM7IGkrKykge1xuICAgICAgY29uc3QgaW5wdXRTaGFwZSA9IHRoaXMuaW5wdXRzW2ldWzBdLnNoYXBlO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0c1tpXS5sZW5ndGg7IGorKykge1xuICAgICAgICB1dGlsLmFzc2VydFNoYXBlc01hdGNoKGlucHV0U2hhcGUsIHRoaXMuaW5wdXRzW2ldW2pdLnNoYXBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0Q3VycmVudEV4YW1wbGVJbmRleCgpOiBudW1iZXIge1xuICAgIGNvbnN0IHJldHVybklkeCA9IHRoaXMuaWR4O1xuXG4gICAgdGhpcy5pbnB1dENvdW50ZXIrKztcbiAgICBpZiAodGhpcy5pbnB1dENvdW50ZXIgPj0gdGhpcy5udW1JbnB1dHMpIHtcbiAgICAgIHRoaXMuaWR4Kys7XG4gICAgICB0aGlzLmlucHV0Q291bnRlciA9IDA7XG5cbiAgICAgIGlmICh0aGlzLmlkeCA+PSB0aGlzLmlucHV0c1swXS5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5pZHggPSAwO1xuICAgICAgICB0aGlzLmVwb2NoKys7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXR1cm5JZHg7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0TmV4dElucHV0KGlucHV0SWQ6IG51bWJlcik6IE5EQXJyYXkge1xuICAgIGNvbnN0IGN1cnJlbnRFeGFtcGxlSW5kZXggPSB0aGlzLmdldEN1cnJlbnRFeGFtcGxlSW5kZXgoKTtcblxuICAgIHJldHVybiB0aGlzLmlucHV0c1tpbnB1dElkXVt0aGlzLnNodWZmbGVkSW5kaWNlc1tjdXJyZW50RXhhbXBsZUluZGV4XV07XG4gIH1cblxuICBnZXRFcG9jaCgpIHtcbiAgICByZXR1cm4gdGhpcy5lcG9jaDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGlucHV0IHByb3ZpZGVycyB3aGljaCBzaHVmZmxlIHRoZSBpbnB1dHMgYW5kIHN0YXkgaW4gc3luYy5cbiAgICovXG4gIGdldElucHV0UHJvdmlkZXJzKCk6IElucHV0UHJvdmlkZXJbXSB7XG4gICAgY29uc3QgaW5wdXRQcm92aWRlcnM6IElucHV0UHJvdmlkZXJbXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm51bUlucHV0czsgaSsrKSB7XG4gICAgICBpbnB1dFByb3ZpZGVycy5wdXNoKHRoaXMuZ2V0SW5wdXRQcm92aWRlcihpKSk7XG4gICAgfVxuICAgIHJldHVybiBpbnB1dFByb3ZpZGVycztcbiAgfVxuXG4gIGFic3RyYWN0IGdldElucHV0UHJvdmlkZXIoaW5wdXRJZDogbnVtYmVyKTogSW5wdXRQcm92aWRlcjtcbn1cblxuLyoqXG4gKiBBbiBpbiBDUFUgbWVtb3J5IFNodWZmbGVkSW5wdXRQcm92aWRlckJ1aWxkZXIgdGhhdCBzaHVmZmxlcyBOREFycmF5cyBvbiB0aGVcbiAqIENQVSBhbmQga2VlcHMgdGhlbSBtdXR1YWxseSBpbiBzeW5jLlxuICovXG5leHBvcnQgY2xhc3MgSW5DUFVNZW1vcnlTaHVmZmxlZElucHV0UHJvdmlkZXJCdWlsZGVyIGV4dGVuZHNcbiAgICBJbk1lbW9yeVNodWZmbGVkSW5wdXRQcm92aWRlckJ1aWxkZXIge1xuICBnZXRJbnB1dFByb3ZpZGVyKGlucHV0SWQ6IG51bWJlcikge1xuICAgIGNvbnN0IHNodWZmbGVkSW5wdXRQcm92aWRlciA9IHRoaXM7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZ2V0TmV4dENvcHkobWF0aDogTkRBcnJheU1hdGgpOiBOREFycmF5IHtcbiAgICAgICAgcmV0dXJuIE5EQXJyYXkubGlrZShzaHVmZmxlZElucHV0UHJvdmlkZXIuZ2V0TmV4dElucHV0KGlucHV0SWQpKTtcbiAgICAgIH0sXG4gICAgICBkaXNwb3NlQ29weShtYXRoOiBOREFycmF5TWF0aCwgY29weTogTkRBcnJheSkge1xuICAgICAgICBjb3B5LmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogQW4gaW4gR1BVIG1lbW9yeSBTaHVmZmxlZElucHV0UHJvdmlkZXJCdWlsZGVyIHRoYXQgc2h1ZmZsZXMgTkRBcnJheXMgb24gdGhlXG4gKiBHUFUgYW5kIGtlZXBzIHRoZW0gbXV0dWFsbHkgaW4gc3luYy4gVGhpcyBpcyBtb3JlIHBlcmZvcm1hbnQgdGhhbiB0aGUgQ1BVXG4gKiB2ZXJzaW9uIGFzIHRleHR1cmVzIHdpbGwgc3RheSBpbiBtZW1vcnksIGhvd2V2ZXIgdGhpcyBpcyBtb3JlIEdQVSBtZW1vcnlcbiAqIGludGVuc2l2ZSBhcyBpdCBrZWVwcyB0ZXh0dXJlcyByZXNpZGVudCBpbiBHUFUgbWVtb3J5LlxuICovXG5leHBvcnQgY2xhc3MgSW5HUFVNZW1vcnlTaHVmZmxlZElucHV0UHJvdmlkZXJCdWlsZGVyIGV4dGVuZHNcbiAgICBJbk1lbW9yeVNodWZmbGVkSW5wdXRQcm92aWRlckJ1aWxkZXIge1xuICBnZXRJbnB1dFByb3ZpZGVyKGlucHV0SWQ6IG51bWJlcikge1xuICAgIGNvbnN0IHNodWZmbGVkSW5wdXRQcm92aWRlciA9IHRoaXM7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZ2V0TmV4dENvcHkobWF0aDogTkRBcnJheU1hdGgpOiBOREFycmF5IHtcbiAgICAgICAgcmV0dXJuIG1hdGguY2xvbmUoc2h1ZmZsZWRJbnB1dFByb3ZpZGVyLmdldE5leHRJbnB1dChpbnB1dElkKSk7XG4gICAgICB9LFxuICAgICAgZGlzcG9zZUNvcHkobWF0aDogTkRBcnJheU1hdGgsIGNvcHk6IE5EQXJyYXkpIHtcbiAgICAgICAgY29weS5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge05EQXJyYXlNYXRofSBmcm9tICcuL21hdGgnO1xuaW1wb3J0IHtOREFycmF5LCBTY2FsYXJ9IGZyb20gJy4vbmRhcnJheSc7XG5cbi8qKiBBIG5vZGUncyBhY3RpdmF0aW9uIGZ1bmN0aW9uIGFuZCBpdHMgZGVyaXZhdGl2ZS4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQWN0aXZhdGlvbkZ1bmN0aW9uIHtcbiAgb3V0cHV0PFQgZXh0ZW5kcyBOREFycmF5PihtYXRoOiBOREFycmF5TWF0aCwgaW5wdXQ6IFQpOiBUO1xuICBkZXI8VCBleHRlbmRzIE5EQXJyYXk+KG1hdGg6IE5EQXJyYXlNYXRoLCBpbnB1dDogVCwgb3V0cHV0OiBUKTogVDtcbn1cblxuZXhwb3J0IGNsYXNzIFRhbkhGdW5jIGltcGxlbWVudHMgQWN0aXZhdGlvbkZ1bmN0aW9uIHtcbiAgb3V0cHV0KG1hdGg6IE5EQXJyYXlNYXRoLCB4OiBOREFycmF5KSB7XG4gICAgcmV0dXJuIG1hdGguc2NvcGUoKCkgPT4ge1xuICAgICAgcmV0dXJuIG1hdGgudGFuaCh4KTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlcihtYXRoOiBOREFycmF5TWF0aCwgeDogTkRBcnJheSwgeTogTkRBcnJheSkge1xuICAgIHJldHVybiBtYXRoLnNjb3BlKCgpID0+IHtcbiAgICAgIGNvbnN0IHlTcXVhcmVkID0gbWF0aC5lbGVtZW50V2lzZU11bCh5LCB5KTtcbiAgICAgIC8vIDEgLSB5XjIuXG4gICAgICByZXR1cm4gbWF0aC5zY2FsYXJNaW51c0FycmF5KFNjYWxhci5PTkUsIHlTcXVhcmVkKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmVMVUZ1bmMgaW1wbGVtZW50cyBBY3RpdmF0aW9uRnVuY3Rpb24ge1xuICBvdXRwdXQobWF0aDogTkRBcnJheU1hdGgsIHg6IE5EQXJyYXkpIHtcbiAgICByZXR1cm4gbWF0aC5zY29wZSgoKSA9PiB7XG4gICAgICByZXR1cm4gbWF0aC5yZWx1KHgpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVyKG1hdGg6IE5EQXJyYXlNYXRoLCB4OiBOREFycmF5LCB5OiBOREFycmF5KSB7XG4gICAgcmV0dXJuIG1hdGguc2NvcGUoKCkgPT4ge1xuICAgICAgcmV0dXJuIG1hdGguc3RlcCh4KTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2lnbW9pZEZ1bmMgaW1wbGVtZW50cyBBY3RpdmF0aW9uRnVuY3Rpb24ge1xuICBvdXRwdXQobWF0aDogTkRBcnJheU1hdGgsIHg6IE5EQXJyYXkpIHtcbiAgICByZXR1cm4gbWF0aC5zY29wZSgoKSA9PiB7XG4gICAgICByZXR1cm4gbWF0aC5zaWdtb2lkKHgpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVyKG1hdGg6IE5EQXJyYXlNYXRoLCB4OiBOREFycmF5LCB5OiBOREFycmF5KSB7XG4gICAgcmV0dXJuIG1hdGguc2NvcGUoKCkgPT4ge1xuICAgICAgLy8geSAqICgxIC0geSkgPSB5IC0geV4yXG4gICAgICBjb25zdCB5U3F1YXJlZCA9IG1hdGguZWxlbWVudFdpc2VNdWwoeSwgeSk7XG4gICAgICByZXR1cm4gbWF0aC5zdWIoeSwgeVNxdWFyZWQpO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTcXVhcmVGdW5jIGltcGxlbWVudHMgQWN0aXZhdGlvbkZ1bmN0aW9uIHtcbiAgb3V0cHV0KG1hdGg6IE5EQXJyYXlNYXRoLCB4OiBOREFycmF5KSB7XG4gICAgcmV0dXJuIG1hdGguc2NvcGUoKCkgPT4ge1xuICAgICAgcmV0dXJuIG1hdGguZWxlbWVudFdpc2VNdWwoeCwgeCk7XG4gICAgfSk7XG4gIH1cblxuICBkZXIobWF0aDogTkRBcnJheU1hdGgsIHg6IE5EQXJyYXksIHk6IE5EQXJyYXkpIHtcbiAgICByZXR1cm4gbWF0aC5zY29wZSgoKSA9PiB7XG4gICAgICAvLyBkeS9keCA9IDIqeC5cbiAgICAgIHJldHVybiBtYXRoLnNjYWxhclRpbWVzQXJyYXkoU2NhbGFyLlRXTywgeCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuLi91dGlsJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydENvbmNhdDNEU2hhcGVzTWF0Y2goXG4gICAgeDFTaGFwZTogbnVtYmVyW10sIHgyU2hhcGU6IG51bWJlcltdLCBheGlzOiBudW1iZXIsXG4gICAgZXJyb3JNZXNzYWdlUHJlZml4ID0gJycpIHtcbiAgdXRpbC5hc3NlcnQoXG4gICAgICB4MVNoYXBlLmxlbmd0aCA9PT0gMyxcbiAgICAgIGVycm9yTWVzc2FnZVByZWZpeCArICdDb25jYXQzRCB4MSBzaGFwZSBzaG91bGQgYmUgb2YgcmFuayAzLicpO1xuICB1dGlsLmFzc2VydChcbiAgICAgIHgyU2hhcGUubGVuZ3RoID09PSAzLFxuICAgICAgZXJyb3JNZXNzYWdlUHJlZml4ICsgJ0NvbmNhdDNEIHgyIHNoYXBlIHNob3VsZCBiZSBvZiByYW5rIDMuJyk7XG5cbiAgdXRpbC5hc3NlcnQoXG4gICAgICBheGlzID49IDAgJiYgYXhpcyA8IDMsICdBeGlzIGZvciBjb25jYXQzRCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMi4nKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICAoaSA9PT0gYXhpcykgfHwgKHgxU2hhcGVbaV0gPT09IHgyU2hhcGVbaV0pLFxuICAgICAgICBlcnJvck1lc3NhZ2VQcmVmaXggK1xuICAgICAgICAgICAgYFNoYXBlICgke3gxU2hhcGV9KSBkb2VzIG5vdCBtYXRjaCAoJHt4MlNoYXBlfSkgYWxvbmcgYCArXG4gICAgICAgICAgICBgbm9uLWNvbmNhdGVuYXRlZCBheGlzLmApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlQ29uY2F0M0RPdXRwdXRTaGFwZShcbiAgICB4MVNoYXBlOiBudW1iZXJbXSwgeDJTaGFwZTogbnVtYmVyW10sXG4gICAgYXhpczogbnVtYmVyKTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdIHtcbiAgdXRpbC5hc3NlcnQoeDFTaGFwZS5sZW5ndGggPT09IDMsICdDb25jYXQzRCB4MSBzaGFwZSBzaG91bGQgYmUgb2YgcmFuayAzLicpO1xuICB1dGlsLmFzc2VydCh4MlNoYXBlLmxlbmd0aCA9PT0gMywgJ0NvbmNhdDNEIHgyc2hhcGUgc2hvdWxkIGJlIG9mIHJhbmsgMy4nKTtcblxuICBjb25zdCBvdXRwdXRTaGFwZSA9IHgxU2hhcGUuc2xpY2UoKTtcbiAgb3V0cHV0U2hhcGVbYXhpc10gKz0geDJTaGFwZVtheGlzXTtcbiAgcmV0dXJuIG91dHB1dFNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbn0iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi4vdXRpbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlT3V0cHV0U2hhcGUzRChcbiAgICBpbnB1dFNoYXBlUm93Q29sRGVwdGg6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgZmllbGRTaXplOiBudW1iZXIsXG4gICAgZGVwdGg6IG51bWJlciwgc3RyaWRlOiBudW1iZXIsIHplcm9QYWQ/OiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0ge1xuICBpZiAoemVyb1BhZCA9PSBudWxsKSB7XG4gICAgemVyb1BhZCA9IGNvbXB1dGVEZWZhdWx0UGFkKGlucHV0U2hhcGVSb3dDb2xEZXB0aCwgZmllbGRTaXplLCBzdHJpZGUpO1xuICB9XG4gIGNvbnN0IGlucHV0Um93cyA9IGlucHV0U2hhcGVSb3dDb2xEZXB0aFswXTtcbiAgY29uc3QgaW5wdXRDb2xzID0gaW5wdXRTaGFwZVJvd0NvbERlcHRoWzFdO1xuICBjb25zdCBvdXRwdXRSb3dzID0gKGlucHV0Um93cyAtIGZpZWxkU2l6ZSArIDIgKiB6ZXJvUGFkKSAvIHN0cmlkZSArIDE7XG4gIHV0aWwuYXNzZXJ0KFxuICAgICAgdXRpbC5pc0ludChvdXRwdXRSb3dzKSxcbiAgICAgIGBUaGUgb3V0cHV0ICMgb2Ygcm93cyAoJHtvdXRwdXRSb3dzfSkgbXVzdCBiZSBhbiBpbnRlZ2VyLiBDaGFuZ2UgdGhlIGAgK1xuICAgICAgICAgIGBzdHJpZGUgYW5kL29yIHplcm8gcGFkIHBhcmFtZXRlcnNgKTtcblxuICBjb25zdCBvdXRwdXRDb2xzID0gKGlucHV0Q29scyAtIGZpZWxkU2l6ZSArIDIgKiB6ZXJvUGFkKSAvIHN0cmlkZSArIDE7XG4gIHV0aWwuYXNzZXJ0KFxuICAgICAgdXRpbC5pc0ludChvdXRwdXRDb2xzKSxcbiAgICAgIGBUaGUgb3V0cHV0ICMgb2YgY29sdW1ucyAoJHtvdXRwdXRDb2xzfSkgbXVzdCBiZSBhbiBpbnRlZ2VyLiBDaGFuZ2UgYCArXG4gICAgICAgICAgYHRoZSBzdHJpZGUgYW5kL29yIHplcm8gcGFkIHBhcmFtZXRlcnNgKTtcblxuICByZXR1cm4gW291dHB1dFJvd3MsIG91dHB1dENvbHMsIGRlcHRoXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVEZWZhdWx0UGFkKFxuICAgIGlucHV0U2hhcGU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgZmllbGRTaXplOiBudW1iZXIsXG4gICAgc3RyaWRlOiBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4gTWF0aC5mbG9vcigoaW5wdXRTaGFwZVswXSAqIChzdHJpZGUgLSAxKSAtIHN0cmlkZSArIGZpZWxkU2l6ZSkgLyAyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVUZXhTaGFwZUZyb20zRChcbiAgICBzaGFwZVJvd0NvbERlcHRoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0pOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgcmV0dXJuIFtzaGFwZVJvd0NvbERlcHRoWzBdLCBzaGFwZVJvd0NvbERlcHRoWzFdICogc2hhcGVSb3dDb2xEZXB0aFsyXV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlV2VpZ2h0c1NoYXBlNEQoXG4gICAgaW5wdXREZXB0aDogbnVtYmVyLCBvdXRwdXREZXB0aDogbnVtYmVyLFxuICAgIGZTaXplOiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSB7XG4gIHJldHVybiBbZlNpemUsIGZTaXplLCBpbnB1dERlcHRoLCBvdXRwdXREZXB0aF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlV2VpZ2h0c1RleFNoYXBlKFxuICAgIGlucHV0RGVwdGg6IG51bWJlciwgb3V0cHV0RGVwdGg6IG51bWJlcixcbiAgICBmaWVsZFNpemU6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl0ge1xuICByZXR1cm4gW2ZpZWxkU2l6ZSAqIGZpZWxkU2l6ZSAqIGlucHV0RGVwdGgsIG91dHB1dERlcHRoXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVCaWFzZXNUZXhTaGFwZShvdXRwdXREZXB0aDogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXSB7XG4gIHJldHVybiBbMSwgb3V0cHV0RGVwdGhdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZURpbGF0ZWRSQyhcbiAgICByYzogW251bWJlciwgbnVtYmVyXSwgb3JpZ1N0cmlkZTogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXSB7XG4gIGNvbnN0IHJvd3NEaWxhdGVkID0gKHJjWzBdIC0gMSkgKiBvcmlnU3RyaWRlICsgMTtcbiAgY29uc3QgY29sc0RpbGF0ZWQgPSAocmNbMV0gLSAxKSAqIG9yaWdTdHJpZGUgKyAxO1xuICByZXR1cm4gW3Jvd3NEaWxhdGVkLCBjb2xzRGlsYXRlZF07XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNoYXBlcyhcbiAgICBzb3VyY2VTaXplOiBbbnVtYmVyLCBudW1iZXJdLCBkZXN0U2l6ZTogW251bWJlciwgbnVtYmVyXSkge1xuICBjb25zdCBzcmNBcmVhID0gc291cmNlU2l6ZVswXSAqIHNvdXJjZVNpemVbMV07XG4gIGNvbnN0IGRzdEFyZWEgPSBkZXN0U2l6ZVswXSAqIGRlc3RTaXplWzFdO1xuICBpZiAoc3JjQXJlYSAhPT0gZHN0QXJlYSkge1xuICAgIGNvbnN0IHNyY1N0ciA9ICdbJyArIHNvdXJjZVNpemVbMF0gKyAnLCAnICsgc291cmNlU2l6ZVsxXSArICddJztcbiAgICBjb25zdCBkc3RTdHIgPSAnWycgKyBkZXN0U2l6ZVswXSArICcsICcgKyBkZXN0U2l6ZVsxXSArICddJztcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdjb3B5MkQgc2hhcGVzIGhhdmUgZGlmZmVyZW50IGFyZWFzOlxcbiAgc291cmNlU2l6ZSAnICsgc3JjU3RyICtcbiAgICAgICAgJywgYXJlYSAnICsgc3JjQXJlYSArICdcXG4gIGRlc3RTaXplICcgKyBkc3RTdHIgKyAnLCBhcmVhICcgKyBkc3RBcmVhKTtcbiAgfVxufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge05EQXJyYXlNYXRofSBmcm9tICcuL21hdGgnO1xuaW1wb3J0IHtOREFycmF5LCBTY2FsYXJ9IGZyb20gJy4vbmRhcnJheSc7XG5cbi8qKlxuICogQW4gZXJyb3IgZnVuY3Rpb24gYW5kIGl0cyBkZXJpdmF0aXZlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEVsZW1lbnRXaXNlQ29zdEZ1bmN0aW9uIHtcbiAgY29zdDxUIGV4dGVuZHMgTkRBcnJheT4obWF0aDogTkRBcnJheU1hdGgsIHgxOiBULCB4MjogVCk6IFQ7XG4gIGRlcjxUIGV4dGVuZHMgTkRBcnJheT4obWF0aDogTkRBcnJheU1hdGgsIHgxOiBULCB4MjogVCk6IFQ7XG4gIGRpc3Bvc2UoKTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIFNxdWFyZUNvc3RGdW5jIGltcGxlbWVudHMgRWxlbWVudFdpc2VDb3N0RnVuY3Rpb24ge1xuICBwcml2YXRlIGhhbGZPbmUgPSBTY2FsYXIubmV3KDAuNSk7XG5cbiAgY29zdChtYXRoOiBOREFycmF5TWF0aCwgeDE6IE5EQXJyYXksIHgyOiBOREFycmF5KTogTkRBcnJheSB7XG4gICAgY29uc3QgZGlmZiA9IG1hdGguc3ViKHgxLCB4Mik7XG4gICAgY29uc3QgZGlmZlNxdWFyZWQgPSBtYXRoLmVsZW1lbnRXaXNlTXVsKGRpZmYsIGRpZmYpO1xuICAgIGNvbnN0IHJlc3VsdCA9IG1hdGguc2NhbGFyVGltZXNBcnJheSh0aGlzLmhhbGZPbmUsIGRpZmZTcXVhcmVkKTtcblxuICAgIGRpZmYuZGlzcG9zZSgpO1xuICAgIGRpZmZTcXVhcmVkLmRpc3Bvc2UoKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBkZXIobWF0aDogTkRBcnJheU1hdGgsIHgxOiBOREFycmF5LCB4MjogTkRBcnJheSk6IE5EQXJyYXkge1xuICAgIHJldHVybiBtYXRoLnN1Yih4MSwgeDIpO1xuICB9XG5cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLmhhbGZPbmUuZGlzcG9zZSgpO1xuICB9XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQgKiBhcyBjb25jYXQzZF91dGlsIGZyb20gJy4vY29uY2F0M2RfdXRpbCc7XG5pbXBvcnQgKiBhcyBjb3B5MmRfdXRpbCBmcm9tICcuL2NvcHkyZF91dGlsJztcblxuaW1wb3J0IHtBcnJheTFELCBBcnJheTJELCBBcnJheTNELCBBcnJheTRELCBOREFycmF5LCBTY2FsYXJ9IGZyb20gJy4vbmRhcnJheSc7XG5cbmV4cG9ydCB0eXBlIFNjb3BlUmVzdWx0ID0gTkRBcnJheVtdfE5EQXJyYXl8dm9pZDtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIE5EQXJyYXlNYXRoIHtcbiAgcHJpdmF0ZSBuZGFycmF5U2NvcGVzOiBOREFycmF5W11bXSA9IFtdO1xuICBwcml2YXRlIGFjdGl2ZVNjb3BlOiBOREFycmF5W107XG5cbiAgcHJpdmF0ZSBuZGFycmF5c1RvS2VlcDogTkRBcnJheVtdW10gPSBbXTtcbiAgcHJpdmF0ZSBhY3RpdmVTY29wZU5EQXJyYXlzVG9LZWVwOiBOREFycmF5W10gPSBbXTtcblxuICAvKipcbiAgICogQHBhcmFtIHNhZmVNb2RlIEluIHNhZmUgbW9kZSwgeW91IG11c3QgdXNlIG1hdGggb3BlcmF0aW9ucyBpbnNpZGVcbiAgICogYSBtYXRoLnNjb3BlKCkgd2hpY2ggd2lsbCBhdXRvbWF0aWNhbGx5IGNsZWFuIHVwIGludGVybWVkaWF0ZSBOREFycmF5cy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgc2FmZU1vZGU6IGJvb2xlYW4pIHt9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBtYXRoIHNjb3BlLiBQdXQgY2hhaW5lZCBtYXRoIG9wZXJhdGlvbnMgaW5zaWRlIGEgc2NvcGVcbiAgICogZnVuY3Rpb24gY2xvc3VyZSBzbyB0aGF0IHRoZSBsaWJyYXJ5IGF1dG9tYXRpY2FsbHkgY2xlYW5zIHVwIE5EQXJyYXlzXG4gICAqIGZyb20gaW50ZXJtZWRpYXRlIG1hdGggb3BlcmF0aW9ucy4gWW91IG11c3QgY3JlYXRlIGEgc2NvcGUgaW4gc2FmZSBtb2RlXG4gICAqIHRvIGNhbGwgbWF0aCBvcGVyYXRpb25zLiBJZiBhIHJlc3VsdCBpcyByZXR1cm5lZCBmcm9tIHRoZSBzY29wZSwgaXQgd2lsbFxuICAgKiBhbHNvIGJlIHRyYWNrZWQsIHdoaWNoIG1lYW5zIHRoZXJlIG11c3QgYmUgeWV0IGFub3RoZXIgd3JhcHBpbmcgc2NvcGUuXG4gICAqIEBwYXJhbSBzY29wZUZuIFRoZSBmdW5jdGlvbiB0byBleGVjdXRlIHdpdGggY2hhaW5lZCBtYXRoIG9wZXJhdGlvbnMuXG4gICAqL1xuICBzY29wZTxUIGV4dGVuZHMgU2NvcGVSZXN1bHQ+KFxuICAgICAgc2NvcGVGbjpcbiAgICAgICAgICAoa2VlcDogPFQxIGV4dGVuZHMgTkRBcnJheT4obmRhcnJheTogVDEpID0+IFQxLFxuICAgICAgICAgICB0cmFjazogPFQyIGV4dGVuZHMgTkRBcnJheT4obmRhcnJheTogVDIpID0+IFQyKSA9PiBUKSB7XG4gICAgdGhpcy5zdGFydFNjb3BlKCk7XG5cbiAgICBjb25zdCBrZWVwRm4gPSA8VCBleHRlbmRzIE5EQXJyYXk+KG5kYXJyYXk6IFQpOiBUID0+IHRoaXMua2VlcChuZGFycmF5KTtcbiAgICBjb25zdCB0cmFja0ZuID0gPFQgZXh0ZW5kcyBOREFycmF5PihuZGFycmF5OiBUKTogVCA9PiB0aGlzLnRyYWNrKG5kYXJyYXkpO1xuICAgIGNvbnN0IHJlc3VsdCA9IHNjb3BlRm4oa2VlcEZuLCB0cmFja0ZuKTtcblxuICAgIHRoaXMuZW5kU2NvcGUocmVzdWx0KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgYSBzY29wZS4gVXNlIHRoaXMgd2l0aCBlbmRTY29wZSgpIHRvIGFjaGlldmUgdGhlIHNhbWUgZnVuY3Rpb25hbGl0eVxuICAgKiBhcyBzY29wZSgpIHdpdGhvdXQgdGhlIG5lZWQgZm9yIGEgZnVuY3Rpb24gY2xvc3VyZS5cbiAgICovXG4gIHN0YXJ0U2NvcGUoKSB7XG4gICAgY29uc3QgbmV3U2NvcGU6IE5EQXJyYXlbXSA9IFtdO1xuICAgIHRoaXMubmRhcnJheVNjb3Blcy5wdXNoKG5ld1Njb3BlKTtcbiAgICB0aGlzLmFjdGl2ZVNjb3BlID0gbmV3U2NvcGU7XG5cbiAgICBjb25zdCBuZXdOREFycmF5c1RvS2VlcDogTkRBcnJheVtdID0gW107XG4gICAgdGhpcy5uZGFycmF5c1RvS2VlcC5wdXNoKG5ld05EQXJyYXlzVG9LZWVwKTtcbiAgICB0aGlzLmFjdGl2ZVNjb3BlTkRBcnJheXNUb0tlZXAgPSBuZXdOREFycmF5c1RvS2VlcDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmQgYSBzY29wZS4gVXNlIHRoaXMgd2l0aCBzdGFydFNjb3BlKCkgdG8gYWNoaWV2ZSB0aGUgc2FtZSBmdW5jdGlvbmFsaXR5XG4gICAqIGFzIHNjb3BlKCkgd2l0aG91dCB0aGUgbmVlZCBmb3IgYSBmdW5jdGlvbiBjbG9zdXJlLlxuICAgKi9cbiAgZW5kU2NvcGUocmVzdWx0OiBTY29wZVJlc3VsdCkge1xuICAgIC8vIERpc3Bvc2UgdGhlIGN1cnJlbnQgc2NvcGUuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFjdGl2ZVNjb3BlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBuZGFycmF5ID0gdGhpcy5hY3RpdmVTY29wZVtpXTtcblxuICAgICAgaWYgKHRoaXMuaXNOREFycmF5RGF0YUluTGlzdChuZGFycmF5LCB0aGlzLmFjdGl2ZVNjb3BlTkRBcnJheXNUb0tlZXApIHx8XG4gICAgICAgICAgKHJlc3VsdCAhPSBudWxsICYmIHJlc3VsdCBpbnN0YW5jZW9mIE5EQXJyYXkgJiZcbiAgICAgICAgICAgbmRhcnJheS5nZXREYXRhKCkgPT09IChyZXN1bHQgYXMgTkRBcnJheSkuZ2V0RGF0YSgpKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIG5kYXJyYXkuZGlzcG9zZSgpO1xuICAgIH1cblxuICAgIC8vIFBvcCB0aGUgY3VycmVudCBzY29wZS5cbiAgICB0aGlzLm5kYXJyYXlTY29wZXMucG9wKCk7XG4gICAgdGhpcy5hY3RpdmVTY29wZSA9IHRoaXMubmRhcnJheVNjb3Blcy5sZW5ndGggPT09IDAgP1xuICAgICAgICBudWxsISA6XG4gICAgICAgIHRoaXMubmRhcnJheVNjb3Blc1t0aGlzLm5kYXJyYXlTY29wZXMubGVuZ3RoIC0gMV07XG5cbiAgICAvLyBUcmFjayB0aGUgY3VycmVudCByZXN1bHQgaW4gdGhlIHBhcmVudCBzY29wZS5cbiAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgTkRBcnJheSAmJlxuICAgICAgICAhdGhpcy5pc05EQXJyYXlEYXRhSW5MaXN0KHJlc3VsdCwgdGhpcy5hY3RpdmVTY29wZU5EQXJyYXlzVG9LZWVwKSkge1xuICAgICAgdGhpcy50cmFjayhyZXN1bHQpO1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQpKSB7XG4gICAgICByZXN1bHQuZm9yRWFjaChyID0+IHtcbiAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBOREFycmF5ICYmXG4gICAgICAgICAgICAhdGhpcy5pc05EQXJyYXlEYXRhSW5MaXN0KHIsIHRoaXMuYWN0aXZlU2NvcGVOREFycmF5c1RvS2VlcCkpIHtcbiAgICAgICAgICB0aGlzLnRyYWNrKHIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLm5kYXJyYXlzVG9LZWVwLnBvcCgpO1xuICAgIHRoaXMuYWN0aXZlU2NvcGVOREFycmF5c1RvS2VlcCA9IHRoaXMubmRhcnJheXNUb0tlZXAubGVuZ3RoID09PSAwID9cbiAgICAgICAgbnVsbCEgOlxuICAgICAgICB0aGlzLm5kYXJyYXlzVG9LZWVwW3RoaXMubmRhcnJheXNUb0tlZXAubGVuZ3RoIC0gMV07XG4gIH1cblxuICBwcml2YXRlIGlzTkRBcnJheURhdGFJbkxpc3QobmRhcnJheTogTkRBcnJheSwgbmRhcnJheUxpc3Q6IE5EQXJyYXlbXSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmRhcnJheUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChuZGFycmF5TGlzdFtpXS5nZXREYXRhKCkgPT09IG5kYXJyYXkuZ2V0RGF0YSgpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogS2VlcHMgYW4gTkRBcnJheSBpbiB0aGUgY3VycmVudCBzY29wZSBmcm9tIGJlaW5nIGRpc3Bvc2VkIGF1dG9tYXRpY2FsbHkuXG4gICAqIEBwYXJhbSByZXN1bHQgVGhlIE5EQXJyYXkgdG8ga2VlcCBmcm9tIGJlaW5nIGRpc3Bvc2VkLlxuICAgKi9cbiAga2VlcDxUIGV4dGVuZHMgTkRBcnJheT4ocmVzdWx0OiBUKTogVCB7XG4gICAgaWYgKHRoaXMuYWN0aXZlU2NvcGUgPT0gbnVsbCkge1xuICAgICAgaWYgKHRoaXMuc2FmZU1vZGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgJ1lvdSBhcmUgdXNpbmcgbWF0aCBpbiBzYWZlIG1vZGUuIEVuY2xvc2UgYWxsICcgK1xuICAgICAgICAgICAgJ21hdGgubWV0aG9kKCkgY2FsbHMgaW5zaWRlIGEgc2NvcGU6ICcgK1xuICAgICAgICAgICAgJ21hdGguc2NvcGUoKCkgPT4ge21hdGgubWV0aG9kKCk7Li4ufSkgdG8gYXZvaWQgbWVtb3J5ICcgK1xuICAgICAgICAgICAgJ2xlYWtzLicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgdGhpcy5hY3RpdmVTY29wZU5EQXJyYXlzVG9LZWVwLnB1c2gocmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYWNrcyBhbiBOREFycmF5IGluIHRoZSBjdXJyZW50IHNjb3BlIHRvIGJlIGF1dG9tYXRpY2FsbHkgY2xlYW5lZCB1cCB3aGVuXG4gICAqIHRoZSBjdXJyZW50IHNjb3BlIGVuZHMsIGFuZCByZXR1cm5zIHRoZSB2YWx1ZS5cbiAgICogQHBhcmFtIHJlc3VsdCBUaGUgTkRBcnJheSB0byB0cmFjayBpbiB0aGUgY3VycmVudCBzY29wZS5cbiAgICovXG4gIHRyYWNrPFQgZXh0ZW5kcyBOREFycmF5PihyZXN1bHQ6IFQpOiBUIHtcbiAgICBpZiAodGhpcy5hY3RpdmVTY29wZSA9PSBudWxsKSB7XG4gICAgICBpZiAodGhpcy5zYWZlTW9kZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAnWW91IGFyZSB1c2luZyBtYXRoIGluIHNhZmUgbW9kZS4gRW5jbG9zZSBhbGwgJyArXG4gICAgICAgICAgICAnbWF0aC5tZXRob2QoKSBjYWxscyBpbnNpZGUgYSBzY29wZTogJyArXG4gICAgICAgICAgICAnbWF0aC5zY29wZSgoKSA9PiB7bWF0aC5tZXRob2QoKTsuLi59KSB0byBhdm9pZCBtZW1vcnkgJyArXG4gICAgICAgICAgICAnbGVha3MuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICB0aGlzLmFjdGl2ZVNjb3BlLnB1c2gocmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0d28gbWF0cmljZXMsIEEgKiBCLiBUaGVzZSBtdXN0IGJlIG1hdHJpY2VzLFxuICAgKiB1c2UgbWF0cml4VGltZXNWZWN0b3IgYW5kIHZlY3RvclRpbWVzTWF0cml4LCBkb3RQcm9kdWN0LCBhbmQgb3V0ZXJQcm9kdWN0XG4gICAqIGluIG90aGVyIGNhc2VzLlxuICAgKiBAcGFyYW0gYSBGaXJzdCBtYXRyaXggaW4gZG90IHByb2R1Y3Qgb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gYiBTZWNvbmQgbWF0cml4IGluIGRvdCBwcm9kdWN0IG9wZXJhdGlvbi5cbiAgICogQHBhcmFtIGFPcmllbnRhdGlvbiBUaGUgTWF0cml4T3JpZW50YXRpb24gb2YgQS4gSWYgdXNpbmcgVFJBTlNQT1NFRCwgd2lsbFxuICAgKiBjb21wdXRlIEFeVCAqIEIuXG4gICAqIEBwYXJhbSBiT3JpZW50YXRpb24gVGhlIE1hdHJpeE9yaWVudGF0aW9uIG9mIEIuIElmIHVzaW5nIFRSQU5TUE9TRUQsIHdpbGxcbiAgICogY29tcHV0ZSBBICogQl5ULlxuICAgKi9cbiAgbWF0TXVsKFxuICAgICAgYTogQXJyYXkyRCwgYjogQXJyYXkyRCwgYU9yaWVudGF0aW9uID0gTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUixcbiAgICAgIGJPcmllbnRhdGlvbiA9IE1hdHJpeE9yaWVudGF0aW9uLlJFR1VMQVIpOiBBcnJheTJEIHtcbiAgICBjb25zdCBpbm5lclNoYXBlQSA9XG4gICAgICAgIChhT3JpZW50YXRpb24gPT09IE1hdHJpeE9yaWVudGF0aW9uLlJFR1VMQVIpID8gYS5zaGFwZVsxXSA6IGEuc2hhcGVbMF07XG4gICAgY29uc3QgaW5uZXJTaGFwZUIgPVxuICAgICAgICAoYk9yaWVudGF0aW9uID09PSBNYXRyaXhPcmllbnRhdGlvbi5SRUdVTEFSKSA/IGIuc2hhcGVbMF0gOiBiLnNoYXBlWzFdO1xuXG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIGEucmFuayA9PT0gMiAmJiBiLnJhbmsgPT09IDIsXG4gICAgICAgIGBFcnJvciBpbiBtYXRNdWw6IGlucHV0cyBtdXN0IGJlIHJhbmsgMiwgZ290IHJhbmtzICR7YS5yYW5rfWAgK1xuICAgICAgICAgICAgYGFuZCAke2IucmFua30uYCk7XG5cbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgaW5uZXJTaGFwZUEgPT09IGlubmVyU2hhcGVCLFxuICAgICAgICBgRXJyb3IgaW4gbWF0TXVsOiBpbm5lciBzaGFwZXMgKCR7aW5uZXJTaGFwZUF9KSBhbmQgKGAgK1xuICAgICAgICAgICAgYCR7aW5uZXJTaGFwZUJ9KSBvZiBOREFycmF5cyB3aXRoIHNoYXBlcyAke2Euc2hhcGV9IGFuZCBgICtcbiAgICAgICAgICAgIGAke2Iuc2hhcGV9IGFuZCBvcmllbnRhdGlvbnMgJHtNYXRyaXhPcmllbnRhdGlvblthT3JpZW50YXRpb25dfWAgK1xuICAgICAgICAgICAgYCBhbmQgJHtNYXRyaXhPcmllbnRhdGlvbltiT3JpZW50YXRpb25dfSBtdXN0IG1hdGNoLmApO1xuXG4gICAgcmV0dXJuIHRoaXMudHJhY2sodGhpcy5tYXRNdWxJbnRlcm5hbChhLCBiLCBhT3JpZW50YXRpb24sIGJPcmllbnRhdGlvbikpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBtYXRNdWxJbnRlcm5hbChcbiAgICAgIGE6IEFycmF5MkQsIGI6IEFycmF5MkQsIGFPcmllbnRhdGlvbjogTWF0cml4T3JpZW50YXRpb24sXG4gICAgICBiT3JpZW50YXRpb246IE1hdHJpeE9yaWVudGF0aW9uKTogQXJyYXkyRDtcblxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIGEgdmVjdG9yIGFuZCBhIG1hdHJpeCwgdiAqIEIuXG4gICAqIEBwYXJhbSB2IFRoZSB2ZWN0b3IgaW4gZG90IHByb2R1Y3Qgb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gbWF0cml4IFRoZSBtYXRyaXggaW4gZG90IHByb2R1Y3Qgb3BlcmF0aW9uLlxuICAgKi9cbiAgdmVjdG9yVGltZXNNYXRyaXgodjogQXJyYXkxRCwgbWF0cml4OiBBcnJheTJEKTogQXJyYXkxRCB7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHYucmFuayA9PT0gMSxcbiAgICAgICAgYEVycm9yIGluIHZlY3RvclRpbWVzTWF0cml4OiBmaXJzdCBpbnB1dCBtdXN0IGJlIHJhbmsgMSwgYnV0IGdvdCBgICtcbiAgICAgICAgICAgIGByYW5rICR7di5yYW5rfS5gKTtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgbWF0cml4LnJhbmsgPT09IDIsXG4gICAgICAgIGBFcnJvciBpbiB2ZWN0b3JUaW1lc01hdHJpeDogc2Vjb25kIGlucHV0IG11c3QgYmUgcmFuayAyLCBidXQgZ290IGAgK1xuICAgICAgICAgICAgYHJhbmsgJHttYXRyaXgucmFua30uYCk7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHYuc2l6ZSA9PT0gbWF0cml4LnNoYXBlWzBdLFxuICAgICAgICBgRXJyb3IgaW4gdmVjdG9yVGltZXNNYXRyaXg6IHNpemUgb2YgZmlyc3QgcmFuayAxIGlucHV0ICgke3Yuc2l6ZX0pIGAgK1xuICAgICAgICAgICAgYG11c3QgbWF0Y2ggaW5uZXIgZGltZW5zaW9uIG9mIHNlY29uZCByYW5rIDIgaW5wdXQsIGJ1dCBnb3QgYCArXG4gICAgICAgICAgICBgcmFuayAke21hdHJpeC5yYW5rfS5gKTtcblxuICAgIHJldHVybiB0aGlzLm1hdE11bCh2LmFzMkQoMSwgdi5zaXplKSwgbWF0cml4KS5hczFEKCk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIGEgbWF0cml4IGFuZCB2ZWN0b3IsIEEgKiB2LlxuICAgKiBAcGFyYW0gbWF0cml4IFRoZSBtYXRyaXggaW4gZG90IHByb2R1Y3Qgb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gdiBUaGUgdmVjdG9yIGluIGRvdCBwcm9kdWN0IG9wZXJhdGlvbi5cbiAgICovXG4gIG1hdHJpeFRpbWVzVmVjdG9yKG1hdHJpeDogQXJyYXkyRCwgdjogQXJyYXkxRCk6IEFycmF5MUQge1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB2LnJhbmsgPT09IDEsXG4gICAgICAgIGBFcnJvciBpbiB2ZWN0b3JUaW1lc01hdHJpeDogc2Vjb25kIGlucHV0IG11c3QgcmFuayAxLCBidXQgZ290IGAgK1xuICAgICAgICAgICAgYHJhbmsgJHt2LnJhbmt9LmApO1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICBtYXRyaXgucmFuayA9PT0gMixcbiAgICAgICAgYEVycm9yIGluIHZlY3RvclRpbWVzTWF0cml4OiBmaXJzdCBpbnB1dCBtdXN0IGJlIGEgcmFuayAyLCBidXQgZ290IGAgK1xuICAgICAgICAgICAgYHJhbmsgJHttYXRyaXgucmFua30uYCk7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHYuc2l6ZSA9PT0gbWF0cml4LnNoYXBlWzFdLFxuICAgICAgICBgRXJyb3IgaW4gdmVjdG9yVGltZXNNYXRyaXg6IHNpemUgb2YgZmlyc3QgcmFuayAxIGlucHV0ICR7di5zaXplfSBgICtcbiAgICAgICAgICAgIGBtdXN0IG1hdGNoIGlubmVyIGRpbWVuc2lvbiBvZiBzZWNvbmQgcmFuayAyIGlucHV0LCBidXQgZ290IGAgK1xuICAgICAgICAgICAgYHNoYXBlICR7bWF0cml4LnNoYXBlfS5gKTtcblxuICAgIHJldHVybiB0aGlzLm1hdE11bChtYXRyaXgsIHYuYXMyRCh2LnNpemUsIDEpKS5hczFEKCk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byB2ZWN0b3JzLCB2MSAqIHYyLlxuICAgKiBAcGFyYW0gdjEgVGhlIGZpcnN0IHZlY3RvciBpbiB0aGUgZG90IHByb2R1Y3Qgb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gdjIgVGhlIHNlY29uZCB2ZWN0b3IgaW4gdGhlIGRvdCBwcm9kdWN0IG9wZXJhdGlvbi5cbiAgICovXG4gIGRvdFByb2R1Y3QodjE6IEFycmF5MUQsIHYyOiBBcnJheTFEKTogU2NhbGFyIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgdjEucmFuayA9PT0gMSAmJiB2Mi5yYW5rID09PSAxLFxuICAgICAgICBgRXJyb3IgaW4gZG90UHJvZHVjdDogaW5wdXRzIG11c3QgYmUgcmFuayAxLCBidXQgZ290IHJhbmtzIGAgK1xuICAgICAgICAgICAgYCR7djEucmFua30gYW5kICR7djIucmFua30uYCk7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHYxLnNpemUgPT09IHYyLnNpemUsXG4gICAgICAgIGBFcnJvciBpbiBkb3RQcm9kdWN0OiBzaXplIG9mIGlucHV0cyAoJHt2MS5zaXplfSkgYW5kIChgICtcbiAgICAgICAgICAgIGAke3YyLnNpemV9KSBtdXN0IG1hdGNoLmApO1xuICAgIHJldHVybiB0aGlzLm1hdE11bCh2MS5hczJEKDEsIHYxLnNpemUpLCB2Mi5hczJEKHYyLnNpemUsIDEpKS5hc1NjYWxhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSBvdXRlciBwcm9kdWN0IG9mIHR3byB2ZWN0b3JzLCB2MSBhbmQgdjIuXG4gICAqIEBwYXJhbSB2MSBUaGUgZmlyc3QgdmVjdG9yIGluIHRoZSBvdXRlciBwcm9kdWN0IG9wZXJhdGlvbi5cbiAgICogQHBhcmFtIHYyIFRoZSBzZWNvbmQgdmVjdG9yIGluIHRoZSBkb3QgcHJvZHVjdCBvcGVyYXRpb24uXG4gICAqL1xuICBvdXRlclByb2R1Y3QodjE6IEFycmF5MUQsIHYyOiBBcnJheTFEKTogQXJyYXkyRCB7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHYxLnJhbmsgPT09IDEgJiYgdjIucmFuayA9PT0gMSxcbiAgICAgICAgYEVycm9yIGluIG91dGVyUHJvZHVjdDogaW5wdXRzIG11c3QgYmUgcmFuayAxLCBidXQgZ290IHJhbmtzIGAgK1xuICAgICAgICAgICAgYCR7djEucmFua30gYW5kICR7djIucmFua30uYCk7XG5cbiAgICByZXR1cm4gdGhpcy5tYXRNdWwodjEuYXMyRCh2MS5zaXplLCAxKSwgdjIuYXMyRCgxLCB2Mi5zaXplKSk7XG4gIH1cblxuICAvLy8vLy8vLy8vLy8vLy9cbiAgLy8gU2hhcGUgb3BzIC8vXG4gIC8vLy8vLy8vLy8vLy8vL1xuXG4gIC8qKlxuICAgKiBDbG9uZXMgYW4gTkRBcnJheSBvZiBhbnkgc2hhcGUuXG4gICAqIEBwYXJhbSBuZGFycmF5IFRoZSBOREFycmF5IHRvIGNsb25lLlxuICAgKi9cbiAgY2xvbmU8VCBleHRlbmRzIE5EQXJyYXk+KG5kYXJyYXk6IFQpOiBUIHtcbiAgICByZXR1cm4gdGhpcy50cmFjayh0aGlzLmNsb25lSW50ZXJuYWwobmRhcnJheSkpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBjbG9uZUludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihuZGFycmF5OiBUKTogVDtcblxuICAvKipcbiAgICogUmVzaGFwZXMgYW4gTkRBcnJheSB0byBhIG5ldyBzaGFwZS4gVGhlIHNpemUgb2YgdGhlIGlucHV0IE5EQXJyYXkgbXVzdFxuICAgKiBtYXRjaCB0aGUgc2l6ZSBvZiB0aGUgcmVxdWVzdGVkIHNoYXBlLlxuICAgKiBAcGFyYW0gbmRhcnJheSBUaGUgaW5wdXQgTkRBcnJheS5cbiAgICogQHBhcmFtIG5ld1NoYXBlIFRoZSBuZXcgc2hhcGUgdG8gcmVzaGFwZSB0aGUgTkRBcnJheSB0by4gTXVzdCBiZSB0aGUgc2FtZVxuICAgKiBzaXplIGFzIHRoZSBOREFycmF5LlxuICAgKi9cbiAgcmVzaGFwZTxUMSBleHRlbmRzIE5EQXJyYXksIFQyIGV4dGVuZHMgTkRBcnJheT4oXG4gICAgICBuZGFycmF5OiBUMSwgbmV3U2hhcGU6IG51bWJlcltdKTogVDIge1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICBuZGFycmF5LnNpemUgPT09IHV0aWwuc2l6ZUZyb21TaGFwZShuZXdTaGFwZSksXG4gICAgICAgIGBFcnJvciBpbiByZXNoYXBlOiBvbGQgc2l6ZSAke25kYXJyYXkuc2l6ZX0gbXVzdCBtYXRjaCBuZXcgc2l6ZSBgICtcbiAgICAgICAgICAgIGAke3V0aWwuc2l6ZUZyb21TaGFwZShuZXdTaGFwZSl9LmApO1xuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMucmVzaGFwZUludGVybmFsPFQxLCBUMj4obmRhcnJheSwgbmV3U2hhcGUpKTtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgcmVzaGFwZUludGVybmFsPFQxIGV4dGVuZHMgTkRBcnJheSwgVDIgZXh0ZW5kcyBOREFycmF5PihcbiAgICAgIG5kYXJyYXk6IFQxLCBuZXdTaGFwZTogbnVtYmVyW10pOiBUMjtcblxuICAvKipcbiAgICogRXh0cmFjdHMgYSBzbGljZSBmcm9tIGEgbWF0cml4LiBUaGUgb3BlcmF0aW9uIGV4dHJhY2VzIGEgc2xpY2UgZnJvbSBpbnB1dFxuICAgKiB0aGF0IHN0YXJ0cyBhdCBjb29yZGluYXRlcyBgYmVnaW5gIGFuZCBpcyBvZiBzaXplIGBzaXplYC5cbiAgICogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCBtYXRyaXggdG8gc2xpY2UgZnJvbS5cbiAgICogQHBhcmFtIGJlZ2luIFRoZSAyRCBjb29yZGluYXRlcyBpbiB0aGUgaW5wdXQgbWF0cml4IHRvIHN0YXJ0IHRoZSBzbGljZVxuICAgKiBmcm9tLlxuICAgKiBAcGFyYW0gc2l6ZSBUaGUgc2ljZSBvZiB0aGUgMkQgd2luZG93IHRvIHNsaWNlLlxuICAgKi9cbiAgc2xpY2UyRChpbnB1dDogQXJyYXkyRCwgYmVnaW46IFtudW1iZXIsIG51bWJlcl0sIHNpemU6IFtudW1iZXIsIG51bWJlcl0pOlxuICAgICAgQXJyYXkyRCB7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIGJlZ2luWzBdICsgc2l6ZVswXSA8PSBpbnB1dC5zaGFwZVswXSAmJlxuICAgICAgICAgICAgYmVnaW5bMV0gKyBzaXplWzFdIDw9IGlucHV0LnNoYXBlWzFdLFxuICAgICAgICBgRXJyb3IgaW4gc2xpY2UyRDogcmVxdWVzdGVkIHN0YXJ0IHBvc2l0aW9uICR7YmVnaW59IGFuZCBzaXplIGAgK1xuICAgICAgICAgICAgYCR7c2l6ZX0gd291bGQgb3ZlcmZsb3cgaW5wdXQgb2Ygc2hhcGUgJHtpbnB1dC5zaGFwZX0uYCk7XG4gICAgcmV0dXJuIHRoaXMudHJhY2sodGhpcy5zbGljZTJESW50ZXJuYWwoaW5wdXQsIGJlZ2luLCBzaXplKSk7XG4gIH1cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHNsaWNlMkRJbnRlcm5hbChcbiAgICAgIGlucHV0OiBBcnJheTJELCBiZWdpbjogW251bWJlciwgbnVtYmVyXSwgc2l6ZTogW251bWJlciwgbnVtYmVyXSk6IEFycmF5MkQ7XG5cbiAgLyoqXG4gICAqIENvcGllcyBhIHdpbmRvdyBmcm9tIHRoZSBgc291cmNlYCBtYXRyaXggc3RhcnRpbmcgYXQgYHNvdXJjZUJlZ2luYCBhbmQgaXNcbiAgICogb2Ygc2l6ZSBgc291cmNlU2l6ZWAgdG8gYSB3aW5kb3cgaW4gdGhlIGBkZXN0YCBtYXRyaXggc3RhcnRpbmcgYXRcbiAgICogYGRlc3RCZWdpbmAgYW5kIGlzIG9mIHNpemUgYGRlc3RTaXplYC9cbiAgICogQHBhcmFtIHNvdXJjZSBUaGUgc291cmNlIG1hdHJpeCB0byBjb3B5IGZyb20uXG4gICAqIEBwYXJhbSBzb3VyY2VCZWdpbiBUaGUgY29vcmRpbmF0ZXMgdG8gc3RhcnQgdGhlIGNvcHkgZnJvbS5cbiAgICogQHBhcmFtIHNvdXJjZVNpemUgVGhlIHNpemUgb2YgdGhlIGNvcHkgd2luZG93LlxuICAgKiBAcGFyYW0gZGVzdCBUaGUgZGVzdGluYXRpb24gbWF0cml4IHRvIGNvcHkgdG8uXG4gICAqIEBwYXJhbSBkZXN0QmVnaW4gVGhlIGNvb3JkaW5hdGVzIGluIGBkZXN0YCB0byBjb3B5IHRvLlxuICAgKiBAcGFyYW0gZGVzdFNpemUgVGhlIHNpemUgb2YgdGhlIGRlc3RpbmF0aW9uIHdpbmRvdy5cbiAgICovXG4gIGNvcHkyRChcbiAgICAgIHNvdXJjZTogQXJyYXkyRCwgc291cmNlQmVnaW46IFtudW1iZXIsIG51bWJlcl0sXG4gICAgICBzb3VyY2VTaXplOiBbbnVtYmVyLCBudW1iZXJdLCBkZXN0OiBBcnJheTJELCBkZXN0QmVnaW46IFtudW1iZXIsIG51bWJlcl0sXG4gICAgICBkZXN0U2l6ZTogW251bWJlciwgbnVtYmVyXSkge1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICBzb3VyY2VCZWdpblswXSArIHNvdXJjZVNpemVbMF0gPD0gc291cmNlLnNoYXBlWzBdICYmXG4gICAgICAgICAgICBzb3VyY2VCZWdpblsxXSArIHNvdXJjZVNpemVbMV0gPD0gc291cmNlLnNoYXBlWzFdLFxuICAgICAgICBgRXJyb3IgaW4gY29weTJEOiByZXF1ZXN0ZWQgc291cmNlIHN0YXJ0IHBvc2l0aW9uICR7c291cmNlQmVnaW59IGAgK1xuICAgICAgICAgICAgYGFuZCBzb3VyY2Ugc2l6ZSAke3NvdXJjZVNpemV9IHdvdWxkIG92ZXJmbG93IHNvdXJjZSBOREFycmF5YCArXG4gICAgICAgICAgICBgb2Ygc2hhcGUgJHtzb3VyY2Uuc2hhcGV9LmApO1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICBkZXN0QmVnaW5bMF0gKyBkZXN0U2l6ZVswXSA8PSBkZXN0LnNoYXBlWzBdICYmXG4gICAgICAgICAgICBkZXN0QmVnaW5bMV0gKyBkZXN0U2l6ZVsxXSA8PSBkZXN0LnNoYXBlWzFdLFxuICAgICAgICBgRXJyb3IgaW4gY29weTJEOiByZXF1ZXN0ZWQgZGVzdCBzdGFydCBwb3NpdGlvbiAke2Rlc3RCZWdpbn0gYCArXG4gICAgICAgICAgICBgYW5kIHNvdXJjZSBzaXplICR7ZGVzdFNpemV9IHdvdWxkIG92ZXJmbG93IGRlc3QgTkRBcnJheSBvZmAgK1xuICAgICAgICAgICAgYHNoYXBlICR7ZGVzdC5zaGFwZX0uYCk7XG4gICAgY29weTJkX3V0aWwudmFsaWRhdGVTaGFwZXMoc291cmNlU2l6ZSwgZGVzdFNpemUpO1xuXG4gICAgcmV0dXJuIHRoaXMuY29weTJESW50ZXJuYWwoXG4gICAgICAgIHNvdXJjZSwgc291cmNlQmVnaW4sIHNvdXJjZVNpemUsIGRlc3QsIGRlc3RCZWdpbiwgZGVzdFNpemUpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBjb3B5MkRJbnRlcm5hbChcbiAgICAgIHNvdXJjZTogQXJyYXkyRCwgc291cmNlQmVnaW46IFtudW1iZXIsIG51bWJlcl0sXG4gICAgICBzb3VyY2VTaXplOiBbbnVtYmVyLCBudW1iZXJdLCBkZXN0OiBBcnJheTJELCBkZXN0QmVnaW46IFtudW1iZXIsIG51bWJlcl0sXG4gICAgICBkZXN0U2l6ZTogW251bWJlciwgbnVtYmVyXSk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIENvbmNhdGVuYXRlcyB0d28gM0QgbmRhcnJheXMgYWxvbmcgYSBnaXZlbiBheGlzLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgaWY6XG4gICAqIEE6IHNoYXBlKDIsIDEsIDMpID0gfCByMSwgZzEsIGIxIHxcbiAgICogICAgICAgICAgICAgICAgICAgICB8IHIyLCBnMiwgYjIgfFxuICAgKlxuICAgKiBCOiBzaGFwZSgyLCAxLCAzKSA9IHwgcjMsIGczLCBiMyB8XG4gICAqICAgICAgICAgICAgICAgICAgICAgfCByNCwgZzQsIGI0IHxcbiAgICpcbiAgICogQyA9IGNvbmNhdDNEKEEsIEIsIGF4aXMpXG4gICAqXG4gICAqIGlmIGF4aXMgPSAwOlxuICAgKiBDOiBzaGFwZSg0LCAxLCAzKSA9IHwgcjEsIGcxLCBiMSB8XG4gICAqICAgICAgICAgICAgICAgICAgICAgfCByMiwgZzIsIGIyIHxcbiAgICogICAgICAgICAgICAgICAgICAgICB8IHIzLCBnMywgYjMgfFxuICAgKiAgICAgICAgICAgICAgICAgICAgIHwgcjQsIGc0LCBiNCB8XG4gICAqXG4gICAqIGlmIGF4aXMgPSAxOlxuICAgKiBDOiBzaGFwZSgyLCAyLCAzKSA9IHwgcjEsIGcxLCBiMSwgcjMsIGczLCBiMyB8XG4gICAqICAgICAgICAgICAgICAgICAgICAgfCByMiwgZzIsIGIyLCByNCwgZzQsIGI0IHxcbiAgICpcbiAgICogaWYgYXhpcyA9IDI6XG4gICAqIEMgPSBzaGFwZSgyLCAxLCA2KSA9IHwgcjEsIGcxLCBiMSwgcjMsIGczLCBiMyB8XG4gICAqICAgICAgICAgICAgICAgICAgICAgIHwgcjIsIGcyLCBiMiwgcjQsIGc0LCBiNCB8XG4gICAqXG4gICAqIEBwYXJhbSBuZGFycmF5MSBUaGUgZmlyc3QgYXJyYXkgdG8gY29uY2F0LlxuICAgKiBAcGFyYW0gbmRhcnJheTIgVGhlIHNlY29uZCBhcnJheSB0byBjb25hdC5cbiAgICogQHBhcmFtIGF4aXMgVGhlIGF4aXMgdG8gY29uY2F0ZSBhbG9uZy5cbiAgICovXG4gIGNvbmNhdDNEKG5kYXJyYXkxOiBBcnJheTNELCBuZGFycmF5MjogQXJyYXkzRCwgYXhpczogbnVtYmVyKTogQXJyYXkzRCB7XG4gICAgY29uY2F0M2RfdXRpbC5hc3NlcnRDb25jYXQzRFNoYXBlc01hdGNoKFxuICAgICAgICBuZGFycmF5MS5zaGFwZSwgbmRhcnJheTIuc2hhcGUsIGF4aXMsICdFcnJvciBpbiBjb25jYXQzZDogJyk7XG4gICAgcmV0dXJuIHRoaXMudHJhY2sodGhpcy5jb25jYXQzREludGVybmFsKG5kYXJyYXkxLCBuZGFycmF5MiwgYXhpcykpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBjb25jYXQzREludGVybmFsKFxuICAgICAgbmRhcnJheTE6IEFycmF5M0QsIG5kYXJyYXkyOiBBcnJheTNELCBheGlzOiBudW1iZXIpOiBBcnJheTNEO1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gUmVkdWN0aW9uIG9wcyAvL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSB0aGUgbG9nKHN1bShlIF4geCkpIGZvciBlYWNoIHggaW4gdGhlIGlucHV0IG5kYXJyYXkuXG4gICAqIEBwYXJhbSBuZGFycmF5IFRoZSBpbnB1dCBOREFycmF5IHRvIGNvbXB1dGUgdGhlIGxvZ1N1bUV4cCBvdmVyLlxuICAgKi9cbiAgbG9nU3VtRXhwKG5kYXJyYXk6IE5EQXJyYXkpOiBTY2FsYXIge1xuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMubG9nU3VtRXhwSW50ZXJuYWwobmRhcnJheSkpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBsb2dTdW1FeHBJbnRlcm5hbChuZGFycmF5OiBOREFycmF5KTogU2NhbGFyO1xuXG4gIC8qKlxuICAgKiBDb21wdXRlcyB0aGUgc3VtIG9mIGFsbCB0aGUgZW50cmllcyBpbiB0aGUgaW5wdXQgTkRBcnJheS5cbiAgICogQHBhcmFtIG5kYXJyYXkgVGhlIGlucHV0IE5EQXJyYXkgdG8gY29tcHV0ZSB0aGUgc3VtIG92ZXIuXG4gICAqL1xuICBzdW0obmRhcnJheTogTkRBcnJheSk6IFNjYWxhciB7XG4gICAgcmV0dXJuIHRoaXMudHJhY2sodGhpcy5zdW1JbnRlcm5hbChuZGFycmF5KSk7XG4gIH1cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHN1bUludGVybmFsKG5kYXJyYXk6IE5EQXJyYXkpOiBTY2FsYXI7XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSBmbGF0dGVuZWQgaW5kZXggb2YgdGhlIG1pbmltdW0gZWxlbWVudCBpbiB0aGUgbmRhcnJheS5cbiAgICogQHBhcmFtIG5kYXJyYXkgVGhlIGlucHV0IE5EQXJyYXkuXG4gICAqL1xuICBhcmdNaW4obmRhcnJheTogTkRBcnJheSk6IFNjYWxhciB7XG4gICAgcmV0dXJuIHRoaXMudHJhY2sodGhpcy5hcmdNaW5JbnRlcm5hbChuZGFycmF5KSk7XG4gIH1cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGFyZ01pbkludGVybmFsKG5kYXJyYXk6IE5EQXJyYXkpOiBTY2FsYXI7XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSBmbGF0dGVuZWQgaW5kZXggb2YgdGhlIG1heGltdW0gZWxlbWVudCBpbiB0aGUgbmRhcnJheS5cbiAgICogQHBhcmFtIG5kYXJyYXkgVGhlIGlucHV0IE5EQXJyYXkuXG4gICAqL1xuICBhcmdNYXgobmRhcnJheTogTkRBcnJheSk6IFNjYWxhciB7XG4gICAgcmV0dXJuIHRoaXMudHJhY2sodGhpcy5hcmdNYXhJbnRlcm5hbChuZGFycmF5KSk7XG4gIH1cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGFyZ01heEludGVybmFsKG5kYXJyYXk6IE5EQXJyYXkpOiBTY2FsYXI7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSAxIGlmIHRoZSBhcmdNYXggb2YgeDEgYW5kIHgyIGFyZSB0aGUgc2FtZSwgb3RoZXJ3aXNlIDAuXG4gICAqIEBwYXJhbSB4MSBUaGUgZmlyc3QgaW5wdXQgTkRBcnJheS5cbiAgICogQHBhcmFtIHgyIFRoZSBzZWNvbmQgaW5wdXQgTkRBcnJheS5cbiAgICovXG4gIGFyZ01heEVxdWFscyh4MTogTkRBcnJheSwgeDI6IE5EQXJyYXkpOiBTY2FsYXIge1xuICAgIHV0aWwuYXNzZXJ0U2hhcGVzTWF0Y2goeDEuc2hhcGUsIHgyLnNoYXBlLCAnRXJyb3IgaW4gYXJnTWF4RXF1YWxzOiAnKTtcbiAgICByZXR1cm4gdGhpcy50cmFjayh0aGlzLmFyZ01heEVxdWFsc0ludGVybmFsKHgxLCB4MikpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBhcmdNYXhFcXVhbHNJbnRlcm5hbCh4MTogTkRBcnJheSwgeDI6IE5EQXJyYXkpOiBTY2FsYXI7XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSB0b3AgSyB2YWx1ZXMgYW5kIGZsYXR0ZW5lZCBpbmRpY2VzLlxuICAgKiBAcGFyYW0gbmRhcnJheSBUaGUgaW5wdXQgTkRBcnJheS5cbiAgICogQHBhcmFtIGsgSG93IG1hbnkgdG9wIHZhbHVlcyB0byBjb21wdXRlLlxuICAgKi9cbiAgdG9wSyhuZGFycmF5OiBOREFycmF5LCBrOiBudW1iZXIpOiB7dmFsdWVzOiBBcnJheTFELCBpbmRpY2VzOiBBcnJheTFEfSB7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIGsgPD0gbmRhcnJheS5zaXplLFxuICAgICAgICBgRXJyb3IgaW4gdG9wSzogayB2YWx1ZSAoJHtrfSkgbXVzdCBiZSBsZXNzIHRoYW4gc2l6ZSBvZiBpbnB1dCBgICtcbiAgICAgICAgICAgIGBuZGFycmF5LCBnb3Qgc2hhcGUgJHtuZGFycmF5LnNoYXBlfS5gKTtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLnRvcEtJbnRlcm5hbChuZGFycmF5LCBrKTtcbiAgICB0aGlzLnRyYWNrKHJlc3VsdC52YWx1ZXMpO1xuICAgIHRoaXMudHJhY2socmVzdWx0LmluZGljZXMpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHRvcEtJbnRlcm5hbChuZGFycmF5OiBOREFycmF5LCBrOiBudW1iZXIpOlxuICAgICAge3ZhbHVlczogQXJyYXkxRCwgaW5kaWNlczogQXJyYXkxRH07XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSBtaW5pbXVtIHZhbHVlIGZyb20gdGhlIGlucHV0LlxuICAgKiBAcGFyYW0gbmRhcnJheSBUaGUgaW5wdXQgTkRBcnJheS5cbiAgICovXG4gIG1pbihuZGFycmF5OiBOREFycmF5KTogU2NhbGFyIHtcbiAgICByZXR1cm4gdGhpcy50cmFjayh0aGlzLm1pbkludGVybmFsKG5kYXJyYXkpKTtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgbWluSW50ZXJuYWwobmRhcnJheTogTkRBcnJheSk6IFNjYWxhcjtcblxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIG1heGltdW0gdmFsdWUgZnJvbSB0aGUgaW5wdXQuXG4gICAqIEBwYXJhbSBuZGFycmF5IFRoZSBpbnB1dCBOREFycmF5LlxuICAgKi9cbiAgbWF4KG5kYXJyYXk6IE5EQXJyYXkpOiBTY2FsYXIge1xuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMubWF4SW50ZXJuYWwobmRhcnJheSkpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBtYXhJbnRlcm5hbChuZGFycmF5OiBOREFycmF5KTogU2NhbGFyO1xuXG4gIC8qKlxuICAgKiBDb21wdXRlcyB0aGUgc29mdG1heCBub3JtYWxpemVkIHZlY3RvciBmcm9tIHRoZSBpbnB1dCB2ZWN0b3IuXG4gICAqIEBwYXJhbSB4IFRoZSBpbnB1dCB2ZWN0b3IuXG4gICAqL1xuICBzb2Z0bWF4KHg6IEFycmF5MUQpOiBBcnJheTFEIHtcbiAgICByZXR1cm4gdGhpcy5zY29wZSgoKSA9PiB7XG4gICAgICAvLyBEbyBpdCBpbiBsb2cgc3BhY2UgZm9yIG51bWVyaWNhbCBzdGFiaWxpdHkuXG4gICAgICAvLyBleHAoWCAtIGxvZ1N1bUV4cChYKSlcbiAgICAgIGNvbnN0IGxzZSA9IHRoaXMubG9nU3VtRXhwKHgpO1xuICAgICAgY29uc3QgbG9nUmVzdWx0ID0gdGhpcy5hcnJheU1pbnVzU2NhbGFyKHgsIGxzZSk7XG4gICAgICByZXR1cm4gdGhpcy5leHAobG9nUmVzdWx0KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gRWxlbWVudC13aXNlIG9wcyAvL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgLyoqXG4gICAqIFN3aXRjaGVzIGRpbWVuc2lvbnMgb2YgdGhlIGlucHV0IE5EQXJyYXkuXG4gICAqIEBwYXJhbSBhIFRoZSBpbnB1dCBOREFycmF5LlxuICAgKiBAcGFyYW0gbmV3RGltIFRoZSBuZXcgaW5kaWNlcyB0aGF0IGRlZmluZSB3aGljaCBzaGFwZXMgdmFsdWVzIHRvIHN3aXRjaC5cbiAgICovXG4gIHN3aXRjaERpbTxUIGV4dGVuZHMgTkRBcnJheT4oYTogVCwgbmV3RGltOiBudW1iZXJbXSk6IFQge1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICBhLnJhbmsgPT09IG5ld0RpbS5sZW5ndGgsXG4gICAgICAgIGBFcnJvciBpbiBzd2l0Y2hEaW06IGxlbmd0aCBvZiBpbnB1dCBzaGFwZSAke2Euc2hhcGV9IGAgK1xuICAgICAgICAgICAgYG11c3QgbWF0Y2ggc2l6ZSBvZiBuZXdEaW0gYXJyYXkgJHtuZXdEaW19LmApO1xuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMuc3dpdGNoRGltSW50ZXJuYWwoYSwgbmV3RGltKSk7XG4gIH1cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHN3aXRjaERpbUludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihcbiAgICAgIGE6IFQsIG5ld0RpbTogbnVtYmVyW10pOiBUO1xuXG4gIC8qKlxuICAgKiBDb21wdXRlcyBhIHNjYWxhciBwbHVzIE5EQXJyYXksIGMgKyBBLlxuICAgKiBAcGFyYW0gYyBUaGUgc2NhbGFyIGMgaW4gYyArIEEuXG4gICAqIEBwYXJhbSBhIFRoZSBOREFycmF5IEEgaW4gYyArIEEuXG4gICAqL1xuICBzY2FsYXJQbHVzQXJyYXk8VCBleHRlbmRzIE5EQXJyYXk+KGM6IFNjYWxhciwgYTogVCk6IFQge1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICBjLnNpemUgPT09IDEsXG4gICAgICAgIGBFcnJvciBpbiBzY2FsYXJQbHVzQXJyYXk6IGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgcmFuayAwLCBidXQgZ290IGAgK1xuICAgICAgICAgICAgYHJhbmsgJHtjLnJhbmt9LmApO1xuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMuc2NhbGFyUGx1c0FycmF5SW50ZXJuYWwoYywgYSkpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBzY2FsYXJQbHVzQXJyYXlJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4oXG4gICAgICBjOiBTY2FsYXIsIGE6IFQpOiBUO1xuXG4gIC8qKlxuICAgKiBDb21wdXRlcyBhIHNjYWxhciBtaW51cyBOREFycmF5LCBjIC0gQS5cbiAgICogQHBhcmFtIGMgVGhlIHNjYWxhciBjIGluIGMgLSBBLlxuICAgKiBAcGFyYW0gYSBUaGUgTkRBcnJheSBBIGluIGMgLSBBLlxuICAgKi9cbiAgc2NhbGFyTWludXNBcnJheTxUIGV4dGVuZHMgTkRBcnJheT4oYzogU2NhbGFyLCBhOiBUKTogVCB7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIGMuc2l6ZSA9PT0gMSxcbiAgICAgICAgYEVycm9yIGluIHNjYWxhck1pbnVzQXJyYXk6IGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgcmFuayAwLCBidXQgZ290IGAgK1xuICAgICAgICAgICAgYHJhbmsgJHtjLnJhbmt9LmApO1xuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMuc2NhbGFyTWludXNBcnJheUludGVybmFsKGMsIGEpKTtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3Qgc2NhbGFyTWludXNBcnJheUludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihcbiAgICAgIGM6IFNjYWxhciwgYTogVCk6IFQ7XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIGEgc2NhbGFyIG1pbnVzIE5EQXJyYXksIEEgLSBjLlxuICAgKiBAcGFyYW0gYSBUaGUgTkRBcnJheSBBIGluIEEgLSBjLlxuICAgKiBAcGFyYW0gYyBUaGUgc2NhbGFyIGMgaW4gQSAtIGMuXG4gICAqL1xuICBhcnJheU1pbnVzU2NhbGFyPFQgZXh0ZW5kcyBOREFycmF5PihhOiBULCBjOiBTY2FsYXIpOiBUIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgYy5zaXplID09PSAxLFxuICAgICAgICBgRXJyb3IgaW4gYXJyYXlNaW51c1NjYWxhcjogc2Vjb25kIGFyZ3VtZW50IG11c3QgYmUgcmFuayAwLCBidXQgYCArXG4gICAgICAgICAgICBgZ290IHJhbmsgJHtjLnJhbmt9LmApO1xuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMuYXJyYXlNaW51c1NjYWxhckludGVybmFsKGEsIGMpKTtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgYXJyYXlNaW51c1NjYWxhckludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihcbiAgICAgIGE6IFQsIGM6IFNjYWxhcik6IFQ7XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIC0xICogQSBlbGVtZW50LXdpc2UuXG4gICAqIEBwYXJhbSBhIFRoZSBpbnB1dCBhcnJheS5cbiAgICovXG4gIG5lZzxUIGV4dGVuZHMgTkRBcnJheT4oYTogVCk6IFQge1xuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMubmVnSW50ZXJuYWwoYSkpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBuZWdJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4oYTogVCk6IFQ7XG5cbiAgLyoqXG4gICAqIEFkZHMgdHdvIE5EQXJyYXlzIGVsZW1lbnQtd2lzZSwgQSArIEIuIElucHV0cyBtdXN0IGJlIHRoZSBzYW1lIHNoYXBlLlxuICAgKiBAcGFyYW0gYSBUaGUgZmlyc3QgTkRBcnJheSB0byBhZGQgZWxlbWVudC13aXNlLlxuICAgKiBAcGFyYW0gYiBUaGUgc2Vjb25kIE5EQXJyYXkgdG8gYWRkIGVsZW1lbnQtd2lzZS5cbiAgICovXG4gIGFkZDxUIGV4dGVuZHMgTkRBcnJheT4oYTogVCwgYjogVCk6IFQge1xuICAgIHV0aWwuYXNzZXJ0U2hhcGVzTWF0Y2goYS5zaGFwZSwgYi5zaGFwZSwgJ0Vycm9yIGluIGFkZDogJyk7XG4gICAgcmV0dXJuIHRoaXMudHJhY2sodGhpcy5hZGRJbnRlcm5hbChhLCBiKSk7XG4gIH1cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGFkZEludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihhOiBULCBiOiBUKTogVDtcblxuICAvKipcbiAgICogU3VidHJhY3RzIHR3byBOREFycmF5cyBlbGVtZW50LXdpc2UsIEEgLSBCLiBJbnB1dHMgbXVzdCBiZSB0aGUgc2FtZSBzaGFwZS5cbiAgICogQHBhcmFtIGEgVGhlIGZpcnN0IE5EQXJyYXkgdG8gc3VidHJhY3QgZWxlbWVudC13aXNlLlxuICAgKiBAcGFyYW0gYiBUaGUgc2Vjb25kIE5EQXJyYXkgdG8gc3VidHJhY3QgZWxlbWVudC13aXNlLlxuICAgKi9cbiAgc3ViPFQgZXh0ZW5kcyBOREFycmF5PihhOiBULCBiOiBUKTogVCB7XG4gICAgdXRpbC5hc3NlcnRTaGFwZXNNYXRjaChhLnNoYXBlLCBiLnNoYXBlLCAnRXJyb3IgaW4gc3ViOiAnKTtcbiAgICByZXR1cm4gdGhpcy50cmFjayh0aGlzLnN1YkludGVybmFsKGEsIGIpKTtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3Qgc3ViSW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KGE6IFQsIGI6IFQpOiBUO1xuXG4gIC8qKlxuICAgKiBNdWx0aXBsaWVzIHR3byBOREFycmF5cyBlbGVtZW50LXdpc2UgKGhhZGFtYXJkIHByb2R1Y3QpLCBBICogQi4gSW5wdXRzIG11c3RcbiAgICogYmUgdGhlIHNhbWUgc2hhcGUuXG4gICAqIEBwYXJhbSBhIFRoZSBmaXJzdCBOREFycmF5IHRvIG11bHRpcGx5IGVsZW1lbnQtd2lzZS5cbiAgICogQHBhcmFtIGIgVGhlIHNlY29uZCBOREFycmF5IHRvIG11bHRpcGx5IGVsZW1lbnQtd2lzZS5cbiAgICovXG4gIGVsZW1lbnRXaXNlTXVsPFQgZXh0ZW5kcyBOREFycmF5PihhOiBULCBiOiBUKTogVCB7XG4gICAgdXRpbC5hc3NlcnRTaGFwZXNNYXRjaChhLnNoYXBlLCBiLnNoYXBlLCAnRXJyb3IgaW4gZWxlbWVudFdpc2VNdWw6ICcpO1xuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMuZWxlbWVudFdpc2VNdWxJbnRlcm5hbChhLCBiKSk7XG4gIH1cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGVsZW1lbnRXaXNlTXVsSW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KGE6IFQsIGI6IFQpOiBUO1xuXG4gIC8qKlxuICAgKiBEaXZpZGVzIHR3byBOREFycmF5cyBlbGVtZW50LXdpc2UgKGhhZGFtYXJkIHByb2R1Y3QpLCBBIC8gQi4gSW5wdXRzIG11c3QgYmVcbiAgICogdGhlIHNhbWUgc2hhcGUuXG4gICAqIEBwYXJhbSBhIFRoZSBmaXJzdCBOREFycmF5IHRvIGRpdmlkZSBlbGVtZW50LXdpc2UuXG4gICAqIEBwYXJhbSBiIFRoZSBzZWNvbmQgTkRBcnJheSB0byBkaXZpZGUgZWxlbWVudC13aXNlLlxuICAgKi9cbiAgZGl2aWRlPFQgZXh0ZW5kcyBOREFycmF5PihhOiBULCBiOiBUKTogVCB7XG4gICAgdXRpbC5hc3NlcnRTaGFwZXNNYXRjaChhLnNoYXBlLCBiLnNoYXBlLCAnRXJyb3IgaW4gZGl2aWRlOiAnKTtcbiAgICByZXR1cm4gdGhpcy50cmFjayh0aGlzLmRpdmlkZUludGVybmFsKGEsIGIpKTtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZGl2aWRlSW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KGE6IFQsIGI6IFQpOiBUO1xuXG4gIC8qKlxuICAgKiBDb21wdXRlcyBhIHNjYWxhciBkaXZpZGVkIGJ5IGFuIE5EQXJyYXksIGJyb2FkY2FzdGVkIG92ZXIgdGhlIE5EQXJyYXksIGMgL1xuICAgKiBBLlxuICAgKiBAcGFyYW0gYyBUaGUgc2NhbGFyIHZhbHVlIGluIGMgLyBBLlxuICAgKiBAcGFyYW0gYSBUaGUgTkRBcnJheSB2YWx1ZSBpbiBjIC8gQS5cbiAgICovXG4gIHNjYWxhckRpdmlkZWRCeUFycmF5PFQgZXh0ZW5kcyBOREFycmF5PihjOiBTY2FsYXIsIGE6IFQpOiBUIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgYy5zaXplID09PSAxLFxuICAgICAgICBgRXJyb3IgaW4gc2NhbGFyRGl2aWRlZEJ5QXJyYXk6IGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgcmFuayAwLCBidXQgYCArXG4gICAgICAgICAgICBgZ290IE5EQXJyYXkgb2YgcmFuayAke2MucmFua30uYCk7XG4gICAgcmV0dXJuIHRoaXMudHJhY2sodGhpcy5zY2FsYXJEaXZpZGVkQnlBcnJheUludGVybmFsKGMsIGEpKTtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3Qgc2NhbGFyRGl2aWRlZEJ5QXJyYXlJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4oXG4gICAgICBjOiBTY2FsYXIsIGE6IFQpOiBUO1xuXG4gIC8qKlxuICAgKiBDb21wdXRlcyBhbiBOREFycmF5IGRpdmlkZWQgYnkgYSBzY2FsYXIsIGJyb2FkY2FzdGVkIG92ZXIgdGhlIE5EQXJyYXksIEEgL1xuICAgKiBjLlxuICAgKiBAcGFyYW0gYSBUaGUgTkRBcnJheSB2YWx1ZSBpbiBBIC8gYy5cbiAgICogQHBhcmFtIGMgVGhlIHNjYWxhciB2YWx1ZSBpbiBBIC8gYy5cbiAgICovXG4gIGFycmF5RGl2aWRlZEJ5U2NhbGFyPFQgZXh0ZW5kcyBOREFycmF5PihhOiBULCBjOiBTY2FsYXIpOiBUIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgYy5zaXplID09PSAxLFxuICAgICAgICBgRXJyb3IgaW4gYXJyYXlEaXZpZGVkQnlTY2FsYXI6IHNlY29uZCBhcmd1bWVudCBtdXN0IGJlIHJhbmsgMCwgYCArXG4gICAgICAgICAgICBgYnV0IGdvdCBOREFycmF5IG9mIHJhbmsgJHtjLnJhbmt9LmApO1xuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMuYXJyYXlEaXZpZGVkQnlTY2FsYXJJbnRlcm5hbChhLCBjKSk7XG4gIH1cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGFycmF5RGl2aWRlZEJ5U2NhbGFySW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KFxuICAgICAgYTogVCwgYzogU2NhbGFyKTogVDtcblxuICAvKipcbiAgICogQ29tcHV0ZXMgZXhwb25lbnRpYWwgb2YgdGhlIGlucHV0IE5EQXJyYXkgZWxlbWVudC13aXNlLiB5ID0gZSBeIHhcbiAgICogQHBhcmFtIG5kYXJyYXkgVGhlIGlucHV0IE5EQXJyYXkuXG4gICAqL1xuICBleHA8VCBleHRlbmRzIE5EQXJyYXk+KG5kYXJyYXk6IFQpOiBUIHtcbiAgICByZXR1cm4gdGhpcy50cmFjayh0aGlzLmV4cEludGVybmFsKG5kYXJyYXkpKTtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZXhwSW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KG5kYXJyYXk6IFQpOiBUO1xuXG4gIC8qKlxuICAgKiBDb21wdXRlcyBuYXR1cmFsIGxvZ2FyaXRobSBvZiB0aGUgaW5wdXQgTkRBcnJheSBlbGVtZW50LXdpc2UuIHkgPSBsbih4KVxuICAgKiBAcGFyYW0gbmRhcnJheSBUaGUgaW5wdXQgTkRBcnJheS5cbiAgICovXG4gIGxvZzxUIGV4dGVuZHMgTkRBcnJheT4obmRhcnJheTogVCk6IFQge1xuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMubG9nSW50ZXJuYWwobmRhcnJheSkpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBsb2dJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4obmRhcnJheTogVCk6IFQ7XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHJlY3RpZmllZCBsaW5lYXIgZWxlbWVudC13aXNlLCBtYXgoeCwgMCkuXG4gICAqIEBwYXJhbSBuZGFycmF5IFRoZSBpbnB1dCBOREFycmF5LlxuICAgKi9cbiAgcmVsdTxUIGV4dGVuZHMgTkRBcnJheT4obmRhcnJheTogVCk6IFQge1xuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMucmVsdUludGVybmFsKG5kYXJyYXkpKTtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgcmVsdUludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihuZGFycmF5OiBUKTogVDtcblxuICAvKipcbiAgICogQ29tcHV0ZXMgc2lnbW9pZCBlbGVtZW50LXdpc2UsIHkgPSAxIC8gKDEgKyBleHAoLXgpKS5cbiAgICogQHBhcmFtIG5kYXJyYXkgVGhlIGlucHV0IE5EQXJyYXkuXG4gICAqL1xuICBzaWdtb2lkPFQgZXh0ZW5kcyBOREFycmF5PihuZGFycmF5OiBUKTogVCB7XG4gICAgcmV0dXJuIHRoaXMudHJhY2sodGhpcy5zaWdtb2lkSW50ZXJuYWwobmRhcnJheSkpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBzaWdtb2lkSW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KG5kYXJyYXk6IFQpOiBUO1xuXG4gIC8qKlxuICAgKiBDb21wdXRlcyBoeXBlcmJvbGljIHRhbmdlbnQgb2YgdGhlIGlucHV0IE5EQXJyYXkgZWxlbWVudC13aXNlLlxuICAgKiBAcGFyYW0gbmRhcnJheSBUaGUgaW5wdXQgTkRBcnJheS5cbiAgICovXG4gIHRhbmg8VCBleHRlbmRzIE5EQXJyYXk+KG5kYXJyYXk6IFQpOiBUIHtcbiAgICByZXR1cm4gdGhpcy50cmFjayh0aGlzLnRhbmhJbnRlcm5hbChuZGFycmF5KSk7XG4gIH1cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHRhbmhJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4obmRhcnJheTogVCk6IFQ7XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHNpbiBvZiB0aGUgaW5wdXQgTkRBcnJheSBlbGVtZW50LXdpc2UsIHkgPSBzaW4oeCkuXG4gICAqIEBwYXJhbSBuZGFycmF5IFRoZSBpbnB1dCBOREFycmF5LlxuICAgKi9cbiAgc2luPFQgZXh0ZW5kcyBOREFycmF5PihuZGFycmF5OiBUKTogVCB7XG4gICAgcmV0dXJuIHRoaXMudHJhY2sodGhpcy5zaW5JbnRlcm5hbChuZGFycmF5KSk7XG4gIH1cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHNpbkludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihuZGFycmF5OiBUKTogVDtcblxuICAvKipcbiAgICogQ29tcHV0ZXMgc3RlcCBvZiB0aGUgaW5wdXQgTkRBcnJheSBlbGVtZW50LXdpc2UsIHkgPSAxIGlmIHggPiAwIHwgMCBpZiB4IDw9XG4gICAqIDBcbiAgICogQHBhcmFtIG5kYXJyYXkgVGhlIGlucHV0IE5EQXJyYXkuXG4gICAqL1xuICBzdGVwPFQgZXh0ZW5kcyBOREFycmF5PihuZGFycmF5OiBUKTogVCB7XG4gICAgcmV0dXJuIHRoaXMudHJhY2sodGhpcy5zdGVwSW50ZXJuYWwobmRhcnJheSkpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBzdGVwSW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KG5kYXJyYXk6IFQpOiBUO1xuXG4gIC8qKlxuICAgKiBDb21wdXRlcyBhIHNjYWxlZCBhcnJheSBhZGQgb3BlcmF0aW9uLCBjMSAqIEEgKyBjMiAqIEIuXG4gICAqIEBwYXJhbSBjMSBUaGUgZmlyc3Qgc2NhbGFyIGluIHRoZSBzY2FsZWQgYXJyYXkgYWRkIGNvbXB1dGF0aW9uLlxuICAgKiBAcGFyYW0gYSBUaGUgZmlyc3QgTkRBcnJheSBpbiB0aGUgc2NhbGVkIGFycmF5IGFkZCBjb21wdXRhdGlvbi5cbiAgICogQHBhcmFtIGMyIFRoZSBzZWNvbmQgc2NhbGFyIGluIHRoZSBzY2FsZWQgYXJyYXkgYWRkIGNvbXB1dGF0aW9uLlxuICAgKiBAcGFyYW0gY2IgVGhlIHNlY29uZCBOREFycmF5IGluIHRoZSBzY2FsZWQgYXJyYXkgYWRkIGNvbXB1dGF0aW9uLlxuICAgKi9cbiAgc2NhbGVkQXJyYXlBZGQ8VCBleHRlbmRzIE5EQXJyYXk+KGMxOiBTY2FsYXIsIGE6IFQsIGMyOiBTY2FsYXIsIGI6IFQpOiBUIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgYzEuc2l6ZSA9PT0gMSxcbiAgICAgICAgYEVycm9yIGluIHNjYWxlZEFycmF5QWRkOiBmaXJzdCBhcmd1bWVudCBtdXN0IHJhbmsgMCwgYnV0IGdvdCBgICtcbiAgICAgICAgICAgIGAgcmFuayAke2MxLnJhbmt9LmApO1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICBjMi5zaXplID09PSAxLFxuICAgICAgICBgRXJyb3IgaW4gc2NhbGVkQXJyYXlBZGQ6IHRoaXJkIGFyZ3VtZW50IG11c3QgYmUgcmFuayAwLCBidXQgZ290IGAgK1xuICAgICAgICAgICAgYE5EQXJyYXkgb2YgcmFuayAke2MyLnJhbmt9LmApO1xuICAgIHV0aWwuYXNzZXJ0U2hhcGVzTWF0Y2goYS5zaGFwZSwgYi5zaGFwZSwgJ0Vycm9yIGluIHNjYWxlZEFycmF5QWRkOiAnKTtcblxuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMuc2NhbGVkQXJyYXlBZGRJbnRlcm5hbChjMSwgYSwgYzIsIGIpKTtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3Qgc2NhbGVkQXJyYXlBZGRJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4oXG4gICAgICBjMTogU2NhbGFyLCBhOiBULCBjMjogU2NhbGFyLCBiOiBUKTogVDtcblxuICAvKipcbiAgICogQ29tcHV0ZXMgYSBzY2FsYXIgdGltZXMgYXJyYXkgb3BlcmF0aW9uIGJyb2FkY2FzdGVkIG92ZXIgdGhlIE5EQXJyYXksIGMgKlxuICAgKiBBLlxuICAgKiBAcGFyYW0gYyBUaGUgc2NhbGFyIGluIHRoZSBvcGVyYXRpb24uXG4gICAqIEBwYXJhbSBBIHRoZSBOREFycmF5IGluIHRoZSBvcGVyYXRpb24gdGhhdCB3aWxsIGJlIGJyb2FkY2FzdGVkIG92ZXIuXG4gICAqL1xuICBzY2FsYXJUaW1lc0FycmF5PFQgZXh0ZW5kcyBOREFycmF5PihjOiBTY2FsYXIsIGE6IFQpOiBUIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgYy5zaXplID09PSAxLFxuICAgICAgICBgRXJyb3IgaW4gYXJyYXlEaXZpZGVkQnlTY2FsYXI6IGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgcmFuayAwLCBidXQgYCArXG4gICAgICAgICAgICBgZ290IHJhbmsgJHtjLnJhbmt9LmApO1xuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMuc2NhbGFyVGltZXNBcnJheUludGVybmFsKGMsIGEpKTtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3Qgc2NhbGFyVGltZXNBcnJheUludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihcbiAgICAgIGM6IFNjYWxhciwgYTogVCk6IFQ7XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIGFuIGVsZW1lbnQtd2lzZSBicm9hZGNhc3RlZCBtdWx0aXBsaWNhdGlvbiBvZiB0d28gbWF0cmljZXMgQSBhbmRcbiAgICogQi4gV2lsbCByZXR1cm4gYSBuZXcgbWF0cml4IHRoYXQgaXMgdGhlIG1heCBvZiBBIGFuZCBCLCB3aGVyZSB0aGUgc21hbGxlclxuICAgKiBtYXRyaXggd2lsbCBicm9hZGNhc3Qgb3ZlciB0aGUgbGFyZ2VyIG1hdHJpeC5cbiAgICogQHBhcmFtIGMgVGhlIHNjYWxhciBpbiB0aGUgb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gQSB0aGUgTkRBcnJheSBpbiB0aGUgb3BlcmF0aW9uIHRoYXQgd2lsbCBiZSBicm9hZGNhc3RlZCBvdmVyLlxuICAgKi9cbiAgZWxlbWVudFdpc2VNdWxCcm9hZGNhc3QoYTogQXJyYXkyRCwgYjogQXJyYXkyRCk6IEFycmF5MkQge1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICBhLnJhbmsgPT09IDIsXG4gICAgICAgIGBFcnJvciBpbiBlbGVtZW50V2lzZU11bEJyb2FkY2FzdDogZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBgICtcbiAgICAgICAgICAgIGByYW5rIDIsIGJ1dCBnb3QgcmFuayAke2EucmFua30uYCk7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIGIucmFuayA9PT0gMixcbiAgICAgICAgYEVycm9yIGluIGVsZW1lbnRXaXNlTXVsQnJvYWRjYXN0OiBzZWNvbmQgYXJndW1lbnQgbXVzdCBiZSBgICtcbiAgICAgICAgICAgIGByYW5rIDIsIGJ1dCBnb3QgcmFuayAke2IucmFua30uYCk7XG4gICAgcmV0dXJuIHRoaXMudHJhY2sodGhpcy5lbGVtZW50V2lzZU11bEJyb2FkY2FzdEludGVybmFsKGEsIGIpKTtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZWxlbWVudFdpc2VNdWxCcm9hZGNhc3RJbnRlcm5hbChhOiBBcnJheTJELCBiOiBBcnJheTJEKTpcbiAgICAgIEFycmF5MkQ7XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIENvbnZvbHV0aW9uIG9wcyAvL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvKipcbiAgICogQ29tcHV0ZXMgYSAyRCBjb252b2x1dGlvbiBvdmVyIHRoZSBpbnB1dCB4LlxuICAgKiBAcGFyYW0geCBUaGUgaW5wdXQgaW1hZ2UsIG11c3QgYmUgcmFuayAzLCBvZiBzaGFwZSBbcm93cywgY29scywgZGVwdGgxXS5cbiAgICogQHBhcmFtIHdlaWdodHMgVGhlIHdlaWdodHMgTkRBcnJheSwgbXVzdCBiZSByYW5rIDQsIG9mIHNoYXBlIFtmLCBmLCBkZXB0aDEsXG4gICAqIGRlcHRoMl0uXG4gICAqIEBwYXJhbSBiaWFzZXMgT3B0aW9uYWwgYmlhc2VzIE5EQXJyYXksIG11c3QgYmUgcmFuayAxIG9mIHNoYXBlIFtkZXB0aDJdLlxuICAgKiBAcGFyYW0gc3RyaWRlIFRoZSBzdHJpZGUgb2YgdGhlIGNvbnZvbHV0aW9uLlxuICAgKiBAcGFyYW0gemVyb1BhZCBUaGUgemVybyBwYWRkaW5nIG9mIGVhY2ggc2lkZSBvZiB0aGUgaW5wdXQgTkRBcnJheS4gV2lsbCBwYWRcbiAgICogZXF1YWxseSBvbiBhbGwgc2lkZXMuXG4gICAqL1xuICBjb252MmQoXG4gICAgICB4OiBBcnJheTNELCB3ZWlnaHRzOiBBcnJheTRELCBiaWFzZXM6IEFycmF5MUR8bnVsbCwgc3RyaWRlOiBudW1iZXIsXG4gICAgICB6ZXJvUGFkOiBudW1iZXIpOiBBcnJheTNEIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgeC5yYW5rID09PSAzLFxuICAgICAgICBgRXJyb3IgaW4gY29udjJkOiB4IG11c3QgYmUgcmFuayAzLCBidXQgZ290IHJhbmsgJHt4LnJhbmt9LmApO1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB3ZWlnaHRzLnJhbmsgPT09IDQsXG4gICAgICAgIGBFcnJvciBpbiBjb252MmQ6IHdlaWdodHMgbXVzdCBiZSByYW5rIDQsIGJ1dCBnb3QgcmFuayBgICtcbiAgICAgICAgICAgIGAke3dlaWdodHMucmFua30uYCk7XG4gICAgaWYgKGJpYXNlcyAhPSBudWxsKSB7XG4gICAgICB1dGlsLmFzc2VydChcbiAgICAgICAgICBiaWFzZXMucmFuayA9PT0gMSxcbiAgICAgICAgICBgRXJyb3IgaW4gY29udjJkOiBiaWFzZXMgbXVzdCBiZSByYW5rIDEsIGJ1dCBnb3QgcmFuayBgICtcbiAgICAgICAgICAgICAgYCR7Ymlhc2VzLnJhbmt9LmApO1xuICAgIH1cblxuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB4LnNoYXBlWzJdID09PSB3ZWlnaHRzLnNoYXBlWzJdLFxuICAgICAgICBgRXJyb3IgaW4gY29udjJkOiBkZXB0aCBvZiBpbnB1dCAoJHt4LnNoYXBlWzJdfSkgbXVzdCBtYXRjaCAgYCArXG4gICAgICAgICAgICBgaW5wdXQgZGVwdGggZm9yIHdlaWdodHMgJHt3ZWlnaHRzLnNoYXBlWzJdfS5gKTtcblxuXG4gICAgcmV0dXJuIHRoaXMudHJhY2sodGhpcy5jb252MmRJbnRlcm5hbCh4LCB3ZWlnaHRzLCBiaWFzZXMsIHN0cmlkZSwgemVyb1BhZCkpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBjb252MmRJbnRlcm5hbChcbiAgICAgIHg6IEFycmF5M0QsIHdlaWdodHM6IEFycmF5NEQsIGJpYXNlczogQXJyYXkxRHxudWxsLCBzdHJpZGU6IG51bWJlcixcbiAgICAgIHplcm9QYWQ6IG51bWJlcik6IEFycmF5M0Q7XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSBiYWNrcHJvcCBvZiBhIDJEIGNvbnZvbHV0aW9uLlxuICAgKiBAcGFyYW0geCBUaGUgaW5wdXQgaW1hZ2UsIG11c3QgYmUgcmFuayAzLCBvZiBzaGFwZSBbeHJvd3MsIHhjb2xzLCBkZXB0aDFdLlxuICAgKiBAcGFyYW0gZHkgVGhlIGR5IGltYWdlLCBtdXN0IGJlIHJhbmsgMywgb2Ygc2hhcGUgW3lyb3dzLCB5Y29scywgZGVwdGgyXS5cbiAgICogQHBhcmFtIHdlaWdodHMgVGhlIHdlaWdodHMgTkRBcnJheSwgbXVzdCBiZSByYW5rIDQsIG9mIHNoYXBlIFtmLCBmLCBkZXB0aDEsXG4gICAqIGRlcHRoMl0uXG4gICAqIEBwYXJhbSBzdHJpZGUgVGhlIHN0cmlkZSBvZiB0aGUgb3JpZ2luYWwgY29udm9sdXRpb24uXG4gICAqIEBwYXJhbSBwYWQgVGhlIHBhZGRpbmcgb2YgdGhlIG9yaWdpbmFsIGNvbnZvbHV0aW9uLlxuICAgKi9cbiAgY29udjJkQmFja1Byb3AoXG4gICAgICB4OiBBcnJheTNELCBkeTogQXJyYXkzRCwgd2VpZ2h0czogQXJyYXk0RCwgc3RyaWRlOiBudW1iZXIsXG4gICAgICBwYWQ6IG51bWJlcik6IHtkeDogQXJyYXkzRCwgZHc6IEFycmF5NEQsIGRiOiBBcnJheTFEfSB7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHgucmFuayA9PT0gMyxcbiAgICAgICAgYEVycm9yIGluIGNvbnYyZEJhY2tQcm9wOiB4IG11c3QgYmUgcmFuayAzLCBidXQgZ290IHNoYXBlIGAgK1xuICAgICAgICAgICAgYCR7eC5zaGFwZX0uYCk7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIGR5LnJhbmsgPT09IDMsXG4gICAgICAgIGBFcnJvciBpbiBjb252MmRCYWNrUHJvcDogZHkgbXVzdCBiZSByYW5rIDMsIGJ1dCBnb3Qgc2hhcGUgYCArXG4gICAgICAgICAgICBgJHtkeS5zaGFwZX0uYCk7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHdlaWdodHMucmFuayA9PT0gNCxcbiAgICAgICAgYEVycm9yIGluIGNvbnYyZEJhY2tQcm9wOiB3ZWlnaHRzIG11c3QgYmUgcmFuayA0LCBidXQgZ290IHNoYXBlIGAgK1xuICAgICAgICAgICAgYCR7d2VpZ2h0cy5zaGFwZX0uYCk7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHguc2hhcGVbMl0gPT09IHdlaWdodHMuc2hhcGVbMl0sXG4gICAgICAgIGBFcnJvciBpbiBjb252MmRCYWNrUHJvcDogZGVwdGggb2YgeCAke3guc2hhcGVbMl19KSBtdXN0IGAgK1xuICAgICAgICAgICAgYG1hdGNoIGlucHV0IGRlcHRoIGZvciB3ZWlnaHRzICgke3dlaWdodHMuc2hhcGVbMl19LmApO1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICBkeS5zaGFwZVsyXSA9PT0gd2VpZ2h0cy5zaGFwZVszXSxcbiAgICAgICAgYEVycm9yIGluIGNvbnYyZEJhY2tQcm9wOiBkZXB0aCBvZiBkeSAoJHtkeS5zaGFwZVsyXX0pIG11c3QgYCArXG4gICAgICAgICAgICBgbWF0Y2ggb3V0cHV0IGRlcHRoIGZvciB3ZWlnaHRzICgke3dlaWdodHMuc2hhcGVbM119KS5gKTtcblxuICAgIGNvbnN0IGJhY2twcm9wUmVzdWx0ID1cbiAgICAgICAgdGhpcy5jb252MmRCYWNrUHJvcEludGVybmFsKHgsIGR5LCB3ZWlnaHRzLCBzdHJpZGUsIHBhZCk7XG5cbiAgICB0aGlzLnRyYWNrKGJhY2twcm9wUmVzdWx0LmRiKTtcbiAgICB0aGlzLnRyYWNrKGJhY2twcm9wUmVzdWx0LmR3KTtcbiAgICB0aGlzLnRyYWNrKGJhY2twcm9wUmVzdWx0LmR4KTtcblxuICAgIHJldHVybiBiYWNrcHJvcFJlc3VsdDtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgY29udjJkQmFja1Byb3BJbnRlcm5hbChcbiAgICAgIHg6IEFycmF5M0QsIGR5OiBBcnJheTNELCB3ZWlnaHRzOiBBcnJheTRELCBzdHJpZGU6IG51bWJlcixcbiAgICAgIHBhZDogbnVtYmVyKToge2R4OiBBcnJheTNELCBkdzogQXJyYXk0RCwgZGI6IEFycmF5MUR9O1xuXG4gIC8qKlxuICAgKiBDb21wdXRlcyB0aGUgdHJhbnNwb3NlZCAyRCBjb252b2x1dGlvbiBvZiBhbiBpbWFnZSwgYWxzbyBrbm93biBhcyBhXG4gICAqIGRlY29udm9sdXRpb24uXG4gICAqIEBwYXJhbSB4IFRoZSBpbnB1dCBpbWFnZSwgbXVzdCBiZSByYW5rIDMsIG9mIHNoYXBlIFt4cm93cywgeGNvbHMsIGRlcHRoMV0uXG4gICAqIEBwYXJhbSB3ZWlnaHRzIFRoZSB3ZWlnaHRzIE5EQXJyYXksIG11c3QgYmUgcmFuayA0LCBvZiBzaGFwZSBbZiwgZiwgZGVwdGgxLFxuICAgKiBkZXB0aDJdLlxuICAgKiBAcGFyYW0gYmlhc2VzIE9wdGlvbmFsIGJpYXNlcyBOREFycmF5LCBtdXN0IGJlIHJhbmsgMSBvZiBzaGFwZSBbZGVwdGgyXS5cbiAgICogQHBhcmFtIHN0cmlkZSBUaGUgc3RyaWRlIG9mIHRoZSBjb252b2x1dGlvbi5cbiAgICogQHBhcmFtIHBhZCBUaGUgcGFkZGluZyBvZiBlYWNoIHNpZGUgb2YgdGhlIGlucHV0IE5EQXJyYXkuIFdpbGwgcGFkIGVxdWFsbHlcbiAgICogb24gYWxsIHNpZGVzLlxuICAgKi9cbiAgY29udjJkVHJhbnNwb3NlKFxuICAgICAgeDogQXJyYXkzRCwgd2VpZ2h0czogQXJyYXk0RCwgYmlhc2VzOiBBcnJheTFEfG51bGwsIHN0cmlkZTogbnVtYmVyLFxuICAgICAgcGFkOiBudW1iZXIpOiBBcnJheTNEIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgeC5yYW5rID09PSAzLFxuICAgICAgICBgRXJyb3IgaW4gY29udjJkVHJhbnNwb3NlOiB4IG11c3QgYmUgcmFuayAzLCBidXQgZ290IHJhbmsgYCArXG4gICAgICAgICAgICBgJHt4LnJhbmt9LmApO1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB3ZWlnaHRzLnJhbmsgPT09IDQsXG4gICAgICAgIGBFcnJvciBpbiBjb252MmRUcmFuc3Bvc2U6IHdlaWdodHMgbXVzdCBiZSByYW5rIDQsIGJ1dCBnb3QgYCArXG4gICAgICAgICAgICBgcmFuayAke3dlaWdodHMucmFua31gKTtcbiAgICBpZiAoYmlhc2VzICE9IG51bGwpIHtcbiAgICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICAgIGJpYXNlcy5yYW5rID09PSAxLFxuICAgICAgICAgIGBFcnJvciBpbiBjb252MmRUcmFuc3Bvc2U6IGJpYXNlcyBtdXN0IGJlIHJhbmsgMSwgYnV0IGdvdCAnICtcbiAgICAgICAgICAgICAgJ3JhbmsgJHtiaWFzZXMucmFua30uYCk7XG4gICAgfVxuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB4LnNoYXBlWzJdID09PSB3ZWlnaHRzLnNoYXBlWzNdLFxuICAgICAgICBgRXJyb3IgaW4gY29udjJkVHJhbnNwb3NlOiBkZXB0aCBvZiBpbnB1dCAoJHt4LnNoYXBlWzJdfSkgbXVzdCBgICtcbiAgICAgICAgICAgIGBtYXRjaCBpbnB1dCBkZXB0aCBmb3Igd2VpZ2h0cyAke3dlaWdodHMuc2hhcGVbM119LmApO1xuXG4gICAgcmV0dXJuIHRoaXMudHJhY2soXG4gICAgICAgIHRoaXMuY29udjJkVHJhbnNwb3NlSW50ZXJuYWwoeCwgd2VpZ2h0cywgYmlhc2VzLCBzdHJpZGUsIHBhZCkpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBjb252MmRUcmFuc3Bvc2VJbnRlcm5hbChcbiAgICAgIHg6IEFycmF5M0QsIHdlaWdodHM6IEFycmF5NEQsIGJpYXNlczogQXJyYXkxRHxudWxsLCBzdHJpZGU6IG51bWJlcixcbiAgICAgIHBhZDogbnVtYmVyKTogQXJyYXkzRDtcblxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIDJEIG1heCBwb29saW5nIG9mIGFuIGltYWdlLlxuICAgKiBAcGFyYW0geCBUaGUgaW5wdXQgaW1hZ2UsIG11c3QgYmUgcmFuayAzLlxuICAgKiBAcGFyYW0gZlNpemUgVGhlIGZpZWxkIHNpemUgb2YgdGhlIG1heCBwb29sLlxuICAgKiBAcGFyYW0gc3RyaWRlIFRoZSBzdHJpZGUgb2YgdGhlIG1heCBwb29sLlxuICAgKiBAcGFyYW0gcGFkIFRoZSBwYWRkaW5nIG9mIGVhY2ggc2lkZSBvZiB0aGUgaW5wdXQgTkRBcnJheS4gV2lsbCBwYWQgZXF1YWxseVxuICAgKiBvbiBhbGwgc2lkZXMuXG4gICAqL1xuICBtYXhQb29sKHg6IEFycmF5M0QsIGZTaXplOiBudW1iZXIsIHN0cmlkZTogbnVtYmVyLCBwYWQ6IG51bWJlcik6IEFycmF5M0Qge1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB4LnJhbmsgPT09IDMsXG4gICAgICAgICdFcnJvciBpbiBtYXhQb29sOiB4IG11c3QgYmUgcmFuayAzIGJ1dCBnb3QgcmFuayAnICsgeC5yYW5rICsgJy4nKTtcbiAgICByZXR1cm4gdGhpcy50cmFjayh0aGlzLm1heFBvb2xJbnRlcm5hbCh4LCBmU2l6ZSwgc3RyaWRlLCBwYWQpKTtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgbWF4UG9vbEludGVybmFsKFxuICAgICAgeDogQXJyYXkzRCwgZlNpemU6IG51bWJlciwgc3RyaWRlOiBudW1iZXIsIHBhZDogbnVtYmVyKTogQXJyYXkzRDtcblxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIGJhY2twcm9wIG9mIGEgbWF4IHBvb2wuXG4gICAqIEBwYXJhbSBkeSBUaGUgZHkgZXJyb3IuXG4gICAqIEBwYXJhbSB4IFRoZSBpbnB1dCBpbWFnZSwgbXVzdCBiZSByYW5rIDMuXG4gICAqIEBwYXJhbSBmU2l6ZSBUaGUgZmllbGQgc2l6ZSBvZiB0aGUgbWF4IHBvb2wuXG4gICAqIEBwYXJhbSBzdHJpZGUgVGhlIHN0cmlkZSBvZiB0aGUgbWF4IHBvb2wuXG4gICAqIEBwYXJhbSBwYWQgVGhlIHBhZGRpbmcgb2YgZWFjaCBzaWRlIG9mIHRoZSBpbnB1dCBOREFycmF5LiBXaWxsIHBhZCBlcXVhbGx5XG4gICAqIG9uIGFsbCBzaWRlcy5cbiAgICovXG4gIG1heFBvb2xCYWNrcHJvcChcbiAgICAgIGR5OiBBcnJheTNELCB4OiBBcnJheTNELCBmU2l6ZTogbnVtYmVyLCBzdHJpZGU6IG51bWJlcixcbiAgICAgIHBhZDogbnVtYmVyKTogQXJyYXkzRCB7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIGR5LnJhbmsgPT09IDMsXG4gICAgICAgIGBFcnJvciBpbiBtYXhQb29sQmFja3Byb3A6IGR5IG11c3QgYmUgcmFuayAzIGJ1dCBnb3QgcmFuayBgICtcbiAgICAgICAgICAgIGAke2R5LnJhbmt9LmApO1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB4LnJhbmsgPT09IDMsXG4gICAgICAgIGBFcnJvciBpbiBtYXhQb29sQmFja3Byb3A6IHggbXVzdCBiZSByYW5rIDMgYnV0IGdvdCByYW5rIGAgK1xuICAgICAgICAgICAgYCR7eC5yYW5rfS5gKTtcblxuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMubWF4UG9vbEJhY2twcm9wSW50ZXJuYWwoZHksIHgsIGZTaXplLCBzdHJpZGUsIHBhZCkpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBtYXhQb29sQmFja3Byb3BJbnRlcm5hbChcbiAgICAgIGR5OiBBcnJheTNELCB4OiBBcnJheTNELCBmU2l6ZTogbnVtYmVyLCBzdHJpZGU6IG51bWJlcixcbiAgICAgIHBhZDogbnVtYmVyKTogQXJyYXkzRDtcblxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIDJEIG1pbiBwb29saW5nIG9mIGFuIGltYWdlLlxuICAgKiBAcGFyYW0geCBUaGUgaW5wdXQgaW1hZ2UsIG11c3QgYmUgcmFuayAzLlxuICAgKiBAcGFyYW0gZlNpemUgVGhlIGZpZWxkIHNpemUgb2YgdGhlIG1heCBwb29sLlxuICAgKiBAcGFyYW0gc3RyaWRlIFRoZSBzdHJpZGUgb2YgdGhlIG1heCBwb29sLlxuICAgKiBAcGFyYW0gcGFkIFRoZSBwYWRkaW5nIG9mIGVhY2ggc2lkZSBvZiB0aGUgaW5wdXQgTkRBcnJheS4gV2lsbCBwYWQgZXF1YWxseVxuICAgKiBvbiBhbGwgc2lkZXMuXG4gICAqL1xuICBtaW5Qb29sKHg6IEFycmF5M0QsIGZTaXplOiBudW1iZXIsIHN0cmlkZTogbnVtYmVyLCBwYWQ6IG51bWJlcik6IEFycmF5M0Qge1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB4LnJhbmsgPT09IDMsXG4gICAgICAgIGBFcnJvciBpbiBtaW5Qb29sOiB4IG11c3QgYmUgcmFuayAzIGJ1dCBnb3QgcmFuayAke3gucmFua30uYCk7XG4gICAgcmV0dXJuIHRoaXMudHJhY2sodGhpcy5taW5Qb29sSW50ZXJuYWwoeCwgZlNpemUsIHN0cmlkZSwgcGFkKSk7XG4gIH1cbiAgcHJvdGVjdGVkIGFic3RyYWN0IG1pblBvb2xJbnRlcm5hbChcbiAgICAgIHg6IEFycmF5M0QsIGZTaXplOiBudW1iZXIsIHN0cmlkZTogbnVtYmVyLCBwYWQ6IG51bWJlcik6IEFycmF5M0Q7XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSAyRCBhdmVyYWdlIHBvb2xpbmcgb2YgYW4gaW1hZ2UuXG4gICAqIEBwYXJhbSB4IFRoZSBpbnB1dCBpbWFnZSwgbXVzdCBiZSByYW5rIDMuXG4gICAqIEBwYXJhbSBmU2l6ZSBUaGUgZmllbGQgc2l6ZSBvZiB0aGUgbWF4IHBvb2wuXG4gICAqIEBwYXJhbSBzdHJpZGUgVGhlIHN0cmlkZSBvZiB0aGUgbWF4IHBvb2wuXG4gICAqIEBwYXJhbSBwYWQgVGhlIHBhZGRpbmcgb2YgZWFjaCBzaWRlIG9mIHRoZSBpbnB1dCBOREFycmF5LiBXaWxsIHBhZCBlcXVhbGx5XG4gICAqIG9uIGFsbCBzaWRlcy5cbiAgICovXG4gIGF2Z1Bvb2woeDogQXJyYXkzRCwgZlNpemU6IG51bWJlciwgc3RyaWRlOiBudW1iZXIsIHBhZDogbnVtYmVyKTogQXJyYXkzRCB7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHgucmFuayA9PT0gMyxcbiAgICAgICAgYEVycm9yIGluIGF2Z1Bvb2w6IHggbXVzdCBiZSByYW5rIDMgYnV0IGdvdCByYW5rICR7eC5yYW5rfS5gKTtcbiAgICByZXR1cm4gdGhpcy50cmFjayh0aGlzLmF2Z1Bvb2xJbnRlcm5hbCh4LCBmU2l6ZSwgc3RyaWRlLCBwYWQpKTtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgYXZnUG9vbEludGVybmFsKFxuICAgICAgeDogQXJyYXkzRCwgZlNpemU6IG51bWJlciwgc3RyaWRlOiBudW1iZXIsIHBhZDogbnVtYmVyKTogQXJyYXkzRDtcblxuICAvKlxuICAgKiBCaWxpbmVhciByZXNpemUgYSAzRCBhcnJheSBwZXIgZWFjaCBjaGFubmVsIHRvIGEgbmV3IDJEIHNoYXBlLlxuICAgKiBAcGFyYW0geCBUaGUgaW5wdXQgQXJyYXkzRC5cbiAgICogQHBhcmFtIG5ld1NoYXBlMkQgVGhlIG5ldyBzaGFwZSB0byByZXNpemUgdGhlIEFycmF5M0QgdG8uIEVhY2ggY2hhbm5lbCBpc1xuICAgKiByZXNpemVkIGluZGl2aWR1YWxseS5cbiAgICogQHBhcmFtIGFsaWduQ29ybmVycyBBbiBvcHRpb25hbCBib29sLiBEZWZhdWx0cyB0byBGYWxzZS4gSWYgdHJ1ZSwgcmVzY2FsZVxuICAgKiBpbnB1dCBieSAobmV3X2hlaWdodCAtIDEpIC8gKGhlaWdodCAtIDEpLCB3aGljaCBleGFjdGx5IGFsaWducyB0aGUgNFxuICAgKiBjb3JuZXJzIG9mIGltYWdlcyBhbmQgcmVzaXplZCBpbWFnZXMuIElmIGZhbHNlLCByZXNjYWxlIGJ5IG5ld19oZWlnaHQgL1xuICAgKiBoZWlnaHQuIFRyZWF0IHNpbWlsYXJseSB0aGUgd2lkdGggZGltZW5zaW9uLlxuICAgKi9cbiAgcmVzaXplQmlsaW5lYXIzRChcbiAgICAgIHg6IEFycmF5M0QsIG5ld1NoYXBlMkQ6IFtudW1iZXIsIG51bWJlcl0sIGFsaWduQ29ybmVycyA9IGZhbHNlKTogQXJyYXkzRCB7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHgucmFuayA9PT0gMyxcbiAgICAgICAgYEVycm9yIGluIHJlc2l6ZUJpbGluZWFyM0Q6IHggbXVzdCBiZSByYW5rIDMgYnV0IGdvdCByYW5rICR7eC5yYW5rfS5gKTtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgbmV3U2hhcGUyRC5sZW5ndGggPT09IDIsXG4gICAgICAgIGBFcnJvciBpbiByZXNpemVCaWxpbmVhcjNEOiBuZXcgc2hhcGUgbXVzdCAyRCwgYnV0IGdvdCBzaGFwZSBgICtcbiAgICAgICAgICAgIGAke25ld1NoYXBlMkR9LmApO1xuICAgIHJldHVybiB0aGlzLnRyYWNrKFxuICAgICAgICB0aGlzLnJlc2l6ZUJpbGluZWFyM0RJbnRlcm5hbCh4LCBuZXdTaGFwZTJELCBhbGlnbkNvcm5lcnMpKTtcbiAgfVxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgcmVzaXplQmlsaW5lYXIzREludGVybmFsKFxuICAgICAgeDogQXJyYXkzRCwgbmV3U2hhcGUyRDogW251bWJlciwgbnVtYmVyXSwgYWxpZ25Db3JuZXJzOiBib29sZWFuKTogQXJyYXkzRDtcblxuICAvKipcbiAgICogQmF0Y2ggbm9ybWFsaXphdGlvbiAzRC4gTWVhbiwgdmFyaWFuY2UsIHNjYWxlLCBhbmQgb2Zmc2V0IGNhbiBiZSBvZiB0d29cbiAgICogc2hhcGVzOiAxKSBUaGUgc2FtZSBzaGFwZSBhcyB0aGUgaW5wdXQ6IGFuIEFycmF5M0QuIDIpIEluIHRoZSBjb21tb24gY2FzZSxcbiAgICogdGhlIGRlcHRoIGRpbWVuc2lvbiBpcyB0aGUgbGFzdCBkaW1lbnNpb24gb2YgeCwgc28gdGhlIHZhbHVlcyB3b3VsZCBiZSBhblxuICAgKiBBcnJheTFEIG9mIHNoYXBlIFtkZXB0aF0uXG4gICAqIEBwYXJhbSB4IFRoZSBpbnB1dCBOREFycmF5LlxuICAgKiBAcGFyYW0gbWVhbiBBIG1lYW4gTkRBcnJheS5cbiAgICogQHBhcmFtIHZhcmlhbmNlIEEgdmFyaWFuY2UgTkRBcnJheS5cbiAgICogQHBhcmFtIHZhcmlhbmNlRXBzaWxvbiBBIHNtYWxsIGZsb2F0IG51bWJlciB0byBhdm9pZCBkaXZpZGluZyBieSAwLlxuICAgKiBAcGFyYW0gc2NhbGUgQSBzY2FsZSBOREFycmF5LlxuICAgKiBAcGFyYW0gb2Zmc2V0IEFuIG9mZnNldCBOREFycmF5LlxuICAgKi9cbiAgYmF0Y2hOb3JtYWxpemF0aW9uM0QoXG4gICAgICB4OiBBcnJheTNELCBtZWFuOiBBcnJheTNEfEFycmF5MUQsIHZhcmlhbmNlOiBBcnJheTNEfEFycmF5MUQsXG4gICAgICB2YXJpYW5jZUVwc2lsb24gPSAuMDAxLCBzY2FsZT86IEFycmF5M0R8QXJyYXkxRCxcbiAgICAgIG9mZnNldD86IEFycmF5M0R8QXJyYXkxRCk6IEFycmF5M0Qge1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB4LnJhbmsgPT09IDMsXG4gICAgICAgIGBFcnJvciBpbiBiYXRjaE5vcm1hbGl6YXRpb24zRDogeCBtdXN0IGJlIHJhbmsgMyBidXQgZ290IHJhbmsgYCArXG4gICAgICAgICAgICBgJHt4LnJhbmt9LmApO1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICBtZWFuLnJhbmsgPT09IDMgfHwgbWVhbi5yYW5rID09PSAxLFxuICAgICAgICBgRXJyb3IgaW4gYmF0Y2hOb3JtYWxpemF0aW9uM0Q6IG1lYW4gbXVzdCBiZSByYW5rIDMgb3IgcmFuayAxIGJ1dCBgICtcbiAgICAgICAgICAgIGBnb3QgcmFuayAke21lYW4ucmFua30uYCk7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHZhcmlhbmNlLnJhbmsgPT09IDMgfHwgdmFyaWFuY2UucmFuayA9PT0gMSxcbiAgICAgICAgYEVycm9yIGluIGJhdGNoTm9ybWFsaXphdGlvbjNEOiB2YXJpYW5jZSBtdXN0IGJlIHJhbmsgMyBvciByYW5rIDEgYCArXG4gICAgICAgICAgICBgYnV0IGdvdCByYW5rICR7dmFyaWFuY2UucmFua30uYCk7XG4gICAgaWYgKHNjYWxlICE9IG51bGwpIHtcbiAgICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICAgIHNjYWxlLnJhbmsgPT09IDMgfHwgc2NhbGUucmFuayA9PT0gMSxcbiAgICAgICAgICBgRXJyb3IgaW4gYmF0Y2hOb3JtYWxpemF0aW9uM0Q6IHNjYWxlIG11c3QgYmUgcmFuayAzIG9yIHJhbmsgMSBgICtcbiAgICAgICAgICAgICAgYGJ1dCBnb3QgcmFuayAke3NjYWxlIS5yYW5rfS5gKTtcbiAgICB9XG4gICAgaWYgKG9mZnNldCAhPSBudWxsKSB7XG4gICAgICB1dGlsLmFzc2VydChcbiAgICAgICAgICBvZmZzZXQucmFuayA9PT0gMyB8fCBvZmZzZXQucmFuayA9PT0gMSxcbiAgICAgICAgICBgRXJyb3IgaW4gYmF0Y2hOb3JtYWxpemF0aW9uM0Q6IG9mZnNldCBtdXN0IGJlIHJhbmsgMyBvciByYW5rIDEgYCArXG4gICAgICAgICAgICAgIGBidXQgZ290IHJhbmsgJHtvZmZzZXQhLnJhbmt9LmApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnRyYWNrKHRoaXMuYmF0Y2hOb3JtYWxpemF0aW9uM0RJbnRlcm5hbChcbiAgICAgICAgeCwgbWVhbiwgdmFyaWFuY2UsIHZhcmlhbmNlRXBzaWxvbiwgc2NhbGUsIG9mZnNldCkpO1xuICB9XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBiYXRjaE5vcm1hbGl6YXRpb24zREludGVybmFsKFxuICAgICAgeDogQXJyYXkzRCwgbWVhbjogQXJyYXkzRHxBcnJheTFELCB2YXJpYW5jZTogQXJyYXkzRHxBcnJheTFELFxuICAgICAgdmFyaWFuY2VFcHNpbG9uOiBudW1iZXIsIHNjYWxlPzogQXJyYXkzRHxBcnJheTFELFxuICAgICAgb2Zmc2V0PzogQXJyYXkzRHxBcnJheTFEKTogQXJyYXkzRDtcbn1cblxuZXhwb3J0IGVudW0gTWF0cml4T3JpZW50YXRpb24ge1xuICBSRUdVTEFSLFxuICBUUkFOU1BPU0VEXG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCAqIGFzIGNvbnZfdXRpbCBmcm9tICcuLi9tYXRoL2NvbnZfdXRpbCc7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gJy4uL3V0aWwnO1xuXG5pbXBvcnQgKiBhcyBjb25jYXQzZF91dGlsIGZyb20gJy4vY29uY2F0M2RfdXRpbCc7XG5pbXBvcnQgKiBhcyBjb3B5MkRfdXRpbCBmcm9tICcuL2NvcHkyZF91dGlsJztcbmltcG9ydCB7TWF0cml4T3JpZW50YXRpb24sIE5EQXJyYXlNYXRofSBmcm9tICcuL21hdGgnO1xuaW1wb3J0IHtBcnJheTFELCBBcnJheTJELCBBcnJheTNELCBBcnJheTRELCBOREFycmF5LCBTY2FsYXJ9IGZyb20gJy4vbmRhcnJheSc7XG5cbmV4cG9ydCBjbGFzcyBOREFycmF5TWF0aENQVSBleHRlbmRzIE5EQXJyYXlNYXRoIHtcbiAgY29uc3RydWN0b3Ioc2FmZU1vZGUgPSBmYWxzZSkge1xuICAgIHN1cGVyKHNhZmVNb2RlKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBjbG9uZUludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihuZGFycmF5OiBUKTogVCB7XG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxUPihcbiAgICAgICAgbmRhcnJheS5zaGFwZSwge3ZhbHVlczogbmV3IEZsb2F0MzJBcnJheShuZGFycmF5LmdldFZhbHVlcygpKX0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlc2hhcGVJbnRlcm5hbDxUMSBleHRlbmRzIE5EQXJyYXksIFQyIGV4dGVuZHMgTkRBcnJheT4oXG4gICAgICBuZGFycmF5OiBUMSwgbmV3U2hhcGU6IG51bWJlcltdKTogVDIge1xuICAgIHJldHVybiB0aGlzLmNsb25lSW50ZXJuYWwobmRhcnJheSkucmVzaGFwZTxUMj4obmV3U2hhcGUpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNsaWNlMkRJbnRlcm5hbChcbiAgICAgIGlucHV0OiBBcnJheTJELCBiZWdpblJvd0NvbDogW251bWJlciwgbnVtYmVyXSxcbiAgICAgIHNpemVSb3dDb2w6IFtudW1iZXIsIG51bWJlcl0pOiBBcnJheTJEIHtcbiAgICBjb25zdCByZXN1bHQgPSBBcnJheTJELnplcm9zKHNpemVSb3dDb2wpO1xuICAgIHRoaXMuY29weTJESW50ZXJuYWwoXG4gICAgICAgIGlucHV0LCBiZWdpblJvd0NvbCwgc2l6ZVJvd0NvbCwgcmVzdWx0LCBbMCwgMF0sIHNpemVSb3dDb2wpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwcm90ZWN0ZWQgY29weTJESW50ZXJuYWwoXG4gICAgICBzb3VyY2U6IEFycmF5MkQsIHNvdXJjZUJlZ2luUm93Q29sOiBbbnVtYmVyLCBudW1iZXJdLFxuICAgICAgc291cmNlU2l6ZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSwgZGVzdDogQXJyYXkyRCxcbiAgICAgIGRlc3RCZWdpblJvd0NvbDogW251bWJlciwgbnVtYmVyXSxcbiAgICAgIGRlc3RTaXplUm93Q29sOiBbbnVtYmVyLCBudW1iZXJdKTogdm9pZCB7XG4gICAgY29weTJEX3V0aWwudmFsaWRhdGVTaGFwZXMoc291cmNlU2l6ZVJvd0NvbCwgZGVzdFNpemVSb3dDb2wpO1xuICAgIGNvbnN0IHNyY1ZhbHVlcyA9IHNvdXJjZS5nZXRWYWx1ZXMoKTtcbiAgICBjb25zdCBkc3RWYWx1ZXMgPSBkZXN0LmdldFZhbHVlcygpO1xuICAgIGNvbnN0IG4gPSBzb3VyY2VTaXplUm93Q29sWzBdICogc291cmNlU2l6ZVJvd0NvbFsxXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgY29uc3Qgc3JjUm93ID0gc291cmNlQmVnaW5Sb3dDb2xbMF0gKyBNYXRoLmZsb29yKGkgLyBzb3VyY2VTaXplUm93Q29sWzFdKTtcbiAgICAgIGNvbnN0IHNyY0NvbCA9IHNvdXJjZUJlZ2luUm93Q29sWzFdICsgKGkgJSBzb3VyY2VTaXplUm93Q29sWzFdKTtcbiAgICAgIGNvbnN0IHNyY09mZiA9IHNyY1JvdyAqIHNvdXJjZS5zaGFwZVsxXSArIHNyY0NvbDtcbiAgICAgIGNvbnN0IGRzdFJvdyA9IGRlc3RCZWdpblJvd0NvbFswXSArIE1hdGguZmxvb3IoaSAvIGRlc3RTaXplUm93Q29sWzFdKTtcbiAgICAgIGNvbnN0IGRzdENvbCA9IGRlc3RCZWdpblJvd0NvbFsxXSArIChpICUgZGVzdFNpemVSb3dDb2xbMV0pO1xuICAgICAgY29uc3QgZHN0T2ZmID0gZHN0Um93ICogZGVzdC5zaGFwZVsxXSArIGRzdENvbDtcbiAgICAgIGRzdFZhbHVlc1tkc3RPZmZdID0gc3JjVmFsdWVzW3NyY09mZl07XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGNvbmNhdDNESW50ZXJuYWwoeDE6IEFycmF5M0QsIHgyOiBBcnJheTNELCBheGlzOiBudW1iZXIpOiBBcnJheTNEIHtcbiAgICBjb25zdCBvdXRwdXRTaGFwZSA9XG4gICAgICAgIGNvbmNhdDNkX3V0aWwuY29tcHV0ZUNvbmNhdDNET3V0cHV0U2hhcGUoeDEuc2hhcGUsIHgyLnNoYXBlLCBheGlzKTtcblxuICAgIGNvbnN0IHZhbHVlcyA9IE5EQXJyYXkuemVyb3M8QXJyYXkzRD4ob3V0cHV0U2hhcGUpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXRwdXRTaGFwZVswXTsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG91dHB1dFNoYXBlWzFdOyBqKyspIHtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBvdXRwdXRTaGFwZVsyXTsgaysrKSB7XG4gICAgICAgICAgLy8gU2hhZGVyIGJlZ2lucy5cbiAgICAgICAgICBjb25zdCBpbmRleDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gW2ksIGosIGtdO1xuICAgICAgICAgIGxldCB2YWx1ZTogbnVtYmVyO1xuICAgICAgICAgIGlmIChpbmRleFtheGlzXSA8IHgxLnNoYXBlW2F4aXNdKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHgxLmdldChpLCBqLCBrKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5kZXhbYXhpc10gLT0geDEuc2hhcGVbYXhpc107XG4gICAgICAgICAgICBjb25zdCBbaTIsIGoyLCBrMl0gPSBpbmRleDtcbiAgICAgICAgICAgIHZhbHVlID0geDIuZ2V0KGkyLCBqMiwgazIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhbHVlcy5zZXQodmFsdWUsIGksIGosIGspO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuXG4gIHByb3RlY3RlZCBzY2FsYXJQbHVzQXJyYXlJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4oYzogU2NhbGFyLCBhOiBUKTogVCB7XG4gICAgY29uc3QgcmVzdWx0VmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheShhLnNpemUpO1xuICAgIGNvbnN0IGFWYWx1ZXMgPSBhLmdldFZhbHVlcygpO1xuICAgIGNvbnN0IGNWYWwgPSBjLmdldCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0VmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICByZXN1bHRWYWx1ZXNbaV0gPSBjVmFsICsgYVZhbHVlc1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxUPihhLnNoYXBlLCB7dmFsdWVzOiByZXN1bHRWYWx1ZXN9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzY2FsZWRBcnJheUFkZEludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihcbiAgICAgIGMxOiBTY2FsYXIsIGE6IFQsIGMyOiBTY2FsYXIsIGI6IFQpIHtcbiAgICBjb25zdCBjVmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheShhLnNpemUpO1xuICAgIGNvbnN0IGFWYWx1ZXMgPSBhLmdldFZhbHVlcygpO1xuICAgIGNvbnN0IGJWYWx1ZXMgPSBiLmdldFZhbHVlcygpO1xuICAgIGNvbnN0IGMxVmFsID0gYzEuZ2V0KCk7XG4gICAgY29uc3QgYzJWYWwgPSBjMi5nZXQoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNWYWx1ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGNWYWx1ZXNbaV0gPSBjMVZhbCAqIGFWYWx1ZXNbaV0gKyBjMlZhbCAqIGJWYWx1ZXNbaV07XG4gICAgfVxuICAgIHJldHVybiBOREFycmF5Lm1ha2U8VD4oYS5zaGFwZSwge3ZhbHVlczogY1ZhbHVlc30pO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNjYWxhclRpbWVzQXJyYXlJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4oYzogU2NhbGFyLCBhOiBUKTogVCB7XG4gICAgY29uc3QgbmV3VmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheShhLnNpemUpO1xuICAgIGNvbnN0IGFWYWx1ZXMgPSBhLmdldFZhbHVlcygpO1xuICAgIGNvbnN0IGNWYWwgPSBjLmdldCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYVZhbHVlcy5sZW5ndGg7ICsraSkge1xuICAgICAgbmV3VmFsdWVzW2ldID0gY1ZhbCAqIGFWYWx1ZXNbaV07XG4gICAgfVxuICAgIHJldHVybiBOREFycmF5Lm1ha2U8VD4oYS5zaGFwZSwge3ZhbHVlczogbmV3VmFsdWVzfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2NhbGFyTWludXNBcnJheUludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihjOiBTY2FsYXIsIGE6IFQpOiBUIHtcbiAgICBjb25zdCBuZWdBID0gdGhpcy5uZWdJbnRlcm5hbChhKTtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNjYWxhclBsdXNBcnJheUludGVybmFsKGMsIG5lZ0EpO1xuXG4gICAgbmVnQS5kaXNwb3NlKCk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHJvdGVjdGVkIGFycmF5TWludXNTY2FsYXJJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4oYTogVCwgYzogU2NhbGFyKTogVCB7XG4gICAgY29uc3QgbmVnQyA9IHRoaXMubmVnSW50ZXJuYWwoYyk7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zY2FsYXJQbHVzQXJyYXlJbnRlcm5hbChuZWdDLCBhKTtcblxuICAgIG5lZ0MuZGlzcG9zZSgpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHByb3RlY3RlZCBuZWdJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4oYTogVCk6IFQge1xuICAgIHJldHVybiB0aGlzLnNjYWxhclRpbWVzQXJyYXlJbnRlcm5hbChTY2FsYXIuTkVHX09ORSwgYSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYWRkSW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KGE6IFQsIGI6IFQpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5zY2FsZWRBcnJheUFkZEludGVybmFsPFQ+KFNjYWxhci5PTkUsIGEsIFNjYWxhci5PTkUsIGIpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHN1YkludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihhOiBULCBiOiBUKTogVCB7XG4gICAgcmV0dXJuIHRoaXMuc2NhbGVkQXJyYXlBZGRJbnRlcm5hbDxUPihTY2FsYXIuT05FLCBhLCBTY2FsYXIuTkVHX09ORSwgYik7XG4gIH1cblxuICBwcm90ZWN0ZWQgbWF0TXVsSW50ZXJuYWwoXG4gICAgICBhOiBBcnJheTJELCBiOiBBcnJheTJELCBhT3JpZW50YXRpb24gPSBNYXRyaXhPcmllbnRhdGlvbi5SRUdVTEFSLFxuICAgICAgYk9yaWVudGF0aW9uID0gTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUik6IEFycmF5MkQge1xuICAgIGNvbnN0IHNoYXJlZERpbSA9XG4gICAgICAgIChhT3JpZW50YXRpb24gPT09IE1hdHJpeE9yaWVudGF0aW9uLlJFR1VMQVIpID8gYS5zaGFwZVsxXSA6IGEuc2hhcGVbMF07XG5cbiAgICBjb25zdCBsZWZ0RGltID1cbiAgICAgICAgKGFPcmllbnRhdGlvbiA9PT0gTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUikgPyBhLnNoYXBlWzBdIDogYS5zaGFwZVsxXTtcbiAgICBjb25zdCByaWdodERpbSA9XG4gICAgICAgIChiT3JpZW50YXRpb24gPT09IE1hdHJpeE9yaWVudGF0aW9uLlJFR1VMQVIpID8gYi5zaGFwZVsxXSA6IGIuc2hhcGVbMF07XG5cbiAgICBjb25zdCBub3JtYWxHZXR0ZXIgPSAobWF0cml4OiBBcnJheTJELCBpOiBudW1iZXIsIGo6IG51bWJlcikgPT5cbiAgICAgICAgbWF0cml4LmdldChpLCBqKTtcbiAgICBjb25zdCB0cmFuc3Bvc2VkR2V0dGVyID0gKG1hdHJpeDogQXJyYXkyRCwgaTogbnVtYmVyLCBqOiBudW1iZXIpID0+XG4gICAgICAgIG1hdHJpeC5nZXQoaiwgaSk7XG5cbiAgICBjb25zdCBhR2V0dGVyID0gKGFPcmllbnRhdGlvbiA9PT0gTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUikgP1xuICAgICAgICBub3JtYWxHZXR0ZXIgOlxuICAgICAgICB0cmFuc3Bvc2VkR2V0dGVyO1xuICAgIGNvbnN0IGJHZXR0ZXIgPSAoYk9yaWVudGF0aW9uID09PSBNYXRyaXhPcmllbnRhdGlvbi5SRUdVTEFSKSA/XG4gICAgICAgIG5vcm1hbEdldHRlciA6XG4gICAgICAgIHRyYW5zcG9zZWRHZXR0ZXI7XG4gICAgY29uc3QgdmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheShsZWZ0RGltICogcmlnaHREaW0pO1xuICAgIGxldCBpbmRleCA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlZnREaW07ICsraSkge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCByaWdodERpbTsgKytqKSB7XG4gICAgICAgIGxldCBzdW0gPSAwO1xuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHNoYXJlZERpbTsgKytrKSB7XG4gICAgICAgICAgLy8gVE9ETzogb3B0aW1pemUgQ1BVIG1hdG11bC5cbiAgICAgICAgICBzdW0gKz0gYUdldHRlcihhLCBpLCBrKSAqIGJHZXR0ZXIoYiwgaywgaik7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWVzW2luZGV4KytdID0gc3VtO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gQXJyYXkyRC5uZXcoW2xlZnREaW0sIHJpZ2h0RGltXSwgdmFsdWVzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBlbGVtZW50V2lzZU11bEludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihhOiBULCBiOiBUKTogVCB7XG4gICAgY29uc3QgbmV3VmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheShhLnNpemUpO1xuICAgIGNvbnN0IGFWYWx1ZXMgPSBhLmdldFZhbHVlcygpO1xuICAgIGNvbnN0IGJWYWx1ZXMgPSBiLmdldFZhbHVlcygpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYVZhbHVlcy5sZW5ndGg7ICsraSkge1xuICAgICAgbmV3VmFsdWVzW2ldID0gYVZhbHVlc1tpXSAqIGJWYWx1ZXNbaV07XG4gICAgfVxuICAgIHJldHVybiBOREFycmF5Lm1ha2U8VD4oYS5zaGFwZSwge3ZhbHVlczogbmV3VmFsdWVzfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZWxlbWVudFdpc2VNdWxCcm9hZGNhc3RJbnRlcm5hbChhOiBBcnJheTJELCBiOiBBcnJheTJEKTogQXJyYXkyRCB7XG4gICAgY29uc3QgbWF4Um93ID0gTWF0aC5tYXgoYS5zaGFwZVswXSwgYi5zaGFwZVswXSk7XG4gICAgY29uc3QgbWF4Q29sID0gTWF0aC5tYXgoYS5zaGFwZVsxXSwgYi5zaGFwZVsxXSk7XG5cbiAgICBjb25zdCB2YWx1ZXMgPSBuZXcgRmxvYXQzMkFycmF5KG1heFJvdyAqIG1heENvbCk7XG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCBtYXhSb3c7IHJvdysrKSB7XG4gICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCBtYXhDb2w7IGNvbCsrKSB7XG4gICAgICAgIHZhbHVlc1tpbmRleCsrXSA9IGEuZ2V0KHJvdyAlIGEuc2hhcGVbMF0sIGNvbCAlIGEuc2hhcGVbMV0pICpcbiAgICAgICAgICAgIGIuZ2V0KHJvdyAlIGIuc2hhcGVbMF0sIGNvbCAlIGIuc2hhcGVbMV0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gQXJyYXkyRC5uZXcoW21heFJvdywgbWF4Q29sXSwgdmFsdWVzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBkaXZpZGVJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4oYTogVCwgYjogVCk6IFQge1xuICAgIGNvbnN0IG5ld1ZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkoYS5zaXplKTtcbiAgICBjb25zdCBhVmFsdWVzID0gYS5nZXRWYWx1ZXMoKTtcbiAgICBjb25zdCBiVmFsdWVzID0gYi5nZXRWYWx1ZXMoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFWYWx1ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIG5ld1ZhbHVlc1tpXSA9IGFWYWx1ZXNbaV0gLyBiVmFsdWVzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlPFQ+KGEuc2hhcGUsIHt2YWx1ZXM6IG5ld1ZhbHVlc30pO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNjYWxhckRpdmlkZWRCeUFycmF5SW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KGM6IFNjYWxhciwgYTogVCk6XG4gICAgICBUIHtcbiAgICBjb25zdCBuZXdWYWx1ZXMgPSBuZXcgRmxvYXQzMkFycmF5KGEuc2l6ZSk7XG4gICAgY29uc3QgYVZhbHVlcyA9IGEuZ2V0VmFsdWVzKCk7XG4gICAgY29uc3QgY1ZhbHVlID0gYy5nZXQoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFWYWx1ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIG5ld1ZhbHVlc1tpXSA9IGNWYWx1ZSAvIGFWYWx1ZXNbaV07XG4gICAgfVxuICAgIHJldHVybiBOREFycmF5Lm1ha2U8VD4oYS5zaGFwZSwge3ZhbHVlczogbmV3VmFsdWVzfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXJyYXlEaXZpZGVkQnlTY2FsYXJJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4oYTogVCwgYzogU2NhbGFyKTpcbiAgICAgIFQge1xuICAgIGNvbnN0IG5ld1ZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkoYS5zaXplKTtcbiAgICBjb25zdCBhVmFsdWVzID0gYS5nZXRWYWx1ZXMoKTtcbiAgICBjb25zdCBjVmFsdWUgPSBjLmdldCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYVZhbHVlcy5sZW5ndGg7ICsraSkge1xuICAgICAgbmV3VmFsdWVzW2ldID0gYVZhbHVlc1tpXSAvIGNWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxUPihhLnNoYXBlLCB7dmFsdWVzOiBuZXdWYWx1ZXN9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzdW1JbnRlcm5hbChuZGFycmF5OiBOREFycmF5KTogU2NhbGFyIHtcbiAgICBsZXQgc3VtID0gMDtcbiAgICBjb25zdCB2YWx1ZXMgPSBuZGFycmF5LmdldFZhbHVlcygpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICBzdW0gKz0gdmFsdWVzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gU2NhbGFyLm5ldyhzdW0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGFyZ01pbkludGVybmFsKG5kYXJyYXk6IE5EQXJyYXkpOiBTY2FsYXIge1xuICAgIGxldCBtaW4gPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgIGxldCBtaW5JbmRleCA9IC0xO1xuICAgIGNvbnN0IHZhbHVlcyA9IG5kYXJyYXkuZ2V0VmFsdWVzKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2ldO1xuICAgICAgaWYgKGlzTmFOKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gU2NhbGFyLm5ldyhOYU4pO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlIDwgbWluKSB7XG4gICAgICAgIG1pbiA9IHZhbHVlO1xuICAgICAgICBtaW5JbmRleCA9IGk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBTY2FsYXIubmV3KG1pbkluZGV4KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhcmdNYXhJbnRlcm5hbChuZGFycmF5OiBOREFycmF5KTogU2NhbGFyIHtcbiAgICBsZXQgbWF4ID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO1xuICAgIGxldCBtYXhJbmRleCA9IC0xO1xuICAgIGNvbnN0IHZhbHVlcyA9IG5kYXJyYXkuZ2V0VmFsdWVzKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2ldO1xuICAgICAgaWYgKGlzTmFOKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gU2NhbGFyLm5ldyhOYU4pO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlID4gbWF4KSB7XG4gICAgICAgIG1heCA9IHZhbHVlO1xuICAgICAgICBtYXhJbmRleCA9IGk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBTY2FsYXIubmV3KG1heEluZGV4KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhcmdNYXhFcXVhbHNJbnRlcm5hbCh4MTogTkRBcnJheSwgeDI6IE5EQXJyYXkpOiBTY2FsYXIge1xuICAgIGNvbnN0IGFyZ01heDEgPSB0aGlzLmFyZ01heEludGVybmFsKHgxKS5nZXQoKTtcbiAgICBjb25zdCBhcmdNYXgyID0gdGhpcy5hcmdNYXhJbnRlcm5hbCh4MikuZ2V0KCk7XG4gICAgaWYgKGlzTmFOKGFyZ01heDEpIHx8IGlzTmFOKGFyZ01heDIpKSB7XG4gICAgICByZXR1cm4gU2NhbGFyLm5ldyhOYU4pO1xuICAgIH1cbiAgICByZXR1cm4gU2NhbGFyLm5ldygrKGFyZ01heDEgPT09IGFyZ01heDIpKTtcbiAgfVxuXG4gIHByb3RlY3RlZCB0b3BLSW50ZXJuYWwobmRhcnJheTogTkRBcnJheSwgazogbnVtYmVyKTpcbiAgICAgIHt2YWx1ZXM6IEFycmF5MUQsIGluZGljZXM6IEFycmF5MUR9IHtcbiAgICBjb25zdCB2YWx1ZXMgPSBuZGFycmF5LmdldFZhbHVlcygpO1xuICAgIGNvbnN0IHZhbHVlc0FuZEluZGljZXM6IEFycmF5PHt2YWx1ZTogbnVtYmVyLCBpbmRleDogbnVtYmVyfT4gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFsdWVzQW5kSW5kaWNlcy5wdXNoKHt2YWx1ZTogdmFsdWVzW2ldLCBpbmRleDogaX0pO1xuICAgIH1cbiAgICB2YWx1ZXNBbmRJbmRpY2VzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBiLnZhbHVlIC0gYS52YWx1ZTtcbiAgICB9KTtcbiAgICBjb25zdCB0b3BrVmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheShrKTtcbiAgICBjb25zdCB0b3BrSW5kaWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkoayk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrOyBpKyspIHtcbiAgICAgIHRvcGtWYWx1ZXNbaV0gPSB2YWx1ZXNBbmRJbmRpY2VzW2ldLnZhbHVlO1xuICAgICAgdG9wa0luZGljZXNbaV0gPSB2YWx1ZXNBbmRJbmRpY2VzW2ldLmluZGV4O1xuICAgIH1cbiAgICByZXR1cm4ge3ZhbHVlczogQXJyYXkxRC5uZXcodG9wa1ZhbHVlcyksIGluZGljZXM6IEFycmF5MUQubmV3KHRvcGtJbmRpY2VzKX07XG4gIH1cblxuICBwcm90ZWN0ZWQgbWluSW50ZXJuYWwobmRhcnJheTogTkRBcnJheSk6IFNjYWxhciB7XG4gICAgY29uc3QgdmFsdWVzID0gbmRhcnJheS5nZXRWYWx1ZXMoKTtcbiAgICBsZXQgbWluID0gdmFsdWVzWzBdO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1tpXTtcbiAgICAgIGlmIChpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIFNjYWxhci5uZXcoTmFOKTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSA8IG1pbikge1xuICAgICAgICBtaW4gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFNjYWxhci5uZXcobWluKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBtYXhJbnRlcm5hbChuZGFycmF5OiBOREFycmF5KTogU2NhbGFyIHtcbiAgICBjb25zdCB2YWx1ZXMgPSBuZGFycmF5LmdldFZhbHVlcygpO1xuICAgIGxldCBtYXggPSB2YWx1ZXNbMF07XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB2YWx1ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2ldO1xuICAgICAgaWYgKGlzTmFOKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gU2NhbGFyLm5ldyhOYU4pO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlID4gbWF4KSB7XG4gICAgICAgIG1heCA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gU2NhbGFyLm5ldyhtYXgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGV4cEludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihuZGFycmF5OiBUKTogVCB7XG4gICAgY29uc3QgdmFsdWVzID0gbmRhcnJheS5nZXRWYWx1ZXMoKTtcbiAgICBjb25zdCBuZXdWYWx1ZXMgPSBuZXcgRmxvYXQzMkFycmF5KHZhbHVlcy5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICBuZXdWYWx1ZXNbaV0gPSBNYXRoLmV4cCh2YWx1ZXNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlPFQ+KG5kYXJyYXkuc2hhcGUsIHt2YWx1ZXM6IG5ld1ZhbHVlc30pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGxvZ0ludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihuZGFycmF5OiBUKTogVCB7XG4gICAgY29uc3QgdmFsdWVzID0gbmRhcnJheS5nZXRWYWx1ZXMoKTtcbiAgICBjb25zdCBuZXdWYWx1ZXMgPSBuZXcgRmxvYXQzMkFycmF5KHZhbHVlcy5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1tpXTtcbiAgICAgIG5ld1ZhbHVlc1tpXSA9IE1hdGgubG9nKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxUPihuZGFycmF5LnNoYXBlLCB7dmFsdWVzOiBuZXdWYWx1ZXN9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBsb2dTdW1FeHBJbnRlcm5hbChuZGFycmF5OiBOREFycmF5KTogU2NhbGFyIHtcbiAgICBjb25zdCB4TWF4ID0gdGhpcy5tYXgobmRhcnJheSk7XG4gICAgY29uc3QgYSA9IHRoaXMuYXJyYXlNaW51c1NjYWxhcihuZGFycmF5LCB4TWF4KTtcbiAgICBjb25zdCBiID0gdGhpcy5leHAoYSk7XG4gICAgY29uc3QgYyA9IHRoaXMuc3VtKGIpO1xuICAgIGNvbnN0IGQgPSB0aGlzLmxvZyhjKTtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLmFkZCh4TWF4LCBkKTtcblxuICAgIHhNYXguZGlzcG9zZSgpO1xuICAgIGEuZGlzcG9zZSgpO1xuICAgIGIuZGlzcG9zZSgpO1xuICAgIGMuZGlzcG9zZSgpO1xuICAgIGQuZGlzcG9zZSgpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHByb3RlY3RlZCByZWx1SW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KG5kYXJyYXk6IFQpOiBUIHtcbiAgICBjb25zdCByZXN1bHRWYWx1ZXMgPSBuZXcgRmxvYXQzMkFycmF5KG5kYXJyYXkuc2l6ZSk7XG4gICAgY29uc3QgdmFsdWVzID0gbmRhcnJheS5nZXRWYWx1ZXMoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7ICsraSkge1xuICAgICAgcmVzdWx0VmFsdWVzW2ldID0gTWF0aC5tYXgoMCwgdmFsdWVzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxUPihuZGFycmF5LnNoYXBlLCB7dmFsdWVzOiByZXN1bHRWYWx1ZXN9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzaWdtb2lkSW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KG5kYXJyYXk6IFQpOiBUIHtcbiAgICBjb25zdCByZXN1bHRWYWx1ZXMgPSBuZXcgRmxvYXQzMkFycmF5KG5kYXJyYXkuc2l6ZSk7XG4gICAgY29uc3QgdmFsdWVzID0gbmRhcnJheS5nZXRWYWx1ZXMoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7ICsraSkge1xuICAgICAgcmVzdWx0VmFsdWVzW2ldID0gMSAvICgxICsgTWF0aC5leHAoLXZhbHVlc1tpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlPFQ+KG5kYXJyYXkuc2hhcGUsIHt2YWx1ZXM6IHJlc3VsdFZhbHVlc30pO1xuICB9XG5cbiAgcHJvdGVjdGVkIHRhbmhJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4obmRhcnJheTogVCk6IFQge1xuICAgIGNvbnN0IHJlc3VsdFZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkobmRhcnJheS5zaXplKTtcbiAgICBjb25zdCB2YWx1ZXMgPSBuZGFycmF5LmdldFZhbHVlcygpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICByZXN1bHRWYWx1ZXNbaV0gPSB1dGlsLnRhbmgodmFsdWVzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxUPihuZGFycmF5LnNoYXBlLCB7dmFsdWVzOiByZXN1bHRWYWx1ZXN9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzaW5JbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4obmRhcnJheTogVCk6IFQge1xuICAgIGNvbnN0IHJlc3VsdFZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkobmRhcnJheS5zaXplKTtcbiAgICBjb25zdCB2YWx1ZXMgPSBuZGFycmF5LmdldFZhbHVlcygpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICByZXN1bHRWYWx1ZXNbaV0gPSBNYXRoLnNpbih2YWx1ZXNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlPFQ+KG5kYXJyYXkuc2hhcGUsIHt2YWx1ZXM6IHJlc3VsdFZhbHVlc30pO1xuICB9XG5cbiAgcHJvdGVjdGVkIHN0ZXBJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4obmRhcnJheTogVCk6IFQge1xuICAgIGNvbnN0IHJlc3VsdFZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkobmRhcnJheS5zaXplKTtcbiAgICBjb25zdCB2YWx1ZXMgPSBuZGFycmF5LmdldFZhbHVlcygpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1tpXTtcbiAgICAgIHJlc3VsdFZhbHVlc1tpXSA9IHZhbHVlID4gMCA/IDEgOiAodmFsdWUgPCAwID8gMCA6IHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxUPihuZGFycmF5LnNoYXBlLCB7dmFsdWVzOiByZXN1bHRWYWx1ZXN9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBpbWFnZSBpcyBvZiBzaGFwZSBbciwgYywgZDFdLlxuICAgKiB3ZWlnaHRzIGlzIG9mIHNoYXBlIFtGLCBGLCBkMSwgZDJdLlxuICAgKi9cbiAgcHJvdGVjdGVkIGNvbnYyZEludGVybmFsKFxuICAgICAgeDogQXJyYXkzRCwgd2VpZ2h0czogQXJyYXk0RCwgYmlhc2VzOiBBcnJheTFEfG51bGwsIHN0cmlkZTogbnVtYmVyLFxuICAgICAgcGFkOiBudW1iZXIpOiBBcnJheTNEIHtcbiAgICBjb25zdCBbeFJvd3MsIHhDb2xzLCBpbnB1dERlcHRoXSA9IHguc2hhcGU7XG4gICAgY29uc3QgZmllbGRTaXplID0gd2VpZ2h0cy5zaGFwZVswXTtcbiAgICBjb25zdCBvdXRwdXREZXB0aCA9IHdlaWdodHMuc2hhcGVbM107XG4gICAgY29uc3Qgb3V0cHV0U2hhcGUgPSBjb252X3V0aWwuY29tcHV0ZU91dHB1dFNoYXBlM0QoXG4gICAgICAgIFt4Um93cywgeENvbHMsIGlucHV0RGVwdGhdLCBmaWVsZFNpemUsIG91dHB1dERlcHRoLCBzdHJpZGUsIHBhZCk7XG4gICAgY29uc3QgeSA9IEFycmF5M0QuemVyb3Mob3V0cHV0U2hhcGUpO1xuICAgIGZvciAobGV0IGQyID0gMDsgZDIgPCBvdXRwdXREZXB0aDsgKytkMikge1xuICAgICAgZm9yIChsZXQgeVIgPSAwOyB5UiA8IHkuc2hhcGVbMF07ICsreVIpIHtcbiAgICAgICAgY29uc3QgeFJDb3JuZXIgPSB5UiAqIHN0cmlkZSAtIHBhZDtcbiAgICAgICAgY29uc3QgeFJNaW4gPSBNYXRoLm1heCgwLCB4UkNvcm5lcik7XG4gICAgICAgIGNvbnN0IHhSTWF4ID0gTWF0aC5taW4oeFJvd3MsIGZpZWxkU2l6ZSArIHhSQ29ybmVyKTtcbiAgICAgICAgZm9yIChsZXQgeUMgPSAwOyB5QyA8IHkuc2hhcGVbMV07ICsreUMpIHtcbiAgICAgICAgICBjb25zdCB4Q0Nvcm5lciA9IHlDICogc3RyaWRlIC0gcGFkO1xuICAgICAgICAgIGNvbnN0IHhDTWluID0gTWF0aC5tYXgoMCwgeENDb3JuZXIpO1xuICAgICAgICAgIGNvbnN0IHhDTWF4ID0gTWF0aC5taW4oeENvbHMsIGZpZWxkU2l6ZSArIHhDQ29ybmVyKTtcbiAgICAgICAgICBsZXQgZG90UHJvZCA9IDA7XG4gICAgICAgICAgZm9yIChsZXQgeFIgPSB4Uk1pbjsgeFIgPCB4Uk1heDsgKyt4Uikge1xuICAgICAgICAgICAgY29uc3Qgd1IgPSB4UiAtIHhSQ29ybmVyO1xuICAgICAgICAgICAgZm9yIChsZXQgeEMgPSB4Q01pbjsgeEMgPCB4Q01heDsgKyt4Qykge1xuICAgICAgICAgICAgICBjb25zdCB3QyA9IHhDIC0geENDb3JuZXI7XG4gICAgICAgICAgICAgIGZvciAobGV0IGQxID0gMDsgZDEgPCBpbnB1dERlcHRoOyArK2QxKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGl4ZWwgPSB4LmdldCh4UiwgeEMsIGQxKTtcbiAgICAgICAgICAgICAgICBjb25zdCB3ZWlnaHQgPSB3ZWlnaHRzLmdldCh3Uiwgd0MsIGQxLCBkMik7XG4gICAgICAgICAgICAgICAgZG90UHJvZCArPSBwaXhlbCAqIHdlaWdodDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBiaWFzID0gKGJpYXNlcyAhPSBudWxsKSA/IGJpYXNlcy5nZXQoZDIpIDogMDtcbiAgICAgICAgICB5LnNldChkb3RQcm9kICsgYmlhcywgeVIsIHlDLCBkMik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHk7XG4gIH1cblxuICBwcm90ZWN0ZWQgY29udjJkQmFja1Byb3BJbnRlcm5hbChcbiAgICAgIHg6IEFycmF5M0QsIGR5OiBBcnJheTNELCB3ZWlnaHRzOiBBcnJheTRELCBzdHJpZGU6IG51bWJlcixcbiAgICAgIHBhZDogbnVtYmVyKToge2R4OiBBcnJheTNELCBkdzogQXJyYXk0RCwgZGI6IEFycmF5MUR9IHtcbiAgICBjb25zdCBmU2l6ZSA9IHdlaWdodHMuc2hhcGVbMF07XG4gICAgY29uc3QgZHcgPSB0aGlzLmNvbnYyZERlcldlaWdodHMoeCwgZHksIGZTaXplLCBzdHJpZGUsIHBhZCk7XG4gICAgY29uc3QgZGIgPSB0aGlzLmNvbnYyZERlckJpYXMoZHkpO1xuICAgIGNvbnN0IGR4ID0gdGhpcy5jb252MmRUcmFuc3Bvc2VJbnRlcm5hbChkeSwgd2VpZ2h0cywgbnVsbCwgc3RyaWRlLCBwYWQpO1xuICAgIHJldHVybiB7ZHgsIGRiLCBkd307XG4gIH1cblxuICAvKipcbiAgICogaW1hZ2UgaXMgb2Ygc2hhcGUgW3IsIGMsIGQxXS5cbiAgICogd2VpZ2h0cyBpcyBvZiBzaGFwZSBbRiwgRiwgZDEsIGQyXS5cbiAgICovXG4gIHByb3RlY3RlZCBjb252MmRUcmFuc3Bvc2VJbnRlcm5hbChcbiAgICAgIHg6IEFycmF5M0QsIHdlaWdodHM6IEFycmF5NEQsIGJpYXNlczogQXJyYXkxRHxudWxsLCBvcmlnU3RyaWRlOiBudW1iZXIsXG4gICAgICBvcmlnUGFkOiBudW1iZXIpOiBBcnJheTNEIHtcbiAgICBjb25zdCBmU2l6ZSA9IHdlaWdodHMuc2hhcGVbMF07XG4gICAgY29uc3QgcGFkID0gZlNpemUgLSAxIC0gb3JpZ1BhZDtcbiAgICBjb25zdCBvcmlnSW5wdXREZXB0aCA9IHdlaWdodHMuc2hhcGVbMl07XG4gICAgY29uc3Qgb3JpZ091dHB1dERlcHRoID0gd2VpZ2h0cy5zaGFwZVszXTtcbiAgICBjb25zdCBbeFJvd3MsIHhDb2xzLCB4RGVwdGhdID0geC5zaGFwZTtcblxuICAgIC8vIERpbGF0ZSB0aGUgaW5wdXQuXG4gICAgY29uc3QgeFJvd3NEaWxhdGVkID0gKHhSb3dzIC0gMSkgKiBvcmlnU3RyaWRlICsgMTtcbiAgICBjb25zdCB4Q29sc0RpbGF0ZWQgPSAoeENvbHMgLSAxKSAqIG9yaWdTdHJpZGUgKyAxO1xuXG4gICAgY29uc3Qgb3V0cHV0U2hhcGUgPSBjb252X3V0aWwuY29tcHV0ZU91dHB1dFNoYXBlM0QoXG4gICAgICAgIFt4Um93c0RpbGF0ZWQsIHhDb2xzRGlsYXRlZCwgb3JpZ091dHB1dERlcHRoXSwgZlNpemUsIG9yaWdJbnB1dERlcHRoLCAxLFxuICAgICAgICBwYWQpO1xuICAgIGNvbnN0IHkgPSBBcnJheTNELnplcm9zKG91dHB1dFNoYXBlKTtcbiAgICBmb3IgKGxldCBkMiA9IDA7IGQyIDwgb3JpZ0lucHV0RGVwdGg7ICsrZDIpIHtcbiAgICAgIGZvciAobGV0IHlSID0gMDsgeVIgPCB5LnNoYXBlWzBdOyArK3lSKSB7XG4gICAgICAgIGNvbnN0IHhSQ29ybmVyID0geVIgLSBwYWQ7XG4gICAgICAgIGNvbnN0IHhSTWluID0gTWF0aC5tYXgoMCwgTWF0aC5jZWlsKHhSQ29ybmVyIC8gb3JpZ1N0cmlkZSkpO1xuICAgICAgICBjb25zdCB4Uk1heCA9IE1hdGgubWluKHhSb3dzLCAoZlNpemUgKyB4UkNvcm5lcikgLyBvcmlnU3RyaWRlKTtcblxuICAgICAgICBmb3IgKGxldCB5QyA9IDA7IHlDIDwgeS5zaGFwZVsxXTsgKyt5Qykge1xuICAgICAgICAgIGNvbnN0IHhDQ29ybmVyID0geUMgLSBwYWQ7XG4gICAgICAgICAgY29uc3QgeENNaW4gPSBNYXRoLm1heCgwLCBNYXRoLmNlaWwoeENDb3JuZXIgLyBvcmlnU3RyaWRlKSk7XG4gICAgICAgICAgY29uc3QgeENNYXggPSBNYXRoLm1pbih4Q29scywgKGZTaXplICsgeENDb3JuZXIpIC8gb3JpZ1N0cmlkZSk7XG5cbiAgICAgICAgICBsZXQgZG90UHJvZCA9IDA7XG4gICAgICAgICAgZm9yIChsZXQgeFIgPSB4Uk1pbjsgeFIgPCB4Uk1heDsgKyt4Uikge1xuICAgICAgICAgICAgY29uc3Qgd1IgPSB4UiAqIG9yaWdTdHJpZGUgLSB4UkNvcm5lcjtcblxuICAgICAgICAgICAgZm9yIChsZXQgeEMgPSB4Q01pbjsgeEMgPCB4Q01heDsgKyt4Qykge1xuICAgICAgICAgICAgICBjb25zdCB3QyA9IHhDICogb3JpZ1N0cmlkZSAtIHhDQ29ybmVyO1xuXG4gICAgICAgICAgICAgIGZvciAobGV0IGQxID0gMDsgZDEgPCBvcmlnT3V0cHV0RGVwdGg7ICsrZDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwaXhlbCA9IHguZ2V0KHhSLCB4QywgZDEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHdlaWdodCA9XG4gICAgICAgICAgICAgICAgICAgIHdlaWdodHMuZ2V0KGZTaXplIC0gMSAtIHdSLCBmU2l6ZSAtIDEgLSB3QywgZDIsIGQxKTtcbiAgICAgICAgICAgICAgICBkb3RQcm9kICs9IHBpeGVsICogd2VpZ2h0O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGJpYXMgPSBiaWFzZXMgIT0gbnVsbCA/IGJpYXNlcy5nZXQoZDIpIDogMDtcbiAgICAgICAgICB5LnNldChkb3RQcm9kICsgYmlhcywgeVIsIHlDLCBkMik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHk7XG4gIH1cblxuICAvKipcbiAgICogaW1hZ2UgaXMgb2Ygc2hhcGUgW3IsIGMsIGQxXS5cbiAgICogd2VpZ2h0cyBpcyBvZiBzaGFwZSBbRiwgRiwgZDEsIGQyXS5cbiAgICovXG4gIHByb3RlY3RlZCBjb252MmRUcmFuc3Bvc2VTaGFkZXJMaWtlKFxuICAgICAgeDogQXJyYXkzRCwgb3JpZ1dlaWdodHM6IEFycmF5NEQsIG9yaWdTdHJpZGU6IG51bWJlcixcbiAgICAgIG9yaWdQYWQ6IG51bWJlcik6IEFycmF5M0Qge1xuICAgIGNvbnN0IGZTaXplID0gb3JpZ1dlaWdodHMuc2hhcGVbMF07XG4gICAgY29uc3QgcGFkID0gZlNpemUgLSAxIC0gb3JpZ1BhZDtcbiAgICBjb25zdCBvcmlnSW5wdXREZXB0aCA9IG9yaWdXZWlnaHRzLnNoYXBlWzJdO1xuICAgIGNvbnN0IG9yaWdPdXRwdXREZXB0aCA9IG9yaWdXZWlnaHRzLnNoYXBlWzNdO1xuICAgIGNvbnN0IFt4Um93cywgeENvbHMsIHhEZXB0aF0gPSB4LnNoYXBlO1xuXG4gICAgLy8gRGlsYXRlIHRoZSBpbnB1dC5cbiAgICBjb25zdCB4Um93c0RpbGF0ZWQgPSAoeFJvd3MgLSAxKSAqIG9yaWdTdHJpZGUgKyAxO1xuICAgIGNvbnN0IHhDb2xzRGlsYXRlZCA9ICh4Q29scyAtIDEpICogb3JpZ1N0cmlkZSArIDE7XG5cbiAgICBjb25zdCBvdXRwdXRTaGFwZSA9IGNvbnZfdXRpbC5jb21wdXRlT3V0cHV0U2hhcGUzRChcbiAgICAgICAgW3hSb3dzRGlsYXRlZCwgeENvbHNEaWxhdGVkLCBvcmlnT3V0cHV0RGVwdGhdLCBmU2l6ZSwgb3JpZ0lucHV0RGVwdGgsIDEsXG4gICAgICAgIHBhZCk7XG4gICAgY29uc3QgeSA9IEFycmF5M0QuemVyb3Mob3V0cHV0U2hhcGUpO1xuXG4gICAgZm9yIChsZXQgZDIgPSAwOyBkMiA8IG9yaWdJbnB1dERlcHRoOyArK2QyKSB7XG4gICAgICBmb3IgKGxldCB5UiA9IDA7IHlSIDwgeS5zaGFwZVswXTsgKyt5Uikge1xuICAgICAgICBmb3IgKGxldCB5QyA9IDA7IHlDIDwgeS5zaGFwZVsxXTsgKyt5Qykge1xuICAgICAgICAgIC8vIFNoYWRlciBjb2RlIGJlZ2lucy5cbiAgICAgICAgICBjb25zdCB4UkNvcm5lciA9IHlSIC0gcGFkO1xuICAgICAgICAgIGNvbnN0IHhDQ29ybmVyID0geUMgLSBwYWQ7XG4gICAgICAgICAgbGV0IGRvdFByb2QgPSAwO1xuICAgICAgICAgIGZvciAobGV0IHdSID0gMDsgd1IgPCBmU2l6ZTsgKyt3Uikge1xuICAgICAgICAgICAgY29uc3QgeFIgPSAoeFJDb3JuZXIgKyB3UikgLyBvcmlnU3RyaWRlO1xuICAgICAgICAgICAgaWYgKHhSIDwgMCB8fCB4UiA+PSB4Um93cyB8fCBNYXRoLmZsb29yKHhSKSAhPT0geFIpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCB3QyA9IDA7IHdDIDwgZlNpemU7ICsrd0MpIHtcbiAgICAgICAgICAgICAgY29uc3QgeEMgPSAoeENDb3JuZXIgKyB3QykgLyBvcmlnU3RyaWRlO1xuICAgICAgICAgICAgICBpZiAoeEMgPCAwIHx8IHhDID49IHhDb2xzIHx8IE1hdGguZmxvb3IoeEMpICE9PSB4Qykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGZvciAobGV0IGQxID0gMDsgZDEgPCBvcmlnT3V0cHV0RGVwdGg7ICsrZDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwaXhlbCA9IHguZ2V0KHhSLCB4QywgZDEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHdlaWdodCA9XG4gICAgICAgICAgICAgICAgICAgIG9yaWdXZWlnaHRzLmdldChmU2l6ZSAtIDEgLSB3UiwgZlNpemUgLSAxIC0gd0MsIGQyLCBkMSk7XG4gICAgICAgICAgICAgICAgZG90UHJvZCArPSBwaXhlbCAqIHdlaWdodDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB5LnNldChkb3RQcm9kLCB5UiwgeUMsIGQyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geTtcbiAgfVxuXG4gIGNvbnYyZERlcldlaWdodHMoXG4gICAgICB4OiBBcnJheTNELCBkWTogQXJyYXkzRCwgZlNpemU6IG51bWJlciwgc3RyaWRlOiBudW1iZXIsXG4gICAgICB6ZXJvUGFkOiBudW1iZXIpOiBBcnJheTREIHtcbiAgICBjb25zdCBpbnB1dERlcHRoID0geC5zaGFwZVsyXTtcbiAgICBjb25zdCBvdXRwdXREZXB0aCA9IGRZLnNoYXBlWzJdO1xuICAgIGNvbnN0IHdlaWdodHNTaGFwZSA9XG4gICAgICAgIGNvbnZfdXRpbC5jb21wdXRlV2VpZ2h0c1NoYXBlNEQoaW5wdXREZXB0aCwgb3V0cHV0RGVwdGgsIGZTaXplKTtcbiAgICBjb25zdCBkVyA9IEFycmF5NEQuemVyb3Mod2VpZ2h0c1NoYXBlKTtcblxuICAgIGNvbnN0IHlOdW1Sb3dzID0gZFkuc2hhcGVbMF07XG4gICAgY29uc3QgeU51bUNvbHMgPSBkWS5zaGFwZVsxXTtcbiAgICBjb25zdCB4TnVtUm93cyA9IHguc2hhcGVbMF07XG4gICAgY29uc3QgeE51bUNvbHMgPSB4LnNoYXBlWzFdO1xuXG4gICAgZm9yIChsZXQgd1IgPSAwOyB3UiA8IGZTaXplOyArK3dSKSB7XG4gICAgICBjb25zdCB5Uk1pbiA9IE1hdGgubWF4KDAsIE1hdGguY2VpbCgoemVyb1BhZCAtIHdSKSAvIHN0cmlkZSkpO1xuICAgICAgY29uc3QgeVJNYXggPSBNYXRoLm1pbih5TnVtUm93cywgKHhOdW1Sb3dzICsgemVyb1BhZCAtIHdSKSAvIHN0cmlkZSk7XG5cbiAgICAgIGZvciAobGV0IHdDID0gMDsgd0MgPCBmU2l6ZTsgKyt3Qykge1xuICAgICAgICBjb25zdCB5Q01pbiA9IE1hdGgubWF4KDAsIE1hdGguY2VpbCgoemVyb1BhZCAtIHdDKSAvIHN0cmlkZSkpO1xuICAgICAgICBjb25zdCB5Q01heCA9IE1hdGgubWluKHlOdW1Db2xzLCAoeE51bUNvbHMgKyB6ZXJvUGFkIC0gd0MpIC8gc3RyaWRlKTtcblxuICAgICAgICBmb3IgKGxldCBkMSA9IDA7IGQxIDwgaW5wdXREZXB0aDsgKytkMSkge1xuICAgICAgICAgIGZvciAobGV0IGQyID0gMDsgZDIgPCBvdXRwdXREZXB0aDsgKytkMikge1xuICAgICAgICAgICAgLy8gTmVlZCB0byBjb252b2x2ZS5cbiAgICAgICAgICAgIGxldCBkb3RQcm9kID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IHlSID0geVJNaW47IHlSIDwgeVJNYXg7ICsreVIpIHtcbiAgICAgICAgICAgICAgY29uc3QgeFIgPSB3UiArIHlSICogc3RyaWRlIC0gemVyb1BhZDtcbiAgICAgICAgICAgICAgZm9yIChsZXQgeUMgPSB5Q01pbjsgeUMgPCB5Q01heDsgKyt5Qykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHhDID0gd0MgKyB5QyAqIHN0cmlkZSAtIHplcm9QYWQ7XG4gICAgICAgICAgICAgICAgZG90UHJvZCArPSB4LmdldCh4UiwgeEMsIGQxKSAqIGRZLmdldCh5UiwgeUMsIGQyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZFcuc2V0KGRvdFByb2QsIHdSLCB3QywgZDEsIGQyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRXO1xuICB9XG5cbiAgY29udjJkRGVyQmlhcyhkWTogQXJyYXkzRCk6IEFycmF5MUQge1xuICAgIGNvbnN0IG91dHB1dERlcHRoID0gZFkuc2hhcGVbMl07XG4gICAgY29uc3QgbnVtUm93cyA9IGRZLnNoYXBlWzBdO1xuICAgIGNvbnN0IG51bUNvbHMgPSBkWS5zaGFwZVsxXTtcbiAgICBjb25zdCB2YWx1ZXMgPSBuZXcgRmxvYXQzMkFycmF5KG91dHB1dERlcHRoKTtcbiAgICBmb3IgKGxldCBkMiA9IDA7IGQyIDwgb3V0cHV0RGVwdGg7ICsrZDIpIHtcbiAgICAgIGxldCBzdW0gPSAwO1xuICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBudW1Sb3dzOyArK3IpIHtcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBudW1Db2xzOyArK2MpIHtcbiAgICAgICAgICBzdW0gKz0gZFkuZ2V0KHIsIGMsIGQyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFsdWVzW2QyXSA9IHN1bTtcbiAgICB9XG4gICAgcmV0dXJuIEFycmF5MUQubmV3KHZhbHVlcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgc3dpdGNoRGltSW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KHQ6IFQsIG5ld0RpbTogbnVtYmVyW10pOiBUIHtcbiAgICBjb25zdCBuZXdTaGFwZTogbnVtYmVyW10gPSBuZXcgQXJyYXkodC5yYW5rKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1NoYXBlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBuZXdTaGFwZVtpXSA9IHQuc2hhcGVbbmV3RGltW2ldXTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0VmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheSh0LnNpemUpO1xuICAgIGNvbnN0IHZhbHVlcyA9IHQuZ2V0VmFsdWVzKCk7XG4gICAgY29uc3QgcmVzdWx0ID0gTkRBcnJheS5tYWtlPFQ+KG5ld1NoYXBlLCB7dmFsdWVzOiByZXN1bHRWYWx1ZXN9KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHQuc2l6ZTsgKytpKSB7XG4gICAgICBjb25zdCBsb2MgPSB0LmluZGV4VG9Mb2MoaSk7XG5cbiAgICAgIC8vIFBlcm11dGUgbG9jYXRpb24uXG4gICAgICBjb25zdCBuZXdMb2M6IG51bWJlcltdID0gbmV3IEFycmF5KGxvYy5sZW5ndGgpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdMb2MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbmV3TG9jW2ldID0gbG9jW25ld0RpbVtpXV07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5ld0luZGV4ID0gcmVzdWx0LmxvY1RvSW5kZXgobmV3TG9jKTtcbiAgICAgIHJlc3VsdFZhbHVlc1tuZXdJbmRleF0gPSB2YWx1ZXNbaV07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwcml2YXRlIHBvb2woXG4gICAgICB4OiBBcnJheTNELCBmU2l6ZTogbnVtYmVyLCBzdHJpZGU6IG51bWJlciwgcGFkOiBudW1iZXIsXG4gICAgICBwb29sVHlwZTogJ21heCd8J21pbid8J2F2ZycpIHtcbiAgICBjb25zdCBbeFJvd3MsIHhDb2xzLCBkZXB0aF0gPSB4LnNoYXBlO1xuICAgIGNvbnN0IG91dHB1dFNoYXBlID0gY29udl91dGlsLmNvbXB1dGVPdXRwdXRTaGFwZTNEKFxuICAgICAgICBbeFJvd3MsIHhDb2xzLCBkZXB0aF0sIGZTaXplLCBkZXB0aCwgc3RyaWRlLCBwYWQpO1xuICAgIGNvbnN0IHkgPSBBcnJheTNELnplcm9zKG91dHB1dFNoYXBlKTtcbiAgICBmb3IgKGxldCBkID0gMDsgZCA8IGRlcHRoOyArK2QpIHtcbiAgICAgIGZvciAobGV0IHlSID0gMDsgeVIgPCB5LnNoYXBlWzBdOyArK3lSKSB7XG4gICAgICAgIGNvbnN0IHhSQ29ybmVyID0geVIgKiBzdHJpZGUgLSBwYWQ7XG4gICAgICAgIGNvbnN0IHhSTWluID0gTWF0aC5tYXgoMCwgeFJDb3JuZXIpO1xuICAgICAgICBjb25zdCB4Uk1heCA9IE1hdGgubWluKHhSb3dzLCBmU2l6ZSArIHhSQ29ybmVyKTtcbiAgICAgICAgZm9yIChsZXQgeUMgPSAwOyB5QyA8IHkuc2hhcGVbMV07ICsreUMpIHtcbiAgICAgICAgICBjb25zdCB4Q0Nvcm5lciA9IHlDICogc3RyaWRlIC0gcGFkO1xuICAgICAgICAgIGNvbnN0IHhDTWluID0gTWF0aC5tYXgoMCwgeENDb3JuZXIpO1xuICAgICAgICAgIGNvbnN0IHhDTWF4ID0gTWF0aC5taW4oeENvbHMsIGZTaXplICsgeENDb3JuZXIpO1xuXG5cbiAgICAgICAgICBsZXQgbWluTWF4VmFsdWUgPVxuICAgICAgICAgICAgICAocG9vbFR5cGUgPT09ICdtYXgnID8gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSk7XG4gICAgICAgICAgbGV0IGF2Z1ZhbHVlID0gMDtcblxuICAgICAgICAgIGZvciAobGV0IHhSID0geFJNaW47IHhSIDwgeFJNYXg7ICsreFIpIHtcbiAgICAgICAgICAgIGNvbnN0IHdSID0geFIgLSB4UkNvcm5lcjtcbiAgICAgICAgICAgIGZvciAobGV0IHhDID0geENNaW47IHhDIDwgeENNYXg7ICsreEMpIHtcbiAgICAgICAgICAgICAgY29uc3Qgd0MgPSB4QyAtIHhDQ29ybmVyO1xuICAgICAgICAgICAgICBjb25zdCBwaXhlbCA9IHguZ2V0KHhSLCB4QywgZCk7XG4gICAgICAgICAgICAgIGlmIChpc05hTihwaXhlbCkpIHtcbiAgICAgICAgICAgICAgICBtaW5NYXhWYWx1ZSA9IE5hTjtcbiAgICAgICAgICAgICAgICBhdmdWYWx1ZSA9IE5hTjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoKHBvb2xUeXBlID09PSAnbWF4JyAmJiBwaXhlbCA+IG1pbk1heFZhbHVlKSB8fFxuICAgICAgICAgICAgICAgICAgKHBvb2xUeXBlID09PSAnbWluJyAmJiBwaXhlbCA8IG1pbk1heFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG1pbk1heFZhbHVlID0gcGl4ZWw7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAocG9vbFR5cGUgPT09ICdhdmcnKSB7XG4gICAgICAgICAgICAgICAgYXZnVmFsdWUgKz0gcGl4ZWwgLyAoZlNpemUgKiBmU2l6ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc05hTihtaW5NYXhWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHkuc2V0KHBvb2xUeXBlID09PSAnYXZnJyA/IGF2Z1ZhbHVlIDogbWluTWF4VmFsdWUsIHlSLCB5QywgZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHk7XG4gIH1cblxuICBwcm90ZWN0ZWQgbWF4UG9vbEludGVybmFsKFxuICAgICAgeDogQXJyYXkzRCwgZlNpemU6IG51bWJlciwgc3RyaWRlOiBudW1iZXIsIHBhZDogbnVtYmVyKTogQXJyYXkzRCB7XG4gICAgcmV0dXJuIHRoaXMucG9vbCh4LCBmU2l6ZSwgc3RyaWRlLCBwYWQsICdtYXgnKTtcbiAgfVxuXG4gIG1heFBvb2xQb3NpdGlvbnMoeDogQXJyYXkzRCwgZlNpemU6IG51bWJlciwgc3RyaWRlOiBudW1iZXIsIHBhZDogbnVtYmVyKSB7XG4gICAgY29uc3QgW3hSb3dzLCB4Q29scywgZGVwdGhdID0geC5zaGFwZTtcbiAgICBjb25zdCBvdXRwdXRTaGFwZSA9XG4gICAgICAgIGNvbnZfdXRpbC5jb21wdXRlT3V0cHV0U2hhcGUzRCh4LnNoYXBlLCBmU2l6ZSwgZGVwdGgsIHN0cmlkZSwgcGFkKTtcbiAgICBjb25zdCBtYXhQb3NpdGlvbnMgPSBBcnJheTNELnplcm9zKG91dHB1dFNoYXBlKTtcbiAgICBmb3IgKGxldCBkID0gMDsgZCA8IGRlcHRoOyArK2QpIHtcbiAgICAgIGZvciAobGV0IHlSID0gMDsgeVIgPCBvdXRwdXRTaGFwZVswXTsgKyt5Uikge1xuICAgICAgICBjb25zdCB4UkNvcm5lciA9IHlSICogc3RyaWRlIC0gcGFkO1xuICAgICAgICBjb25zdCB4Uk1pbiA9IE1hdGgubWF4KDAsIHhSQ29ybmVyKTtcbiAgICAgICAgY29uc3QgeFJNYXggPSBNYXRoLm1pbih4Um93cywgZlNpemUgKyB4UkNvcm5lcik7XG4gICAgICAgIGZvciAobGV0IHlDID0gMDsgeUMgPCBvdXRwdXRTaGFwZVsxXTsgKyt5Qykge1xuICAgICAgICAgIGNvbnN0IHhDQ29ybmVyID0geUMgKiBzdHJpZGUgLSBwYWQ7XG4gICAgICAgICAgY29uc3QgeENNaW4gPSBNYXRoLm1heCgwLCB4Q0Nvcm5lcik7XG4gICAgICAgICAgY29uc3QgeENNYXggPSBNYXRoLm1pbih4Q29scywgZlNpemUgKyB4Q0Nvcm5lcik7XG4gICAgICAgICAgbGV0IG1heFZhbHVlID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO1xuICAgICAgICAgIGxldCBtYXhQb3NpdGlvbiA9IC0xO1xuICAgICAgICAgIGZvciAobGV0IHhSID0geFJNaW47IHhSIDwgeFJNYXg7ICsreFIpIHtcbiAgICAgICAgICAgIGNvbnN0IHdSID0geFIgLSB4UkNvcm5lcjtcbiAgICAgICAgICAgIGZvciAobGV0IHhDID0geENNaW47IHhDIDwgeENNYXg7ICsreEMpIHtcbiAgICAgICAgICAgICAgY29uc3Qgd0MgPSB4QyAtIHhDQ29ybmVyO1xuICAgICAgICAgICAgICBjb25zdCBwaXhlbCA9IHguZ2V0KHhSLCB4QywgZCk7XG4gICAgICAgICAgICAgIGlmIChwaXhlbCA+IG1heFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgbWF4VmFsdWUgPSBwaXhlbDtcbiAgICAgICAgICAgICAgICBtYXhQb3NpdGlvbiA9IHdSICogZlNpemUgKyB3QztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBtYXhQb3NpdGlvbnMuc2V0KG1heFBvc2l0aW9uLCB5UiwgeUMsIGQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXhQb3NpdGlvbnM7XG4gIH1cblxuICBwcm90ZWN0ZWQgbWF4UG9vbEJhY2twcm9wSW50ZXJuYWwoXG4gICAgICBkeTogQXJyYXkzRCwgeDogQXJyYXkzRCwgZlNpemU6IG51bWJlciwgb3JpZ1N0cmlkZTogbnVtYmVyLFxuICAgICAgb3JpZ1BhZDogbnVtYmVyKTogQXJyYXkzRCB7XG4gICAgY29uc3QgbWF4UG9zaXRpb25zID0gdGhpcy5tYXhQb29sUG9zaXRpb25zKHgsIGZTaXplLCBvcmlnU3RyaWRlLCBvcmlnUGFkKTtcbiAgICBjb25zdCBwYWQgPSBmU2l6ZSAtIDEgLSBvcmlnUGFkO1xuICAgIGNvbnN0IFtkeVJvd3MsIGR5Q29scywgZGVwdGhdID0gZHkuc2hhcGU7XG5cbiAgICAvLyBEaWxhdGUgdGhlIGlucHV0LlxuICAgIGNvbnN0IGR5Um93c0RpbGF0ZWQgPSAoZHlSb3dzIC0gMSkgKiBvcmlnU3RyaWRlICsgMTtcbiAgICBjb25zdCBkeENvbHNEaWxhdGVkID0gKGR5Q29scyAtIDEpICogb3JpZ1N0cmlkZSArIDE7XG5cbiAgICBjb25zdCBvdXRwdXRTaGFwZSA9IGNvbnZfdXRpbC5jb21wdXRlT3V0cHV0U2hhcGUzRChcbiAgICAgICAgW2R5Um93c0RpbGF0ZWQsIGR4Q29sc0RpbGF0ZWQsIGRlcHRoXSwgZlNpemUsIGRlcHRoLCAxLCBwYWQpO1xuICAgIGNvbnN0IGR4ID0gQXJyYXkzRC56ZXJvcyhvdXRwdXRTaGFwZSk7XG5cbiAgICBmb3IgKGxldCBkID0gMDsgZCA8IGRlcHRoOyArK2QpIHtcbiAgICAgIGZvciAobGV0IGR4UiA9IDA7IGR4UiA8IGR4LnNoYXBlWzBdOyArK2R4Uikge1xuICAgICAgICBmb3IgKGxldCBkeEMgPSAwOyBkeEMgPCBkeC5zaGFwZVsxXTsgKytkeEMpIHtcbiAgICAgICAgICAvLyBTaGFkZXIgY29kZSBiZWdpbnMuXG4gICAgICAgICAgY29uc3QgZHlSQ29ybmVyID0gZHhSIC0gcGFkO1xuICAgICAgICAgIGNvbnN0IGR5Q0Nvcm5lciA9IGR4QyAtIHBhZDtcbiAgICAgICAgICBsZXQgZG90UHJvZCA9IDA7XG4gICAgICAgICAgZm9yIChsZXQgd1IgPSAwOyB3UiA8IGZTaXplOyArK3dSKSB7XG4gICAgICAgICAgICBjb25zdCBkeVIgPSAoZHlSQ29ybmVyICsgd1IpIC8gb3JpZ1N0cmlkZTtcbiAgICAgICAgICAgIGlmIChkeVIgPCAwIHx8IGR5UiA+PSBkeVJvd3MgfHwgTWF0aC5mbG9vcihkeVIpICE9PSBkeVIpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCB3QyA9IDA7IHdDIDwgZlNpemU7ICsrd0MpIHtcbiAgICAgICAgICAgICAgY29uc3QgZHlDID0gKGR5Q0Nvcm5lciArIHdDKSAvIG9yaWdTdHJpZGU7XG4gICAgICAgICAgICAgIGlmIChkeUMgPCAwIHx8IGR5QyA+PSBkeUNvbHMgfHwgTWF0aC5mbG9vcihkeUMpICE9PSBkeUMpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zdCBtYXhQb3MgPSBmU2l6ZSAqIGZTaXplIC0gMSAtIG1heFBvc2l0aW9ucy5nZXQoZHlSLCBkeUMsIGQpO1xuICAgICAgICAgICAgICBjb25zdCBjdXJQb3MgPSB3UiAqIGZTaXplICsgd0M7XG5cbiAgICAgICAgICAgICAgY29uc3QgbWFzayA9IG1heFBvcyA9PT0gY3VyUG9zID8gMSA6IDA7XG4gICAgICAgICAgICAgIGlmIChtYXNrID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjb25zdCBwaXhlbCA9IGR5LmdldChkeVIsIGR5QywgZCk7XG4gICAgICAgICAgICAgIGRvdFByb2QgKz0gcGl4ZWwgKiBtYXNrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBkeC5zZXQoZG90UHJvZCwgZHhSLCBkeEMsIGQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkeDtcbiAgfVxuXG4gIHByb3RlY3RlZCBtaW5Qb29sSW50ZXJuYWwoXG4gICAgICB4OiBBcnJheTNELCBmU2l6ZTogbnVtYmVyLCBzdHJpZGU6IG51bWJlciwgcGFkOiBudW1iZXIpOiBBcnJheTNEIHtcbiAgICByZXR1cm4gdGhpcy5wb29sKHgsIGZTaXplLCBzdHJpZGUsIHBhZCwgJ21pbicpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGF2Z1Bvb2xJbnRlcm5hbChcbiAgICAgIHg6IEFycmF5M0QsIGZTaXplOiBudW1iZXIsIHN0cmlkZTogbnVtYmVyLCBwYWQ6IG51bWJlcik6IEFycmF5M0Qge1xuICAgIHJldHVybiB0aGlzLnBvb2woeCwgZlNpemUsIHN0cmlkZSwgcGFkLCAnYXZnJyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVzaXplQmlsaW5lYXIzREludGVybmFsKFxuICAgICAgeDogQXJyYXkzRCwgbmV3U2hhcGUyRDogW251bWJlciwgbnVtYmVyXSxcbiAgICAgIGFsaWduQ29ybmVyczogYm9vbGVhbik6IEFycmF5M0Qge1xuICAgIGNvbnN0IG91dHB1dCA9IEFycmF5M0QuemVyb3MoW25ld1NoYXBlMkRbMF0sIG5ld1NoYXBlMkRbMV0sIHguc2hhcGVbMl1dKTtcblxuICAgIGNvbnN0IGVmZmVjdGl2ZUlucHV0U2l6ZSA9XG4gICAgICAgIGFsaWduQ29ybmVycyA/IFt4LnNoYXBlWzBdIC0gMSwgeC5zaGFwZVsxXSAtIDEsIHguc2hhcGVbMl1dIDogeC5zaGFwZTtcbiAgICBjb25zdCBlZmZlY3RpdmVPdXRwdXRTaXplID0gYWxpZ25Db3JuZXJzID9cbiAgICAgICAgW291dHB1dC5zaGFwZVswXSAtIDEsIG91dHB1dC5zaGFwZVsxXSAtIDEsIG91dHB1dC5zaGFwZVsyXV0gOlxuICAgICAgICBvdXRwdXQuc2hhcGU7XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBvdXRwdXQuc2hhcGVbMF07IHIrKykge1xuICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBvdXRwdXQuc2hhcGVbMV07IGMrKykge1xuICAgICAgICBmb3IgKGxldCBkID0gMDsgZCA8IG91dHB1dC5zaGFwZVsyXTsgZCsrKSB7XG4gICAgICAgICAgLy8gQmVnaW4gc2hhZGVyLlxuXG4gICAgICAgICAgLy8gQ29tcHV0ZSB0aGUgZnJhY3Rpb25hbCBpbmRleCBvZiB0aGUgc291cmNlLlxuICAgICAgICAgIGNvbnN0IHNvdXJjZUZyYWNSb3cgPVxuICAgICAgICAgICAgICAoZWZmZWN0aXZlSW5wdXRTaXplWzBdKSAqIHIgLyAoZWZmZWN0aXZlT3V0cHV0U2l6ZVswXSk7XG4gICAgICAgICAgY29uc3Qgc291cmNlRnJhY0NvbCA9XG4gICAgICAgICAgICAgIChlZmZlY3RpdmVJbnB1dFNpemVbMV0pICogYyAvIChlZmZlY3RpdmVPdXRwdXRTaXplWzFdKTtcblxuICAgICAgICAgIGNvbnN0IHNvdXJjZVJvd0Zsb29yID0gTWF0aC5mbG9vcihzb3VyY2VGcmFjUm93KTtcbiAgICAgICAgICBjb25zdCBzb3VyY2VSb3dDZWlsID1cbiAgICAgICAgICAgICAgTWF0aC5taW4oeC5zaGFwZVswXSAtIDEsIE1hdGguY2VpbChzb3VyY2VGcmFjUm93KSk7XG4gICAgICAgICAgY29uc3Qgc291cmNlQ29sRmxvb3IgPSBNYXRoLmZsb29yKHNvdXJjZUZyYWNDb2wpO1xuICAgICAgICAgIGNvbnN0IHNvdXJjZUNvbENlaWwgPVxuICAgICAgICAgICAgICBNYXRoLm1pbih4LnNoYXBlWzFdIC0gMSwgTWF0aC5jZWlsKHNvdXJjZUZyYWNDb2wpKTtcblxuICAgICAgICAgIGNvbnN0IHRvcExlZnQgPSB4LmdldChzb3VyY2VSb3dGbG9vciwgc291cmNlQ29sRmxvb3IsIGQpO1xuICAgICAgICAgIGNvbnN0IGJvdHRvbUxlZnQgPSB4LmdldChzb3VyY2VSb3dDZWlsLCBzb3VyY2VDb2xGbG9vciwgZCk7XG4gICAgICAgICAgY29uc3QgdG9wUmlnaHQgPSB4LmdldChzb3VyY2VSb3dGbG9vciwgc291cmNlQ29sQ2VpbCwgZCk7XG4gICAgICAgICAgY29uc3QgYm90dG9tUmlnaHQgPSB4LmdldChzb3VyY2VSb3dDZWlsLCBzb3VyY2VDb2xDZWlsLCBkKTtcblxuICAgICAgICAgIGNvbnN0IHJvd0ZyYWMgPSBzb3VyY2VGcmFjUm93IC0gc291cmNlUm93Rmxvb3I7XG4gICAgICAgICAgY29uc3QgY29sRnJhYyA9IHNvdXJjZUZyYWNDb2wgLSBzb3VyY2VDb2xGbG9vcjtcblxuICAgICAgICAgIGNvbnN0IHRvcCA9IHRvcExlZnQgKyAodG9wUmlnaHQgLSB0b3BMZWZ0KSAqIGNvbEZyYWM7XG4gICAgICAgICAgY29uc3QgYm90dG9tID0gYm90dG9tTGVmdCArIChib3R0b21SaWdodCAtIGJvdHRvbUxlZnQpICogY29sRnJhYztcbiAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHRvcCArIChib3R0b20gLSB0b3ApICogcm93RnJhYztcblxuICAgICAgICAgIG91dHB1dC5zZXQobmV3VmFsdWUsIHIsIGMsIGQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuXG4gIHByb3RlY3RlZCBiYXRjaE5vcm1hbGl6YXRpb24zREludGVybmFsKFxuICAgICAgeDogQXJyYXkzRCwgbWVhbjogQXJyYXkzRHxBcnJheTFELCB2YXJpYW5jZTogQXJyYXkzRHxBcnJheTFELFxuICAgICAgdmFyaWFuY2VFcHNpbG9uID0gLjAwMSwgc2NhbGU/OiBBcnJheTNEfEFycmF5MUQsXG4gICAgICBvZmZzZXQ/OiBBcnJheTNEfEFycmF5MUQpOiBBcnJheTNEIHtcbiAgICBjb25zdCB4VmFsdWVzID0geC5nZXRWYWx1ZXMoKTtcbiAgICBjb25zdCBtZWFuVmFsdWVzID0gbWVhbi5nZXRWYWx1ZXMoKTtcbiAgICBjb25zdCB2YXJpYW5jZVZhbHVlcyA9IHZhcmlhbmNlLmdldFZhbHVlcygpO1xuICAgIGNvbnN0IHNjYWxlVmFsdWVzID0gc2NhbGUgPyBzY2FsZS5nZXRWYWx1ZXMoKSA6IG5ldyBGbG9hdDMyQXJyYXkoWzFdKTtcbiAgICBjb25zdCBvZmZzZXRWYWx1ZXMgPSBvZmZzZXQgPyBvZmZzZXQuZ2V0VmFsdWVzKCkgOiBuZXcgRmxvYXQzMkFycmF5KFswXSk7XG4gICAgY29uc3Qgb3V0VmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheSh4VmFsdWVzLmxlbmd0aCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHhWYWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG91dFZhbHVlc1tpXSA9IG9mZnNldFZhbHVlc1tpICUgb2Zmc2V0VmFsdWVzLmxlbmd0aF0gK1xuICAgICAgICAgICh4VmFsdWVzW2ldIC0gbWVhblZhbHVlc1tpICUgbWVhblZhbHVlcy5sZW5ndGhdKSAqXG4gICAgICAgICAgICAgIHNjYWxlVmFsdWVzW2kgJSBzY2FsZVZhbHVlcy5sZW5ndGhdIC9cbiAgICAgICAgICAgICAgTWF0aC5zcXJ0KFxuICAgICAgICAgICAgICAgICAgdmFyaWFuY2VWYWx1ZXNbaSAlIHZhcmlhbmNlVmFsdWVzLmxlbmd0aF0gKyB2YXJpYW5jZUVwc2lsb24pO1xuICAgIH1cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlPEFycmF5M0Q+KHguc2hhcGUsIHt2YWx1ZXM6IG91dFZhbHVlc30pO1xuICB9XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi4vdXRpbCc7XG5cbmltcG9ydCAqIGFzIGNvbmNhdDNkX3V0aWwgZnJvbSAnLi9jb25jYXQzZF91dGlsJztcbmltcG9ydCAqIGFzIGNvbnZfdXRpbCBmcm9tICcuL2NvbnZfdXRpbCc7XG5pbXBvcnQge01hdHJpeE9yaWVudGF0aW9uLCBOREFycmF5TWF0aH0gZnJvbSAnLi9tYXRoJztcbmltcG9ydCAqIGFzIG5kYXJyYXkgZnJvbSAnLi9uZGFycmF5JztcbmltcG9ydCB7QXJyYXkxRCwgQXJyYXkyRCwgQXJyYXkzRCwgQXJyYXk0RCwgTkRBcnJheSwgU2NhbGFyfSBmcm9tICcuL25kYXJyYXknO1xuaW1wb3J0ICogYXMgYWRkc2NhbGVkbWF0X2dwdSBmcm9tICcuL3dlYmdsL2FkZHNjYWxlZG1hdF9ncHUnO1xuaW1wb3J0ICogYXMgYWRkc3VibXVsZGl2X2dwdSBmcm9tICcuL3dlYmdsL2FkZHN1Ym11bGRpdl9ncHUnO1xuaW1wb3J0IHtPcGVyYW5kVHlwZX0gZnJvbSAnLi93ZWJnbC9hZGRzdWJtdWxkaXZfZ3B1JztcbmltcG9ydCAqIGFzIGFyZ21heGVxdWFsc19ncHUgZnJvbSAnLi93ZWJnbC9hcmdtYXhlcXVhbHNfZ3B1JztcbmltcG9ydCAqIGFzIGFyZ21pbm1heF9ncHUgZnJvbSAnLi93ZWJnbC9hcmdtaW5tYXhfZ3B1JztcbmltcG9ydCAqIGFzIGF2Z19wb29sX2dwdSBmcm9tICcuL3dlYmdsL2F2Z19wb29sX2dwdSc7XG5pbXBvcnQgKiBhcyBiYXRjaG5vcm1fZ3B1IGZyb20gJy4vd2ViZ2wvYmF0Y2hub3JtX2dwdSc7XG5pbXBvcnQgKiBhcyBjb25jYXQzZF9ncHUgZnJvbSAnLi93ZWJnbC9jb25jYXQzZF9ncHUnO1xuaW1wb3J0ICogYXMgY29udl9iYWNrcHJvcF9ncHUgZnJvbSAnLi93ZWJnbC9jb252X2JhY2twcm9wX2dwdSc7XG5pbXBvcnQgKiBhcyBjb252X2dwdSBmcm9tICcuL3dlYmdsL2NvbnZfZ3B1JztcbmltcG9ydCAqIGFzIGNvcHlfZ3B1IGZyb20gJy4vd2ViZ2wvY29weV9ncHUnO1xuaW1wb3J0ICogYXMgZXhwX2dwdSBmcm9tICcuL3dlYmdsL2V4cF9ncHUnO1xuaW1wb3J0IHtHUEdQVUNvbnRleHR9IGZyb20gJy4vd2ViZ2wvZ3BncHVfY29udGV4dCc7XG5pbXBvcnQgKiBhcyBncGdwdV91dGlsIGZyb20gJy4vd2ViZ2wvZ3BncHVfdXRpbCc7XG5pbXBvcnQgKiBhcyBsb2dfZ3B1IGZyb20gJy4vd2ViZ2wvbG9nX2dwdSc7XG5pbXBvcnQgKiBhcyBsb2dzdW1leHBfZ3B1IGZyb20gJy4vd2ViZ2wvbG9nc3VtZXhwX2dwdSc7XG5pbXBvcnQgKiBhcyBtYXhfcG9vbF9iYWNrcHJvcF9ncHUgZnJvbSAnLi93ZWJnbC9tYXhfcG9vbF9iYWNrcHJvcF9ncHUnO1xuaW1wb3J0ICogYXMgbWF4X3Bvb2xfZ3B1IGZyb20gJy4vd2ViZ2wvbWF4X3Bvb2xfZ3B1JztcbmltcG9ydCAqIGFzIG1pbl9wb29sX2dwdSBmcm9tICcuL3dlYmdsL21pbl9wb29sX2dwdSc7XG5pbXBvcnQgKiBhcyBtaW5tYXhfZ3B1IGZyb20gJy4vd2ViZ2wvbWlubWF4X2dwdSc7XG5pbXBvcnQgKiBhcyBtdWxtYXRfZ3B1IGZyb20gJy4vd2ViZ2wvbXVsbWF0X2dwdSc7XG5pbXBvcnQgKiBhcyBuZWdfZ3B1IGZyb20gJy4vd2ViZ2wvbmVnX2dwdSc7XG5pbXBvcnQgKiBhcyBwb29sX2dwdSBmcm9tICcuL3dlYmdsL3Bvb2xfZ3B1JztcbmltcG9ydCAqIGFzIHJlZHVjZXN1bV9ncHUgZnJvbSAnLi93ZWJnbC9yZWR1Y2VzdW1fZ3B1JztcbmltcG9ydCAqIGFzIHJlbHVfZ3B1IGZyb20gJy4vd2ViZ2wvcmVsdV9ncHUnO1xuaW1wb3J0ICogYXMgcmVzaGFwZV9ncHUgZnJvbSAnLi93ZWJnbC9yZXNoYXBlX2dwdSc7XG5pbXBvcnQgKiBhcyByZXNpemVfYmlsaW5lYXJfZ3B1IGZyb20gJy4vd2ViZ2wvcmVzaXplX2JpbGluZWFyX2dwdSc7XG5pbXBvcnQgKiBhcyBzaGFkZXJfY29tcGlsZXIgZnJvbSAnLi93ZWJnbC9zaGFkZXJfY29tcGlsZXInO1xuaW1wb3J0ICogYXMgc2lnbW9pZF9ncHUgZnJvbSAnLi93ZWJnbC9zaWdtb2lkX2dwdSc7XG5pbXBvcnQgKiBhcyBzdGVwX2dwdSBmcm9tICcuL3dlYmdsL3N0ZXBfZ3B1JztcbmltcG9ydCB7VGV4dHVyZU1hbmFnZXJ9IGZyb20gJy4vd2ViZ2wvdGV4dHVyZV9tYW5hZ2VyJztcbmltcG9ydCAqIGFzIHRyaWdfZ3B1IGZyb20gJy4vd2ViZ2wvdHJpZ19ncHUnO1xuaW1wb3J0ICogYXMgd2ViZ2xfdXRpbCBmcm9tICcuL3dlYmdsL3dlYmdsX3V0aWwnO1xuXG5jb25zdCBBUkdNQVhfUFJPRyA9ICdhcmdtYXgnO1xuY29uc3QgQVJHTUFYX0VRVUFMU19QUk9HID0gJ2FyZ21heGVxdWFscyc7XG5jb25zdCBBUkdNSU5fUFJPRyA9ICdhcmdtaW4nO1xuXG5jb25zdCBCQVRDSE5PUk1fUFJPRyA9ICdiYXRjaG5vcm0nO1xuXG5jb25zdCBDT1BZX1BST0cgPSAnY29weSc7XG5jb25zdCBDT05DQVRfUFJPRyA9ICdjb25jYXQnO1xuXG4vLyBNYXRyaXggYWxnZWJyYS5cbmNvbnN0IEFERF9TQ0FMRURfTUFUX1BST0cgPSAnYWRkc2NhbGVkbWF0JztcbmNvbnN0IE1BVE1VTF9QUk9HID0gJ21hdG11bCc7XG5cbi8vIEVsZW1lbnQtd2lzZSBvcHMuXG5jb25zdCBSRUxVX1BST0cgPSAncmVsdSc7XG5jb25zdCBUQU5IX1BST0cgPSAndGFuaCc7XG5jb25zdCBTSU5fUFJPRyA9ICdzaW4nO1xuY29uc3QgU0lHTU9JRF9QUk9HID0gJ3NpZ21vaWQnO1xuY29uc3QgTUFYX1BST0cgPSAnbWF4JztcbmNvbnN0IE1JTl9QUk9HID0gJ21pbic7XG5jb25zdCBORUdfUFJPRyA9ICduZWcnO1xuY29uc3QgRVhQX1BST0cgPSAnZXhwJztcbmNvbnN0IExPR19QUk9HID0gJ2xvZyc7XG5jb25zdCBTVU1fUFJPRyA9ICdzdW0nO1xuY29uc3QgU1RFUF9QUk9HID0gJ3N0ZXAnO1xuY29uc3QgTE9HU1VNRVhQX1BST0cgPSAnbG9nc3VtZXhwJztcbmNvbnN0IFJFU0hBUEVfUFJPRyA9ICdyZXNoYXBlJztcbmNvbnN0IEFERF9TVU1fTVVMX0RJVl9QUk9HID0gJ2FkZHN1bW11bGRpdic7XG5cbi8vIENvbnZvbHV0aW9uLlxuY29uc3QgQ09OVjJEX1BST0cgPSAnY29udic7XG5jb25zdCBDT05WMkRfVFJBTlNQT1NFX1BST0cgPSAnY29udl90cmFuc3Bvc2UnO1xuY29uc3QgQ09OVjJEX0RFUldfUFJPRyA9ICdjb252X2RlcncnO1xuY29uc3QgQ09OVjJEX0RFUkJfUFJPRyA9ICdjb252X2RlcmInO1xuY29uc3QgTUFYX1BPT0xfUFJPRyA9ICdtYXhwb29sJztcbmNvbnN0IE1BWF9QT09MX1BPU0lUSU9OU19QUk9HID0gJ21heHBvb2xfcG9zbic7XG5jb25zdCBNQVhfUE9PTF9CQUNLUFJPUF9QUk9HID0gJ21heHBvb2xfYmFja3Byb3AnO1xuY29uc3QgTUlOX1BPT0xfUFJPRyA9ICdtaW5wb29sJztcbmNvbnN0IEFWR19QT09MX1BST0cgPSAnYXZncG9vbCc7XG5cbmNvbnN0IFJFU0laRV9CSUxJTkVBUl9QUk9HID0gJ3Jlc2l6ZWJpbGluJztcblxuZnVuY3Rpb24gbWFrZUNvcHlQcm9ncmFtTmFtZShcbiAgICBzb3VyY2VTaGFwZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSwgc291cmNlU2l6ZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSxcbiAgICBkZXN0U2l6ZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSk6IHN0cmluZyB7XG4gIGNvbnN0IHNoYXBlTmFtZSA9IGAke3NvdXJjZVNoYXBlUm93Q29sWzBdfV8ke3NvdXJjZVNoYXBlUm93Q29sWzFdfWA7XG4gIGNvbnN0IHNyY1NpemVOYW1lID0gYCR7c291cmNlU2l6ZVJvd0NvbFswXX1fJHtzb3VyY2VTaXplUm93Q29sWzFdfWA7XG4gIGNvbnN0IGRzdFNpemVOYW1lID0gYCR7ZGVzdFNpemVSb3dDb2xbMF19XyR7ZGVzdFNpemVSb3dDb2xbMV19YDtcbiAgcmV0dXJuIGAke0NPUFlfUFJPR31fJHtzaGFwZU5hbWV9XyR7c3JjU2l6ZU5hbWV9XyR7ZHN0U2l6ZU5hbWV9YDtcbn1cblxuZXhwb3J0IGNsYXNzIE5EQXJyYXlNYXRoR1BVIGV4dGVuZHMgTkRBcnJheU1hdGgge1xuICBwcml2YXRlIGdwZ3B1OiBHUEdQVUNvbnRleHQ7XG4gIHByaXZhdGUgdGV4dHVyZU1hbmFnZXI6IFRleHR1cmVNYW5hZ2VyO1xuICBwcml2YXRlIHByb2dyYW1DYWNoZToge1trZXk6IHN0cmluZ106IFdlYkdMUHJvZ3JhbX0gPSB7fTtcbiAgcHJpdmF0ZSBncGdwdUNyZWF0ZWRMb2NhbGx5OiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKGdwZ3B1PzogR1BHUFVDb250ZXh0LCBzYWZlTW9kZSA9IHRydWUpIHtcbiAgICBzdXBlcihzYWZlTW9kZSk7XG4gICAgaWYgKGdwZ3B1ID09IG51bGwpIHtcbiAgICAgIGNvbnN0IGdsID0gZ3BncHVfdXRpbC5jcmVhdGVXZWJHTENvbnRleHQoKTtcbiAgICAgIHRoaXMuZ3BncHUgPSBuZXcgR1BHUFVDb250ZXh0KGdsKTtcbiAgICAgIHRoaXMuZ3BncHVDcmVhdGVkTG9jYWxseSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZ3BncHUgPSBncGdwdTtcbiAgICAgIHRoaXMuZ3BncHVDcmVhdGVkTG9jYWxseSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMudGV4dHVyZU1hbmFnZXIgPSBuZXcgVGV4dHVyZU1hbmFnZXIodGhpcy5ncGdwdSk7XG5cbiAgICBuZGFycmF5LmluaXRpYWxpemVHUFUodGhpcy5ncGdwdSwgdGhpcy50ZXh0dXJlTWFuYWdlcik7XG4gIH1cblxuICBnZXRHUEdQVUNvbnRleHQoKTogR1BHUFVDb250ZXh0IHtcbiAgICByZXR1cm4gdGhpcy5ncGdwdTtcbiAgfVxuXG4gIHByb3RlY3RlZCBjbG9uZUludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihuZGFycmF5OiBUKTogVCB7XG4gICAgY29uc3QgdGV4dHVyZVNoYXBlUkMgPSBuZGFycmF5LmdldFRleHR1cmVTaGFwZVJDKCk7XG4gICAgY29uc3QgcHJvZ3JhbSA9IHRoaXMuZ2V0QW5kU2F2ZVByb2dyYW0oXG4gICAgICAgIG1ha2VDb3B5UHJvZ3JhbU5hbWUodGV4dHVyZVNoYXBlUkMsIHRleHR1cmVTaGFwZVJDLCB0ZXh0dXJlU2hhcGVSQyksXG4gICAgICAgICgpID0+IGNvcHlfZ3B1LmdldEZyYWdtZW50U2hhZGVyU291cmNlKFxuICAgICAgICAgICAgdGV4dHVyZVNoYXBlUkMsIHRleHR1cmVTaGFwZVJDLCB0ZXh0dXJlU2hhcGVSQykpO1xuXG4gICAgY29uc3QgcmVzdWx0VGV4dHVyZSA9IHRoaXMudGV4dHVyZU1hbmFnZXIuYWNxdWlyZVRleHR1cmUodGV4dHVyZVNoYXBlUkMpO1xuXG4gICAgY29weV9ncHUuY29weShcbiAgICAgICAgdGhpcy5ncGdwdSwgcHJvZ3JhbSwgbmRhcnJheS5nZXRUZXh0dXJlKCksIHRleHR1cmVTaGFwZVJDLCBbMCwgMF0sXG4gICAgICAgIHRleHR1cmVTaGFwZVJDLCByZXN1bHRUZXh0dXJlLCB0ZXh0dXJlU2hhcGVSQywgWzAsIDBdLCB0ZXh0dXJlU2hhcGVSQyk7XG5cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlPFQ+KFxuICAgICAgICBuZGFycmF5LnNoYXBlLCB7dGV4dHVyZTogcmVzdWx0VGV4dHVyZSwgdGV4dHVyZVNoYXBlUkN9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZXNoYXBlSW50ZXJuYWw8VDEgZXh0ZW5kcyBOREFycmF5LCBUMiBleHRlbmRzIE5EQXJyYXk+KFxuICAgICAgbmRhcnJheTogVDEsIG5ld1NoYXBlOiBudW1iZXJbXSk6IFQyIHtcbiAgICBsZXQgbmV3VGV4U2hhcGU6IFtudW1iZXIsIG51bWJlcl07XG5cbiAgICBzd2l0Y2ggKG5ld1NoYXBlLmxlbmd0aCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICBuZXdUZXhTaGFwZSA9IFsxLCAxXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIG5ld1RleFNoYXBlID0gW25ld1NoYXBlWzBdLCAxXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIG5ld1RleFNoYXBlID0gW25ld1NoYXBlWzBdLCBuZXdTaGFwZVsxXV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBuZXdUZXhTaGFwZSA9IFtuZXdTaGFwZVswXSwgbmV3U2hhcGVbMV0gKiBuZXdTaGFwZVsyXV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgICBgUmVzaGFwZXMgaW50byAke25ld1NoYXBlLmxlbmd0aH0tZGltIG5kYXJyYXkgaXMgbm90IHlldCBgICtcbiAgICAgICAgICAgIGBzdXBwb3J0ZWQgb24gR1BVYCk7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0dWFsVGV4U2hhcGUgPSBuZGFycmF5LmdldFRleHR1cmVTaGFwZVJDKG5ld1RleFNoYXBlKTtcbiAgICBsZXQgY2xvbmVkQXJyYXk6IFQxO1xuICAgIGlmICghdXRpbC5hcnJheXNFcXVhbChhY3R1YWxUZXhTaGFwZSwgbmV3VGV4U2hhcGUpKSB7XG4gICAgICBjbG9uZWRBcnJheSA9IHRoaXMucmVzaGFwZVRleHR1cmUobmRhcnJheSwgbmV3VGV4U2hhcGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbG9uZWRBcnJheSA9IHRoaXMuY2xvbmVJbnRlcm5hbChuZGFycmF5KTtcbiAgICB9XG4gICAgcmV0dXJuIGNsb25lZEFycmF5LnJlc2hhcGU8VDI+KG5ld1NoYXBlKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzbGljZTJESW50ZXJuYWwoXG4gICAgICBpbnB1dDogQXJyYXkyRCwgYmVnaW5Sb3dDb2w6IFtudW1iZXIsIG51bWJlcl0sXG4gICAgICBzaXplUm93Q29sOiBbbnVtYmVyLCBudW1iZXJdKTogQXJyYXkyRCB7XG4gICAgY29uc3QgcmVzdWx0ID0gTkRBcnJheS5tYWtlPEFycmF5MkQ+KHNpemVSb3dDb2wsIHtcbiAgICAgIHRleHR1cmU6IHRoaXMudGV4dHVyZU1hbmFnZXIuYWNxdWlyZVRleHR1cmUoc2l6ZVJvd0NvbCksXG4gICAgICB0ZXh0dXJlU2hhcGVSQzogc2l6ZVJvd0NvbFxuICAgIH0pO1xuICAgIHRoaXMuY29weTJESW50ZXJuYWwoXG4gICAgICAgIGlucHV0LCBiZWdpblJvd0NvbCwgc2l6ZVJvd0NvbCwgcmVzdWx0LCBbMCwgMF0sIHNpemVSb3dDb2wpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwcm90ZWN0ZWQgY29weTJESW50ZXJuYWwoXG4gICAgICBzb3VyY2U6IEFycmF5MkQsIHNvdXJjZUJlZ2luUm93Q29sOiBbbnVtYmVyLCBudW1iZXJdLFxuICAgICAgc291cmNlU2l6ZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSwgZGVzdDogQXJyYXkyRCxcbiAgICAgIGRlc3RCZWdpblJvd0NvbDogW251bWJlciwgbnVtYmVyXSxcbiAgICAgIGRlc3RTaXplUm93Q29sOiBbbnVtYmVyLCBudW1iZXJdKTogdm9pZCB7XG4gICAgY29uc3Qgc291cmNlU2hhcGVSQyA9IHNvdXJjZS5nZXRUZXh0dXJlU2hhcGVSQygpO1xuICAgIGNvbnN0IGRlc3RTaGFwZVJDID0gZGVzdC5nZXRUZXh0dXJlU2hhcGVSQygpO1xuICAgIGNvbnN0IHByb2dyYW0gPSB0aGlzLmdldEFuZFNhdmVQcm9ncmFtKFxuICAgICAgICBtYWtlQ29weVByb2dyYW1OYW1lKHNvdXJjZVNoYXBlUkMsIHNvdXJjZVNpemVSb3dDb2wsIGRlc3RTaXplUm93Q29sKSxcbiAgICAgICAgKCkgPT4gY29weV9ncHUuZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoXG4gICAgICAgICAgICBzb3VyY2VTaGFwZVJDLCBzb3VyY2VTaXplUm93Q29sLCBkZXN0U2l6ZVJvd0NvbCkpO1xuXG4gICAgY29weV9ncHUuY29weShcbiAgICAgICAgdGhpcy5ncGdwdSwgcHJvZ3JhbSwgc291cmNlLmdldFRleHR1cmUoKSwgc291cmNlU2hhcGVSQyxcbiAgICAgICAgc291cmNlQmVnaW5Sb3dDb2wsIHNvdXJjZVNpemVSb3dDb2wsIGRlc3QuZ2V0VGV4dHVyZSgpLCBkZXN0U2hhcGVSQyxcbiAgICAgICAgZGVzdEJlZ2luUm93Q29sLCBkZXN0U2l6ZVJvd0NvbCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgY29uY2F0M0RJbnRlcm5hbCh4MTogQXJyYXkzRCwgeDI6IEFycmF5M0QsIGF4aXM6IG51bWJlcik6IEFycmF5M0Qge1xuICAgIGNvbnN0IHgxVGV4U2hhcGVSQzogW251bWJlciwgbnVtYmVyXSA9XG4gICAgICAgIGNvbnZfdXRpbC5jb21wdXRlVGV4U2hhcGVGcm9tM0QoeDEuc2hhcGUpO1xuICAgIGNvbnN0IHgyVGV4U2hhcGVSQzogW251bWJlciwgbnVtYmVyXSA9XG4gICAgICAgIGNvbnZfdXRpbC5jb21wdXRlVGV4U2hhcGVGcm9tM0QoeDIuc2hhcGUpO1xuXG4gICAgLy8gSWYgdGhlIHRleHR1cmUgc2hhcGVzIGRvZXNuJ3QgbWF0Y2ggdGhlIHNoYXBlcyB0aGF0IHNoYWRlcnMgZXhwZWN0LFxuICAgIC8vIGRvIHBoeXNpY2FsIHRleHR1cmUgcmVzaGFwZXMgb24gdGhlIEdQVS5cbiAgICBjb25zdCBhY3R1YWxYMVRleFNoYXBlID0geDEuZ2V0VGV4dHVyZVNoYXBlUkMoeDFUZXhTaGFwZVJDKTtcbiAgICBsZXQgY2xlYW51cFgxID0gZmFsc2U7XG4gICAgaWYgKCF1dGlsLmFycmF5c0VxdWFsKGFjdHVhbFgxVGV4U2hhcGUsIHgxVGV4U2hhcGVSQykpIHtcbiAgICAgIHgxID0gdGhpcy5yZXNoYXBlVGV4dHVyZSh4MSwgeDFUZXhTaGFwZVJDKTtcbiAgICAgIGNsZWFudXBYMSA9IHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGFjdHVhbFgyVGV4U2hhcGUgPSB4Mi5nZXRUZXh0dXJlU2hhcGVSQyh4MlRleFNoYXBlUkMpO1xuICAgIGxldCBjbGVhbnVwWDIgPSBmYWxzZTtcbiAgICBpZiAoIXV0aWwuYXJyYXlzRXF1YWwoYWN0dWFsWDJUZXhTaGFwZSwgeDJUZXhTaGFwZVJDKSkge1xuICAgICAgeDIgPSB0aGlzLnJlc2hhcGVUZXh0dXJlKHgyLCB4MlRleFNoYXBlUkMpO1xuICAgICAgY2xlYW51cFgyID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHRTaGFwZVJDRCA9XG4gICAgICAgIGNvbmNhdDNkX3V0aWwuY29tcHV0ZUNvbmNhdDNET3V0cHV0U2hhcGUoeDEuc2hhcGUsIHgyLnNoYXBlLCBheGlzKTtcblxuICAgIGNvbnN0IHByb2dyYW0gPSB0aGlzLmdldEFuZFNhdmVQcm9ncmFtKFxuICAgICAgICBgJHtDT05DQVRfUFJPR31fJHt4MS5zaGFwZX1fJHt4Mi5zaGFwZX1fJHtheGlzfWAsXG4gICAgICAgICgpID0+IGNvbmNhdDNkX2dwdS5nZXRGcmFnbWVudFNoYWRlclNvdXJjZShcbiAgICAgICAgICAgIHgxLnNoYXBlLCB4Mi5zaGFwZSwgcmVzdWx0U2hhcGVSQ0QsIGF4aXMpKTtcblxuICAgIGNvbnN0IHJlc3VsdFRleFNoYXBlID0gY29udl91dGlsLmNvbXB1dGVUZXhTaGFwZUZyb20zRChyZXN1bHRTaGFwZVJDRCk7XG4gICAgY29uc3QgcmVzdWx0VGV4ID0gdGhpcy50ZXh0dXJlTWFuYWdlci5hY3F1aXJlVGV4dHVyZShyZXN1bHRUZXhTaGFwZSk7XG5cbiAgICBjb25jYXQzZF9ncHUuY29uY2F0M0QoXG4gICAgICAgIHRoaXMuZ3BncHUsIHByb2dyYW0sIHgxLmdldFRleHR1cmUoKSwgeDIuZ2V0VGV4dHVyZSgpLCByZXN1bHRUZXgsXG4gICAgICAgIHJlc3VsdFRleFNoYXBlKTtcblxuICAgIGlmIChjbGVhbnVwWDEpIHtcbiAgICAgIHgxLmRpc3Bvc2UoKTtcbiAgICB9XG5cbiAgICBpZiAoY2xlYW51cFgyKSB7XG4gICAgICB4Mi5kaXNwb3NlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxBcnJheTNEPihcbiAgICAgICAgcmVzdWx0U2hhcGVSQ0QsIHt0ZXh0dXJlOiByZXN1bHRUZXgsIHRleHR1cmVTaGFwZVJDOiByZXN1bHRUZXhTaGFwZX0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNjYWxhclBsdXNBcnJheUludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihjOiBTY2FsYXIsIGE6IFQpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5hZGRTdWJNdWxEaXYoXG4gICAgICAgIGMsIGEsIGEuc2hhcGUsIE9wZXJhbmRUeXBlLlNDQUxBUiwgJysnLCBPcGVyYW5kVHlwZS5NQVRSSVgpIGFzIFQ7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXJyYXlNaW51c1NjYWxhckludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihhOiBULCBjOiBTY2FsYXIpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5hZGRTdWJNdWxEaXYoXG4gICAgICAgIGEsIGMsIGEuc2hhcGUsIE9wZXJhbmRUeXBlLk1BVFJJWCwgJy0nLCBPcGVyYW5kVHlwZS5TQ0FMQVIpIGFzIFQ7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2NhbGFyTWludXNBcnJheUludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihjOiBTY2FsYXIsIGE6IFQpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5hZGRTdWJNdWxEaXYoXG4gICAgICAgIGMsIGEsIGEuc2hhcGUsIE9wZXJhbmRUeXBlLlNDQUxBUiwgJy0nLCBPcGVyYW5kVHlwZS5NQVRSSVgpIGFzIFQ7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2NhbGVkQXJyYXlBZGRJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4oXG4gICAgICBjMTogU2NhbGFyLCBhOiBULCBjMjogU2NhbGFyLCBiOiBUKSB7XG4gICAgbGV0IGNsZWFudXBCID0gZmFsc2U7XG4gICAgaWYgKCF0aGlzLmRvR1BVU2hhcGVzTWF0Y2goYSwgYikpIHtcbiAgICAgIGIgPSB0aGlzLnJlc2hhcGVUZXh0dXJlKGIsIGEuZ2V0VGV4dHVyZVNoYXBlUkMoKSk7XG4gICAgICBjbGVhbnVwQiA9IHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvZ3JhbSA9IHRoaXMuZ2V0QW5kU2F2ZVByb2dyYW0oXG4gICAgICAgIEFERF9TQ0FMRURfTUFUX1BST0csICgpID0+IGFkZHNjYWxlZG1hdF9ncHUuZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKSk7XG5cbiAgICBjb25zdCB0ZXh0dXJlU2hhcGVSQyA9IGEuZ2V0VGV4dHVyZVNoYXBlUkMoKTtcbiAgICBjb25zdCByZXN1bHRUZXh0dXJlID0gdGhpcy50ZXh0dXJlTWFuYWdlci5hY3F1aXJlVGV4dHVyZSh0ZXh0dXJlU2hhcGVSQyk7XG5cbiAgICBhZGRzY2FsZWRtYXRfZ3B1LmFkZFNjYWxlZE1hdHJpY2VzKFxuICAgICAgICB0aGlzLmdwZ3B1LCBwcm9ncmFtLCBhLmdldFRleHR1cmUoKSwgYi5nZXRUZXh0dXJlKCksIHRleHR1cmVTaGFwZVJDWzBdLFxuICAgICAgICB0ZXh0dXJlU2hhcGVSQ1sxXSwgYzEuZ2V0VGV4dHVyZSgpLCBjMi5nZXRUZXh0dXJlKCksIHJlc3VsdFRleHR1cmUpO1xuXG4gICAgaWYgKGNsZWFudXBCKSB7XG4gICAgICBiLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgLy8gQnJpbmcgdGhlIHJlc3VsdCBiYWNrIHRvIHRoZSBvcmlnaW5hbCBzaGFwZS5cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlPFQ+KGEuc2hhcGUsIHt0ZXh0dXJlOiByZXN1bHRUZXh0dXJlLCB0ZXh0dXJlU2hhcGVSQ30pO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNjYWxhclRpbWVzQXJyYXlJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4oYzogU2NhbGFyLCBhOiBUKTogVCB7XG4gICAgcmV0dXJuIHRoaXMuYWRkU3ViTXVsRGl2KFxuICAgICAgICBjLCBhLCBhLnNoYXBlLCBPcGVyYW5kVHlwZS5TQ0FMQVIsICcqJywgT3BlcmFuZFR5cGUuTUFUUklYKSBhcyBUO1xuICB9XG5cbiAgcHJvdGVjdGVkIG5lZ0ludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihhOiBUKTogVCB7XG4gICAgY29uc3QgcHJvZ3JhbSA9IHRoaXMuZ2V0QW5kU2F2ZVByb2dyYW0oXG4gICAgICAgIE5FR19QUk9HLCAoKSA9PiBuZWdfZ3B1LmdldEZyYWdtZW50U2hhZGVyU291cmNlKCkpO1xuXG4gICAgY29uc3QgdGV4dHVyZVNoYXBlUkMgPSBhLmdldFRleHR1cmVTaGFwZVJDKCk7XG4gICAgY29uc3QgcmVzdWx0VGV4dHVyZSA9IHRoaXMudGV4dHVyZU1hbmFnZXIuYWNxdWlyZVRleHR1cmUodGV4dHVyZVNoYXBlUkMpO1xuXG4gICAgbmVnX2dwdS5uZWcoXG4gICAgICAgIHRoaXMuZ3BncHUsIHByb2dyYW0sIGEuZ2V0VGV4dHVyZSgpLCB0ZXh0dXJlU2hhcGVSQ1swXSxcbiAgICAgICAgdGV4dHVyZVNoYXBlUkNbMV0sIHJlc3VsdFRleHR1cmUpO1xuXG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxUPihhLnNoYXBlLCB7dGV4dHVyZTogcmVzdWx0VGV4dHVyZSwgdGV4dHVyZVNoYXBlUkN9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVzaGFwZVRleHR1cmU8VCBleHRlbmRzIE5EQXJyYXk+KGE6IFQsIG5ld1RleHR1cmVTaGFwZTogW1xuICAgIG51bWJlciwgbnVtYmVyXG4gIF0pOiBUIHtcbiAgICBjb25zdCBhVGV4U2hhcGUgPSBhLmdldFRleHR1cmVTaGFwZVJDKCk7XG5cbiAgICBjb25zdCBwcm9ncmFtID0gdGhpcy5nZXRBbmRTYXZlUHJvZ3JhbShcbiAgICAgICAgUkVTSEFQRV9QUk9HLCAoKSA9PiByZXNoYXBlX2dwdS5nZXRGcmFnbWVudFNoYWRlclNvdXJjZSgpKTtcblxuICAgIGNvbnN0IHJlc3VsdFRleHR1cmUgPSB0aGlzLnRleHR1cmVNYW5hZ2VyLmFjcXVpcmVUZXh0dXJlKG5ld1RleHR1cmVTaGFwZSk7XG4gICAgcmVzaGFwZV9ncHUucmVzaGFwZShcbiAgICAgICAgdGhpcy5ncGdwdSwgcHJvZ3JhbSwgYS5nZXRUZXh0dXJlKCksIGFUZXhTaGFwZVswXSwgYVRleFNoYXBlWzFdLFxuICAgICAgICByZXN1bHRUZXh0dXJlLCBuZXdUZXh0dXJlU2hhcGVbMF0sIG5ld1RleHR1cmVTaGFwZVsxXSk7XG5cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlPFQ+KFxuICAgICAgICBhLnNoYXBlLCB7dGV4dHVyZTogcmVzdWx0VGV4dHVyZSwgdGV4dHVyZVNoYXBlUkM6IG5ld1RleHR1cmVTaGFwZX0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIG1hdE11bEludGVybmFsKFxuICAgICAgYTogQXJyYXkyRCwgYjogQXJyYXkyRCwgYU9yaWVudGF0aW9uOiBNYXRyaXhPcmllbnRhdGlvbixcbiAgICAgIGJPcmllbnRhdGlvbjogTWF0cml4T3JpZW50YXRpb24pOiBBcnJheTJEIHtcbiAgICBjb25zdCBzaGFyZWREaW0gPVxuICAgICAgICAoYU9yaWVudGF0aW9uID09PSBNYXRyaXhPcmllbnRhdGlvbi5SRUdVTEFSKSA/IGEuc2hhcGVbMV0gOiBhLnNoYXBlWzBdO1xuICAgIGNvbnN0IG91dGVyU2hhcGVBID1cbiAgICAgICAgKGFPcmllbnRhdGlvbiA9PT0gTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUikgPyBhLnNoYXBlWzBdIDogYS5zaGFwZVsxXTtcbiAgICBjb25zdCBvdXRlclNoYXBlQiA9XG4gICAgICAgIChiT3JpZW50YXRpb24gPT09IE1hdHJpeE9yaWVudGF0aW9uLlJFR1VMQVIpID8gYi5zaGFwZVsxXSA6IGIuc2hhcGVbMF07XG4gICAgY29uc3Qgb3V0U2hhcGU6IFtudW1iZXIsIG51bWJlcl0gPSBbb3V0ZXJTaGFwZUEsIG91dGVyU2hhcGVCXTtcbiAgICBjb25zdCBvdXRUZXhTaGFwZSA9XG4gICAgICAgIHdlYmdsX3V0aWwuZ2V0VGV4dHVyZVNoYXBlRnJvbUxvZ2ljYWxTaGFwZSh0aGlzLmdwZ3B1LmdsLCBvdXRTaGFwZSk7XG4gICAgY29uc3Qgb3V0VGV4dHVyZSA9IHRoaXMudGV4dHVyZU1hbmFnZXIuYWNxdWlyZVRleHR1cmUob3V0VGV4U2hhcGUpO1xuICAgIGNvbnN0IG91dCA9IG5ldyBBcnJheTJEKFxuICAgICAgICBvdXRTaGFwZSwge3RleHR1cmU6IG91dFRleHR1cmUsIHRleHR1cmVTaGFwZVJDOiBvdXRUZXhTaGFwZX0pO1xuXG4gICAgY29uc3Qga2V5ID0gc2hhZGVyX2NvbXBpbGVyLm1ha2VTaGFkZXJLZXkoW2EsIGJdLCBvdXQpO1xuICAgIGNvbnN0IHByb2dyYW0gPSB0aGlzLmdldEFuZFNhdmVQcm9ncmFtKFxuICAgICAgICBgJHtNQVRNVUxfUFJPR31fJHtrZXl9XyR7YU9yaWVudGF0aW9ufV8ke2JPcmllbnRhdGlvbn1gLFxuICAgICAgICAoKSA9PiBtdWxtYXRfZ3B1LmdldEZyYWdtZW50U2hhZGVyKFxuICAgICAgICAgICAgYSwgYiwgb3V0LCBhT3JpZW50YXRpb24sIGJPcmllbnRhdGlvbikpO1xuXG4gICAgbXVsbWF0X2dwdS5tdWx0aXBseU1hdHJpeChcbiAgICAgICAgdGhpcy5ncGdwdSwgcHJvZ3JhbSwgYS5nZXRUZXh0dXJlKCksIGIuZ2V0VGV4dHVyZSgpLCBvdXRUZXh0dXJlLFxuICAgICAgICBvdXRUZXhTaGFwZSk7XG5cbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgcHJvdGVjdGVkIGVsZW1lbnRXaXNlTXVsSW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KGE6IFQsIGI6IFQpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5hZGRTdWJNdWxEaXYoXG4gICAgICAgIGEsIGIsIGEuc2hhcGUsIE9wZXJhbmRUeXBlLk1BVFJJWCwgJyonLCBPcGVyYW5kVHlwZS5NQVRSSVgpIGFzIFQ7XG4gIH1cblxuICBwcm90ZWN0ZWQgZWxlbWVudFdpc2VNdWxCcm9hZGNhc3RJbnRlcm5hbChhOiBBcnJheTJELCBiOiBBcnJheTJEKTogQXJyYXkyRCB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgeWV0IGltcGxlbWVudGVkIScpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGJhdGNoTm9ybWFsaXphdGlvbjNESW50ZXJuYWwoXG4gICAgICB4OiBBcnJheTNELCBtZWFuOiBBcnJheTNEfEFycmF5MUQsIHZhcmlhbmNlOiBBcnJheTNEfEFycmF5MUQsXG4gICAgICB2YXJpYW5jZUVwc2lsb246IG51bWJlciwgc2NhbGU/OiBBcnJheTNEfEFycmF5MUQsXG4gICAgICBvZmZzZXQ/OiBBcnJheTNEfEFycmF5MUQpOiBBcnJheTNEIHtcbiAgICBjb25zdCB4VGV4U2hhcGUgPSB4LmdldFRleHR1cmVTaGFwZVJDKCk7XG5cbiAgICBsZXQgY2xlYW51cE1lYW4gPSBmYWxzZTtcbiAgICBjb25zdCBwcmVmZXJyZWRNZWFuVGV4U2hhcGU6IFtudW1iZXIsIG51bWJlcl0gPVxuICAgICAgICBtZWFuLnJhbmsgPT09IDEgPyBbMSwgbWVhbi5zaXplXSA6IHhUZXhTaGFwZTtcbiAgICBsZXQgbWVhblRleFNoYXBlID0gbWVhbi5nZXRUZXh0dXJlU2hhcGVSQyhwcmVmZXJyZWRNZWFuVGV4U2hhcGUpO1xuICAgIGlmICghdXRpbC5hcnJheXNFcXVhbChtZWFuVGV4U2hhcGUsIHByZWZlcnJlZE1lYW5UZXhTaGFwZSkpIHtcbiAgICAgIG1lYW4gPSB0aGlzLnJlc2hhcGVUZXh0dXJlKG1lYW4sIHByZWZlcnJlZE1lYW5UZXhTaGFwZSk7XG4gICAgICBtZWFuVGV4U2hhcGUgPSBwcmVmZXJyZWRNZWFuVGV4U2hhcGU7XG4gICAgICBjbGVhbnVwTWVhbiA9IHRydWU7XG4gICAgfVxuXG4gICAgbGV0IGNsZWFudXBWYXJpYW5jZSA9IGZhbHNlO1xuICAgIGNvbnN0IHByZWZlcnJlZFZhcmlhbmNlVGV4U2hhcGU6IFtudW1iZXIsIG51bWJlcl0gPVxuICAgICAgICB2YXJpYW5jZS5yYW5rID09PSAxID8gWzEsIHZhcmlhbmNlLnNpemVdIDogeFRleFNoYXBlO1xuICAgIGxldCB2YXJpYW5jZVRleFNoYXBlID0gdmFyaWFuY2UuZ2V0VGV4dHVyZVNoYXBlUkMocHJlZmVycmVkTWVhblRleFNoYXBlKTtcbiAgICBpZiAoIXV0aWwuYXJyYXlzRXF1YWwodmFyaWFuY2VUZXhTaGFwZSwgcHJlZmVycmVkVmFyaWFuY2VUZXhTaGFwZSkpIHtcbiAgICAgIHZhcmlhbmNlID0gdGhpcy5yZXNoYXBlVGV4dHVyZSh2YXJpYW5jZSwgcHJlZmVycmVkVmFyaWFuY2VUZXhTaGFwZSk7XG4gICAgICB2YXJpYW5jZVRleFNoYXBlID0gcHJlZmVycmVkVmFyaWFuY2VUZXhTaGFwZTtcbiAgICAgIGNsZWFudXBWYXJpYW5jZSA9IHRydWU7XG4gICAgfVxuXG4gICAgbGV0IHNjYWxlVGV4U2hhcGU6IFtudW1iZXIsIG51bWJlcl18bnVsbCA9IG51bGw7XG4gICAgbGV0IGNsZWFudXBTY2FsZSA9IGZhbHNlO1xuICAgIGlmIChzY2FsZSAhPSBudWxsKSB7XG4gICAgICBjb25zdCBwcmVmZXJyZWRTY2FsZVRleFNoYXBlOiBbbnVtYmVyLCBudW1iZXJdID1cbiAgICAgICAgICBzY2FsZS5yYW5rID09PSAxID8gWzEsIHNjYWxlLnNpemVdIDogeFRleFNoYXBlO1xuXG4gICAgICBzY2FsZVRleFNoYXBlID0gc2NhbGUuZ2V0VGV4dHVyZVNoYXBlUkMocHJlZmVycmVkU2NhbGVUZXhTaGFwZSk7XG4gICAgICBpZiAoIXV0aWwuYXJyYXlzRXF1YWwoc2NhbGVUZXhTaGFwZSwgcHJlZmVycmVkU2NhbGVUZXhTaGFwZSkpIHtcbiAgICAgICAgc2NhbGUgPSB0aGlzLnJlc2hhcGVUZXh0dXJlKHNjYWxlLCBwcmVmZXJyZWRTY2FsZVRleFNoYXBlKTtcbiAgICAgICAgc2NhbGVUZXhTaGFwZSA9IHByZWZlcnJlZFNjYWxlVGV4U2hhcGU7XG4gICAgICAgIGNsZWFudXBTY2FsZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IG9mZnNldFRleFNoYXBlOiBbbnVtYmVyLCBudW1iZXJdfG51bGwgPSBudWxsO1xuICAgIGxldCBjbGVhbnVwT2Zmc2V0ID0gZmFsc2U7XG4gICAgaWYgKG9mZnNldCAhPSBudWxsKSB7XG4gICAgICBjb25zdCBwcmVmZXJyZWRPZmZzZXRUZXhTaGFwZTogW251bWJlciwgbnVtYmVyXSA9XG4gICAgICAgICAgb2Zmc2V0LnJhbmsgPT09IDEgPyBbMSwgb2Zmc2V0LnNpemVdIDogeFRleFNoYXBlO1xuXG4gICAgICBvZmZzZXRUZXhTaGFwZSA9IG9mZnNldC5nZXRUZXh0dXJlU2hhcGVSQyhwcmVmZXJyZWRPZmZzZXRUZXhTaGFwZSk7XG4gICAgICBpZiAoIXV0aWwuYXJyYXlzRXF1YWwob2Zmc2V0VGV4U2hhcGUsIHByZWZlcnJlZE9mZnNldFRleFNoYXBlKSkge1xuICAgICAgICBvZmZzZXQgPSB0aGlzLnJlc2hhcGVUZXh0dXJlKG9mZnNldCwgcHJlZmVycmVkT2Zmc2V0VGV4U2hhcGUpO1xuICAgICAgICBvZmZzZXRUZXhTaGFwZSA9IHByZWZlcnJlZE9mZnNldFRleFNoYXBlO1xuICAgICAgICBjbGVhbnVwT2Zmc2V0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHRUZXhTaGFwZTogW251bWJlciwgbnVtYmVyXSA9IHguZ2V0VGV4dHVyZVNoYXBlUkMoKTtcblxuICAgIGNvbnN0IHByb2dyYW0gPSB0aGlzLmdldEFuZFNhdmVQcm9ncmFtKFxuICAgICAgICBgJHtCQVRDSE5PUk1fUFJPR31fJHt4VGV4U2hhcGV9XyR7bWVhblRleFNoYXBlfV8ke3ZhcmlhbmNlVGV4U2hhcGV9X2AgK1xuICAgICAgICAgICAgYCR7c2NhbGVUZXhTaGFwZSF9XyR7b2Zmc2V0VGV4U2hhcGUhfV8ke3ZhcmlhbmNlRXBzaWxvbn1gLFxuICAgICAgICAoKSA9PiBiYXRjaG5vcm1fZ3B1LmdldEZyYWdtZW50U2hhZGVyU291cmNlKFxuICAgICAgICAgICAgeFRleFNoYXBlLCBtZWFuVGV4U2hhcGUsIHZhcmlhbmNlVGV4U2hhcGUsIG9mZnNldFRleFNoYXBlLFxuICAgICAgICAgICAgc2NhbGVUZXhTaGFwZSwgdmFyaWFuY2VFcHNpbG9uKSk7XG5cbiAgICBjb25zdCByZXN1bHRUZXh0dXJlID0gdGhpcy50ZXh0dXJlTWFuYWdlci5hY3F1aXJlVGV4dHVyZShyZXN1bHRUZXhTaGFwZSk7XG5cbiAgICBiYXRjaG5vcm1fZ3B1LmJhdGNoTm9ybWFsaXphdGlvbihcbiAgICAgICAgdGhpcy5ncGdwdSwgcHJvZ3JhbSwgeC5nZXRUZXh0dXJlKCksIHhUZXhTaGFwZSwgbWVhbi5nZXRUZXh0dXJlKCksXG4gICAgICAgIG1lYW5UZXhTaGFwZSwgdmFyaWFuY2UuZ2V0VGV4dHVyZSgpLCB2YXJpYW5jZVRleFNoYXBlLFxuICAgICAgICBvZmZzZXQgIT0gbnVsbCA/IG9mZnNldC5nZXRUZXh0dXJlKCkgOiBudWxsLFxuICAgICAgICBvZmZzZXQgIT0gbnVsbCA/IG9mZnNldFRleFNoYXBlIDogbnVsbCxcbiAgICAgICAgc2NhbGUgIT0gbnVsbCA/IHNjYWxlLmdldFRleHR1cmUoKSA6IG51bGwsXG4gICAgICAgIHNjYWxlICE9IG51bGwgPyBzY2FsZVRleFNoYXBlIDogbnVsbCwgcmVzdWx0VGV4dHVyZSwgcmVzdWx0VGV4U2hhcGUpO1xuXG4gICAgaWYgKGNsZWFudXBNZWFuKSB7XG4gICAgICBtZWFuLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgaWYgKGNsZWFudXBWYXJpYW5jZSkge1xuICAgICAgdmFyaWFuY2UuZGlzcG9zZSgpO1xuICAgIH1cbiAgICBpZiAoY2xlYW51cFNjYWxlKSB7XG4gICAgICBzY2FsZSEuZGlzcG9zZSgpO1xuICAgIH1cbiAgICBpZiAoY2xlYW51cE9mZnNldCkge1xuICAgICAgb2Zmc2V0IS5kaXNwb3NlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxBcnJheTNEPihcbiAgICAgICAgeC5zaGFwZSwge3RleHR1cmU6IHJlc3VsdFRleHR1cmUsIHRleHR1cmVTaGFwZVJDOiByZXN1bHRUZXhTaGFwZX0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIHN3aXRjaERpbUludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihhOiBULCBuZXdEaW06IG51bWJlcltdKTogVCB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgeWV0IGltcGxlbWVudGVkIScpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHN1bUludGVybmFsKG5kYXJyYXk6IE5EQXJyYXkpOiBTY2FsYXIge1xuICAgIGNvbnN0IHRleHR1cmVTaGFwZVJDID0gbmRhcnJheS5nZXRUZXh0dXJlU2hhcGVSQygpO1xuICAgIGNvbnN0IFtudW1Sb3dzLCBudW1Db2x1bW5zXSA9IHRleHR1cmVTaGFwZVJDO1xuXG4gICAgY29uc3QgcHJvZ3JhbSA9IHRoaXMuZ2V0QW5kU2F2ZVByb2dyYW0oXG4gICAgICAgIGAke1NVTV9QUk9HfV8ke251bVJvd3N9XyR7bnVtQ29sdW1uc31gLFxuICAgICAgICAoKSA9PiByZWR1Y2VzdW1fZ3B1LmdldEZyYWdtZW50U2hhZGVyU291cmNlKG51bVJvd3MsIG51bUNvbHVtbnMpKTtcblxuICAgIGNvbnN0IHJlc3VsdFRleHR1cmUgPSB0aGlzLnRleHR1cmVNYW5hZ2VyLmFjcXVpcmVUZXh0dXJlKFsxLCAxXSk7XG5cbiAgICByZWR1Y2VzdW1fZ3B1LnJlZHVjZVN1bShcbiAgICAgICAgdGhpcy5ncGdwdSwgcHJvZ3JhbSwgbmRhcnJheS5nZXRUZXh0dXJlKCksIG51bVJvd3MsIG51bUNvbHVtbnMsXG4gICAgICAgIHJlc3VsdFRleHR1cmUpO1xuXG4gICAgcmV0dXJuIG5ldyBTY2FsYXIoe3RleHR1cmU6IHJlc3VsdFRleHR1cmV9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhcmdNaW5JbnRlcm5hbChuZGFycmF5OiBOREFycmF5KTogU2NhbGFyIHtcbiAgICBjb25zdCB0ZXh0dXJlU2hhcGVSQyA9IG5kYXJyYXkuZ2V0VGV4dHVyZVNoYXBlUkMoKTtcbiAgICBjb25zdCBbbnVtUm93cywgbnVtQ29sdW1uc10gPSB0ZXh0dXJlU2hhcGVSQztcblxuICAgIGNvbnN0IHByb2dyYW0gPSB0aGlzLmdldEFuZFNhdmVQcm9ncmFtKFxuICAgICAgICBgJHtBUkdNSU5fUFJPR31fJHtudW1Sb3dzfV8ke251bUNvbHVtbnN9YCxcbiAgICAgICAgKCkgPT4gYXJnbWlubWF4X2dwdS5nZXRBcmdNaW5GcmFnbWVudFNoYWRlclNvdXJjZShudW1Sb3dzLCBudW1Db2x1bW5zKSk7XG5cbiAgICBjb25zdCByZXN1bHRUZXh0dXJlID0gdGhpcy50ZXh0dXJlTWFuYWdlci5hY3F1aXJlVGV4dHVyZShbMSwgMV0pO1xuXG4gICAgYXJnbWlubWF4X2dwdS5hcmdNaW5NYXgoXG4gICAgICAgIHRoaXMuZ3BncHUsIHByb2dyYW0sIG5kYXJyYXkuZ2V0VGV4dHVyZSgpLCBudW1Sb3dzLCBudW1Db2x1bW5zLFxuICAgICAgICByZXN1bHRUZXh0dXJlKTtcblxuICAgIHJldHVybiBuZXcgU2NhbGFyKHt0ZXh0dXJlOiByZXN1bHRUZXh0dXJlfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXJnTWF4SW50ZXJuYWwobmRhcnJheTogTkRBcnJheSk6IFNjYWxhciB7XG4gICAgY29uc3QgdGV4dHVyZVNoYXBlUkMgPSBuZGFycmF5LmdldFRleHR1cmVTaGFwZVJDKCk7XG4gICAgY29uc3QgW251bVJvd3MsIG51bUNvbHVtbnNdID0gdGV4dHVyZVNoYXBlUkM7XG5cbiAgICBjb25zdCBwcm9ncmFtID0gdGhpcy5nZXRBbmRTYXZlUHJvZ3JhbShcbiAgICAgICAgYCR7QVJHTUFYX1BST0d9XyR7bnVtUm93c31fJHtudW1Db2x1bW5zfWAsXG4gICAgICAgICgpID0+IGFyZ21pbm1heF9ncHUuZ2V0QXJnTWF4RnJhZ21lbnRTaGFkZXJTb3VyY2UobnVtUm93cywgbnVtQ29sdW1ucykpO1xuXG4gICAgY29uc3QgcmVzdWx0VGV4dHVyZSA9IHRoaXMudGV4dHVyZU1hbmFnZXIuYWNxdWlyZVRleHR1cmUoWzEsIDFdKTtcblxuICAgIGFyZ21pbm1heF9ncHUuYXJnTWluTWF4KFxuICAgICAgICB0aGlzLmdwZ3B1LCBwcm9ncmFtLCBuZGFycmF5LmdldFRleHR1cmUoKSwgbnVtUm93cywgbnVtQ29sdW1ucyxcbiAgICAgICAgcmVzdWx0VGV4dHVyZSk7XG5cbiAgICByZXR1cm4gbmV3IFNjYWxhcih7dGV4dHVyZTogcmVzdWx0VGV4dHVyZX0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGFyZ01heEVxdWFsc0ludGVybmFsKHgxOiBOREFycmF5LCB4MjogTkRBcnJheSk6IFNjYWxhciB7XG4gICAgLy8gSWYgdGhlIHRleHR1cmUgc2hhcGVzIGRvZXNuJ3QgbWF0Y2gsIGRvIGEgcGh5c2ljYWwgcmVzaGFwZSBzbyB0aGV5IGRvLlxuICAgIGNvbnN0IGFjdHVhbFgxVGV4U2hhcGUgPSB4MS5nZXRUZXh0dXJlU2hhcGVSQygpO1xuICAgIGNvbnN0IGFjdHVhbFgyVGV4U2hhcGUgPSB4Mi5nZXRUZXh0dXJlU2hhcGVSQygpO1xuICAgIGxldCBjbGVhbnVwWDIgPSBmYWxzZTtcbiAgICBpZiAoIXV0aWwuYXJyYXlzRXF1YWwoYWN0dWFsWDFUZXhTaGFwZSwgYWN0dWFsWDJUZXhTaGFwZSkpIHtcbiAgICAgIHgyID0gdGhpcy5yZXNoYXBlVGV4dHVyZSh4MiwgYWN0dWFsWDFUZXhTaGFwZSk7XG4gICAgICBjbGVhbnVwWDIgPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHRleHR1cmVTaGFwZVJDID0geDEuZ2V0VGV4dHVyZVNoYXBlUkMoKTtcbiAgICBjb25zdCBbbnVtUm93cywgbnVtQ29sdW1uc10gPSB0ZXh0dXJlU2hhcGVSQztcblxuICAgIGNvbnN0IHByb2dyYW0gPSB0aGlzLmdldEFuZFNhdmVQcm9ncmFtKFxuICAgICAgICBgJHtBUkdNQVhfRVFVQUxTX1BST0d9XyR7bnVtUm93c31fJHtudW1Db2x1bW5zfWAsXG4gICAgICAgICgpID0+IGFyZ21heGVxdWFsc19ncHUuZ2V0QXJnTWF4RXF1YWxzRnJhZ21lbnRTaGFkZXJTb3VyY2UoXG4gICAgICAgICAgICBudW1Sb3dzLCBudW1Db2x1bW5zKSk7XG5cbiAgICBjb25zdCByZXN1bHRUZXh0dXJlID0gdGhpcy50ZXh0dXJlTWFuYWdlci5hY3F1aXJlVGV4dHVyZShbMSwgMV0pO1xuXG4gICAgYXJnbWF4ZXF1YWxzX2dwdS5hcmdNYXhFcXVhbHMoXG4gICAgICAgIHRoaXMuZ3BncHUsIHByb2dyYW0sIHgxLmdldFRleHR1cmUoKSwgeDIuZ2V0VGV4dHVyZSgpLCBudW1Sb3dzLFxuICAgICAgICBudW1Db2x1bW5zLCByZXN1bHRUZXh0dXJlKTtcblxuICAgIGlmIChjbGVhbnVwWDIpIHtcbiAgICAgIHgyLmRpc3Bvc2UoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFNjYWxhcih7dGV4dHVyZTogcmVzdWx0VGV4dHVyZX0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIHRvcEtJbnRlcm5hbChuZGFycmF5OiBOREFycmF5LCBrOiBudW1iZXIpOlxuICAgICAge3ZhbHVlczogQXJyYXkxRCwgaW5kaWNlczogQXJyYXkxRH0ge1xuICAgIHRocm93IG5ldyBFcnJvcigndG9wSyBHUFUgbm90IHlldCBpbXBsZW1lbnRlZCEnKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBtaW5JbnRlcm5hbChuZGFycmF5OiBOREFycmF5KTogU2NhbGFyIHtcbiAgICBjb25zdCB0ZXh0dXJlU2hhcGVSQyA9IG5kYXJyYXkuZ2V0VGV4dHVyZVNoYXBlUkMoKTtcbiAgICBjb25zdCBbbnVtUm93cywgbnVtQ29sdW1uc10gPSB0ZXh0dXJlU2hhcGVSQztcblxuICAgIGNvbnN0IHByb2dyYW0gPSB0aGlzLmdldEFuZFNhdmVQcm9ncmFtKFxuICAgICAgICBgJHtNSU5fUFJPR31fJHtudW1Sb3dzfV8ke251bUNvbHVtbnN9YCxcbiAgICAgICAgKCkgPT4gbWlubWF4X2dwdS5nZXRNaW5GcmFnbWVudFNoYWRlclNvdXJjZShudW1Sb3dzLCBudW1Db2x1bW5zKSk7XG5cbiAgICBjb25zdCByZXN1bHRUZXh0dXJlID0gdGhpcy50ZXh0dXJlTWFuYWdlci5hY3F1aXJlVGV4dHVyZShbMSwgMV0pO1xuXG4gICAgbWlubWF4X2dwdS5taW5NYXgoXG4gICAgICAgIHRoaXMuZ3BncHUsIHByb2dyYW0sIG5kYXJyYXkuZ2V0VGV4dHVyZSgpLCBudW1Sb3dzLCBudW1Db2x1bW5zLFxuICAgICAgICByZXN1bHRUZXh0dXJlKTtcblxuICAgIHJldHVybiBuZXcgU2NhbGFyKHt0ZXh0dXJlOiByZXN1bHRUZXh0dXJlfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgbWF4SW50ZXJuYWwobmRhcnJheTogTkRBcnJheSk6IFNjYWxhciB7XG4gICAgY29uc3QgdGV4dHVyZVNoYXBlUkMgPSBuZGFycmF5LmdldFRleHR1cmVTaGFwZVJDKCk7XG4gICAgY29uc3QgW251bVJvd3MsIG51bUNvbHVtbnNdID0gdGV4dHVyZVNoYXBlUkM7XG5cbiAgICBjb25zdCBwcm9ncmFtID0gdGhpcy5nZXRBbmRTYXZlUHJvZ3JhbShcbiAgICAgICAgYCR7TUFYX1BST0d9XyR7bnVtUm93c31fJHtudW1Db2x1bW5zfWAsXG4gICAgICAgICgpID0+IG1pbm1heF9ncHUuZ2V0TWF4RnJhZ21lbnRTaGFkZXJTb3VyY2UobnVtUm93cywgbnVtQ29sdW1ucykpO1xuXG4gICAgY29uc3QgcmVzdWx0VGV4dHVyZSA9IHRoaXMudGV4dHVyZU1hbmFnZXIuYWNxdWlyZVRleHR1cmUoWzEsIDFdKTtcblxuICAgIG1pbm1heF9ncHUubWluTWF4KFxuICAgICAgICB0aGlzLmdwZ3B1LCBwcm9ncmFtLCBuZGFycmF5LmdldFRleHR1cmUoKSwgbnVtUm93cywgbnVtQ29sdW1ucyxcbiAgICAgICAgcmVzdWx0VGV4dHVyZSk7XG5cbiAgICByZXR1cm4gbmV3IFNjYWxhcih7dGV4dHVyZTogcmVzdWx0VGV4dHVyZX0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGRpdmlkZUludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihhOiBULCBiOiBUKTogVCB7XG4gICAgcmV0dXJuIHRoaXMuYWRkU3ViTXVsRGl2KFxuICAgICAgICBhLCBiLCBhLnNoYXBlLCBPcGVyYW5kVHlwZS5NQVRSSVgsICcvJywgT3BlcmFuZFR5cGUuTUFUUklYKSBhcyBUO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNjYWxhckRpdmlkZWRCeUFycmF5SW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KGM6IFNjYWxhciwgYTogVCk6XG4gICAgICBUIHtcbiAgICByZXR1cm4gdGhpcy5hZGRTdWJNdWxEaXYoXG4gICAgICAgICAgICAgICBjLCBhLCBhLnNoYXBlLCBPcGVyYW5kVHlwZS5TQ0FMQVIsICcvJywgT3BlcmFuZFR5cGUuTUFUUklYKSBhcyBUO1xuICB9XG5cbiAgcHJvdGVjdGVkIGFycmF5RGl2aWRlZEJ5U2NhbGFySW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KGE6IFQsIGM6IFNjYWxhcik6XG4gICAgICBUIHtcbiAgICByZXR1cm4gdGhpcy5hZGRTdWJNdWxEaXYoXG4gICAgICAgICAgICAgICBhLCBjLCBhLnNoYXBlLCBPcGVyYW5kVHlwZS5NQVRSSVgsICcvJywgT3BlcmFuZFR5cGUuU0NBTEFSKSBhcyBUO1xuICB9XG5cbiAgcHJvdGVjdGVkIGFkZEludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihhOiBULCBiOiBUKTogVCB7XG4gICAgcmV0dXJuIHRoaXMuYWRkU3ViTXVsRGl2KFxuICAgICAgICBhLCBiLCBhLnNoYXBlLCBPcGVyYW5kVHlwZS5NQVRSSVgsICcrJywgT3BlcmFuZFR5cGUuTUFUUklYKSBhcyBUO1xuICB9XG5cbiAgcHJvdGVjdGVkIHN1YkludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihhOiBULCBiOiBUKTogVCB7XG4gICAgcmV0dXJuIHRoaXMuYWRkU3ViTXVsRGl2KFxuICAgICAgICBhLCBiLCBhLnNoYXBlLCBPcGVyYW5kVHlwZS5NQVRSSVgsICctJywgT3BlcmFuZFR5cGUuTUFUUklYKSBhcyBUO1xuICB9XG5cbiAgcHJvdGVjdGVkIGxvZ1N1bUV4cEludGVybmFsKG5kYXJyYXk6IE5EQXJyYXkpOiBTY2FsYXIge1xuICAgIGNvbnN0IFtudW1Sb3dzLCBudW1Db2x1bW5zXSA9IG5kYXJyYXkuZ2V0VGV4dHVyZVNoYXBlUkMoKTtcblxuICAgIGNvbnN0IHByb2dyYW0gPSB0aGlzLmdldEFuZFNhdmVQcm9ncmFtKFxuICAgICAgICBgJHtMT0dTVU1FWFBfUFJPR31fJHtudW1Sb3dzfV8ke251bUNvbHVtbnN9YCxcbiAgICAgICAgKCkgPT4gbG9nc3VtZXhwX2dwdS5nZXRGcmFnbWVudFNoYWRlclNvdXJjZShudW1Sb3dzLCBudW1Db2x1bW5zKSk7XG5cbiAgICBjb25zdCByZXN1bHQgPVxuICAgICAgICBuZXcgU2NhbGFyKHt0ZXh0dXJlOiB0aGlzLnRleHR1cmVNYW5hZ2VyLmFjcXVpcmVUZXh0dXJlKFsxLCAxXSl9KTtcblxuICAgIHJlZHVjZXN1bV9ncHUucmVkdWNlU3VtKFxuICAgICAgICB0aGlzLmdwZ3B1LCBwcm9ncmFtLCBuZGFycmF5LmdldFRleHR1cmUoKSwgbnVtUm93cywgbnVtQ29sdW1ucyxcbiAgICAgICAgcmVzdWx0LmdldFRleHR1cmUoKSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHJvdGVjdGVkIGV4cEludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihuZGFycmF5OiBUKTogVCB7XG4gICAgY29uc3QgcHJvZ3JhbSA9IHRoaXMuZ2V0QW5kU2F2ZVByb2dyYW0oXG4gICAgICAgIEVYUF9QUk9HLCAoKSA9PiBleHBfZ3B1LmdldEZyYWdtZW50U2hhZGVyU291cmNlKCkpO1xuXG4gICAgY29uc3QgdGV4dHVyZVNoYXBlUkMgPSBuZGFycmF5LmdldFRleHR1cmVTaGFwZVJDKCk7XG4gICAgY29uc3QgcmVzdWx0VGV4dHVyZSA9IHRoaXMudGV4dHVyZU1hbmFnZXIuYWNxdWlyZVRleHR1cmUodGV4dHVyZVNoYXBlUkMpO1xuXG4gICAgZXhwX2dwdS5leHAoXG4gICAgICAgIHRoaXMuZ3BncHUsIHByb2dyYW0sIG5kYXJyYXkuZ2V0VGV4dHVyZSgpLCB0ZXh0dXJlU2hhcGVSQ1swXSxcbiAgICAgICAgdGV4dHVyZVNoYXBlUkNbMV0sIHJlc3VsdFRleHR1cmUpO1xuXG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxUPihcbiAgICAgICAgbmRhcnJheS5zaGFwZSwge3RleHR1cmU6IHJlc3VsdFRleHR1cmUsIHRleHR1cmVTaGFwZVJDfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgbG9nSW50ZXJuYWw8VCBleHRlbmRzIE5EQXJyYXk+KG5kYXJyYXk6IFQpOiBUIHtcbiAgICBjb25zdCBwcm9ncmFtID0gdGhpcy5nZXRBbmRTYXZlUHJvZ3JhbShcbiAgICAgICAgTE9HX1BST0csICgpID0+IGxvZ19ncHUuZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKSk7XG5cbiAgICBjb25zdCB0ZXh0dXJlU2hhcGVSQyA9IG5kYXJyYXkuZ2V0VGV4dHVyZVNoYXBlUkMoKTtcbiAgICBjb25zdCByZXN1bHRUZXh0dXJlID0gdGhpcy50ZXh0dXJlTWFuYWdlci5hY3F1aXJlVGV4dHVyZSh0ZXh0dXJlU2hhcGVSQyk7XG4gICAgbG9nX2dwdS5sb2coXG4gICAgICAgIHRoaXMuZ3BncHUsIHByb2dyYW0sIG5kYXJyYXkuZ2V0VGV4dHVyZSgpLCB0ZXh0dXJlU2hhcGVSQ1swXSxcbiAgICAgICAgdGV4dHVyZVNoYXBlUkNbMV0sIHJlc3VsdFRleHR1cmUpO1xuXG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxUPihcbiAgICAgICAgbmRhcnJheS5zaGFwZSwge3RleHR1cmU6IHJlc3VsdFRleHR1cmUsIHRleHR1cmVTaGFwZVJDfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVsdUludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihuZGFycmF5OiBUKTogVCB7XG4gICAgY29uc3QgcHJvZ3JhbSA9IHRoaXMuZ2V0QW5kU2F2ZVByb2dyYW0oXG4gICAgICAgIFJFTFVfUFJPRywgKCkgPT4gcmVsdV9ncHUuZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKSk7XG5cbiAgICBjb25zdCB0ZXh0dXJlU2hhcGVSQyA9IG5kYXJyYXkuZ2V0VGV4dHVyZVNoYXBlUkMoKTtcbiAgICBjb25zdCByZXN1bHRUZXh0dXJlID0gdGhpcy50ZXh0dXJlTWFuYWdlci5hY3F1aXJlVGV4dHVyZSh0ZXh0dXJlU2hhcGVSQyk7XG5cbiAgICByZWx1X2dwdS5yZWx1KFxuICAgICAgICB0aGlzLmdwZ3B1LCBwcm9ncmFtLCBuZGFycmF5LmdldFRleHR1cmUoKSwgdGV4dHVyZVNoYXBlUkNbMF0sXG4gICAgICAgIHRleHR1cmVTaGFwZVJDWzFdLCByZXN1bHRUZXh0dXJlKTtcblxuICAgIHJldHVybiBOREFycmF5Lm1ha2U8VD4oXG4gICAgICAgIG5kYXJyYXkuc2hhcGUsIHt0ZXh0dXJlOiByZXN1bHRUZXh0dXJlLCB0ZXh0dXJlU2hhcGVSQ30pO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNpZ21vaWRJbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4obmRhcnJheTogVCk6IFQge1xuICAgIGNvbnN0IHByb2dyYW0gPSB0aGlzLmdldEFuZFNhdmVQcm9ncmFtKFxuICAgICAgICBTSUdNT0lEX1BST0csICgpID0+IHNpZ21vaWRfZ3B1LmdldFNpZ21vaWRGcmFnbWVudFNoYWRlclNvdXJjZSgpKTtcblxuICAgIGNvbnN0IHRleHR1cmVTaGFwZVJDID0gbmRhcnJheS5nZXRUZXh0dXJlU2hhcGVSQygpO1xuICAgIGNvbnN0IHJlc3VsdFRleHR1cmUgPSB0aGlzLnRleHR1cmVNYW5hZ2VyLmFjcXVpcmVUZXh0dXJlKHRleHR1cmVTaGFwZVJDKTtcblxuICAgIHNpZ21vaWRfZ3B1LnNpZ21vaWQoXG4gICAgICAgIHRoaXMuZ3BncHUsIHByb2dyYW0sIG5kYXJyYXkuZ2V0VGV4dHVyZSgpLCB0ZXh0dXJlU2hhcGVSQ1swXSxcbiAgICAgICAgdGV4dHVyZVNoYXBlUkNbMV0sIHJlc3VsdFRleHR1cmUpO1xuXG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxUPihcbiAgICAgICAgbmRhcnJheS5zaGFwZSwge3RleHR1cmU6IHJlc3VsdFRleHR1cmUsIHRleHR1cmVTaGFwZVJDfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgdGFuaEludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihuZGFycmF5OiBUKTogVCB7XG4gICAgY29uc3QgcHJvZ3JhbSA9IHRoaXMuZ2V0QW5kU2F2ZVByb2dyYW0oXG4gICAgICAgIFRBTkhfUFJPRywgKCkgPT4gdHJpZ19ncHUuZ2V0VGFuaEZyYWdtZW50U2hhZGVyU291cmNlKCkpO1xuXG4gICAgY29uc3QgdGV4dHVyZVNoYXBlUkMgPSBuZGFycmF5LmdldFRleHR1cmVTaGFwZVJDKCk7XG4gICAgY29uc3QgcmVzdWx0VGV4dHVyZSA9IHRoaXMudGV4dHVyZU1hbmFnZXIuYWNxdWlyZVRleHR1cmUodGV4dHVyZVNoYXBlUkMpO1xuXG4gICAgdHJpZ19ncHUudGFuaChcbiAgICAgICAgdGhpcy5ncGdwdSwgcHJvZ3JhbSwgbmRhcnJheS5nZXRUZXh0dXJlKCksIHRleHR1cmVTaGFwZVJDWzBdLFxuICAgICAgICB0ZXh0dXJlU2hhcGVSQ1sxXSwgcmVzdWx0VGV4dHVyZSk7XG5cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlPFQ+KFxuICAgICAgICBuZGFycmF5LnNoYXBlLCB7dGV4dHVyZTogcmVzdWx0VGV4dHVyZSwgdGV4dHVyZVNoYXBlUkN9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzaW5JbnRlcm5hbDxUIGV4dGVuZHMgTkRBcnJheT4obmRhcnJheTogVCk6IFQge1xuICAgIGNvbnN0IHByb2dyYW0gPSB0aGlzLmdldEFuZFNhdmVQcm9ncmFtKFxuICAgICAgICBTSU5fUFJPRywgKCkgPT4gdHJpZ19ncHUuZ2V0U2luRnJhZ21lbnRTaGFkZXJTb3VyY2UoKSk7XG5cbiAgICBjb25zdCB0ZXh0dXJlU2hhcGVSQyA9IG5kYXJyYXkuZ2V0VGV4dHVyZVNoYXBlUkMoKTtcbiAgICBjb25zdCByZXN1bHRUZXh0dXJlID0gdGhpcy50ZXh0dXJlTWFuYWdlci5hY3F1aXJlVGV4dHVyZSh0ZXh0dXJlU2hhcGVSQyk7XG5cbiAgICB0cmlnX2dwdS5zaW4oXG4gICAgICAgIHRoaXMuZ3BncHUsIHByb2dyYW0sIG5kYXJyYXkuZ2V0VGV4dHVyZSgpLCB0ZXh0dXJlU2hhcGVSQ1swXSxcbiAgICAgICAgdGV4dHVyZVNoYXBlUkNbMV0sIHJlc3VsdFRleHR1cmUpO1xuXG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxUPihcbiAgICAgICAgbmRhcnJheS5zaGFwZSwge3RleHR1cmU6IHJlc3VsdFRleHR1cmUsIHRleHR1cmVTaGFwZVJDfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgc3RlcEludGVybmFsPFQgZXh0ZW5kcyBOREFycmF5PihuZGFycmF5OiBUKTogVCB7XG4gICAgY29uc3QgcHJvZ3JhbSA9IHRoaXMuZ2V0QW5kU2F2ZVByb2dyYW0oXG4gICAgICAgIFNURVBfUFJPRywgKCkgPT4gc3RlcF9ncHUuZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKSk7XG5cbiAgICBjb25zdCB0ZXh0dXJlU2hhcGVSQyA9IG5kYXJyYXkuZ2V0VGV4dHVyZVNoYXBlUkMoKTtcbiAgICBjb25zdCByZXN1bHRUZXh0dXJlID0gdGhpcy50ZXh0dXJlTWFuYWdlci5hY3F1aXJlVGV4dHVyZSh0ZXh0dXJlU2hhcGVSQyk7XG5cbiAgICBzdGVwX2dwdS5zdGVwKFxuICAgICAgICB0aGlzLmdwZ3B1LCBwcm9ncmFtLCBuZGFycmF5LmdldFRleHR1cmUoKSwgdGV4dHVyZVNoYXBlUkNbMF0sXG4gICAgICAgIHRleHR1cmVTaGFwZVJDWzFdLCByZXN1bHRUZXh0dXJlKTtcblxuICAgIHJldHVybiBOREFycmF5Lm1ha2U8VD4oXG4gICAgICAgIG5kYXJyYXkuc2hhcGUsIHt0ZXh0dXJlOiByZXN1bHRUZXh0dXJlLCB0ZXh0dXJlU2hhcGVSQ30pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGNvbnYyZEludGVybmFsKFxuICAgICAgeDogQXJyYXkzRCwgd2VpZ2h0czogQXJyYXk0RCwgYmlhc2VzOiBBcnJheTFEfG51bGwsIHN0cmlkZTogbnVtYmVyLFxuICAgICAgemVyb1BhZDogbnVtYmVyKTogQXJyYXkzRCB7XG4gICAgY29uc3QgZmllbGRTaXplID0gd2VpZ2h0cy5zaGFwZVswXTtcbiAgICBjb25zdCBpbnB1dERlcHRoID0gd2VpZ2h0cy5zaGFwZVsyXTtcbiAgICBjb25zdCBvdXRwdXREZXB0aCA9IHdlaWdodHMuc2hhcGVbM107XG4gICAgY29uc3QgcHJvZ0tleSA9IFtcbiAgICAgIENPTlYyRF9QUk9HLCB4LnNoYXBlLCBvdXRwdXREZXB0aCwgZmllbGRTaXplLCBzdHJpZGUsIGJpYXNlcyAhPSBudWxsXG4gICAgXS5qb2luKCdfJyk7XG4gICAgY29uc3QgcHJvZ3JhbSA9IHRoaXMuZ2V0QW5kU2F2ZVByb2dyYW0ocHJvZ0tleSwgKCkgPT4ge1xuICAgICAgcmV0dXJuIGNvbnZfZ3B1LmdldEZyYWdtZW50U2hhZGVyU291cmNlKFxuICAgICAgICAgIHguc2hhcGUsIG91dHB1dERlcHRoLCBmaWVsZFNpemUsIHN0cmlkZSwgemVyb1BhZCwgYmlhc2VzICE9IG51bGwpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgeFRleFNoYXBlID0gY29udl91dGlsLmNvbXB1dGVUZXhTaGFwZUZyb20zRCh4LnNoYXBlKTtcbiAgICBjb25zdCB3VGV4U2hhcGUgPVxuICAgICAgICBjb252X3V0aWwuY29tcHV0ZVdlaWdodHNUZXhTaGFwZShpbnB1dERlcHRoLCBvdXRwdXREZXB0aCwgZmllbGRTaXplKTtcbiAgICBjb25zdCBiaWFzVGV4U2hhcGUgPSBjb252X3V0aWwuY29tcHV0ZUJpYXNlc1RleFNoYXBlKG91dHB1dERlcHRoKTtcblxuICAgIC8vIElmIHRoZSB0ZXh0dXJlIHNoYXBlcyBkb2Vzbid0IG1hdGNoIHRoZSBzaGFwZXMgdGhhdCBzaGFkZXJzIGV4cGVjdCxcbiAgICAvLyBkbyBwaHlzaWNhbCB0ZXh0dXJlIHJlc2hhcGVzIG9uIHRoZSBHUFUuXG4gICAgY29uc3QgYWN0dWFsWFRleFNoYXBlID0geC5nZXRUZXh0dXJlU2hhcGVSQyh4VGV4U2hhcGUpO1xuICAgIGxldCBjbGVhbnVwWCA9IGZhbHNlO1xuICAgIGlmICghdXRpbC5hcnJheXNFcXVhbChhY3R1YWxYVGV4U2hhcGUsIHhUZXhTaGFwZSkpIHtcbiAgICAgIHggPSB0aGlzLnJlc2hhcGVUZXh0dXJlKHgsIHhUZXhTaGFwZSk7XG4gICAgICBjbGVhbnVwWCA9IHRydWU7XG4gICAgfVxuXG4gICAgbGV0IGNsZWFudXBXID0gZmFsc2U7XG4gICAgY29uc3QgYWN0dWFsV1RleFNoYXBlID0gd2VpZ2h0cy5nZXRUZXh0dXJlU2hhcGVSQyh3VGV4U2hhcGUpO1xuICAgIGlmICghdXRpbC5hcnJheXNFcXVhbChhY3R1YWxXVGV4U2hhcGUsIHdUZXhTaGFwZSkpIHtcbiAgICAgIHdlaWdodHMgPSB0aGlzLnJlc2hhcGVUZXh0dXJlKHdlaWdodHMsIHdUZXhTaGFwZSk7XG4gICAgICBjbGVhbnVwVyA9IHRydWU7XG4gICAgfVxuXG4gICAgbGV0IGNsZWFudXBCID0gZmFsc2U7XG4gICAgaWYgKGJpYXNlcyAhPSBudWxsKSB7XG4gICAgICBjb25zdCBhY3R1YWxCVGV4U2hhcGUgPSBiaWFzZXMuZ2V0VGV4dHVyZVNoYXBlUkMoYmlhc1RleFNoYXBlKTtcbiAgICAgIGlmICghdXRpbC5hcnJheXNFcXVhbChhY3R1YWxCVGV4U2hhcGUsIGJpYXNUZXhTaGFwZSkpIHtcbiAgICAgICAgYmlhc2VzID0gdGhpcy5yZXNoYXBlVGV4dHVyZShiaWFzZXMsIGJpYXNUZXhTaGFwZSk7XG4gICAgICAgIGNsZWFudXBCID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHRTaGFwZSA9IGNvbnZfdXRpbC5jb21wdXRlT3V0cHV0U2hhcGUzRChcbiAgICAgICAgeC5zaGFwZSwgZmllbGRTaXplLCBvdXRwdXREZXB0aCwgc3RyaWRlLCB6ZXJvUGFkKTtcbiAgICBjb25zdCByZXN1bHRUZXhTaGFwZSA9IGNvbnZfdXRpbC5jb21wdXRlVGV4U2hhcGVGcm9tM0QocmVzdWx0U2hhcGUpO1xuICAgIGNvbnN0IHJlc3VsdFRleCA9IHRoaXMudGV4dHVyZU1hbmFnZXIuYWNxdWlyZVRleHR1cmUocmVzdWx0VGV4U2hhcGUpO1xuXG4gICAgY29udl9ncHUuY29udm9sdmUoXG4gICAgICAgIHRoaXMuZ3BncHUsIHByb2dyYW0sIHguZ2V0VGV4dHVyZSgpLCB3ZWlnaHRzLmdldFRleHR1cmUoKSxcbiAgICAgICAgYmlhc2VzICE9IG51bGwgPyBiaWFzZXMuZ2V0VGV4dHVyZSgpIDogbnVsbCwgcmVzdWx0VGV4LCByZXN1bHRUZXhTaGFwZSk7XG5cbiAgICBpZiAoY2xlYW51cFgpIHtcbiAgICAgIHguZGlzcG9zZSgpO1xuICAgIH1cbiAgICBpZiAoY2xlYW51cFcpIHtcbiAgICAgIHdlaWdodHMuZGlzcG9zZSgpO1xuICAgIH1cbiAgICBpZiAoY2xlYW51cEIgJiYgYmlhc2VzICE9IG51bGwpIHtcbiAgICAgIGJpYXNlcy5kaXNwb3NlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxBcnJheTNEPihcbiAgICAgICAgcmVzdWx0U2hhcGUsIHt0ZXh0dXJlOiByZXN1bHRUZXgsIHRleHR1cmVTaGFwZVJDOiByZXN1bHRUZXhTaGFwZX0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGNvbnYyZEJhY2tQcm9wSW50ZXJuYWwoXG4gICAgICB4OiBBcnJheTNELCBkeTogQXJyYXkzRCwgd2VpZ2h0czogQXJyYXk0RCwgc3RyaWRlOiBudW1iZXIsXG4gICAgICBwYWQ6IG51bWJlcik6IHtkeDogQXJyYXkzRCwgZHc6IEFycmF5NEQsIGRiOiBBcnJheTFEfSB7XG4gICAgY29uc3QgZlNpemUgPSB3ZWlnaHRzLnNoYXBlWzBdO1xuICAgIGNvbnN0IGlucHV0RGVwdGggPSB3ZWlnaHRzLnNoYXBlWzJdO1xuICAgIGNvbnN0IG91dHB1dERlcHRoID0gd2VpZ2h0cy5zaGFwZVszXTtcbiAgICBjb25zdCB4VGV4U2hhcGUgPSBjb252X3V0aWwuY29tcHV0ZVRleFNoYXBlRnJvbTNEKHguc2hhcGUpO1xuICAgIGNvbnN0IHdUZXhTaGFwZSA9XG4gICAgICAgIGNvbnZfdXRpbC5jb21wdXRlV2VpZ2h0c1RleFNoYXBlKGlucHV0RGVwdGgsIG91dHB1dERlcHRoLCBmU2l6ZSk7XG4gICAgY29uc3QgeVRleFNoYXBlID0gY29udl91dGlsLmNvbXB1dGVUZXhTaGFwZUZyb20zRChkeS5zaGFwZSk7XG5cbiAgICAvLyBJZiB0aGUgdGV4dHVyZSBzaGFwZXMgZG9lc24ndCBtYXRjaCB0aGUgc2hhcGVzIHRoYXQgc2hhZGVycyBleHBlY3QsXG4gICAgLy8gZG8gcGh5c2ljYWwgdGV4dHVyZSByZXNoYXBlcyBvbiB0aGUgR1BVLlxuICAgIGxldCBjbGVhbnVwWCA9IGZhbHNlO1xuICAgIGNvbnN0IGFjdHVhbFhUZXhTaGFwZSA9IHguZ2V0VGV4dHVyZVNoYXBlUkMoeFRleFNoYXBlKTtcbiAgICBpZiAoIXV0aWwuYXJyYXlzRXF1YWwoYWN0dWFsWFRleFNoYXBlLCB4VGV4U2hhcGUpKSB7XG4gICAgICB4ID0gdGhpcy5yZXNoYXBlVGV4dHVyZSh4LCB4VGV4U2hhcGUpO1xuICAgICAgY2xlYW51cFggPSB0cnVlO1xuICAgIH1cblxuICAgIGxldCBjbGVhbnVwVyA9IGZhbHNlO1xuICAgIGNvbnN0IGFjdHVhbFdUZXhTaGFwZSA9IHdlaWdodHMuZ2V0VGV4dHVyZVNoYXBlUkMod1RleFNoYXBlKTtcbiAgICBpZiAoIXV0aWwuYXJyYXlzRXF1YWwoYWN0dWFsV1RleFNoYXBlLCB3VGV4U2hhcGUpKSB7XG4gICAgICB3ZWlnaHRzID0gdGhpcy5yZXNoYXBlVGV4dHVyZSh3ZWlnaHRzLCB3VGV4U2hhcGUpO1xuICAgICAgY2xlYW51cFcgPSB0cnVlO1xuICAgIH1cblxuICAgIGxldCBjbGVhbnVwWSA9IGZhbHNlO1xuICAgIGNvbnN0IGFjdHVhbFlUZXhTaGFwZSA9IGR5LmdldFRleHR1cmVTaGFwZVJDKHlUZXhTaGFwZSk7XG4gICAgaWYgKCF1dGlsLmFycmF5c0VxdWFsKGFjdHVhbFlUZXhTaGFwZSwgeVRleFNoYXBlKSkge1xuICAgICAgZHkgPSB0aGlzLnJlc2hhcGVUZXh0dXJlKGR5LCB5VGV4U2hhcGUpO1xuICAgICAgY2xlYW51cFkgPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGR3ID0gdGhpcy5jb252MmREZXJXZWlnaHRzKHgsIGR5LCBmU2l6ZSwgc3RyaWRlLCBwYWQpO1xuICAgIGNvbnN0IGRiID0gdGhpcy5jb252MmREZXJCaWFzKGR5KTtcbiAgICBjb25zdCBkeCA9IHRoaXMuY29udjJkVHJhbnNwb3NlSW50ZXJuYWwoXG4gICAgICAgIGR5LCB3ZWlnaHRzLCBudWxsIC8qKiBiaWFzZXMgKi8sIHN0cmlkZSwgcGFkKTtcblxuICAgIGlmIChjbGVhbnVwWCkge1xuICAgICAgeC5kaXNwb3NlKCk7XG4gICAgfVxuICAgIGlmIChjbGVhbnVwVykge1xuICAgICAgd2VpZ2h0cy5kaXNwb3NlKCk7XG4gICAgfVxuICAgIGlmIChjbGVhbnVwWSkge1xuICAgICAgZHkuZGlzcG9zZSgpO1xuICAgIH1cbiAgICByZXR1cm4ge2R4LCBkYiwgZHd9O1xuICB9XG5cbiAgcHJvdGVjdGVkIGNvbnYyZFRyYW5zcG9zZUludGVybmFsKFxuICAgICAgeDogQXJyYXkzRCwgd2VpZ2h0czogQXJyYXk0RCwgYmlhc2VzOiBBcnJheTFEfG51bGwsIG9yaWdTdHJpZGU6IG51bWJlcixcbiAgICAgIG9yaWdQYWQ6IG51bWJlcik6IEFycmF5M0Qge1xuICAgIGNvbnN0IG9yaWdJbnB1dERlcHRoID0gd2VpZ2h0cy5zaGFwZVsyXTtcbiAgICBjb25zdCBvcmlnT3V0cHV0RGVwdGggPSB3ZWlnaHRzLnNoYXBlWzNdO1xuICAgIGNvbnN0IGZpZWxkU2l6ZSA9IHdlaWdodHMuc2hhcGVbMF07XG5cbiAgICBjb25zdCBwcm9nS2V5ID0gW1xuICAgICAgQ09OVjJEX1RSQU5TUE9TRV9QUk9HLCB4LnNoYXBlLCBmaWVsZFNpemUsIG9yaWdJbnB1dERlcHRoLCBvcmlnU3RyaWRlLFxuICAgICAgb3JpZ1BhZCwgYmlhc2VzICE9IG51bGxcbiAgICBdLmpvaW4oJ18nKTtcbiAgICBjb25zdCBwcm9ncmFtID0gdGhpcy5nZXRBbmRTYXZlUHJvZ3JhbShwcm9nS2V5LCAoKSA9PiB7XG4gICAgICByZXR1cm4gY29udl9iYWNrcHJvcF9ncHUuZ2V0RnJhZ21lbnRTaGFkZXJDb252VHJhbnNwb3NlU291cmNlKFxuICAgICAgICAgIHguc2hhcGUsIGZpZWxkU2l6ZSwgb3JpZ0lucHV0RGVwdGgsIG9yaWdTdHJpZGUsIG9yaWdQYWQsXG4gICAgICAgICAgYmlhc2VzICE9IG51bGwpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgeFRleFNoYXBlID0gY29udl91dGlsLmNvbXB1dGVUZXhTaGFwZUZyb20zRCh4LnNoYXBlKTtcbiAgICBjb25zdCB3VGV4U2hhcGUgPSBjb252X3V0aWwuY29tcHV0ZVdlaWdodHNUZXhTaGFwZShcbiAgICAgICAgb3JpZ0lucHV0RGVwdGgsIG9yaWdPdXRwdXREZXB0aCwgZmllbGRTaXplKTtcbiAgICBjb25zdCBiaWFzVGV4U2hhcGUgPSBjb252X3V0aWwuY29tcHV0ZUJpYXNlc1RleFNoYXBlKG9yaWdJbnB1dERlcHRoKTtcblxuICAgIC8vIElmIHRoZSB0ZXh0dXJlIHNoYXBlcyBkb2Vzbid0IG1hdGNoIHRoZSBzaGFwZXMgdGhhdCBzaGFkZXJzIGV4cGVjdCxcbiAgICAvLyBkbyBwaHlzaWNhbCB0ZXh0dXJlIHJlc2hhcGVzIG9uIHRoZSBHUFUuXG4gICAgY29uc3QgYWN0dWFsWFRleFNoYXBlID0geC5nZXRUZXh0dXJlU2hhcGVSQyh4VGV4U2hhcGUpO1xuICAgIGxldCBjbGVhbnVwWCA9IGZhbHNlO1xuICAgIGlmICghdXRpbC5hcnJheXNFcXVhbChhY3R1YWxYVGV4U2hhcGUsIHhUZXhTaGFwZSkpIHtcbiAgICAgIHggPSB0aGlzLnJlc2hhcGVUZXh0dXJlKHgsIHhUZXhTaGFwZSk7XG4gICAgICBjbGVhbnVwWCA9IHRydWU7XG4gICAgfVxuXG4gICAgbGV0IGNsZWFudXBXID0gZmFsc2U7XG4gICAgY29uc3QgYWN0dWFsV1RleFNoYXBlID0gd2VpZ2h0cy5nZXRUZXh0dXJlU2hhcGVSQyh3VGV4U2hhcGUpO1xuICAgIGlmICghdXRpbC5hcnJheXNFcXVhbChhY3R1YWxXVGV4U2hhcGUsIHdUZXhTaGFwZSkpIHtcbiAgICAgIHdlaWdodHMgPSB0aGlzLnJlc2hhcGVUZXh0dXJlKHdlaWdodHMsIHdUZXhTaGFwZSk7XG4gICAgICBjbGVhbnVwVyA9IHRydWU7XG4gICAgfVxuXG4gICAgbGV0IGNsZWFudXBCID0gZmFsc2U7XG4gICAgaWYgKGJpYXNlcyAhPSBudWxsKSB7XG4gICAgICBjb25zdCBhY3R1YWxCaWFzVGV4U2hhcGUgPSBiaWFzZXMuZ2V0VGV4dHVyZVNoYXBlUkMoYmlhc1RleFNoYXBlKTtcbiAgICAgIGlmICghdXRpbC5hcnJheXNFcXVhbChhY3R1YWxCaWFzVGV4U2hhcGUsIGJpYXNUZXhTaGFwZSkpIHtcbiAgICAgICAgYmlhc2VzID0gdGhpcy5yZXNoYXBlVGV4dHVyZShiaWFzZXMsIGJpYXNUZXhTaGFwZSk7XG4gICAgICAgIGNsZWFudXBCID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWd1cmUgb3V0IHRoZSBvdXRwdXQgc2hhcGUgYnkgZGlsYXRpbmcgdGhlIGlucHV0LlxuICAgIGNvbnN0IGRpbGF0ZWRSQyA9XG4gICAgICAgIGNvbnZfdXRpbC5jb21wdXRlRGlsYXRlZFJDKFt4LnNoYXBlWzBdLCB4LnNoYXBlWzFdXSwgb3JpZ1N0cmlkZSk7XG4gICAgY29uc3QgcGFkID0gZmllbGRTaXplIC0gMSAtIG9yaWdQYWQ7XG4gICAgY29uc3QgcmVzdWx0U2hhcGUgPSBjb252X3V0aWwuY29tcHV0ZU91dHB1dFNoYXBlM0QoXG4gICAgICAgIFtkaWxhdGVkUkNbMF0sIGRpbGF0ZWRSQ1sxXSwgb3JpZ091dHB1dERlcHRoXSwgZmllbGRTaXplLFxuICAgICAgICBvcmlnSW5wdXREZXB0aCwgMSwgcGFkKTtcbiAgICBjb25zdCByZXN1bHRUZXhTaGFwZSA9IGNvbnZfdXRpbC5jb21wdXRlVGV4U2hhcGVGcm9tM0QocmVzdWx0U2hhcGUpO1xuICAgIGNvbnN0IHJlc3VsdFRleCA9IHRoaXMudGV4dHVyZU1hbmFnZXIuYWNxdWlyZVRleHR1cmUocmVzdWx0VGV4U2hhcGUpO1xuXG4gICAgY29udl9iYWNrcHJvcF9ncHUuY29udlRyYW5zcG9zZShcbiAgICAgICAgdGhpcy5ncGdwdSwgcHJvZ3JhbSwgeC5nZXRUZXh0dXJlKCksIHdlaWdodHMuZ2V0VGV4dHVyZSgpLFxuICAgICAgICBiaWFzZXMgIT0gbnVsbCA/IGJpYXNlcy5nZXRUZXh0dXJlKCkgOiBudWxsLCByZXN1bHRUZXgsIHJlc3VsdFRleFNoYXBlKTtcblxuICAgIGlmIChjbGVhbnVwWCkge1xuICAgICAgeC5kaXNwb3NlKCk7XG4gICAgfVxuICAgIGlmIChjbGVhbnVwVykge1xuICAgICAgd2VpZ2h0cy5kaXNwb3NlKCk7XG4gICAgfVxuICAgIGlmIChjbGVhbnVwQikge1xuICAgICAgYmlhc2VzIS5kaXNwb3NlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxBcnJheTNEPihcbiAgICAgICAgcmVzdWx0U2hhcGUsIHt0ZXh0dXJlOiByZXN1bHRUZXgsIHRleHR1cmVTaGFwZVJDOiByZXN1bHRUZXhTaGFwZX0pO1xuICB9XG5cbiAgY29udjJkRGVyV2VpZ2h0cyhcbiAgICAgIHg6IEFycmF5M0QsIGRZOiBBcnJheTNELCBmU2l6ZTogbnVtYmVyLCBzdHJpZGU6IG51bWJlcixcbiAgICAgIHplcm9QYWQ6IG51bWJlcik6IEFycmF5NEQge1xuICAgIGNvbnN0IGlucHV0RGVwdGggPSB4LnNoYXBlWzJdO1xuICAgIGNvbnN0IG91dHB1dERlcHRoID0gZFkuc2hhcGVbMl07XG4gICAgY29uc3QgcHJvZ0tleSA9IFtcbiAgICAgIENPTlYyRF9ERVJXX1BST0csIHguc2hhcGUsIGZTaXplLCBvdXRwdXREZXB0aCwgc3RyaWRlLCB6ZXJvUGFkXG4gICAgXS5qb2luKCdfJyk7XG4gICAgY29uc3QgcHJvZ3JhbSA9IHRoaXMuZ2V0QW5kU2F2ZVByb2dyYW0ocHJvZ0tleSwgKCkgPT4ge1xuICAgICAgcmV0dXJuIGNvbnZfYmFja3Byb3BfZ3B1LmdldEZyYWdtZW50U2hhZGVyRGVyV2VpZ2h0c1NvdXJjZShcbiAgICAgICAgICB4LnNoYXBlLCBmU2l6ZSwgb3V0cHV0RGVwdGgsIHN0cmlkZSwgemVyb1BhZCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCB4VGV4U2hhcGUgPSBjb252X3V0aWwuY29tcHV0ZVRleFNoYXBlRnJvbTNEKHguc2hhcGUpO1xuICAgIGNvbnN0IHlTaGFwZSA9IGNvbnZfdXRpbC5jb21wdXRlT3V0cHV0U2hhcGUzRChcbiAgICAgICAgeC5zaGFwZSwgZlNpemUsIG91dHB1dERlcHRoLCBzdHJpZGUsIHplcm9QYWQpO1xuICAgIGNvbnN0IHlUZXhTaGFwZSA9IGNvbnZfdXRpbC5jb21wdXRlVGV4U2hhcGVGcm9tM0QoeVNoYXBlKTtcblxuICAgIC8vIElmIHRoZSB0ZXh0dXJlIHNoYXBlcyBkb2Vzbid0IG1hdGNoIHRoZSBzaGFwZXMgdGhhdCBzaGFkZXJzIGV4cGVjdCxcbiAgICAvLyBkbyBwaHlzaWNhbCB0ZXh0dXJlIHJlc2hhcGVzIG9uIHRoZSBHUFUuXG4gICAgY29uc3QgYWN0dWFsWFRleFNoYXBlID0geC5nZXRUZXh0dXJlU2hhcGVSQyh4VGV4U2hhcGUpO1xuICAgIGxldCBjbGVhbnVwWCA9IGZhbHNlO1xuICAgIGlmICghdXRpbC5hcnJheXNFcXVhbChhY3R1YWxYVGV4U2hhcGUsIHhUZXhTaGFwZSkpIHtcbiAgICAgIHggPSB0aGlzLnJlc2hhcGVUZXh0dXJlKHgsIHhUZXhTaGFwZSk7XG4gICAgICBjbGVhbnVwWCA9IHRydWU7XG4gICAgfVxuXG4gICAgbGV0IGNsZWFudXBZID0gZmFsc2U7XG4gICAgY29uc3QgYWN0dWFsWVRleFNoYXBlID0gZFkuZ2V0VGV4dHVyZVNoYXBlUkMoeVRleFNoYXBlKTtcbiAgICBpZiAoIXV0aWwuYXJyYXlzRXF1YWwoYWN0dWFsWVRleFNoYXBlLCB5VGV4U2hhcGUpKSB7XG4gICAgICBkWSA9IHRoaXMucmVzaGFwZVRleHR1cmUoZFksIHlUZXhTaGFwZSk7XG4gICAgICBjbGVhbnVwWSA9IHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0VGV4U2hhcGUgPVxuICAgICAgICBjb252X3V0aWwuY29tcHV0ZVdlaWdodHNUZXhTaGFwZShpbnB1dERlcHRoLCBvdXRwdXREZXB0aCwgZlNpemUpO1xuICAgIGNvbnN0IHJlc3VsdFRleCA9IHRoaXMudGV4dHVyZU1hbmFnZXIuYWNxdWlyZVRleHR1cmUocmVzdWx0VGV4U2hhcGUpO1xuXG4gICAgY29udl9iYWNrcHJvcF9ncHUuZGVyV2VpZ2h0cyhcbiAgICAgICAgdGhpcy5ncGdwdSwgcHJvZ3JhbSwgeC5nZXRUZXh0dXJlKCksIGRZLmdldFRleHR1cmUoKSwgcmVzdWx0VGV4LFxuICAgICAgICByZXN1bHRUZXhTaGFwZSk7XG5cbiAgICBpZiAoY2xlYW51cFgpIHtcbiAgICAgIHguZGlzcG9zZSgpO1xuICAgIH1cbiAgICBpZiAoY2xlYW51cFkpIHtcbiAgICAgIGRZLmRpc3Bvc2UoKTtcbiAgICB9XG5cbiAgICBjb25zdCB3ZWlnaHRzU2hhcGUgPVxuICAgICAgICBjb252X3V0aWwuY29tcHV0ZVdlaWdodHNTaGFwZTREKGlucHV0RGVwdGgsIG91dHB1dERlcHRoLCBmU2l6ZSk7XG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxBcnJheTREPihcbiAgICAgICAgd2VpZ2h0c1NoYXBlLCB7dGV4dHVyZTogcmVzdWx0VGV4LCB0ZXh0dXJlU2hhcGVSQzogcmVzdWx0VGV4U2hhcGV9KTtcbiAgfVxuXG4gIGNvbnYyZERlckJpYXMoZFk6IEFycmF5M0QpOiBBcnJheTFEIHtcbiAgICBjb25zdCBvdXRwdXREZXB0aCA9IGRZLnNoYXBlWzJdO1xuICAgIGNvbnN0IHByb2dLZXkgPSBbQ09OVjJEX0RFUkJfUFJPRywgZFkuc2hhcGVdLmpvaW4oJ18nKTtcbiAgICBjb25zdCBwcm9ncmFtID0gdGhpcy5nZXRBbmRTYXZlUHJvZ3JhbShwcm9nS2V5LCAoKSA9PiB7XG4gICAgICByZXR1cm4gY29udl9iYWNrcHJvcF9ncHUuZ2V0RnJhZ21lbnRTaGFkZXJEZXJCaWFzU291cmNlKGRZLnNoYXBlKTtcbiAgICB9KTtcbiAgICBjb25zdCB5VGV4U2hhcGUgPSBjb252X3V0aWwuY29tcHV0ZVRleFNoYXBlRnJvbTNEKGRZLnNoYXBlKTtcblxuICAgIC8vIElmIHRoZSB0ZXh0dXJlIHNoYXBlcyBkb2Vzbid0IG1hdGNoIHRoZSBzaGFwZXMgdGhhdCBzaGFkZXJzIGV4cGVjdCxcbiAgICAvLyBkbyBwaHlzaWNhbCB0ZXh0dXJlIHJlc2hhcGVzIG9uIHRoZSBHUFUuXG4gICAgbGV0IGNsZWFudXBZID0gZmFsc2U7XG4gICAgY29uc3QgYWN0dWFsWVRleFNoYXBlID0gZFkuZ2V0VGV4dHVyZVNoYXBlUkMoeVRleFNoYXBlKTtcbiAgICBpZiAoIXV0aWwuYXJyYXlzRXF1YWwoYWN0dWFsWVRleFNoYXBlLCB5VGV4U2hhcGUpKSB7XG4gICAgICBkWSA9IHRoaXMucmVzaGFwZVRleHR1cmUoZFksIHlUZXhTaGFwZSk7XG4gICAgICBjbGVhbnVwWSA9IHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0VGV4U2hhcGUgPSBjb252X3V0aWwuY29tcHV0ZUJpYXNlc1RleFNoYXBlKG91dHB1dERlcHRoKTtcbiAgICBjb25zdCByZXN1bHRUZXggPSB0aGlzLnRleHR1cmVNYW5hZ2VyLmFjcXVpcmVUZXh0dXJlKHJlc3VsdFRleFNoYXBlKTtcblxuICAgIGNvbnZfYmFja3Byb3BfZ3B1LmRlckJpYXMoXG4gICAgICAgIHRoaXMuZ3BncHUsIHByb2dyYW0sIGRZLmdldFRleHR1cmUoKSwgcmVzdWx0VGV4LCByZXN1bHRUZXhTaGFwZSk7XG5cbiAgICBpZiAoY2xlYW51cFkpIHtcbiAgICAgIGRZLmRpc3Bvc2UoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlPEFycmF5MUQ+KFxuICAgICAgICBbb3V0cHV0RGVwdGhdLCB7dGV4dHVyZTogcmVzdWx0VGV4LCB0ZXh0dXJlU2hhcGVSQzogcmVzdWx0VGV4U2hhcGV9KTtcbiAgfVxuXG4gIHByaXZhdGUgcG9vbChcbiAgICAgIHByb2dyYW06IFdlYkdMUHJvZ3JhbSwgeDogQXJyYXkzRCwgZlNpemU6IG51bWJlciwgc3RyaWRlOiBudW1iZXIsXG4gICAgICBwYWQ6IG51bWJlcik6IEFycmF5M0Qge1xuICAgIGNvbnN0IHhUZXhTaGFwZSA9IGNvbnZfdXRpbC5jb21wdXRlVGV4U2hhcGVGcm9tM0QoeC5zaGFwZSk7XG5cbiAgICAvLyBJZiB0aGUgdGV4dHVyZSBzaGFwZXMgZG9lc24ndCBtYXRjaCB0aGUgc2hhcGVzIHRoYXQgc2hhZGVycyBleHBlY3QsXG4gICAgLy8gZG8gcGh5c2ljYWwgdGV4dHVyZSByZXNoYXBlcyBvbiB0aGUgR1BVLlxuICAgIGNvbnN0IGFjdHVhbFhUZXhTaGFwZSA9IHguZ2V0VGV4dHVyZVNoYXBlUkMoeFRleFNoYXBlKTtcbiAgICBsZXQgY2xlYW51cFggPSBmYWxzZTtcbiAgICBpZiAoIXV0aWwuYXJyYXlzRXF1YWwoYWN0dWFsWFRleFNoYXBlLCB4VGV4U2hhcGUpKSB7XG4gICAgICB4ID0gdGhpcy5yZXNoYXBlVGV4dHVyZSh4LCB4VGV4U2hhcGUpO1xuICAgICAgY2xlYW51cFggPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdFNoYXBlID1cbiAgICAgICAgY29udl91dGlsLmNvbXB1dGVPdXRwdXRTaGFwZTNEKHguc2hhcGUsIGZTaXplLCB4LnNoYXBlWzJdLCBzdHJpZGUsIHBhZCk7XG4gICAgY29uc3QgcmVzdWx0VGV4U2hhcGUgPSBjb252X3V0aWwuY29tcHV0ZVRleFNoYXBlRnJvbTNEKHJlc3VsdFNoYXBlKTtcbiAgICBjb25zdCBwb29sUmVzdWx0VGV4ID0gdGhpcy50ZXh0dXJlTWFuYWdlci5hY3F1aXJlVGV4dHVyZShyZXN1bHRUZXhTaGFwZSk7XG5cbiAgICBwb29sX2dwdS5wb29sQ29tbW9uKFxuICAgICAgICB0aGlzLmdwZ3B1LCBwcm9ncmFtLCB4LmdldFRleHR1cmUoKSwgcG9vbFJlc3VsdFRleCwgcmVzdWx0VGV4U2hhcGUpO1xuXG4gICAgaWYgKGNsZWFudXBYKSB7XG4gICAgICB4LmRpc3Bvc2UoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlPEFycmF5M0Q+KFxuICAgICAgICByZXN1bHRTaGFwZSwge3RleHR1cmU6IHBvb2xSZXN1bHRUZXgsIHRleHR1cmVTaGFwZVJDOiByZXN1bHRUZXhTaGFwZX0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIG1heFBvb2xJbnRlcm5hbChcbiAgICAgIHg6IEFycmF5M0QsIGZTaXplOiBudW1iZXIsIHN0cmlkZTogbnVtYmVyLCBwYWQ6IG51bWJlcik6IEFycmF5M0Qge1xuICAgIGNvbnN0IG1heFBvb2xQcm9nS2V5ID1cbiAgICAgICAgW01BWF9QT09MX1BST0csIHguc2hhcGUsIGZTaXplLCBzdHJpZGUsIHBhZF0uam9pbignXycpO1xuICAgIGNvbnN0IG1heFBvb2xQcm9ncmFtID0gdGhpcy5nZXRBbmRTYXZlUHJvZ3JhbShtYXhQb29sUHJvZ0tleSwgKCkgPT4ge1xuICAgICAgcmV0dXJuIG1heF9wb29sX2dwdS5nZXRGcmFnbWVudFNoYWRlck1heFBvb2xTb3VyY2UoXG4gICAgICAgICAgeC5zaGFwZSwgZlNpemUsIHN0cmlkZSwgcGFkKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLnBvb2wobWF4UG9vbFByb2dyYW0sIHgsIGZTaXplLCBzdHJpZGUsIHBhZCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgbWluUG9vbEludGVybmFsKFxuICAgICAgeDogQXJyYXkzRCwgZlNpemU6IG51bWJlciwgc3RyaWRlOiBudW1iZXIsIHBhZDogbnVtYmVyKTogQXJyYXkzRCB7XG4gICAgY29uc3QgbWluUG9vbFByb2dLZXkgPVxuICAgICAgICBbTUlOX1BPT0xfUFJPRywgeC5zaGFwZSwgZlNpemUsIHN0cmlkZSwgcGFkXS5qb2luKCdfJyk7XG4gICAgY29uc3QgbWluUG9vbFByb2dyYW0gPSB0aGlzLmdldEFuZFNhdmVQcm9ncmFtKG1pblBvb2xQcm9nS2V5LCAoKSA9PiB7XG4gICAgICByZXR1cm4gbWluX3Bvb2xfZ3B1LmdldEZyYWdtZW50U2hhZGVyTWluUG9vbFNvdXJjZShcbiAgICAgICAgICB4LnNoYXBlLCBmU2l6ZSwgc3RyaWRlLCBwYWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMucG9vbChtaW5Qb29sUHJvZ3JhbSwgeCwgZlNpemUsIHN0cmlkZSwgcGFkKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhdmdQb29sSW50ZXJuYWwoXG4gICAgICB4OiBBcnJheTNELCBmU2l6ZTogbnVtYmVyLCBzdHJpZGU6IG51bWJlciwgcGFkOiBudW1iZXIpOiBBcnJheTNEIHtcbiAgICBjb25zdCBhdmdQb29sUHJvZ0tleSA9XG4gICAgICAgIFtBVkdfUE9PTF9QUk9HLCB4LnNoYXBlLCBmU2l6ZSwgc3RyaWRlLCBwYWRdLmpvaW4oJ18nKTtcbiAgICBjb25zdCBhdmdQb29sUHJvZ3JhbSA9IHRoaXMuZ2V0QW5kU2F2ZVByb2dyYW0oYXZnUG9vbFByb2dLZXksICgpID0+IHtcbiAgICAgIHJldHVybiBhdmdfcG9vbF9ncHUuZ2V0RnJhZ21lbnRTaGFkZXJBdmdQb29sU291cmNlKFxuICAgICAgICAgIHguc2hhcGUsIGZTaXplLCBzdHJpZGUsIHBhZCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5wb29sKGF2Z1Bvb2xQcm9ncmFtLCB4LCBmU2l6ZSwgc3RyaWRlLCBwYWQpO1xuICB9XG5cbiAgcHJvdGVjdGVkIG1heFBvb2xCYWNrcHJvcEludGVybmFsKFxuICAgICAgZHk6IEFycmF5M0QsIHg6IEFycmF5M0QsIGZTaXplOiBudW1iZXIsIG9yaWdTdHJpZGU6IG51bWJlcixcbiAgICAgIG9yaWdQYWQ6IG51bWJlcik6IEFycmF5M0Qge1xuICAgIGNvbnN0IG1heFBvb2xQb3NpdGlvbnNQcm9nS2V5ID0gW1xuICAgICAgTUFYX1BPT0xfUE9TSVRJT05TX1BST0csIHguc2hhcGUsIGZTaXplLCBvcmlnU3RyaWRlLCBvcmlnUGFkXG4gICAgXS5qb2luKCdfJyk7XG4gICAgY29uc3QgbWF4UG9vbFBvc2l0aW9uc1Byb2dyYW0gPVxuICAgICAgICB0aGlzLmdldEFuZFNhdmVQcm9ncmFtKG1heFBvb2xQb3NpdGlvbnNQcm9nS2V5LCAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIG1heF9wb29sX2dwdS5nZXRGcmFnbWVudFNoYWRlck1heFBvb2xQb3NpdGlvbnNTb3VyY2UoXG4gICAgICAgICAgICAgIHguc2hhcGUsIGZTaXplLCBvcmlnU3RyaWRlLCBvcmlnUGFkKTtcbiAgICAgICAgfSk7XG5cbiAgICBjb25zdCBtYXhQb29sUmVzdWx0U2hhcGUgPSBjb252X3V0aWwuY29tcHV0ZU91dHB1dFNoYXBlM0QoXG4gICAgICAgIHguc2hhcGUsIGZTaXplLCB4LnNoYXBlWzJdLCBvcmlnU3RyaWRlLCBvcmlnUGFkKTtcbiAgICBjb25zdCBtYXhQb29sUmVzdWx0VGV4U2hhcGUgPVxuICAgICAgICBjb252X3V0aWwuY29tcHV0ZVRleFNoYXBlRnJvbTNEKG1heFBvb2xSZXN1bHRTaGFwZSk7XG4gICAgY29uc3QgbWF4UG9vbFBvc2l0aW9uc1Jlc3VsdFRleCA9XG4gICAgICAgIHRoaXMudGV4dHVyZU1hbmFnZXIuYWNxdWlyZVRleHR1cmUobWF4UG9vbFJlc3VsdFRleFNoYXBlKTtcbiAgICAvLyBJZiB0aGUgdGV4dHVyZSBzaGFwZXMgZG9lc24ndCBtYXRjaCB0aGUgc2hhcGVzIHRoYXQgc2hhZGVycyBleHBlY3QsXG4gICAgLy8gZG8gcGh5c2ljYWwgdGV4dHVyZSByZXNoYXBlcyBvbiB0aGUgR1BVLlxuICAgIGNvbnN0IHhUZXhTaGFwZSA9IGNvbnZfdXRpbC5jb21wdXRlVGV4U2hhcGVGcm9tM0QoeC5zaGFwZSk7XG4gICAgY29uc3QgYWN0dWFsWFRleFNoYXBlID0geC5nZXRUZXh0dXJlU2hhcGVSQyh4VGV4U2hhcGUpO1xuICAgIGxldCBjbGVhbnVwWCA9IGZhbHNlO1xuICAgIGlmICghdXRpbC5hcnJheXNFcXVhbChhY3R1YWxYVGV4U2hhcGUsIHhUZXhTaGFwZSkpIHtcbiAgICAgIHggPSB0aGlzLnJlc2hhcGVUZXh0dXJlKHgsIHhUZXhTaGFwZSk7XG4gICAgICBjbGVhbnVwWCA9IHRydWU7XG4gICAgfVxuXG4gICAgbWF4X3Bvb2xfZ3B1Lm1heFBvb2xDb21tb24oXG4gICAgICAgIHRoaXMuZ3BncHUsIG1heFBvb2xQb3NpdGlvbnNQcm9ncmFtLCB4LmdldFRleHR1cmUoKSxcbiAgICAgICAgbWF4UG9vbFBvc2l0aW9uc1Jlc3VsdFRleCwgbWF4UG9vbFJlc3VsdFRleFNoYXBlKTtcblxuICAgIGNvbnN0IG1heFBvb2xCYWNrcHJvcFByb2dLZXkgPSBbXG4gICAgICBNQVhfUE9PTF9CQUNLUFJPUF9QUk9HLCBkeS5zaGFwZSwgZlNpemUsIG9yaWdTdHJpZGUsIG9yaWdQYWRcbiAgICBdLmpvaW4oJ18nKTtcbiAgICBjb25zdCBwcm9ncmFtID0gdGhpcy5nZXRBbmRTYXZlUHJvZ3JhbShtYXhQb29sQmFja3Byb3BQcm9nS2V5LCAoKSA9PiB7XG4gICAgICByZXR1cm4gbWF4X3Bvb2xfYmFja3Byb3BfZ3B1LmdldEZyYWdtZW50U2hhZGVyTWF4UG9vbEJhY2twcm9wKFxuICAgICAgICAgIGR5LnNoYXBlLCBmU2l6ZSwgb3JpZ1N0cmlkZSwgb3JpZ1BhZCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBkeVRleFNoYXBlID0gY29udl91dGlsLmNvbXB1dGVUZXhTaGFwZUZyb20zRChkeS5zaGFwZSk7XG5cbiAgICAvLyBJZiB0aGUgdGV4dHVyZSBzaGFwZXMgZG9lc24ndCBtYXRjaCB0aGUgc2hhcGVzIHRoYXQgc2hhZGVycyBleHBlY3QsXG4gICAgLy8gZG8gcGh5c2ljYWwgdGV4dHVyZSByZXNoYXBlcyBvbiB0aGUgR1BVLlxuICAgIGNvbnN0IGFjdHVhbER5VGV4U2hhcGUgPSBkeS5nZXRUZXh0dXJlU2hhcGVSQyhkeVRleFNoYXBlKTtcbiAgICBsZXQgY2xlYW51cER5ID0gZmFsc2U7XG4gICAgaWYgKCF1dGlsLmFycmF5c0VxdWFsKGFjdHVhbER5VGV4U2hhcGUsIGR5VGV4U2hhcGUpKSB7XG4gICAgICBkeSA9IHRoaXMucmVzaGFwZVRleHR1cmUoZHksIGR5VGV4U2hhcGUpO1xuICAgICAgY2xlYW51cER5ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBkaWxhdGVkRHlSQyA9XG4gICAgICAgIGNvbnZfdXRpbC5jb21wdXRlRGlsYXRlZFJDKFtkeS5zaGFwZVswXSwgZHkuc2hhcGVbMV1dLCBvcmlnU3RyaWRlKTtcbiAgICBjb25zdCBwYWQgPSBmU2l6ZSAtIDEgLSBvcmlnUGFkO1xuICAgIGNvbnN0IHJlc3VsdFNoYXBlUkNEID0gY29udl91dGlsLmNvbXB1dGVPdXRwdXRTaGFwZTNEKFxuICAgICAgICBbZGlsYXRlZER5UkNbMF0sIGRpbGF0ZWREeVJDWzFdLCBkeS5zaGFwZVsyXV0sIGZTaXplLCBkeS5zaGFwZVsyXSwgMSxcbiAgICAgICAgcGFkKTtcbiAgICBjb25zdCByZXN1bHRUZXhTaGFwZSA9IGNvbnZfdXRpbC5jb21wdXRlVGV4U2hhcGVGcm9tM0QocmVzdWx0U2hhcGVSQ0QpO1xuICAgIGNvbnN0IHJlc3VsdFRleCA9IHRoaXMudGV4dHVyZU1hbmFnZXIuYWNxdWlyZVRleHR1cmUocmVzdWx0VGV4U2hhcGUpO1xuXG4gICAgbWF4X3Bvb2xfYmFja3Byb3BfZ3B1Lm1heFBvb2xCYWNrcHJvcChcbiAgICAgICAgdGhpcy5ncGdwdSwgcHJvZ3JhbSwgZHkuZ2V0VGV4dHVyZSgpLCBtYXhQb29sUG9zaXRpb25zUmVzdWx0VGV4LFxuICAgICAgICByZXN1bHRUZXgsIHJlc3VsdFRleFNoYXBlKTtcblxuICAgIGlmIChjbGVhbnVwRHkpIHtcbiAgICAgIGR5LmRpc3Bvc2UoKTtcbiAgICB9XG5cbiAgICBpZiAoY2xlYW51cFgpIHtcbiAgICAgIHguZGlzcG9zZSgpO1xuICAgIH1cblxuICAgIHRoaXMudGV4dHVyZU1hbmFnZXIucmVsZWFzZVRleHR1cmUoXG4gICAgICAgIG1heFBvb2xQb3NpdGlvbnNSZXN1bHRUZXgsIG1heFBvb2xSZXN1bHRUZXhTaGFwZSk7XG5cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlPEFycmF5M0Q+KFxuICAgICAgICByZXN1bHRTaGFwZVJDRCwge3RleHR1cmU6IHJlc3VsdFRleCwgdGV4dHVyZVNoYXBlUkM6IHJlc3VsdFRleFNoYXBlfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVzaXplQmlsaW5lYXIzREludGVybmFsKFxuICAgICAgeDogQXJyYXkzRCwgbmV3U2hhcGUyRDogW251bWJlciwgbnVtYmVyXSxcbiAgICAgIGFsaWduQ29ybmVyczogYm9vbGVhbik6IEFycmF5M0Qge1xuICAgIGNvbnN0IHByb2dyYW1LZXkgPVxuICAgICAgICBbUkVTSVpFX0JJTElORUFSX1BST0csIHguc2hhcGUsIG5ld1NoYXBlMkQsIGFsaWduQ29ybmVyc10uam9pbignXycpO1xuXG4gICAgY29uc3QgbmV3U2hhcGVSQ0Q6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9XG4gICAgICAgIFtuZXdTaGFwZTJEWzBdLCBuZXdTaGFwZTJEWzFdLCB4LnNoYXBlWzJdXTtcbiAgICBjb25zdCByZXN1bHRUZXhTaGFwZSA9IGNvbnZfdXRpbC5jb21wdXRlVGV4U2hhcGVGcm9tM0QobmV3U2hhcGVSQ0QpO1xuXG4gICAgY29uc3QgcHJvZ3JhbSA9IHRoaXMuZ2V0QW5kU2F2ZVByb2dyYW0oXG4gICAgICAgIHByb2dyYW1LZXksXG4gICAgICAgICgpID0+IHJlc2l6ZV9iaWxpbmVhcl9ncHUuZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoXG4gICAgICAgICAgICB4LnNoYXBlLCBuZXdTaGFwZTJELCBhbGlnbkNvcm5lcnMpKTtcblxuICAgIGNvbnN0IHJlc3VsdFRleHR1cmUgPSB0aGlzLnRleHR1cmVNYW5hZ2VyLmFjcXVpcmVUZXh0dXJlKHJlc3VsdFRleFNoYXBlKTtcblxuICAgIHJlc2l6ZV9iaWxpbmVhcl9ncHUucmVzaXplQmlsaW5lYXIoXG4gICAgICAgIHRoaXMuZ3BncHUsIHByb2dyYW0sIHguZ2V0VGV4dHVyZSgpLCByZXN1bHRUZXh0dXJlLCByZXN1bHRUZXhTaGFwZSk7XG5cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlPEFycmF5M0Q+KFxuICAgICAgICBuZXdTaGFwZVJDRCwge3RleHR1cmU6IHJlc3VsdFRleHR1cmUsIHRleHR1cmVTaGFwZVJDOiByZXN1bHRUZXhTaGFwZX0pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRBbmRTYXZlUHJvZ3JhbShwcm9ncmFtS2V5OiBzdHJpbmcsIGdldFNoYWRlclNvdXJjZTogKCkgPT4gc3RyaW5nKTpcbiAgICAgIFdlYkdMUHJvZ3JhbSB7XG4gICAgaWYgKCEocHJvZ3JhbUtleSBpbiB0aGlzLnByb2dyYW1DYWNoZSkpIHtcbiAgICAgIHRoaXMucHJvZ3JhbUNhY2hlW3Byb2dyYW1LZXldID1cbiAgICAgICAgICB0aGlzLmdwZ3B1LmNyZWF0ZVByb2dyYW0oZ2V0U2hhZGVyU291cmNlKCkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wcm9ncmFtQ2FjaGVbcHJvZ3JhbUtleV07XG4gIH1cblxuICBwcml2YXRlIGFkZFN1Yk11bERpdihcbiAgICAgIGE6IE5EQXJyYXksIGI6IE5EQXJyYXksIHJlc3VsdFNoYXBlOiBudW1iZXJbXSxcbiAgICAgIG9wZXJhbmRBOiBhZGRzdWJtdWxkaXZfZ3B1Lk9wZXJhbmRUeXBlLFxuICAgICAgb3BUeXBlOiBhZGRzdWJtdWxkaXZfZ3B1Lk9wZXJhdGlvbixcbiAgICAgIG9wZXJhbmRCOiBhZGRzdWJtdWxkaXZfZ3B1Lk9wZXJhbmRUeXBlKTogTkRBcnJheSB7XG4gICAgbGV0IGNsZWFudXBCID0gZmFsc2U7XG5cbiAgICBjb25zdCBhT3JpZW50YXRpb24gPSBNYXRyaXhPcmllbnRhdGlvbi5SRUdVTEFSO1xuICAgIGxldCBiT3JpZW50YXRpb24gPSBNYXRyaXhPcmllbnRhdGlvbi5SRUdVTEFSO1xuXG4gICAgbGV0IGxvZ2ljYWxCVGV4U2hhcGU6IFtudW1iZXIsIG51bWJlcl07XG5cbiAgICBpZiAob3BlcmFuZEEgPT09IE9wZXJhbmRUeXBlLk1BVFJJWCAmJiBvcGVyYW5kQiA9PT0gT3BlcmFuZFR5cGUuTUFUUklYKSB7XG4gICAgICB1dGlsLmFzc2VydFNoYXBlc01hdGNoKGEuc2hhcGUsIGIuc2hhcGUpO1xuXG4gICAgICBpZiAoYS5pbkdQVSgpKSB7XG4gICAgICAgIC8vIFByZWZlciBCIHRvIGhhdmUgdGhlIHNoYXBlIG9mIEEuXG4gICAgICAgIGIuZ2V0VGV4dHVyZVNoYXBlUkMoYS5nZXRUZXh0dXJlU2hhcGVSQygpKTtcbiAgICAgIH0gZWxzZSBpZiAoYi5pbkdQVSgpKSB7XG4gICAgICAgIC8vIFByZWZlciBBIHRvIGhhdmUgdGhlIHNoYXBlIG9mIEIuXG4gICAgICAgIGEuZ2V0VGV4dHVyZVNoYXBlUkMoYi5nZXRUZXh0dXJlU2hhcGVSQygpKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYVRleFNoYXBlID0gYS5nZXRUZXh0dXJlU2hhcGVSQygpO1xuICAgICAgY29uc3QgYlRleFNoYXBlID0gYi5nZXRUZXh0dXJlU2hhcGVSQygpO1xuICAgICAgbG9naWNhbEJUZXhTaGFwZSA9IGJUZXhTaGFwZTtcblxuICAgICAgaWYgKGEucmFuayA9PT0gMSkge1xuICAgICAgICAvLyBXaGVuIGRlYWxpbmcgd2l0aCB2ZWN0b3JzLCB3ZSBjYW4gc2FtcGxlIGluIHRyYW5zcG9zZWQgd2F5IHdpdGhvdXRcbiAgICAgICAgLy8gdGhlIG5lZWQgdG8gZG8gcGh5c2ljYWwgcmVzaGFwZS5cbiAgICAgICAgaWYgKCF1dGlsLmFycmF5c0VxdWFsKGJUZXhTaGFwZSwgYVRleFNoYXBlKSkge1xuICAgICAgICAgIGJPcmllbnRhdGlvbiA9IE1hdHJpeE9yaWVudGF0aW9uLlRSQU5TUE9TRUQ7XG4gICAgICAgICAgbG9naWNhbEJUZXhTaGFwZSA9IFtiVGV4U2hhcGVbMV0sIGJUZXhTaGFwZVswXV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCF1dGlsLmFycmF5c0VxdWFsKGFUZXhTaGFwZSwgbG9naWNhbEJUZXhTaGFwZSkpIHtcbiAgICAgICAgYiA9IHRoaXMucmVzaGFwZVRleHR1cmUoYiwgYVRleFNoYXBlKTtcbiAgICAgICAgYk9yaWVudGF0aW9uID0gTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUjtcbiAgICAgICAgbG9naWNhbEJUZXhTaGFwZSA9IGIuZ2V0VGV4dHVyZVNoYXBlUkMoKTtcbiAgICAgICAgY2xlYW51cEIgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2dpY2FsQlRleFNoYXBlID0gYi5nZXRUZXh0dXJlU2hhcGVSQygpO1xuICAgIH1cblxuICAgIGNvbnN0IGFUZXhTaGFwZSA9IGEuZ2V0VGV4dHVyZVNoYXBlUkMoKTtcbiAgICBjb25zdCBiVGV4U2hhcGUgPSBiLmdldFRleHR1cmVTaGFwZVJDKCk7XG5cbiAgICBjb25zdCBwcm9ncmFtS2V5ID0gW1xuICAgICAgQUREX1NVTV9NVUxfRElWX1BST0csIG9wZXJhbmRBLCBhT3JpZW50YXRpb24sIG9wVHlwZSwgb3BlcmFuZEIsXG4gICAgICBiT3JpZW50YXRpb25cbiAgICBdLmpvaW4oJ18nKTtcbiAgICBjb25zdCBwcm9ncmFtID0gdGhpcy5nZXRBbmRTYXZlUHJvZ3JhbShcbiAgICAgICAgcHJvZ3JhbUtleSxcbiAgICAgICAgKCkgPT4gYWRkc3VibXVsZGl2X2dwdS5nZXRGcmFnbWVudFNoYWRlclNvdXJjZShcbiAgICAgICAgICAgIG9wZXJhbmRBLCBhT3JpZW50YXRpb24sIG9wVHlwZSwgb3BlcmFuZEIsIGJPcmllbnRhdGlvbikpO1xuXG4gICAgY29uc3QgcmVzdWx0VGV4dHVyZVNoYXBlOiBbbnVtYmVyLCBudW1iZXJdID0gW1xuICAgICAgTWF0aC5tYXgoYVRleFNoYXBlWzBdLCBsb2dpY2FsQlRleFNoYXBlWzBdKSxcbiAgICAgIE1hdGgubWF4KGFUZXhTaGFwZVsxXSwgbG9naWNhbEJUZXhTaGFwZVsxXSlcbiAgICBdO1xuXG4gICAgY29uc3QgcmVzdWx0VGV4dHVyZSA9XG4gICAgICAgIHRoaXMudGV4dHVyZU1hbmFnZXIuYWNxdWlyZVRleHR1cmUocmVzdWx0VGV4dHVyZVNoYXBlKTtcblxuICAgIGFkZHN1Ym11bGRpdl9ncHUuYWRkU3ViTXVsRGl2KFxuICAgICAgICB0aGlzLmdwZ3B1LCBwcm9ncmFtLCBhLmdldFRleHR1cmUoKSwgYVRleFNoYXBlLCBiLmdldFRleHR1cmUoKSxcbiAgICAgICAgYlRleFNoYXBlLCByZXN1bHRUZXh0dXJlLCByZXN1bHRUZXh0dXJlU2hhcGUpO1xuXG4gICAgaWYgKGNsZWFudXBCKSB7XG4gICAgICBiLmRpc3Bvc2UoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlKFxuICAgICAgICByZXN1bHRTaGFwZSxcbiAgICAgICAge3RleHR1cmU6IHJlc3VsdFRleHR1cmUsIHRleHR1cmVTaGFwZVJDOiByZXN1bHRUZXh0dXJlU2hhcGV9KTtcbiAgfVxuXG4gIHByaXZhdGUgZG9HUFVTaGFwZXNNYXRjaChhOiBOREFycmF5LCBiOiBOREFycmF5KTogYm9vbGVhbiB7XG4gICAgdXRpbC5hc3NlcnRTaGFwZXNNYXRjaChhLnNoYXBlLCBiLnNoYXBlKTtcbiAgICBpZiAoYS5pbkdQVSgpKSB7XG4gICAgICAvLyBQcmVmZXIgQiB0byBoYXZlIHRoZSBzaGFwZSBvZiBBLlxuICAgICAgYi5nZXRUZXh0dXJlU2hhcGVSQyhhLmdldFRleHR1cmVTaGFwZVJDKCkpO1xuICAgIH0gZWxzZSBpZiAoYi5pbkdQVSgpKSB7XG4gICAgICAvLyBQcmVmZXIgQSB0byBoYXZlIHRoZSBzaGFwZSBvZiBCLlxuICAgICAgYS5nZXRUZXh0dXJlU2hhcGVSQyhiLmdldFRleHR1cmVTaGFwZVJDKCkpO1xuICAgIH1cbiAgICByZXR1cm4gdXRpbC5hcnJheXNFcXVhbChhLmdldFRleHR1cmVTaGFwZVJDKCksIGIuZ2V0VGV4dHVyZVNoYXBlUkMoKSk7XG4gIH1cblxuICBnZXRUZXh0dXJlTWFuYWdlcigpOiBUZXh0dXJlTWFuYWdlciB7XG4gICAgcmV0dXJuIHRoaXMudGV4dHVyZU1hbmFnZXI7XG4gIH1cblxuICBkaXNwb3NlKCkge1xuICAgIGZvciAoY29uc3QgcHJvZ3JhbUtleSBpbiB0aGlzLnByb2dyYW1DYWNoZSkge1xuICAgICAgaWYgKHRoaXMucHJvZ3JhbUNhY2hlLmhhc093blByb3BlcnR5KHByb2dyYW1LZXkpKSB7XG4gICAgICAgIHRoaXMuZ3BncHUuZGVsZXRlUHJvZ3JhbSh0aGlzLnByb2dyYW1DYWNoZVtwcm9ncmFtS2V5XSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMudGV4dHVyZU1hbmFnZXIuZGlzcG9zZSgpO1xuXG4gICAgaWYgKHRoaXMuZ3BncHVDcmVhdGVkTG9jYWxseSkge1xuICAgICAgdGhpcy5ncGdwdS5kaXNwb3NlKCk7XG4gICAgfVxuICB9XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi4vdXRpbCc7XG5cbmltcG9ydCB7R1BHUFVDb250ZXh0fSBmcm9tICcuL3dlYmdsL2dwZ3B1X2NvbnRleHQnO1xuaW1wb3J0IHtUZXh0dXJlTWFuYWdlcn0gZnJvbSAnLi93ZWJnbC90ZXh0dXJlX21hbmFnZXInO1xuaW1wb3J0ICogYXMgd2ViZ2xfdXRpbCBmcm9tICcuL3dlYmdsL3dlYmdsX3V0aWwnO1xuXG4vLyBUaGVzZSBnbG9iYWwgdmFyaWFibGVzIG5lZWQgdG8gYmUgaW5pdGlhbGl6ZWQgdG8gbnVsbCBzbyB0aGF0IGNsb3N1cmUga25vd3Ncbi8vIG5vdCB0byBzZWFsIHRoZW0uXG4vKiogQGhpZGRlbiAqL1xuZXhwb3J0IGxldCBHUEdQVTogR1BHUFVDb250ZXh0ID0gbnVsbCE7XG4vKiogQGhpZGRlbiAqL1xuZXhwb3J0IGxldCBURVhUVVJFX01BTkFHRVI6IFRleHR1cmVNYW5hZ2VyID0gbnVsbCE7XG5cbi8qKiBAaGlkZGVuICovXG5leHBvcnQgaW50ZXJmYWNlIE5EQXJyYXlEYXRhIHtcbiAgdmFsdWVzPzogRmxvYXQzMkFycmF5O1xuICB0ZXh0dXJlPzogV2ViR0xUZXh0dXJlO1xuICAvKiogW3Jvd3MsIGNvbHVtbnNdIHNoYXBlIG9mIHRoZSB0ZXh0dXJlLiAqL1xuICB0ZXh0dXJlU2hhcGVSQz86IFtudW1iZXIsIG51bWJlcl07XG59XG5cbi8qKiBAaGlkZGVuICovXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUdQVShcbiAgICBncGdwdTogR1BHUFVDb250ZXh0LCB0ZXh0dXJlTWFuYWdlcjogVGV4dHVyZU1hbmFnZXIpIHtcbiAgR1BHUFUgPSBncGdwdTtcbiAgVEVYVFVSRV9NQU5BR0VSID0gdGV4dHVyZU1hbmFnZXI7XG59XG5cbmZ1bmN0aW9uIHRocm93SWZHUFVOb3RJbml0aWFsaXplZCgpIHtcbiAgaWYgKEdQR1BVID09IG51bGwgfHwgVEVYVFVSRV9NQU5BR0VSID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0dQVSBub3QgaW50aWFsaXplZC4nKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTkRBcnJheSB7XG4gIC8qKiBUaGUgc2hhcGUgb2YgdGhlIG5kYXJyYXkuICovXG4gIHNoYXBlOiBudW1iZXJbXTtcbiAgLyoqIE51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgbmRhcnJheS4gKi9cbiAgc2l6ZTogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBpbiBlYWNoIGRpbWVuc2lvbiB3aGVuIGluZGV4aW5nLiBTZWVcbiAgICogaHR0cHM6Ly9kb2NzLnNjaXB5Lm9yZy9kb2MvbnVtcHkvcmVmZXJlbmNlL2dlbmVyYXRlZC9udW1weS5uZGFycmF5LnN0cmlkZXMuaHRtbFxuICAgKi9cbiAgcHJvdGVjdGVkIHN0cmlkZXM6IG51bWJlcltdO1xuXG4gIHByaXZhdGUgZGF0YTogTkRBcnJheURhdGE7XG5cbiAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKHNoYXBlOiBudW1iZXJbXSwgZGF0YTogTkRBcnJheURhdGEpIHtcbiAgICAvLyBTYW5pdHkgY2hlY2tzLlxuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICBkYXRhLnZhbHVlcyAhPSBudWxsIHx8IGRhdGEudGV4dHVyZSAhPSBudWxsLFxuICAgICAgICAnRWl0aGVyIGB2YWx1ZXNgIG9yIGB0ZXh0dXJlYCBtdXN0IGJlIGRlZmluZWQnKTtcblxuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICBkYXRhLnRleHR1cmUgPT0gbnVsbCB8fCAoZGF0YS50ZXh0dXJlU2hhcGVSQyAhPSBudWxsKSxcbiAgICAgICAgJ2B0ZXh0dXJlU2hhcGVgIG11c3QgYmUgZGVmaW5lZCB3aGVuIGB0ZXh0dXJlYCBpcyBkZWZpbmVkJyk7XG5cbiAgICB0aGlzLnNpemUgPSB1dGlsLnNpemVGcm9tU2hhcGUoc2hhcGUpO1xuXG4gICAgaWYgKGRhdGEudmFsdWVzICE9IG51bGwpIHtcbiAgICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICAgIHRoaXMuc2l6ZSA9PT0gZGF0YS52YWx1ZXMubGVuZ3RoLFxuICAgICAgICAgICdDb25zdHJ1Y3RpbmcgbmRhcnJheSBvZiBzaGFwZSAoJyArIHRoaXMuc2l6ZSArICcpIHNob3VsZCBtYXRjaCB0aGUnICtcbiAgICAgICAgICAgICAgJyBsZW5ndGggb2YgdmFsdWVzICgnICsgZGF0YS52YWx1ZXMubGVuZ3RoICsgJyknKTtcbiAgICB9XG5cbiAgICB0aGlzLnNoYXBlID0gc2hhcGU7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICBjb25zdCBkaW0gPSB0aGlzLnNoYXBlLmxlbmd0aDtcblxuICAgIGlmIChkaW0gPCAyKSB7XG4gICAgICB0aGlzLnN0cmlkZXMgPSBbXTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTGFzdCBkaW1lbnNpb24gaGFzIGltcGxpY2l0IHN0cmlkZSBvZiAxLCB0aHVzIGhhdmluZyBELTEgKGluc3RlYWQgb2YgRClcbiAgICAgIC8vIHN0cmlkZXMuXG4gICAgICB0aGlzLnN0cmlkZXMgPSBuZXcgQXJyYXkoZGltIC0gMSk7XG4gICAgICB0aGlzLnN0cmlkZXNbZGltIC0gMl0gPSB0aGlzLnNoYXBlW2RpbSAtIDFdO1xuICAgICAgZm9yIChsZXQgaSA9IGRpbSAtIDM7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHRoaXMuc3RyaWRlc1tpXSA9IHRoaXMuc3RyaWRlc1tpICsgMV0gKiB0aGlzLnNoYXBlW2kgKyAxXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKiogQ3JlYXRlcyBhIG5kYXJyYXkgb2YgemVyb3Mgd2l0aCB0aGUgc3BlY2lmaWVkIHNoYXBlLiAqL1xuICBzdGF0aWMgemVyb3M8VCBleHRlbmRzIE5EQXJyYXk+KHNoYXBlOiBudW1iZXJbXSk6IFQge1xuICAgIGNvbnN0IHZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkodXRpbC5zaXplRnJvbVNoYXBlKHNoYXBlKSk7XG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxUPihzaGFwZSwge3ZhbHVlc30pO1xuICB9XG5cbiAgLyoqIENyZWF0ZXMgYSBuZGFycmF5IG9mIHplcm9zIHdpdGggdGhlIHNhbWUgc2hhcGUgYXMgdGhlIHNwZWNpZmllZCBuZGFycmF5LlxuICAgKi9cbiAgc3RhdGljIHplcm9zTGlrZTxUIGV4dGVuZHMgTkRBcnJheT4oYW5vdGhlcjogVCk6IFQge1xuICAgIHJldHVybiBOREFycmF5Lnplcm9zKGFub3RoZXIuc2hhcGUpIGFzIFQ7XG4gIH1cblxuICAvKiogQ3JlYXRlcyBhIG5kYXJyYXkgd2l0aCB0aGUgc2FtZSB2YWx1ZXMvc2hhcGUgYXMgdGhlIHNwZWNpZmllZCBuZGFycmF5LiAqL1xuICBzdGF0aWMgbGlrZTxUIGV4dGVuZHMgTkRBcnJheT4oYW5vdGhlcjogVCk6IFQge1xuICAgIGNvbnN0IHZhbHVlcyA9IGFub3RoZXIuZ2V0VmFsdWVzKCk7XG4gICAgcmV0dXJuIE5EQXJyYXkubWFrZTxUPihhbm90aGVyLnNoYXBlLCB7dmFsdWVzOiBuZXcgRmxvYXQzMkFycmF5KHZhbHVlcyl9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlcyBhIG5ldyBuZGFycmF5IHdpdGggdGhlIHByb3ZpZGVkIHNoYXBlIGFuZCB2YWx1ZXMuIFZhbHVlcyBzaG91bGQgYmUgaW5cbiAgICogYSBmbGF0IGFycmF5LlxuICAgKi9cbiAgc3RhdGljIG1ha2U8VCBleHRlbmRzIE5EQXJyYXk+KHNoYXBlOiBudW1iZXJbXSwgZGF0YTogTkRBcnJheURhdGEpOiBUIHtcbiAgICBzd2l0Y2ggKHNoYXBlLmxlbmd0aCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gbmV3IFNjYWxhcihkYXRhKSBhcyBUO1xuICAgICAgY2FzZSAxOlxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG4gICAgICAgIHJldHVybiBuZXcgQXJyYXkxRChkYXRhKSBhcyBhbnk7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheTJEKHNoYXBlIGFzIFtudW1iZXIsIG51bWJlcl0sIGRhdGEpIGFzIGFueTtcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxuICAgICAgICByZXR1cm4gbmV3IEFycmF5M0Qoc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXJdLCBkYXRhKSBhcyBhbnk7XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIHJldHVybiBuZXcgQXJyYXk0RChcbiAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG4gICAgICAgICAgICAgICAgICAgc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIGRhdGEpIGFzIGFueTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcbiAgICAgICAgcmV0dXJuIG5ldyBOREFycmF5KHNoYXBlLCBkYXRhKSBhcyBhbnk7XG4gICAgfVxuICB9XG5cbiAgLyoqIFJlc2hhcGVzIHRoZSBjdXJyZW50IG5kYXJyYXkgaW50byB0aGUgcHJvdmlkZWQgc2hhcGUuICovXG4gIHJlc2hhcGU8VCBleHRlbmRzIE5EQXJyYXk+KG5ld1NoYXBlOiBudW1iZXJbXSk6IFQge1xuICAgIGlmICh1dGlsLmFycmF5c0VxdWFsKHRoaXMuc2hhcGUsIG5ld1NoYXBlKSkge1xuICAgICAgLy8gTm8tb3AuXG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG4gICAgICByZXR1cm4gdGhpcyBhcyBhbnk7XG4gICAgfVxuXG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHRoaXMuc2l6ZSA9PT0gdXRpbC5zaXplRnJvbVNoYXBlKG5ld1NoYXBlKSxcbiAgICAgICAgJ25ldyBzaGFwZSBhbmQgb2xkIHNoYXBlIG11c3QgaGF2ZSB0aGUgc2FtZSBudW1iZXIgb2YgZWxlbWVudHMuJyk7XG5cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlPFQ+KG5ld1NoYXBlLCB0aGlzLmRhdGEpO1xuICB9XG5cbiAgYXNTY2FsYXIoKTogU2NhbGFyIHtcbiAgICB1dGlsLmFzc2VydCh0aGlzLnNpemUgPT09IDEsICdUaGUgYXJyYXkgbXVzdCBoYXZlIG9ubHkgMSBlbGVtZW50LicpO1xuICAgIHJldHVybiB0aGlzLnJlc2hhcGU8U2NhbGFyPihbXSk7XG4gIH1cblxuICBhczFEKCk6IEFycmF5MUQge1xuICAgIHJldHVybiB0aGlzLnJlc2hhcGU8QXJyYXkxRD4oW3RoaXMuc2l6ZV0pO1xuICB9XG5cbiAgYXMyRChyb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcik6IEFycmF5MkQge1xuICAgIHJldHVybiB0aGlzLnJlc2hhcGU8QXJyYXkyRD4oW3Jvd3MsIGNvbHVtbnNdKTtcbiAgfVxuXG4gIGFzM0Qocm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIsIGRlcHRoOiBudW1iZXIpOiBBcnJheTNEIHtcbiAgICByZXR1cm4gdGhpcy5yZXNoYXBlPEFycmF5M0Q+KFtyb3dzLCBjb2x1bW5zLCBkZXB0aF0pO1xuICB9XG5cbiAgYXM0RChyb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlciwgZGVwdGg6IG51bWJlciwgZGVwdGgyOiBudW1iZXIpOiBBcnJheTREIHtcbiAgICByZXR1cm4gdGhpcy5yZXNoYXBlPEFycmF5NEQ+KFtyb3dzLCBjb2x1bW5zLCBkZXB0aCwgZGVwdGgyXSk7XG4gIH1cblxuICBnZXQgcmFuaygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnNoYXBlLmxlbmd0aDtcbiAgfVxuXG4gIGdldCguLi5sb2NzOiBudW1iZXJbXSkge1xuICAgIGxldCBpbmRleCA9IGxvY3NbbG9jcy5sZW5ndGggLSAxXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY3MubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICBpbmRleCArPSB0aGlzLnN0cmlkZXNbaV0gKiBsb2NzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZXMoKVtpbmRleF07XG4gIH1cblxuICBhZGQodmFsdWU6IG51bWJlciwgLi4ubG9jczogbnVtYmVyW10pIHtcbiAgICB0aGlzLnNldCh0aGlzLmdldCguLi5sb2NzKSArIHZhbHVlLCAuLi5sb2NzKTtcbiAgfVxuXG4gIHNldCh2YWx1ZTogbnVtYmVyLCAuLi5sb2NzOiBudW1iZXJbXSkge1xuICAgIGxldCBpbmRleCA9IGxvY3NbbG9jcy5sZW5ndGggLSAxXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY3MubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICBpbmRleCArPSB0aGlzLnN0cmlkZXNbaV0gKiBsb2NzW2ldO1xuICAgIH1cbiAgICB0aGlzLmdldFZhbHVlcygpW2luZGV4XSA9IHZhbHVlO1xuICB9XG5cbiAgbG9jVG9JbmRleChsb2NzOiBudW1iZXJbXSk6IG51bWJlciB7XG4gICAgbGV0IGluZGV4ID0gbG9jc1tsb2NzLmxlbmd0aCAtIDFdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jcy5sZW5ndGggLSAxOyArK2kpIHtcbiAgICAgIGluZGV4ICs9IHRoaXMuc3RyaWRlc1tpXSAqIGxvY3NbaV07XG4gICAgfVxuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIGluZGV4VG9Mb2MoaW5kZXg6IG51bWJlcik6IG51bWJlcltdIHtcbiAgICBjb25zdCBsb2NzOiBudW1iZXJbXSA9IG5ldyBBcnJheSh0aGlzLnNoYXBlLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NzLmxlbmd0aCAtIDE7ICsraSkge1xuICAgICAgbG9jc1tpXSA9IE1hdGguZmxvb3IoaW5kZXggLyB0aGlzLnN0cmlkZXNbaV0pO1xuICAgICAgaW5kZXggLT0gbG9jc1tpXSAqIHRoaXMuc3RyaWRlc1tpXTtcbiAgICB9XG4gICAgbG9jc1tsb2NzLmxlbmd0aCAtIDFdID0gaW5kZXg7XG4gICAgcmV0dXJuIGxvY3M7XG4gIH1cblxuICBmaWxsKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLmdldFZhbHVlcygpLmZpbGwodmFsdWUpO1xuICB9XG5cbiAgZ2V0RGF0YSgpOiBOREFycmF5RGF0YSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgfVxuXG4gIGdldFZhbHVlcygpOiBGbG9hdDMyQXJyYXkge1xuICAgIGlmICh0aGlzLmRhdGEudmFsdWVzID09IG51bGwpIHtcbiAgICAgIHRocm93SWZHUFVOb3RJbml0aWFsaXplZCgpO1xuICAgICAgdGhpcy5kYXRhLnZhbHVlcyA9IEdQR1BVLmRvd25sb2FkTWF0cml4RnJvbVRleHR1cmUoXG4gICAgICAgICAgdGhpcy5kYXRhLnRleHR1cmUhLCB0aGlzLmRhdGEudGV4dHVyZVNoYXBlUkMhWzBdLFxuICAgICAgICAgIHRoaXMuZGF0YS50ZXh0dXJlU2hhcGVSQyFbMV0pO1xuICAgICAgdGhpcy5kaXNwb3NlVGV4dHVyZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kYXRhLnZhbHVlcztcbiAgfVxuXG4gIHByaXZhdGUgdXBsb2FkVG9HUFUocHJlZmVycmVkVGV4U2hhcGU/OiBbbnVtYmVyLCBudW1iZXJdKSB7XG4gICAgdGhyb3dJZkdQVU5vdEluaXRpYWxpemVkKCk7XG4gICAgdGhpcy5kYXRhLnRleHR1cmVTaGFwZVJDID0gd2ViZ2xfdXRpbC5nZXRUZXh0dXJlU2hhcGVGcm9tTG9naWNhbFNoYXBlKFxuICAgICAgICBHUEdQVS5nbCwgdGhpcy5zaGFwZSwgcHJlZmVycmVkVGV4U2hhcGUpO1xuICAgIHRoaXMuZGF0YS50ZXh0dXJlID1cbiAgICAgICAgVEVYVFVSRV9NQU5BR0VSLmFjcXVpcmVUZXh0dXJlKHRoaXMuZGF0YS50ZXh0dXJlU2hhcGVSQyk7XG5cbiAgICBHUEdQVS51cGxvYWRNYXRyaXhUb1RleHR1cmUoXG4gICAgICAgIHRoaXMuZGF0YS50ZXh0dXJlLCB0aGlzLmRhdGEudGV4dHVyZVNoYXBlUkNbMF0sXG4gICAgICAgIHRoaXMuZGF0YS50ZXh0dXJlU2hhcGVSQ1sxXSwgdGhpcy5kYXRhLnZhbHVlcyEpO1xuXG4gICAgdGhpcy5kYXRhLnZhbHVlcyA9IG51bGwhO1xuICB9XG5cbiAgZ2V0VGV4dHVyZShwcmVmZXJyZWRTaGFwZVJDPzogW251bWJlciwgbnVtYmVyXSk6IFdlYkdMVGV4dHVyZSB7XG4gICAgaWYgKHRoaXMuZGF0YS50ZXh0dXJlID09IG51bGwpIHtcbiAgICAgIHRoaXMudXBsb2FkVG9HUFUocHJlZmVycmVkU2hhcGVSQyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRhdGEudGV4dHVyZSE7XG4gIH1cblxuICBnZXRUZXh0dXJlU2hhcGVSQyhwcmVmZXJyZWRTaGFwZVJDPzogW251bWJlciwgbnVtYmVyXSk6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgIGlmICh0aGlzLmRhdGEudGV4dHVyZVNoYXBlUkMgPT0gbnVsbCkge1xuICAgICAgdGhpcy51cGxvYWRUb0dQVShwcmVmZXJyZWRTaGFwZVJDKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZGF0YS50ZXh0dXJlU2hhcGVSQyE7XG4gIH1cblxuICBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuZGF0YS52YWx1ZXMgPSBudWxsITtcbiAgICB0aGlzLnNoYXBlID0gbnVsbCE7XG4gICAgaWYgKHRoaXMuZGF0YS50ZXh0dXJlICE9IG51bGwpIHtcbiAgICAgIHRoaXMuZGlzcG9zZVRleHR1cmUoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGRpc3Bvc2VUZXh0dXJlKCkge1xuICAgIHRocm93SWZHUFVOb3RJbml0aWFsaXplZCgpO1xuICAgIFRFWFRVUkVfTUFOQUdFUi5yZWxlYXNlVGV4dHVyZShcbiAgICAgICAgdGhpcy5kYXRhLnRleHR1cmUhLCB0aGlzLmRhdGEudGV4dHVyZVNoYXBlUkMhKTtcbiAgICB0aGlzLmRhdGEudGV4dHVyZSA9IG51bGwhO1xuICAgIHRoaXMuZGF0YS50ZXh0dXJlU2hhcGVSQyA9IG51bGwhO1xuICB9XG5cbiAgaW5HUFUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS50ZXh0dXJlICE9IG51bGw7XG4gIH1cblxuICBlcXVhbHModDogTkRBcnJheSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB1dGlsLmFycmF5c0VxdWFsKHRoaXMuc2hhcGUsIHQuc2hhcGUpICYmXG4gICAgICAgIHV0aWwuYXJyYXlzRXF1YWwodGhpcy5nZXRWYWx1ZXMoKSwgdC5nZXRWYWx1ZXMoKSk7XG4gIH1cblxuICBzdGF0aWMgcmFuZDxUIGV4dGVuZHMgTkRBcnJheT4oc2hhcGU6IG51bWJlcltdLCByYW5kRnVuY3Rpb246ICgpID0+IG51bWJlcik6XG4gICAgICBUIHtcbiAgICBjb25zdCBzaXplID0gdXRpbC5zaXplRnJvbVNoYXBlKHNoYXBlKTtcbiAgICBjb25zdCB2YWx1ZXMgPSBuZXcgRmxvYXQzMkFycmF5KHNpemUpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICB2YWx1ZXNbaV0gPSByYW5kRnVuY3Rpb24oKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTkRBcnJheS5tYWtlPFQ+KHNoYXBlLCB7dmFsdWVzfSk7XG4gIH1cblxuICBzdGF0aWMgcmFuZE5vcm1hbDxUIGV4dGVuZHMgTkRBcnJheT4oc2hhcGU6IG51bWJlcltdLCBtZWFuID0gMCwgc3RkRGV2ID0gMSkge1xuICAgIHJldHVybiBOREFycmF5LnJhbmQ8VD4oc2hhcGUsICgpID0+IHV0aWwucmFuZEdhdXNzKG1lYW4sIHN0ZERldikpO1xuICB9XG5cbiAgc3RhdGljIHJhbmRUcnVuY2F0ZWROb3JtYWw8VCBleHRlbmRzIE5EQXJyYXk+KFxuICAgICAgc2hhcGU6IG51bWJlcltdLCBtZWFuID0gMCwgc3RkRGV2ID0gMSkge1xuICAgIHJldHVybiBOREFycmF5LnJhbmQ8VD4oc2hhcGUsICgpID0+IHV0aWwucmFuZEdhdXNzKG1lYW4sIHN0ZERldiwgdHJ1ZSkpO1xuICB9XG5cbiAgc3RhdGljIHJhbmRVbmlmb3JtPFQgZXh0ZW5kcyBOREFycmF5PihzaGFwZTogbnVtYmVyW10sIGE6IG51bWJlciwgYjogbnVtYmVyKSB7XG4gICAgcmV0dXJuIE5EQXJyYXkucmFuZDxUPihzaGFwZSwgKCkgPT4gdXRpbC5yYW5kVW5pZm9ybShhLCBiKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFNjYWxhciBleHRlbmRzIE5EQXJyYXkge1xuICBjb25zdHJ1Y3RvcihkYXRhOiBOREFycmF5RGF0YSkge1xuICAgIGlmIChkYXRhLnRleHR1cmUgIT0gbnVsbCkge1xuICAgICAgZGF0YS50ZXh0dXJlU2hhcGVSQyA9IFsxLCAxXTtcbiAgICB9XG4gICAgc3VwZXIoW10sIGRhdGEpO1xuICB9XG5cbiAgc3RhdGljIG5ldyh2YWx1ZTogbnVtYmVyKSB7XG4gICAgcmV0dXJuIG5ldyBTY2FsYXIoe3ZhbHVlczogbmV3IEZsb2F0MzJBcnJheShbdmFsdWVdKX0pO1xuICB9XG5cbiAgc3RhdGljIFpFUk8gPSBTY2FsYXIubmV3KDApO1xuICBzdGF0aWMgT05FID0gU2NhbGFyLm5ldygxKTtcbiAgc3RhdGljIFRXTyA9IFNjYWxhci5uZXcoMik7XG4gIHN0YXRpYyBORUdfT05FID0gU2NhbGFyLm5ldygtMSk7XG5cbiAgZ2V0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWVzKClbMF07XG4gIH1cblxuICBzZXQodmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuZ2V0VmFsdWVzKClbMF0gPSB2YWx1ZTtcbiAgfVxuXG4gIGFkZCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5nZXRWYWx1ZXMoKVswXSArPSB2YWx1ZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQXJyYXkxRCBleHRlbmRzIE5EQXJyYXkge1xuICBzaGFwZTogW251bWJlcl07XG5cbiAgY29uc3RydWN0b3IoZGF0YTogTkRBcnJheURhdGEpIHtcbiAgICBjb25zdCBzaGFwZSA9IChkYXRhLnZhbHVlcyAhPSBudWxsKSA/XG4gICAgICAgIFtkYXRhLnZhbHVlcy5sZW5ndGhdIDpcbiAgICAgICAgW3V0aWwuc2l6ZUZyb21TaGFwZShkYXRhLnRleHR1cmVTaGFwZVJDISldO1xuICAgIHN1cGVyKHNoYXBlLCBkYXRhKTtcbiAgfVxuXG4gIHN0YXRpYyBuZXcodmFsdWVzOiBGbG9hdDMyQXJyYXl8bnVtYmVyW10pIHtcbiAgICBpZiAoISh2YWx1ZXMgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpKSB7XG4gICAgICBjb25zdCBpbmZlcnJlZFNoYXBlID0gdXRpbC5pbmZlclNoYXBlKHZhbHVlcyk7XG4gICAgICB1dGlsLmFzc2VydChcbiAgICAgICAgICBpbmZlcnJlZFNoYXBlLmxlbmd0aCA9PT0gMSxcbiAgICAgICAgICBgRXJyb3IgY29uc3RydWN0aW5nIEFycmF5MUQuIFNoYXBlIG9mIHZhbHVlcyAke2luZmVycmVkU2hhcGV9IGlzIGAgK1xuICAgICAgICAgICAgICBgbm90IDEgZGltZW5zaW9uYWwuYCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQXJyYXkxRCh7dmFsdWVzOiB0b1R5cGVkQXJyYXkodmFsdWVzKX0pO1xuICB9XG5cbiAgZ2V0KGk6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWVzKClbaV07XG4gIH1cblxuICBzZXQodmFsdWU6IG51bWJlciwgaTogbnVtYmVyKSB7XG4gICAgdGhpcy5nZXRWYWx1ZXMoKVtpXSA9IHZhbHVlO1xuICB9XG5cbiAgYWRkKHZhbHVlOiBudW1iZXIsIGk6IG51bWJlcikge1xuICAgIHRoaXMuZ2V0VmFsdWVzKClbaV0gKz0gdmFsdWU7XG4gIH1cblxuICBsb2NUb0luZGV4KGxvYzogW251bWJlcl0pOiBudW1iZXIge1xuICAgIHJldHVybiBsb2NbMF07XG4gIH1cblxuICBpbmRleFRvTG9jKGluZGV4OiBudW1iZXIpOiBbbnVtYmVyXSB7XG4gICAgcmV0dXJuIFtpbmRleF07XG4gIH1cblxuICBzdGF0aWMgemVyb3Moc2hhcGU6IFtudW1iZXJdKTogQXJyYXkxRCB7XG4gICAgcmV0dXJuIE5EQXJyYXkuemVyb3M8QXJyYXkxRD4oc2hhcGUpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBcnJheTJEIGV4dGVuZHMgTkRBcnJheSB7XG4gIHNoYXBlOiBbbnVtYmVyLCBudW1iZXJdO1xuXG4gIHByaXZhdGUgc3RyaWRlMDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHNoYXBlOiBbbnVtYmVyLCBudW1iZXJdLCBkYXRhOiBOREFycmF5RGF0YSkge1xuICAgIHV0aWwuYXNzZXJ0KHNoYXBlLmxlbmd0aCA9PT0gMiwgJ1NoYXBlIHNob3VsZCBiZSBvZiBsZW5ndGggMicpO1xuICAgIHN1cGVyKHNoYXBlLCBkYXRhKTtcbiAgICB0aGlzLnN0cmlkZTAgPSB0aGlzLnN0cmlkZXNbMF07XG4gIH1cblxuICBzdGF0aWMgbmV3KFxuICAgICAgc2hhcGU6IFtudW1iZXIsIG51bWJlcl0sIHZhbHVlczogRmxvYXQzMkFycmF5fG51bWJlcltdfG51bWJlcltdW10pIHtcbiAgICBpZiAoISh2YWx1ZXMgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpKSB7XG4gICAgICBjb25zdCBpbmZlcnJlZFNoYXBlID0gdXRpbC5pbmZlclNoYXBlKHZhbHVlcyk7XG4gICAgICBpZiAoaW5mZXJyZWRTaGFwZS5sZW5ndGggPiAxKSB7XG4gICAgICAgIHV0aWwuYXNzZXJ0U2hhcGVzTWF0Y2goXG4gICAgICAgICAgICBzaGFwZSwgaW5mZXJyZWRTaGFwZSxcbiAgICAgICAgICAgIGBFcnJvciB3aGVuIGNvbnN0cnVjdGluZyBBcnJheTJELiBTaGFwZSBvZiB2YWx1ZXMgYCArXG4gICAgICAgICAgICAgICAgYCR7aW5mZXJyZWRTaGFwZX0gZG9lcyBub3QgbWF0Y2ggdGhlIHByb3ZpZGVkIHNoYXBlIGAgK1xuICAgICAgICAgICAgICAgIGAke3NoYXBlfS4gYCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgQXJyYXkyRChzaGFwZSwge3ZhbHVlczogdG9UeXBlZEFycmF5KHZhbHVlcyl9KTtcbiAgfVxuXG4gIGdldChpOiBudW1iZXIsIGo6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmdldFZhbHVlcygpW3RoaXMuc3RyaWRlMCAqIGkgKyBqXTtcbiAgfVxuXG4gIHNldCh2YWx1ZTogbnVtYmVyLCBpOiBudW1iZXIsIGo6IG51bWJlcikge1xuICAgIHRoaXMuZ2V0VmFsdWVzKClbdGhpcy5zdHJpZGUwICogaSArIGpdID0gdmFsdWU7XG4gIH1cblxuICBhZGQodmFsdWU6IG51bWJlciwgaTogbnVtYmVyLCBqOiBudW1iZXIpIHtcbiAgICB0aGlzLmdldFZhbHVlcygpW3RoaXMuc3RyaWRlMCAqIGkgKyBqXSArPSB2YWx1ZTtcbiAgfVxuXG4gIGxvY1RvSW5kZXgobG9jczogW251bWJlciwgbnVtYmVyXSk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuc3RyaWRlMCAqIGxvY3NbMF0gKyBsb2NzWzFdO1xuICB9XG5cbiAgaW5kZXhUb0xvYyhpbmRleDogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgcmV0dXJuIFtNYXRoLmZsb29yKGluZGV4IC8gdGhpcy5zdHJpZGUwKSwgaW5kZXggJSB0aGlzLnN0cmlkZTBdO1xuICB9XG5cbiAgc3RhdGljIHplcm9zKHNoYXBlOiBbbnVtYmVyLCBudW1iZXJdKTogQXJyYXkyRCB7XG4gICAgcmV0dXJuIE5EQXJyYXkuemVyb3M8QXJyYXkyRD4oc2hhcGUpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBcnJheTNEIGV4dGVuZHMgTkRBcnJheSB7XG4gIHNoYXBlOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHByaXZhdGUgc3RyaWRlMDogbnVtYmVyO1xuICBwcml2YXRlIHN0cmlkZTE6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihzaGFwZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdLCBkYXRhOiBOREFycmF5RGF0YSkge1xuICAgIHV0aWwuYXNzZXJ0KHNoYXBlLmxlbmd0aCA9PT0gMywgJ1NoYXBlIHNob3VsZCBiZSBvZiBsZW5ndGggMycpO1xuICAgIHN1cGVyKHNoYXBlLCBkYXRhKTtcbiAgICB0aGlzLnN0cmlkZTAgPSB0aGlzLnN0cmlkZXNbMF07XG4gICAgdGhpcy5zdHJpZGUxID0gdGhpcy5zdHJpZGVzWzFdO1xuICB9XG5cbiAgc3RhdGljIG5ldyhcbiAgICAgIHNoYXBlOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gICAgICB2YWx1ZXM6IEZsb2F0MzJBcnJheXxudW1iZXJbXXxudW1iZXJbXVtdW10pIHtcbiAgICBpZiAoISh2YWx1ZXMgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpKSB7XG4gICAgICBjb25zdCBpbmZlcnJlZFNoYXBlID0gdXRpbC5pbmZlclNoYXBlKHZhbHVlcyk7XG4gICAgICBpZiAoaW5mZXJyZWRTaGFwZS5sZW5ndGggPiAxKSB7XG4gICAgICAgIHV0aWwuYXNzZXJ0U2hhcGVzTWF0Y2goXG4gICAgICAgICAgICBzaGFwZSwgaW5mZXJyZWRTaGFwZSxcbiAgICAgICAgICAgIGBFcnJvciB3aGVuIGNvbnN0cnVjdGluZyBBcnJheTNELiBTaGFwZSBvZiB2YWx1ZXMgYCArXG4gICAgICAgICAgICAgICAgYCR7aW5mZXJyZWRTaGFwZX0gZG9lcyBub3QgbWF0Y2ggdGhlIHByb3ZpZGVkIHNoYXBlIGAgK1xuICAgICAgICAgICAgICAgIGAke3NoYXBlfS4gYCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgQXJyYXkzRChzaGFwZSwge3ZhbHVlczogdG9UeXBlZEFycmF5KHZhbHVlcyl9KTtcbiAgfVxuXG4gIGdldChpOiBudW1iZXIsIGo6IG51bWJlciwgazogbnVtYmVyKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWVzKClbdGhpcy5zdHJpZGUwICogaSArIHRoaXMuc3RyaWRlMSAqIGogKyBrXTtcbiAgfVxuXG4gIHNldCh2YWx1ZTogbnVtYmVyLCBpOiBudW1iZXIsIGo6IG51bWJlciwgazogbnVtYmVyKSB7XG4gICAgdGhpcy5nZXRWYWx1ZXMoKVt0aGlzLnN0cmlkZTAgKiBpICsgdGhpcy5zdHJpZGUxICogaiArIGtdID0gdmFsdWU7XG4gIH1cblxuICBhZGQodmFsdWU6IG51bWJlciwgaTogbnVtYmVyLCBqOiBudW1iZXIsIGs6IG51bWJlcikge1xuICAgIHRoaXMuZ2V0VmFsdWVzKClbdGhpcy5zdHJpZGUwICogaSArIHRoaXMuc3RyaWRlMSAqIGogKyBrXSArPSB2YWx1ZTtcbiAgfVxuXG4gIGxvY1RvSW5kZXgobG9jczogW251bWJlciwgbnVtYmVyLCBudW1iZXJdKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5zdHJpZGUwICogbG9jc1swXSArIHRoaXMuc3RyaWRlMSAqIGxvY3NbMV0gKyBsb2NzWzJdO1xuICB9XG5cbiAgaW5kZXhUb0xvYyhpbmRleDogbnVtYmVyKTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdIHtcbiAgICBjb25zdCBpID0gTWF0aC5mbG9vcihpbmRleCAvIHRoaXMuc3RyaWRlMCk7XG4gICAgaW5kZXggLT0gaSAqIHRoaXMuc3RyaWRlMDtcbiAgICByZXR1cm4gW2ksIE1hdGguZmxvb3IoaW5kZXggLyB0aGlzLnN0cmlkZTEpLCBpbmRleCAlIHRoaXMuc3RyaWRlMV07XG4gIH1cblxuICBzdGF0aWMgemVyb3Moc2hhcGU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSk6IEFycmF5M0Qge1xuICAgIHJldHVybiBOREFycmF5Lnplcm9zPEFycmF5M0Q+KHNoYXBlKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQXJyYXk0RCBleHRlbmRzIE5EQXJyYXkge1xuICBzaGFwZTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHByaXZhdGUgc3RyaWRlMDogbnVtYmVyO1xuICBwcml2YXRlIHN0cmlkZTE6IG51bWJlcjtcbiAgcHJpdmF0ZSBzdHJpZGUyOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3Ioc2hhcGU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLCBkYXRhOiBOREFycmF5RGF0YSkge1xuICAgIHV0aWwuYXNzZXJ0KHNoYXBlLmxlbmd0aCA9PT0gNCwgJ1NoYXBlIHNob3VsZCBiZSBvZiBsZW5ndGggNCcpO1xuICAgIHN1cGVyKHNoYXBlLCBkYXRhKTtcbiAgICB0aGlzLnN0cmlkZTAgPSB0aGlzLnN0cmlkZXNbMF07XG4gICAgdGhpcy5zdHJpZGUxID0gdGhpcy5zdHJpZGVzWzFdO1xuICAgIHRoaXMuc3RyaWRlMiA9IHRoaXMuc3RyaWRlc1syXTtcbiAgfVxuXG4gIHN0YXRpYyBuZXcoXG4gICAgICBzaGFwZTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gICAgICB2YWx1ZXM6IEZsb2F0MzJBcnJheXxudW1iZXJbXXxudW1iZXJbXVtdW11bXSkge1xuICAgIGlmICghKHZhbHVlcyBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSkpIHtcbiAgICAgIGNvbnN0IGluZmVycmVkU2hhcGUgPSB1dGlsLmluZmVyU2hhcGUodmFsdWVzKTtcbiAgICAgIGlmIChpbmZlcnJlZFNoYXBlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdXRpbC5hc3NlcnRTaGFwZXNNYXRjaChcbiAgICAgICAgICAgIHNoYXBlLCBpbmZlcnJlZFNoYXBlLFxuICAgICAgICAgICAgYEVycm9yIHdoZW4gY29uc3RydWN0aW5nIEFycmF5NEQuIFNoYXBlIG9mIHZhbHVlcyBgICtcbiAgICAgICAgICAgICAgICBgJHtpbmZlcnJlZFNoYXBlfSBkb2VzIG5vdCBtYXRjaCB0aGUgcHJvdmlkZWQgc2hhcGUgYCArXG4gICAgICAgICAgICAgICAgYCR7c2hhcGV9LiBgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBcnJheTREKHNoYXBlLCB7dmFsdWVzOiB0b1R5cGVkQXJyYXkodmFsdWVzKX0pO1xuICB9XG5cbiAgZ2V0KGk6IG51bWJlciwgajogbnVtYmVyLCBrOiBudW1iZXIsIGw6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmdldFZhbHVlcygpXG4gICAgICAgIFt0aGlzLnN0cmlkZTAgKiBpICsgdGhpcy5zdHJpZGUxICogaiArIHRoaXMuc3RyaWRlMiAqIGsgKyBsXTtcbiAgfVxuXG4gIHNldCh2YWx1ZTogbnVtYmVyLCBpOiBudW1iZXIsIGo6IG51bWJlciwgazogbnVtYmVyLCBsOiBudW1iZXIpIHtcbiAgICB0aGlzLmdldFZhbHVlcygpXG4gICAgICAgIFt0aGlzLnN0cmlkZTAgKiBpICsgdGhpcy5zdHJpZGUxICogaiArIHRoaXMuc3RyaWRlMiAqIGsgKyBsXSA9IHZhbHVlO1xuICB9XG5cbiAgYWRkKHZhbHVlOiBudW1iZXIsIGk6IG51bWJlciwgajogbnVtYmVyLCBrOiBudW1iZXIsIGw6IG51bWJlcikge1xuICAgIHRoaXMuZ2V0VmFsdWVzKClcbiAgICAgICAgW3RoaXMuc3RyaWRlMCAqIGkgKyB0aGlzLnN0cmlkZTEgKiBqICsgdGhpcy5zdHJpZGUyICogayArIGxdICs9IHZhbHVlO1xuICB9XG5cbiAgbG9jVG9JbmRleChsb2NzOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuc3RyaWRlMCAqIGxvY3NbMF0gKyB0aGlzLnN0cmlkZTEgKiBsb2NzWzFdICtcbiAgICAgICAgdGhpcy5zdHJpZGUyICogbG9jc1syXSArIGxvY3NbM107XG4gIH1cblxuICBpbmRleFRvTG9jKGluZGV4OiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSB7XG4gICAgY29uc3QgaSA9IE1hdGguZmxvb3IoaW5kZXggLyB0aGlzLnN0cmlkZTApO1xuICAgIGluZGV4IC09IGkgKiB0aGlzLnN0cmlkZTA7XG4gICAgY29uc3QgaiA9IE1hdGguZmxvb3IoaW5kZXggLyB0aGlzLnN0cmlkZTEpO1xuICAgIGluZGV4IC09IGogKiB0aGlzLnN0cmlkZTE7XG4gICAgcmV0dXJuIFtpLCBqLCBNYXRoLmZsb29yKGluZGV4IC8gdGhpcy5zdHJpZGUyKSwgaW5kZXggJSB0aGlzLnN0cmlkZTJdO1xuICB9XG5cbiAgc3RhdGljIHplcm9zKHNoYXBlOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSk6IEFycmF5NEQge1xuICAgIHJldHVybiBOREFycmF5Lnplcm9zPEFycmF5NEQ+KHNoYXBlKTtcbiAgfVxufVxuXG50eXBlIEFycmF5RGF0YSA9IEZsb2F0MzJBcnJheXxudW1iZXJbXXxudW1iZXJbXVtdfG51bWJlcltdW11bXXxudW1iZXJbXVtdW11bXTtcblxuZnVuY3Rpb24gdG9UeXBlZEFycmF5KGE6IEFycmF5RGF0YSk6IEZsb2F0MzJBcnJheSB7XG4gIHJldHVybiAoYSBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSkgPyBhIDogbmV3IEZsb2F0MzJBcnJheSh1dGlsLmZsYXR0ZW4oYSkpO1xufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge0dQR1BVQ29udGV4dH0gZnJvbSAnLi9ncGdwdV9jb250ZXh0JztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50U2hhZGVyU291cmNlKCk6IHN0cmluZyB7XG4gIHJldHVybiBgXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIG1hdHJpeEE7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgbWF0cml4QjtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCBtYXRyaXhBU2NhbGFyO1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIG1hdHJpeEJTY2FsYXI7XG4gICAgdmFyeWluZyB2ZWMyIHJlc3VsdFVWO1xuXG4gICAgY29uc3QgdmVjMiBoYWxmVGV4ZWwgPSB2ZWMyKDAuNSwgMC41KTtcblxuICAgIHZvaWQgbWFpbigpIHtcbiAgICAgIGZsb2F0IGEgPSB0ZXh0dXJlMkQobWF0cml4QSwgcmVzdWx0VVYpLnI7XG4gICAgICBmbG9hdCBiID0gdGV4dHVyZTJEKG1hdHJpeEIsIHJlc3VsdFVWKS5yO1xuICAgICAgZmxvYXQgYVNjYWxhciA9IHRleHR1cmUyRChtYXRyaXhBU2NhbGFyLCBoYWxmVGV4ZWwpLnI7XG4gICAgICBmbG9hdCBiU2NhbGFyID0gdGV4dHVyZTJEKG1hdHJpeEJTY2FsYXIsIGhhbGZUZXhlbCkucjtcbiAgICAgIHZlYzIgYWJTY2FsZWQgPSB2ZWMyKGEsIGIpICogdmVjMihhU2NhbGFyLCBiU2NhbGFyKTtcbiAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoYWJTY2FsZWQueCArIGFiU2NhbGVkLnksIDAsIDAsIDApO1xuICAgIH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkU2NhbGVkTWF0cmljZXMoXG4gICAgZ3BncHU6IEdQR1BVQ29udGV4dCwgYWRkU2NhbGVkTWF0cmljZXNQcm9ncmFtOiBXZWJHTFByb2dyYW0sXG4gICAgYTogV2ViR0xUZXh0dXJlLCBiOiBXZWJHTFRleHR1cmUsIHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyLFxuICAgIGFTY2FsYXI6IFdlYkdMVGV4dHVyZSwgYlNjYWxhcjogV2ViR0xUZXh0dXJlLCByZXN1bHQ6IFdlYkdMVGV4dHVyZSkge1xuICBncGdwdS5zZXRPdXRwdXRNYXRyaXhUZXh0dXJlKHJlc3VsdCwgcm93cywgY29sdW1ucyk7XG4gIGdwZ3B1LnNldFByb2dyYW0oYWRkU2NhbGVkTWF0cmljZXNQcm9ncmFtKTtcbiAgZ3BncHUuc2V0SW5wdXRNYXRyaXhUZXh0dXJlKGEsICdtYXRyaXhBJywgMCk7XG4gIGdwZ3B1LnNldElucHV0TWF0cml4VGV4dHVyZShiLCAnbWF0cml4QicsIDEpO1xuICBncGdwdS5zZXRJbnB1dE1hdHJpeFRleHR1cmUoYVNjYWxhciwgJ21hdHJpeEFTY2FsYXInLCAyKTtcbiAgZ3BncHUuc2V0SW5wdXRNYXRyaXhUZXh0dXJlKGJTY2FsYXIsICdtYXRyaXhCU2NhbGFyJywgMyk7XG4gIGdwZ3B1LmV4ZWN1dGVQcm9ncmFtKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGxvYWRBZGRTY2FsZWRNYXRyaWNlc0Rvd25sb2FkKFxuICAgIGE6IEZsb2F0MzJBcnJheSwgYjogRmxvYXQzMkFycmF5LCByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcixcbiAgICBhU2NhbGFyOiBudW1iZXIsIGJTY2FsYXI6IG51bWJlcik6IEZsb2F0MzJBcnJheSB7XG4gIGNvbnN0IGdwZ3B1ID0gbmV3IEdQR1BVQ29udGV4dCgpO1xuICBjb25zdCBwcm9ncmFtOiBXZWJHTFByb2dyYW0gPSBncGdwdS5jcmVhdGVQcm9ncmFtKGdldEZyYWdtZW50U2hhZGVyU291cmNlKCkpO1xuXG4gIGNvbnN0IGFUZXggPSBncGdwdS5jcmVhdGVNYXRyaXhUZXh0dXJlKHJvd3MsIGNvbHVtbnMpO1xuICBjb25zdCBiVGV4ID0gZ3BncHUuY3JlYXRlTWF0cml4VGV4dHVyZShyb3dzLCBjb2x1bW5zKTtcbiAgY29uc3QgYVNjYWxhclRleCA9IGdwZ3B1LmNyZWF0ZU1hdHJpeFRleHR1cmUoMSwgMSk7XG4gIGNvbnN0IGJTY2FsYXJUZXggPSBncGdwdS5jcmVhdGVNYXRyaXhUZXh0dXJlKDEsIDEpO1xuICBjb25zdCByZXN1bHRUZXggPSBncGdwdS5jcmVhdGVNYXRyaXhUZXh0dXJlKHJvd3MsIGNvbHVtbnMpO1xuXG4gIGdwZ3B1LnVwbG9hZE1hdHJpeFRvVGV4dHVyZShhVGV4LCByb3dzLCBjb2x1bW5zLCBhKTtcbiAgZ3BncHUudXBsb2FkTWF0cml4VG9UZXh0dXJlKGJUZXgsIHJvd3MsIGNvbHVtbnMsIGIpO1xuICBncGdwdS51cGxvYWRNYXRyaXhUb1RleHR1cmUoYVNjYWxhclRleCwgMSwgMSwgbmV3IEZsb2F0MzJBcnJheShbYVNjYWxhcl0pKTtcbiAgZ3BncHUudXBsb2FkTWF0cml4VG9UZXh0dXJlKGJTY2FsYXJUZXgsIDEsIDEsIG5ldyBGbG9hdDMyQXJyYXkoW2JTY2FsYXJdKSk7XG5cbiAgYWRkU2NhbGVkTWF0cmljZXMoXG4gICAgICBncGdwdSwgcHJvZ3JhbSwgYVRleCwgYlRleCwgcm93cywgY29sdW1ucywgYVNjYWxhclRleCwgYlNjYWxhclRleCxcbiAgICAgIHJlc3VsdFRleCk7XG5cbiAgY29uc3QgcmVzdWx0ID0gZ3BncHUuZG93bmxvYWRNYXRyaXhGcm9tVGV4dHVyZShyZXN1bHRUZXgsIHJvd3MsIGNvbHVtbnMpO1xuXG4gIGdwZ3B1LmRlbGV0ZU1hdHJpeFRleHR1cmUoYVRleCk7XG4gIGdwZ3B1LmRlbGV0ZU1hdHJpeFRleHR1cmUoYlRleCk7XG4gIGdwZ3B1LmRlbGV0ZU1hdHJpeFRleHR1cmUocmVzdWx0VGV4KTtcbiAgZ3BncHUuZGVsZXRlTWF0cml4VGV4dHVyZShhU2NhbGFyVGV4KTtcbiAgZ3BncHUuZGVsZXRlTWF0cml4VGV4dHVyZShiU2NhbGFyVGV4KTtcbiAgZ3BncHUuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTtcbiAgZ3BncHUuZGlzcG9zZSgpO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCB7TWF0cml4T3JpZW50YXRpb259IGZyb20gJy4uL21hdGgnO1xuXG5pbXBvcnQgKiBhcyBiaW5hcnlvcF9ncHUgZnJvbSAnLi9iaW5hcnlvcF9ncHUnO1xuaW1wb3J0IHtHUEdQVUNvbnRleHR9IGZyb20gJy4vZ3BncHVfY29udGV4dCc7XG5cbmV4cG9ydCB0eXBlIE9wZXJhdGlvbiA9ICcrJyB8ICctJyB8ICcqJyB8ICcvJztcblxuZXhwb3J0IGVudW0gT3BlcmFuZFR5cGUge1xuICBNQVRSSVgsXG4gIFNDQUxBUlxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoXG4gICAgYVR5cGU6IE9wZXJhbmRUeXBlLCBhT3JpZW50YXRpb246IE1hdHJpeE9yaWVudGF0aW9uLCBvcDogT3BlcmF0aW9uLFxuICAgIGJUeXBlOiBPcGVyYW5kVHlwZSwgYk9yaWVudGF0aW9uOiBNYXRyaXhPcmllbnRhdGlvbik6IHN0cmluZyB7XG4gIGNvbnN0IGFVViA9IG9wZXJhbmRUb1NoYWRlclNuaXBwZXQoYVR5cGUsIGFPcmllbnRhdGlvbik7XG4gIGNvbnN0IGJVViA9IG9wZXJhbmRUb1NoYWRlclNuaXBwZXQoYlR5cGUsIGJPcmllbnRhdGlvbik7XG4gIGNvbnN0IHJlc3VsdE9wID0gYGdsX0ZyYWdDb2xvciA9IHZlYzQoYSAke29wfSBiLCAwLCAwLCAwKTtgO1xuICByZXR1cm4gYmluYXJ5b3BfZ3B1LmdldEZyYWdtZW50U2hhZGVyU291cmNlKGFVViwgYlVWLCByZXN1bHRPcCk7XG59XG5cbmZ1bmN0aW9uIG9wZXJhbmRUb1NoYWRlclNuaXBwZXQoXG4gICAgb3BlcmFuZDogT3BlcmFuZFR5cGUsIG9yaWVudGF0aW9uOiBNYXRyaXhPcmllbnRhdGlvbik6IHN0cmluZyB7XG4gIHN3aXRjaCAob3BlcmFuZCkge1xuICAgIGNhc2UgT3BlcmFuZFR5cGUuTUFUUklYOlxuICAgICAgcmV0dXJuICdyZXN1bHRVVicgK1xuICAgICAgICAgIChvcmllbnRhdGlvbiA9PT0gTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUiA/ICcuc3QnIDogJy50cycpO1xuICAgIGNhc2UgT3BlcmFuZFR5cGUuU0NBTEFSOlxuICAgICAgcmV0dXJuICd2ZWMyKDAuNSwgMC41KSc7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBvcGVyYW5kIHR5cGUnKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkU3ViTXVsRGl2KFxuICAgIGdwZ3B1OiBHUEdQVUNvbnRleHQsIHByb2dyYW06IFdlYkdMUHJvZ3JhbSwgYTogV2ViR0xUZXh0dXJlLFxuICAgIGFTaGFwZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSwgYjogV2ViR0xUZXh0dXJlLFxuICAgIGJTaGFwZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSwgcmVzdWx0OiBXZWJHTFRleHR1cmUsXG4gICAgcmVzdWx0U2hhcGVSb3dDb2w6IFtudW1iZXIsIG51bWJlcl0pIHtcbiAgcmV0dXJuIGJpbmFyeW9wX2dwdS5iaW5hcnlPcChcbiAgICAgIGdwZ3B1LCBwcm9ncmFtLCBhLCBhU2hhcGVSb3dDb2wsIGIsIGJTaGFwZVJvd0NvbCwgcmVzdWx0LFxuICAgICAgcmVzdWx0U2hhcGVSb3dDb2wpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBsb2FkU2NhbGFyUGx1c01hdHJpeERvd25sb2FkKFxuICAgIGE6IG51bWJlciwgYjogRmxvYXQzMkFycmF5LCBiU2hhcGU6IFtudW1iZXIsIG51bWJlcl0sXG4gICAgYk9yaWVudGF0aW9uID0gTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUik6IEZsb2F0MzJBcnJheSB7XG4gIGNvbnN0IHNyYyA9IGdldEZyYWdtZW50U2hhZGVyU291cmNlKFxuICAgICAgT3BlcmFuZFR5cGUuU0NBTEFSLCBNYXRyaXhPcmllbnRhdGlvbi5SRUdVTEFSLCAnKycsIE9wZXJhbmRUeXBlLk1BVFJJWCxcbiAgICAgIGJPcmllbnRhdGlvbik7XG4gIHJldHVybiBiaW5hcnlvcF9ncHUudXBsb2FkQmluYXJ5T3BEb3dubG9hZChcbiAgICAgIG5ldyBGbG9hdDMyQXJyYXkoW2FdKSwgWzEsIDFdLCBiLCBiU2hhcGUsIHNyYyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGxvYWRNYXRyaXhNaW51c1NjYWxhckRvd25sb2FkKFxuICAgIGE6IEZsb2F0MzJBcnJheSwgYVNoYXBlOiBbbnVtYmVyLCBudW1iZXJdLCBiOiBudW1iZXIsXG4gICAgYU9yaWVudGF0aW9uID0gTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUik6IEZsb2F0MzJBcnJheSB7XG4gIGNvbnN0IHNyYyA9IGdldEZyYWdtZW50U2hhZGVyU291cmNlKFxuICAgICAgT3BlcmFuZFR5cGUuTUFUUklYLCBhT3JpZW50YXRpb24sICctJywgT3BlcmFuZFR5cGUuU0NBTEFSLFxuICAgICAgTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUik7XG4gIHJldHVybiBiaW5hcnlvcF9ncHUudXBsb2FkQmluYXJ5T3BEb3dubG9hZChcbiAgICAgIGEsIGFTaGFwZSwgbmV3IEZsb2F0MzJBcnJheShbYl0pLCBbMSwgMV0sIHNyYyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGxvYWRTY2FsYXJNaW51c01hdHJpeERvd25sb2FkKFxuICAgIGE6IG51bWJlciwgYjogRmxvYXQzMkFycmF5LCBiU2hhcGU6IFtudW1iZXIsIG51bWJlcl0sXG4gICAgYk9yaWVudGF0aW9uID0gTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUik6IEZsb2F0MzJBcnJheSB7XG4gIGNvbnN0IHNyYyA9IGdldEZyYWdtZW50U2hhZGVyU291cmNlKFxuICAgICAgT3BlcmFuZFR5cGUuU0NBTEFSLCBNYXRyaXhPcmllbnRhdGlvbi5SRUdVTEFSLCAnLScsIE9wZXJhbmRUeXBlLk1BVFJJWCxcbiAgICAgIGJPcmllbnRhdGlvbik7XG4gIHJldHVybiBiaW5hcnlvcF9ncHUudXBsb2FkQmluYXJ5T3BEb3dubG9hZChcbiAgICAgIG5ldyBGbG9hdDMyQXJyYXkoW2FdKSwgWzEsIDFdLCBiLCBiU2hhcGUsIHNyYyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGxvYWRTY2FsYXJUaW1lc01hdHJpeERvd25sb2FkKFxuICAgIGE6IG51bWJlciwgYjogRmxvYXQzMkFycmF5LCBiU2hhcGU6IFtudW1iZXIsIG51bWJlcl0sXG4gICAgYk9yaWVudGF0aW9uID0gTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUik6IEZsb2F0MzJBcnJheSB7XG4gIGNvbnN0IHNyYyA9IGdldEZyYWdtZW50U2hhZGVyU291cmNlKFxuICAgICAgT3BlcmFuZFR5cGUuU0NBTEFSLCBNYXRyaXhPcmllbnRhdGlvbi5SRUdVTEFSLCAnKicsIE9wZXJhbmRUeXBlLk1BVFJJWCxcbiAgICAgIGJPcmllbnRhdGlvbik7XG4gIHJldHVybiBiaW5hcnlvcF9ncHUudXBsb2FkQmluYXJ5T3BEb3dubG9hZChcbiAgICAgIG5ldyBGbG9hdDMyQXJyYXkoW2FdKSwgWzEsIDFdLCBiLCBiU2hhcGUsIHNyYyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGxvYWRNYXRyaXhUaW1lc01hdHJpeERvd25sb2FkKFxuICAgIGE6IEZsb2F0MzJBcnJheSwgYjogRmxvYXQzMkFycmF5LCBzaGFwZTogW251bWJlciwgbnVtYmVyXSxcbiAgICBhT3JpZW50YXRpb24gPSBNYXRyaXhPcmllbnRhdGlvbi5SRUdVTEFSLFxuICAgIGJPcmllbnRhdGlvbiA9IE1hdHJpeE9yaWVudGF0aW9uLlJFR1VMQVIpOiBGbG9hdDMyQXJyYXkge1xuICBjb25zdCBzcmMgPSBnZXRGcmFnbWVudFNoYWRlclNvdXJjZShcbiAgICAgIE9wZXJhbmRUeXBlLk1BVFJJWCwgYU9yaWVudGF0aW9uLCAnKicsIE9wZXJhbmRUeXBlLk1BVFJJWCwgYk9yaWVudGF0aW9uKTtcbiAgcmV0dXJuIGJpbmFyeW9wX2dwdS51cGxvYWRCaW5hcnlPcERvd25sb2FkKGEsIHNoYXBlLCBiLCBzaGFwZSwgc3JjKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwbG9hZE1hdHJpeFBsdXNNYXRyaXhEb3dubG9hZChcbiAgICBhOiBGbG9hdDMyQXJyYXksIGI6IEZsb2F0MzJBcnJheSwgc2hhcGU6IFtudW1iZXIsIG51bWJlcl0sXG4gICAgYU9yaWVudGF0aW9uID0gTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUixcbiAgICBiT3JpZW50YXRpb24gPSBNYXRyaXhPcmllbnRhdGlvbi5SRUdVTEFSKTogRmxvYXQzMkFycmF5IHtcbiAgY29uc3Qgc3JjID0gZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoXG4gICAgICBPcGVyYW5kVHlwZS5NQVRSSVgsIGFPcmllbnRhdGlvbiwgJysnLCBPcGVyYW5kVHlwZS5NQVRSSVgsIGJPcmllbnRhdGlvbik7XG4gIHJldHVybiBiaW5hcnlvcF9ncHUudXBsb2FkQmluYXJ5T3BEb3dubG9hZChhLCBzaGFwZSwgYiwgc2hhcGUsIHNyYyk7XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCAqIGFzIGFyZ21pbm1heF9ncHUgZnJvbSAnLi9hcmdtaW5tYXhfZ3B1JztcbmltcG9ydCB7R1BHUFVDb250ZXh0fSBmcm9tICcuL2dwZ3B1X2NvbnRleHQnO1xuaW1wb3J0IHtJU19OQU5fU0hBREVSX0ZVTkN9IGZyb20gJy4vd2ViZ2xfdXRpbCc7XG5cbmZ1bmN0aW9uIGdldEZyYWdtZW50U2hhZGVyUHJvbG9ndWVTb3VyY2UoKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgbWF0cml4QTtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCBtYXRyaXhCO1xuICAgIHZhcnlpbmcgdmVjMiByZXN1bHRVVjtgO1xufVxuXG5mdW5jdGlvbiBnZXRGcmFnbWVudFNoYWRlck1haW5Tb3VyY2UoKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBcbiAgICB2b2lkIG1haW4oKSB7XG4gICAgICBmbG9hdCBhcmdNYXhBID0gZ2V0QXJnTWluTWF4KG1hdHJpeEEpO1xuICAgICAgZmxvYXQgYXJnTWF4QiA9IGdldEFyZ01pbk1heChtYXRyaXhCKTtcbiAgICAgIGZsb2F0IHZhbHVlO1xuICAgICAgaWYgKGlzTmFOKGFyZ01heEEpKSB7XG4gICAgICAgIHZhbHVlID0gYXJnTWF4QTtcbiAgICAgIH0gZWxzZSBpZiAoaXNOYU4oYXJnTWF4QikpIHtcbiAgICAgICAgdmFsdWUgPSBhcmdNYXhCO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBmbG9hdChhcmdNYXhBID09IGFyZ01heEIpO1xuICAgICAgfVxuICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh2YWx1ZSwgMCwgMCwgMCk7XG4gICAgfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcmdNYXhFcXVhbHNGcmFnbWVudFNoYWRlclNvdXJjZShcbiAgICByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiBbXG4gICAgZ2V0RnJhZ21lbnRTaGFkZXJQcm9sb2d1ZVNvdXJjZSgpLFxuICAgIGFyZ21pbm1heF9ncHUuZ2V0RnJhZ21lbnRTaGFkZXJHZXRBcmdNaW5NYXhTb3VyY2UoJz4nLCByb3dzLCBjb2x1bW5zKSxcbiAgICBnZXRGcmFnbWVudFNoYWRlck1haW5Tb3VyY2UoKVxuICBdLmpvaW4oJ1xcbicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXJnTWF4RXF1YWxzKFxuICAgIGdwZ3B1OiBHUEdQVUNvbnRleHQsIG1heEVxdWFsc1Byb2dyYW06IFdlYkdMUHJvZ3JhbSwgYTogV2ViR0xUZXh0dXJlLFxuICAgIGI6IFdlYkdMVGV4dHVyZSwgbnVtUm93czogbnVtYmVyLCBudW1Db2xzOiBudW1iZXIsIHJlc3VsdDogV2ViR0xUZXh0dXJlKSB7XG4gIGdwZ3B1LnNldE91dHB1dE1hdHJpeFRleHR1cmUocmVzdWx0LCAxLCAxKTtcbiAgZ3BncHUuc2V0UHJvZ3JhbShtYXhFcXVhbHNQcm9ncmFtKTtcbiAgZ3BncHUuc2V0SW5wdXRNYXRyaXhUZXh0dXJlKGEsICdtYXRyaXhBJywgMCk7XG4gIGdwZ3B1LnNldElucHV0TWF0cml4VGV4dHVyZShiLCAnbWF0cml4QicsIDEpO1xuICBncGdwdS5leGVjdXRlUHJvZ3JhbSgpO1xufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge0dQR1BVQ29udGV4dH0gZnJvbSAnLi9ncGdwdV9jb250ZXh0JztcbmltcG9ydCB7SVNfTkFOX1NIQURFUl9GVU5DfSBmcm9tICcuL3dlYmdsX3V0aWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRTaGFkZXJQcm9sb2d1ZVNvdXJjZSgpOiBzdHJpbmcge1xuICByZXR1cm4gYFxuICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCBtYXRyaXhBO1xuICAgIHZhcnlpbmcgdmVjMiByZXN1bHRVVjtgO1xufVxuXG5mdW5jdGlvbiBnZXRGcmFnbWVudFNoYWRlck1haW5Tb3VyY2UoKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBcbiAgICB2b2lkIG1haW4oKSB7XG4gICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGdldEFyZ01pbk1heChtYXRyaXhBKSwgMCwgMCwgMCk7XG4gICAgfWA7XG59XG5cbmZ1bmN0aW9uIGdldEFyZ01pbk1heEZyYWdtZW50U2hhZGVyU291cmNlKFxuICAgIHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyLCBjb21wT3A6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBbXG4gICAgZ2V0RnJhZ21lbnRTaGFkZXJQcm9sb2d1ZVNvdXJjZSgpLFxuICAgIGdldEZyYWdtZW50U2hhZGVyR2V0QXJnTWluTWF4U291cmNlKGNvbXBPcCwgcm93cywgY29sdW1ucyksXG4gICAgZ2V0RnJhZ21lbnRTaGFkZXJNYWluU291cmNlKClcbiAgXS5qb2luKCdcXG4nKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFyZ01pbkZyYWdtZW50U2hhZGVyU291cmNlKFxuICAgIHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIGdldEFyZ01pbk1heEZyYWdtZW50U2hhZGVyU291cmNlKHJvd3MsIGNvbHVtbnMsICc8Jyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcmdNYXhGcmFnbWVudFNoYWRlclNvdXJjZShcbiAgICByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiBnZXRBcmdNaW5NYXhGcmFnbWVudFNoYWRlclNvdXJjZShyb3dzLCBjb2x1bW5zLCAnPicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRTaGFkZXJHZXRBcmdNaW5NYXhTb3VyY2UoXG4gICAgY29tcE9wOiBzdHJpbmcsIHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyKSB7XG4gIHJldHVybiBgXG4gICAgY29uc3QgdmVjMiBkaW1DUiA9IHZlYzIoJHtjb2x1bW5zfS4wLCAke3Jvd3N9LjApO1xuICAgIGNvbnN0IHZlYzIgaGFsZkNSID0gdmVjMigwLjUsIDAuNSk7XG5cbiAgICAke0lTX05BTl9TSEFERVJfRlVOQ31cblxuICAgIGZsb2F0IGdldEFyZ01pbk1heChpbiBzYW1wbGVyMkQgbWF0cml4KSB7XG4gICAgICB2ZWMyIGJlc3RDUiA9IHZlYzIoMCwgMCk7XG4gICAgICBmbG9hdCBiZXN0VmFsdWUgPSB0ZXh0dXJlMkQobWF0cml4LCBiZXN0Q1IpLnI7XG5cbiAgICAgIGZvciAoZmxvYXQgYyA9IDAuMDsgYyA8IGRpbUNSLng7IGMgKz0gMS4wKSB7XG4gICAgICAgIGZvciAoZmxvYXQgciA9IDAuMDsgciA8IGRpbUNSLnk7IHIgKz0gMS4wKSB7XG4gICAgICAgICAgdmVjMiBjciA9IHZlYzIoYywgcik7XG4gICAgICAgICAgdmVjMiB1diA9IChjciArIGhhbGZDUikgLyBkaW1DUjtcbiAgICAgICAgICBmbG9hdCB2YWx1ZSA9IHRleHR1cmUyRChtYXRyaXgsIHV2KS5yO1xuICAgICAgICAgIGlmIChpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHZhbHVlICR7Y29tcE9wfSBiZXN0VmFsdWUpIHtcbiAgICAgICAgICAgIGJlc3RWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgYmVzdENSID0gY3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYmVzdENSLnggKyAoYmVzdENSLnkgKiBkaW1DUi54KTtcbiAgICB9XG4gIGA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcmdNaW5NYXgoXG4gICAgZ3BncHU6IEdQR1BVQ29udGV4dCwgbWluTWF4UHJvZ3JhbTogV2ViR0xQcm9ncmFtLCBhOiBXZWJHTFRleHR1cmUsXG4gICAgYU51bVJvd3M6IG51bWJlciwgYU51bUNvbHM6IG51bWJlciwgcmVzdWx0OiBXZWJHTFRleHR1cmUpIHtcbiAgZ3BncHUuc2V0T3V0cHV0TWF0cml4VGV4dHVyZShyZXN1bHQsIDEsIDEpO1xuICBncGdwdS5zZXRQcm9ncmFtKG1pbk1heFByb2dyYW0pO1xuICBncGdwdS5zZXRJbnB1dE1hdHJpeFRleHR1cmUoYSwgJ21hdHJpeEEnLCAwKTtcbiAgZ3BncHUuZXhlY3V0ZVByb2dyYW0oKTtcbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtHUEdQVUNvbnRleHR9IGZyb20gJy4vZ3BncHVfY29udGV4dCc7XG5pbXBvcnQgKiBhcyBwb29sX2dwdSBmcm9tICcuL3Bvb2xfZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50U2hhZGVyQXZnUG9vbFNvdXJjZShcbiAgICB4U2hhcGVSQ0Q6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgZlNpemU6IG51bWJlciwgc3RyaWRlOiBudW1iZXIsXG4gICAgcGFkOiBudW1iZXIpIHtcbiAgcmV0dXJuIHBvb2xfZ3B1LmdldEZyYWdtZW50U2hhZGVyUG9vbENvbW1vblNvdXJjZShcbiAgICAgIHhTaGFwZVJDRCwgZlNpemUsIHN0cmlkZSwgcGFkLCAnYXZnJywgZmFsc2UpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXZnUG9vbChcbiAgICBncGdwdTogR1BHUFVDb250ZXh0LCBwcm9ncmFtOiBXZWJHTFByb2dyYW0sIHg6IFdlYkdMVGV4dHVyZSxcbiAgICByZXN1bHQ6IFdlYkdMVGV4dHVyZSwgcmVzdWx0U2hhcGVSb3dDb2w6IFtudW1iZXIsIG51bWJlcl0pIHtcbiAgcG9vbF9ncHUucG9vbENvbW1vbihncGdwdSwgcHJvZ3JhbSwgeCwgcmVzdWx0LCByZXN1bHRTaGFwZVJvd0NvbCk7XG59IiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge0dQR1BVQ29udGV4dH0gZnJvbSAnLi9ncGdwdV9jb250ZXh0JztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50U2hhZGVyU291cmNlKFxuICAgIHhUZXhTaGFwZVJDOiBbbnVtYmVyLCBudW1iZXJdLCBtZWFuVGV4U2hhcGVSQzogW251bWJlciwgbnVtYmVyXSxcbiAgICB2YXJpYW5jZVRleFNoYXBlUkM6IFtudW1iZXIsIG51bWJlcl0sXG4gICAgb2Zmc2V0VGV4U2hhcGVSQzogW251bWJlciwgbnVtYmVyXXxudWxsLFxuICAgIHNjYWxlVGV4U2hhcGVSQz86IFtudW1iZXIsIG51bWJlcl18bnVsbCwgdmFyaWFuY2VFcHNpbG9uID0gMC4wMDEpOiBzdHJpbmcge1xuICBsZXQgb2Zmc2V0U2FtcGxlclNuaXBwZXQgPSAnJztcbiAgbGV0IG9mZnNldFNoYXBlSW5pdGlhbGl6YXRpb25TbmlwcGV0ID0gJyc7XG4gIGxldCBvZmZzZXRDb29yZHNTbmlwcGV0ID0gJyc7XG4gIGxldCBvZmZzZXRVVlNuaXBwZXQgPSAnJztcbiAgbGV0IG9mZnNldFZhbHVlU25pcHBldCA9ICcnO1xuICBsZXQgb2Zmc2V0T3BlcmF0aW9uU25pcHBldCA9ICcwLjAnO1xuXG4gIGxldCBzY2FsZVNhbXBsZXJTbmlwcGV0ID0gJyc7XG4gIGxldCBzY2FsZVNoYXBlSW5pdGlhbGl6YXRpb25TbmlwcGV0ID0gJyc7XG4gIGxldCBzY2FsZUNvb3Jkc1NuaXBwZXQgPSAnJztcbiAgbGV0IHNjYWxlVVZTbmlwcGV0ID0gJyc7XG4gIGxldCBzY2FsZVZhbHVlU25pcHBldCA9ICcnO1xuICBsZXQgc2NhbGVPcGVyYXRpb25TbmlwcGV0ID0gJyc7XG5cbiAgaWYgKG9mZnNldFRleFNoYXBlUkMgIT0gbnVsbCkge1xuICAgIG9mZnNldFNhbXBsZXJTbmlwcGV0ID0gJ3VuaWZvcm0gc2FtcGxlcjJEIG9mZnNldDsnO1xuICAgIG9mZnNldFNoYXBlSW5pdGlhbGl6YXRpb25TbmlwcGV0ID0gYGNvbnN0IHZlYzIgb2Zmc2V0U2hhcGVDUiA9IHZlYzIoXG4gICAgICAgICAgICAke29mZnNldFRleFNoYXBlUkNbMV19LCAke29mZnNldFRleFNoYXBlUkNbMF19KTtgO1xuICAgIG9mZnNldENvb3Jkc1NuaXBwZXQgPSAndmVjMiBvZmZzZXRDb29yZHNDUiA9IG1vZCh5VGV4Q1IsIG9mZnNldFNoYXBlQ1IpOyc7XG4gICAgb2Zmc2V0VVZTbmlwcGV0ID1cbiAgICAgICAgJ3ZlYzIgb2Zmc2V0VVYgPSAob2Zmc2V0Q29vcmRzQ1IgKyBoYWxmQ1IpIC8gb2Zmc2V0U2hhcGVDUjsnO1xuICAgIG9mZnNldFZhbHVlU25pcHBldCA9ICdmbG9hdCBvZmZzZXRWYWx1ZSA9IHRleHR1cmUyRChvZmZzZXQsIG9mZnNldFVWKS5yOyc7XG4gICAgb2Zmc2V0T3BlcmF0aW9uU25pcHBldCA9ICdvZmZzZXRWYWx1ZSc7XG4gIH1cblxuICBpZiAoc2NhbGVUZXhTaGFwZVJDICE9IG51bGwpIHtcbiAgICBzY2FsZVNhbXBsZXJTbmlwcGV0ID0gJ3VuaWZvcm0gc2FtcGxlcjJEIHNjYWxlOyc7XG4gICAgc2NhbGVTaGFwZUluaXRpYWxpemF0aW9uU25pcHBldCA9IGBjb25zdCB2ZWMyIHNjYWxlU2hhcGVDUiA9IHZlYzIoXG4gICAgICAgICAgICAke3NjYWxlVGV4U2hhcGVSQ1sxXX0sICR7c2NhbGVUZXhTaGFwZVJDWzBdfSk7YDtcbiAgICBzY2FsZUNvb3Jkc1NuaXBwZXQgPSAndmVjMiBzY2FsZUNvb3Jkc0NSID0gbW9kKHlUZXhDUiwgc2NhbGVTaGFwZUNSKTsnO1xuICAgIHNjYWxlVVZTbmlwcGV0ID0gJ3ZlYzIgc2NhbGVVViA9IChzY2FsZUNvb3Jkc0NSICsgaGFsZkNSKSAvIHNjYWxlU2hhcGVDUjsnO1xuICAgIHNjYWxlVmFsdWVTbmlwcGV0ID0gJ2Zsb2F0IHNjYWxlVmFsdWUgPSB0ZXh0dXJlMkQoc2NhbGUsIHNjYWxlVVYpLnI7JztcbiAgICBzY2FsZU9wZXJhdGlvblNuaXBwZXQgPSAnaW52ICo9IHNjYWxlVmFsdWU7JztcbiAgfVxuXG4gIHJldHVybiBgXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHg7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgbWVhbjtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB2YXJpYW5jZTtcbiAgICAke29mZnNldFNhbXBsZXJTbmlwcGV0fVxuICAgICR7c2NhbGVTYW1wbGVyU25pcHBldH1cblxuICAgIHZhcnlpbmcgdmVjMiByZXN1bHRVVjtcblxuICAgIGNvbnN0IHZlYzIgeFNoYXBlQ1IgPSB2ZWMyKCR7eFRleFNoYXBlUkNbMV19LCAke3hUZXhTaGFwZVJDWzBdfSk7XG4gICAgY29uc3QgdmVjMiBtZWFuU2hhcGVDUiA9IHZlYzIoJHttZWFuVGV4U2hhcGVSQ1sxXX0sICR7bWVhblRleFNoYXBlUkNbMF19KTtcbiAgICBjb25zdCB2ZWMyIHZhcmlhbmNlU2hhcGVDUiA9IHZlYzIoXG4gICAgICAgICR7dmFyaWFuY2VUZXhTaGFwZVJDWzFdfSwgJHt2YXJpYW5jZVRleFNoYXBlUkNbMF19KTtcblxuICAgICR7b2Zmc2V0U2hhcGVJbml0aWFsaXphdGlvblNuaXBwZXR9XG4gICAgJHtzY2FsZVNoYXBlSW5pdGlhbGl6YXRpb25TbmlwcGV0fVxuXG4gICAgY29uc3QgdmVjMiBoYWxmQ1IgPSB2ZWMyKDAuNSwgMC41KTtcbiAgICBjb25zdCBmbG9hdCB2YXJpYW5jZUVwc2lsb24gPSAke3ZhcmlhbmNlRXBzaWxvbn07XG5cbiAgICB2b2lkIG1haW4oKSB7XG4gICAgICB2ZWMyIHlUZXhDUiA9IGZsb29yKGdsX0ZyYWdDb29yZC54eSk7XG5cbiAgICAgIHZlYzIgbWVhbkNvb3Jkc0NSID0gbW9kKHlUZXhDUiwgbWVhblNoYXBlQ1IpO1xuICAgICAgdmVjMiB2YXJpYW5jZUNvb3Jkc0NSID0gbW9kKHlUZXhDUiwgdmFyaWFuY2VTaGFwZUNSKTtcbiAgICAgICR7b2Zmc2V0Q29vcmRzU25pcHBldH1cbiAgICAgICR7c2NhbGVDb29yZHNTbmlwcGV0fVxuXG4gICAgICB2ZWMyIG1lYW5VViA9IChtZWFuQ29vcmRzQ1IgKyBoYWxmQ1IpIC8gbWVhblNoYXBlQ1I7XG4gICAgICB2ZWMyIHZhcmlhbmNlVVYgPSAodmFyaWFuY2VDb29yZHNDUiArIGhhbGZDUikgLyB2YXJpYW5jZVNoYXBlQ1I7XG4gICAgICAke29mZnNldFVWU25pcHBldH1cbiAgICAgICR7c2NhbGVVVlNuaXBwZXR9XG5cbiAgICAgIGZsb2F0IHhWYWx1ZSA9IHRleHR1cmUyRCh4LCByZXN1bHRVVikucjtcbiAgICAgIGZsb2F0IG1lYW5WYWx1ZSA9IHRleHR1cmUyRChtZWFuLCBtZWFuVVYpLnI7XG4gICAgICBmbG9hdCB2YXJpYW5jZVZhbHVlID0gdGV4dHVyZTJEKHZhcmlhbmNlLCB2YXJpYW5jZVVWKS5yO1xuICAgICAgJHtvZmZzZXRWYWx1ZVNuaXBwZXR9XG4gICAgICAke3NjYWxlVmFsdWVTbmlwcGV0fVxuXG4gICAgICBmbG9hdCBpbnYgPSAxLjAgLyBzcXJ0KHZhcmlhbmNlVmFsdWUgKyB2YXJpYW5jZUVwc2lsb24pO1xuICAgICAgJHtzY2FsZU9wZXJhdGlvblNuaXBwZXR9XG4gICAgICBmbG9hdCB4VGltZXNJbnYgPSB4VmFsdWUgKiBpbnY7XG4gICAgICBmbG9hdCBtZWFuVGltZXNJbnZXaXRoT2Zmc2V0ID0gJHtvZmZzZXRPcGVyYXRpb25TbmlwcGV0fVxuICAgICAgICAgIC0gbWVhblZhbHVlICogaW52O1xuXG4gICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHhUaW1lc0ludiArIG1lYW5UaW1lc0ludldpdGhPZmZzZXQsIDAsIDAsIDApO1xuICAgIH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmF0Y2hOb3JtYWxpemF0aW9uKFxuICAgIGdwZ3B1OiBHUEdQVUNvbnRleHQsIHByb2dyYW06IFdlYkdMUHJvZ3JhbSwgeDogV2ViR0xUZXh0dXJlLFxuICAgIHhTaGFwZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSwgbWVhbjogV2ViR0xUZXh0dXJlLFxuICAgIG1lYW5TaGFwZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSwgdmFyaWFuY2U6IFdlYkdMVGV4dHVyZSxcbiAgICB2YXJpYW5jZVNoYXBlUm93Q29sOiBbbnVtYmVyLCBudW1iZXJdLCBvZmZzZXQ6IFdlYkdMVGV4dHVyZXxudWxsLFxuICAgIG9mZnNldFNoYXBlUm93Q29sOiBbbnVtYmVyLCBudW1iZXJdfG51bGwsIHNjYWxlOiBXZWJHTFRleHR1cmV8bnVsbCxcbiAgICBzY2FsZVNoYXBlUm93Q29sOiBbbnVtYmVyLCBudW1iZXJdfG51bGwsIHJlc3VsdDogV2ViR0xUZXh0dXJlLFxuICAgIHJlc3VsdFNoYXBlUm93Q29sOiBbbnVtYmVyLCBudW1iZXJdKSB7XG4gIGdwZ3B1LnNldE91dHB1dE1hdHJpeFRleHR1cmUoXG4gICAgICByZXN1bHQsIHJlc3VsdFNoYXBlUm93Q29sWzBdLCByZXN1bHRTaGFwZVJvd0NvbFsxXSk7XG4gIGdwZ3B1LnNldFByb2dyYW0ocHJvZ3JhbSk7XG4gIGdwZ3B1LnNldElucHV0TWF0cml4VGV4dHVyZSh4LCAneCcsIDApO1xuICBncGdwdS5zZXRJbnB1dE1hdHJpeFRleHR1cmUobWVhbiwgJ21lYW4nLCAxKTtcbiAgZ3BncHUuc2V0SW5wdXRNYXRyaXhUZXh0dXJlKHZhcmlhbmNlLCAndmFyaWFuY2UnLCAyKTtcbiAgbGV0IG5leHRJbmRleCA9IDM7XG4gIGlmIChvZmZzZXQgIT0gbnVsbCkge1xuICAgIGdwZ3B1LnNldElucHV0TWF0cml4VGV4dHVyZShvZmZzZXQsICdvZmZzZXQnLCBuZXh0SW5kZXgpO1xuICAgIG5leHRJbmRleCsrO1xuICB9XG4gIGlmIChzY2FsZSAhPSBudWxsKSB7XG4gICAgZ3BncHUuc2V0SW5wdXRNYXRyaXhUZXh0dXJlKHNjYWxlLCAnc2NhbGUnLCBuZXh0SW5kZXgpO1xuICB9XG4gIGdwZ3B1LmV4ZWN1dGVQcm9ncmFtKCk7XG59IiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge0dQR1BVQ29udGV4dH0gZnJvbSAnLi9ncGdwdV9jb250ZXh0JztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50U2hhZGVyU291cmNlKFxuICAgIGFSZXN1bHRVVjogc3RyaW5nLCBiUmVzdWx0VVY6IHN0cmluZywgb3A6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBgXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIG1hdHJpeEE7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgbWF0cml4QjtcbiAgICB2YXJ5aW5nIHZlYzIgcmVzdWx0VVY7XG5cbiAgICB2b2lkIG1haW4oKSB7XG4gICAgICBmbG9hdCBhID0gdGV4dHVyZTJEKG1hdHJpeEEsICR7YVJlc3VsdFVWfSkucjtcbiAgICAgIGZsb2F0IGIgPSB0ZXh0dXJlMkQobWF0cml4QiwgJHtiUmVzdWx0VVZ9KS5yO1xuICAgICAgJHtvcH1cbiAgICB9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJpbmFyeU9wKFxuICAgIGdwZ3B1OiBHUEdQVUNvbnRleHQsIHByb2dyYW06IFdlYkdMUHJvZ3JhbSwgYTogV2ViR0xUZXh0dXJlLFxuICAgIGFTaGFwZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSwgYjogV2ViR0xUZXh0dXJlLFxuICAgIGJTaGFwZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSwgcmVzdWx0OiBXZWJHTFRleHR1cmUsXG4gICAgcmVzdWx0U2hhcGVSb3dDb2w6IFtudW1iZXIsIG51bWJlcl0pIHtcbiAgZ3BncHUuc2V0T3V0cHV0TWF0cml4VGV4dHVyZShcbiAgICAgIHJlc3VsdCwgcmVzdWx0U2hhcGVSb3dDb2xbMF0sIHJlc3VsdFNoYXBlUm93Q29sWzFdKTtcbiAgZ3BncHUuc2V0UHJvZ3JhbShwcm9ncmFtKTtcbiAgZ3BncHUuc2V0SW5wdXRNYXRyaXhUZXh0dXJlKGEsICdtYXRyaXhBJywgMCk7XG4gIGdwZ3B1LnNldElucHV0TWF0cml4VGV4dHVyZShiLCAnbWF0cml4QicsIDEpO1xuICBncGdwdS5leGVjdXRlUHJvZ3JhbSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBsb2FkQmluYXJ5T3BEb3dubG9hZChcbiAgICBhOiBGbG9hdDMyQXJyYXksIGFTaGFwZTogW251bWJlciwgbnVtYmVyXSwgYjogRmxvYXQzMkFycmF5LFxuICAgIGJTaGFwZTogW251bWJlciwgbnVtYmVyXSwgZnJhZ21lbnRTaGFkZXJTb3VyY2U6IHN0cmluZyk6IEZsb2F0MzJBcnJheSB7XG4gIGNvbnN0IGdwZ3B1ID0gbmV3IEdQR1BVQ29udGV4dCgpO1xuICBjb25zdCBwcm9ncmFtID0gZ3BncHUuY3JlYXRlUHJvZ3JhbShmcmFnbWVudFNoYWRlclNvdXJjZSk7XG5cbiAgY29uc3QgYVRleHR1cmU6IFdlYkdMVGV4dHVyZSA9XG4gICAgICBncGdwdS5jcmVhdGVNYXRyaXhUZXh0dXJlKGFTaGFwZVswXSwgYVNoYXBlWzFdKTtcbiAgY29uc3QgYlRleHR1cmU6IFdlYkdMVGV4dHVyZSA9XG4gICAgICBncGdwdS5jcmVhdGVNYXRyaXhUZXh0dXJlKGJTaGFwZVswXSwgYlNoYXBlWzFdKTtcblxuICBjb25zdCByZXN1bHRTaGFwZTogW251bWJlciwgbnVtYmVyXSA9XG4gICAgICBbTWF0aC5tYXgoYVNoYXBlWzBdLCBiU2hhcGVbMF0pLCBNYXRoLm1heChhU2hhcGVbMV0sIGJTaGFwZVsxXSldO1xuXG4gIGNvbnN0IHJlc3VsdFRleHR1cmU6IFdlYkdMVGV4dHVyZSA9XG4gICAgICBncGdwdS5jcmVhdGVNYXRyaXhUZXh0dXJlKHJlc3VsdFNoYXBlWzBdLCByZXN1bHRTaGFwZVsxXSk7XG5cbiAgZ3BncHUudXBsb2FkTWF0cml4VG9UZXh0dXJlKGFUZXh0dXJlLCBhU2hhcGVbMF0sIGFTaGFwZVsxXSwgYSk7XG4gIGdwZ3B1LnVwbG9hZE1hdHJpeFRvVGV4dHVyZShiVGV4dHVyZSwgYlNoYXBlWzBdLCBiU2hhcGVbMV0sIGIpO1xuXG4gIGJpbmFyeU9wKFxuICAgICAgZ3BncHUsIHByb2dyYW0sIGFUZXh0dXJlLCBhU2hhcGUsIGJUZXh0dXJlLCBiU2hhcGUsIHJlc3VsdFRleHR1cmUsXG4gICAgICByZXN1bHRTaGFwZSk7XG4gIGNvbnN0IHJlc3VsdCA9IGdwZ3B1LmRvd25sb2FkTWF0cml4RnJvbVRleHR1cmUoXG4gICAgICByZXN1bHRUZXh0dXJlLCByZXN1bHRTaGFwZVswXSwgcmVzdWx0U2hhcGVbMV0pO1xuXG4gIGdwZ3B1LmRlbGV0ZU1hdHJpeFRleHR1cmUoYVRleHR1cmUpO1xuICBncGdwdS5kZWxldGVNYXRyaXhUZXh0dXJlKGJUZXh0dXJlKTtcbiAgZ3BncHUuZGVsZXRlTWF0cml4VGV4dHVyZShyZXN1bHRUZXh0dXJlKTtcbiAgZ3BncHUuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTtcbiAgZ3BncHUuZGlzcG9zZSgpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQgKiBhcyBjb252X3V0aWwgZnJvbSAnLi4vY29udl91dGlsJztcbmltcG9ydCB7R1BHUFVDb250ZXh0fSBmcm9tICcuL2dwZ3B1X2NvbnRleHQnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoXG4gICAgeDFTaGFwZVJDRDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdLCB4MlNoYXBlUkNEOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gICAgcmVzdWx0U2hhcGVSQ0Q6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgYXhpczogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3QgeDFUZXhTaGFwZVJDID0gY29udl91dGlsLmNvbXB1dGVUZXhTaGFwZUZyb20zRCh4MVNoYXBlUkNEKTtcbiAgY29uc3QgeDJUZXhTaGFwZVJDID0gY29udl91dGlsLmNvbXB1dGVUZXhTaGFwZUZyb20zRCh4MlNoYXBlUkNEKTtcblxuICBjb25zdCB5QXhlcyA9IFsneVInLCAneUMnLCAneUQnXTtcbiAgY29uc3QgY29uY2F0QXhpcyA9IHlBeGVzW2F4aXNdO1xuXG4gIHJldHVybiBgXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHgxO1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHgyO1xuXG4gICAgY29uc3QgdmVjMiB4MVNoYXBlQ1IgPSB2ZWMyKCR7eDFUZXhTaGFwZVJDWzFdfSwgJHt4MVRleFNoYXBlUkNbMF19KTtcbiAgICBjb25zdCB2ZWMyIHgyU2hhcGVDUiA9IHZlYzIoJHt4MlRleFNoYXBlUkNbMV19LjAsICR7eDJUZXhTaGFwZVJDWzBdfS4wKTtcblxuICAgIGNvbnN0IHZlYzIgaGFsZkNSID0gdmVjMigwLjUsIDAuNSk7XG5cbiAgICB2b2lkIG1haW4oKSB7XG4gICAgICB2ZWMyIHlUZXhDUiA9IGZsb29yKGdsX0ZyYWdDb29yZC54eSk7XG5cbiAgICAgIC8vIE1hcCBmcm9tIDJEICh5VGV4UiwgeVRleEMpIHRvIDNEICh5UiwgeUMsIHlEKS5cbiAgICAgIGZsb2F0IHlSID0geVRleENSLnk7XG4gICAgICBmbG9hdCB5QyA9IGZsb29yKHlUZXhDUi54IC8gJHtyZXN1bHRTaGFwZVJDRFsyXX0uMCk7XG4gICAgICBmbG9hdCB5RCA9IG1vZCh5VGV4Q1IueCwgJHtyZXN1bHRTaGFwZVJDRFsyXX0uMCk7XG5cbiAgICAgIGZsb2F0IHZhbHVlID0gMC4wO1xuXG4gICAgICBpZiAoJHtjb25jYXRBeGlzfSA8ICR7eDFTaGFwZVJDRFtheGlzXX0uMCkge1xuICAgICAgICAvLyBNYXAgeVIsIHlDLCB5RCBiYWNrIHRvIHgxIGNvb3JkaW5hdGVzLlxuICAgICAgICB2ZWMyIHgxQ1IgPSB2ZWMyKHlDICogJHt4MVNoYXBlUkNEWzJdfS4wICsgeUQsIHlSKTtcbiAgICAgICAgdmVjMiB4MVVWID0gKHgxQ1IgKyBoYWxmQ1IpIC8geDFTaGFwZUNSO1xuICAgICAgICB2YWx1ZSA9IHRleHR1cmUyRCh4MSwgeDFVVikucjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICR7Y29uY2F0QXhpc30gPSAke2NvbmNhdEF4aXN9IC0gJHt4MVNoYXBlUkNEW2F4aXNdfS4wO1xuXG4gICAgICAgIC8vIE1hcCB5UiwgeUMsIHlEIGJhY2sgdG8geDIgY29vcmRpbmF0ZXMuXG4gICAgICAgIHZlYzIgeDJDUiA9IHZlYzIoeUMgKiAke3gyU2hhcGVSQ0RbMl19LjAgKyB5RCwgeVIpO1xuICAgICAgICB2ZWMyIHgyVVYgPSAoeDJDUiArIGhhbGZDUikgLyB4MlNoYXBlQ1I7XG4gICAgICAgIHZhbHVlID0gdGV4dHVyZTJEKHgyLCB4MlVWKS5yO1xuICAgICAgfVxuXG4gICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHZhbHVlLCAwLjAsIDAuMCwgMC4wKTtcbiAgICB9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdDNEKFxuICAgIGdwZ3B1OiBHUEdQVUNvbnRleHQsIHByb2dyYW06IFdlYkdMUHJvZ3JhbSwgeDE6IFdlYkdMVGV4dHVyZSxcbiAgICB4MjogV2ViR0xUZXh0dXJlLCByZXN1bHQ6IFdlYkdMVGV4dHVyZSwgcmVzdWx0U2hhcGVSQzogW251bWJlciwgbnVtYmVyXSkge1xuICBncGdwdS5zZXRPdXRwdXRNYXRyaXhUZXh0dXJlKHJlc3VsdCwgcmVzdWx0U2hhcGVSQ1swXSwgcmVzdWx0U2hhcGVSQ1sxXSk7XG4gIGdwZ3B1LnNldFByb2dyYW0ocHJvZ3JhbSk7XG4gIGdwZ3B1LnNldElucHV0TWF0cml4VGV4dHVyZSh4MSwgJ3gxJywgMCk7XG4gIGdwZ3B1LnNldElucHV0TWF0cml4VGV4dHVyZSh4MiwgJ3gyJywgMSk7XG4gIGdwZ3B1LmV4ZWN1dGVQcm9ncmFtKCk7XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCAqIGFzIGNvbnZfdXRpbCBmcm9tICcuLi9jb252X3V0aWwnO1xuXG5pbXBvcnQgKiBhcyBjb252X2dwdSBmcm9tICcuL2NvbnZfZ3B1JztcbmltcG9ydCB7R1BHUFVDb250ZXh0fSBmcm9tICcuL2dwZ3B1X2NvbnRleHQnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRTaGFkZXJEZXJXZWlnaHRzU291cmNlKFxuICAgIHhTaGFwZVJvd0NvbERlcHRoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIGZTaXplOiBudW1iZXIsXG4gICAgb3V0cHV0RGVwdGg6IG51bWJlciwgc3RyaWRlOiBudW1iZXIsIHplcm9QYWQ6IG51bWJlcikge1xuICBjb25zdCBnZXRNYXRyaXhWYWx1ZU9yWmVyb1BhZCA9XG4gICAgICBjb252X2dwdS5nZXRGcmFnbWVudFNoYWRlckdldE1hdHJpeFZhbHVlT3JaZXJvUGFkU291cmNlKCk7XG4gIGNvbnN0IGlucHV0RGVwdGggPSB4U2hhcGVSb3dDb2xEZXB0aFsyXTtcblxuICBjb25zdCB4VGV4U2hhcGVSQyA9IGNvbnZfdXRpbC5jb21wdXRlVGV4U2hhcGVGcm9tM0QoeFNoYXBlUm93Q29sRGVwdGgpO1xuXG4gIGNvbnN0IHlTaGFwZSA9IGNvbnZfdXRpbC5jb21wdXRlT3V0cHV0U2hhcGUzRChcbiAgICAgIHhTaGFwZVJvd0NvbERlcHRoLCBmU2l6ZSwgb3V0cHV0RGVwdGgsIHN0cmlkZSwgemVyb1BhZCk7XG4gIGNvbnN0IHlOdW1Sb3dzID0geVNoYXBlWzBdO1xuICBjb25zdCB5TnVtQ29scyA9IHlTaGFwZVsxXTtcbiAgY29uc3QgeVRleFNoYXBlUkMgPSBjb252X3V0aWwuY29tcHV0ZVRleFNoYXBlRnJvbTNEKHlTaGFwZSk7XG5cbiAgY29uc3QgZlNpemVUaW1lc0lucHV0RGVwdGggPSBmU2l6ZSAqIGlucHV0RGVwdGg7XG5cbiAgY29uc3QgcHJvbG9ndWUgPSBgXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHg7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgZHk7XG4gIGA7XG5cbiAgcmV0dXJuIHByb2xvZ3VlICsgJ1xcbicgKyBnZXRNYXRyaXhWYWx1ZU9yWmVyb1BhZCArICdcXG4nICtcbiAgICAgIGBcbiAgICBjb25zdCB2ZWMyIGhhbGZDUiA9IHZlYzIoMC41LCAwLjUpO1xuICAgIGNvbnN0IHZlYzIgeFNoYXBlQ1IgPSB2ZWMyKCR7eFRleFNoYXBlUkNbMV19LCAke3hUZXhTaGFwZVJDWzBdfSk7XG4gICAgY29uc3QgdmVjMiBkeVNoYXBlQ1IgPSB2ZWMyKCR7eVRleFNoYXBlUkNbMV19LCAke3lUZXhTaGFwZVJDWzBdfSk7XG5cbiAgICB2b2lkIG1haW4oKSB7XG4gICAgICB2ZWMyIHdUZXhDUiA9IGZsb29yKGdsX0ZyYWdDb29yZC54eSk7XG5cbiAgICAgIC8vIE1hcCBmcm9tIDJEICh3VGV4Uiwgd1RleEMpIHRvIDREICh3Uiwgd0MsIGQxLCBkMikuXG4gICAgICBmbG9hdCB3UiA9IGZsb29yKHdUZXhDUi55IC8gJHtmU2l6ZVRpbWVzSW5wdXREZXB0aH0uMCk7XG4gICAgICBmbG9hdCB3VGV4UkxlZnRvdmVyID0gd1RleENSLnkgLSB3UiAqICR7ZlNpemVUaW1lc0lucHV0RGVwdGh9LjA7XG4gICAgICBmbG9hdCB3QyA9IGZsb29yKHdUZXhSTGVmdG92ZXIgLyAke2lucHV0RGVwdGh9LjApO1xuICAgICAgZmxvYXQgZDEgPSBtb2Qod1RleFJMZWZ0b3ZlciwgJHtpbnB1dERlcHRofS4wKTtcbiAgICAgIGZsb2F0IGQyID0gd1RleENSLng7XG5cbiAgICAgIC8vIENvbnZvbHZlIHgoPywgPywgZDEpIHdpdGggZHkoOiwgOiwgZDIpIHRvIGdldCBkdyh3Uiwgd0MsIGQxLCBkMikuXG4gICAgICAvLyA/ID0gdG8gYmUgZGV0ZXJtaW5lZC4gOiA9IGFjcm9zcyBhbGwgdmFsdWVzIGluIHRoYXQgYXhpcy5cbiAgICAgIGZsb2F0IGRvdFByb2QgPSAwLjA7XG4gICAgICBmb3IgKGZsb2F0IHlSID0gMC4wOyB5UiA8ICR7eU51bVJvd3N9LjA7IHlSICs9IDEuMCkge1xuICAgICAgICBmbG9hdCB4UiA9IHdSICsgeVIgKiAke3N0cmlkZX0uMCAtICR7emVyb1BhZH0uMDtcbiAgICAgICAgZmxvYXQgeFRleFIgPSB4UjtcbiAgICAgICAgZmxvYXQgeVRleFIgPSB5UjtcbiAgICAgICAgZm9yIChmbG9hdCB5QyA9IDAuMDsgeUMgPCAke3lOdW1Db2xzfS4wOyB5QyArPSAxLjApIHtcbiAgICAgICAgICBmbG9hdCB4QyA9IHdDICsgeUMgKiAke3N0cmlkZX0uMCAtICR7emVyb1BhZH0uMDtcblxuICAgICAgICAgIC8vIE1hcCBmcm9tIDNEICh4UiwgeEMsIGQxKSB0byAyRCAoeFRleFIsIHhUZXhDKS5cbiAgICAgICAgICAvLyBNYXAgZnJvbSAzRCAoeVIsIHlDLCBkMikgdG8gMkQgKHlUZXhSLCB5VGV4QykuXG4gICAgICAgICAgdmVjMiB4eVRleEMgPSB2ZWMyKHhDLCB5QykgKiB2ZWMyKCR7aW5wdXREZXB0aH0uMCwgJHtvdXRwdXREZXB0aH0uMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMihkMSwgZDIpO1xuICAgICAgICAgIGZsb2F0IHhUZXhDID0geHlUZXhDLng7XG4gICAgICAgICAgZmxvYXQgeVRleEMgPSB4eVRleEMueTtcblxuICAgICAgICAgIC8vIFJlYWQgZHkoeVIsIHlDLCBkMikuXG4gICAgICAgICAgdmVjMiBkeVVWID0gKHZlYzIoeVRleEMsIHlUZXhSKSArIGhhbGZDUikgLyBkeVNoYXBlQ1I7XG4gICAgICAgICAgZmxvYXQgZHlWYWx1ZSA9IHRleHR1cmUyRChkeSwgZHlVVikucjtcblxuICAgICAgICAgIC8vIFJlYWQgeCh4UiwgeEMsIGQxKSAocG90ZW50aWFsbHkgemVyby1wYWRkZWQpLlxuICAgICAgICAgIGZsb2F0IHhWYWx1ZSA9XG4gICAgICAgICAgICBnZXRNYXRyaXhWYWx1ZU9yWmVyb1BhZCh4LCB4U2hhcGVDUiwgdmVjMih4VGV4QywgeFRleFIpKTtcblxuICAgICAgICAgIGRvdFByb2QgKz0gKHhWYWx1ZSAqIGR5VmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGRvdFByb2QsIDAsIDAsIDApO1xuICAgIH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRTaGFkZXJDb252VHJhbnNwb3NlU291cmNlKFxuICAgIHhTaGFwZVJDRDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdLCBmU2l6ZTogbnVtYmVyLCBvcmlnSW5wdXREZXB0aDogbnVtYmVyLFxuICAgIG9yaWdTdHJpZGU6IG51bWJlciwgb3JpZ1BhZDogbnVtYmVyLCBoYXNCaWFzOiBib29sZWFuKSB7XG4gIGNvbnN0IHBhZCA9IGZTaXplIC0gMSAtIG9yaWdQYWQ7XG4gIGNvbnN0IFt4Um93cywgeENvbHMsIG9yaWdPdXRwdXREZXB0aF0gPSB4U2hhcGVSQ0Q7XG5cbiAgY29uc3QgeFRleFNoYXBlUkMgPSBjb252X3V0aWwuY29tcHV0ZVRleFNoYXBlRnJvbTNEKHhTaGFwZVJDRCk7XG4gIGNvbnN0IHdUZXhTaGFwZVJDID1cbiAgICAgIGNvbnZfdXRpbC5jb21wdXRlV2VpZ2h0c1RleFNoYXBlKG9yaWdJbnB1dERlcHRoLCBvcmlnT3V0cHV0RGVwdGgsIGZTaXplKTtcblxuICBjb25zdCBnZXRCaWFzVmFsdWUgPSBoYXNCaWFzID9cbiAgICAgIGNvbnZfZ3B1LmdldEZyYWdtZW50U2hhZGVyR2V0Qmlhc1ZhbHVlU291cmNlKG9yaWdJbnB1dERlcHRoKSA6XG4gICAgICAnJztcbiAgY29uc3QgYmlhc1Byb2xvZ3VlID0gaGFzQmlhcyA/ICd1bmlmb3JtIHNhbXBsZXIyRCBiaWFzZXM7JyA6ICcnO1xuICBjb25zdCBiaWFzT3BlcmF0aW9uID0gaGFzQmlhcyA/ICdkb3RQcm9kICs9IGdldEJpYXNWYWx1ZShiaWFzZXMsIGQyKTsnIDogJyc7XG5cbiAgY29uc3QgcHJvbG9ndWUgPSBgXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHg7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgd2VpZ2h0cztcbiAgICAke2JpYXNQcm9sb2d1ZX1cbiAgICBgO1xuXG4gIHJldHVybiBwcm9sb2d1ZSArICdcXG4nICsgZ2V0Qmlhc1ZhbHVlICsgJ1xcbicgK1xuICAgICAgYFxuICAgIGNvbnN0IHZlYzIgaGFsZkNSID0gdmVjMigwLjUsIDAuNSk7XG4gICAgY29uc3QgdmVjMiB4U2hhcGVDUiA9IHZlYzIoJHt4VGV4U2hhcGVSQ1sxXX0sICR7eFRleFNoYXBlUkNbMF19KTtcbiAgICBjb25zdCB2ZWMyIHdTaGFwZUNSID0gdmVjMigke3dUZXhTaGFwZVJDWzFdfSwgJHt3VGV4U2hhcGVSQ1swXX0pO1xuXG4gICAgdm9pZCBtYWluKCkge1xuICAgICAgdmVjMiB5VGV4Q1IgPSBmbG9vcihnbF9GcmFnQ29vcmQueHkpO1xuXG4gICAgICAvLyBNYXAgZnJvbSAyRCAoeVRleFIsIHlUZXhDKSB0byAzRCAoeVIsIHlDLCBkMikuXG4gICAgICBmbG9hdCB5UiA9IHlUZXhDUi55O1xuICAgICAgZmxvYXQgeUMgPSBmbG9vcih5VGV4Q1IueCAvICR7b3JpZ0lucHV0RGVwdGh9LjApO1xuICAgICAgZmxvYXQgZDIgPSBtb2QoeVRleENSLngsICR7b3JpZ0lucHV0RGVwdGh9LjApO1xuXG4gICAgICB2ZWMyIHhSQ0Nvcm5lciA9IHZlYzIoeVIsIHlDKSAtIHZlYzIoJHtwYWR9LjAsICR7cGFkfS4wKTtcbiAgICAgIGZsb2F0IHhSQ29ybmVyID0geFJDQ29ybmVyLng7XG4gICAgICBmbG9hdCB4Q0Nvcm5lciA9IHhSQ0Nvcm5lci55O1xuXG4gICAgICAvLyBDb252b2x2ZSB4KD8sID8sIGQxKSB3aXRoIHcoOiwgOiwgZDIsIGQxKSB0byBnZXQgeSh5UiwgeUMsIGQyKS5cbiAgICAgIC8vID8gPSB0byBiZSBkZXRlcm1pbmVkLiA6ID0gYWNyb3NzIGFsbCB2YWx1ZXMgaW4gdGhhdCBheGlzLlxuICAgICAgZmxvYXQgZG90UHJvZCA9IDAuMDtcbiAgICAgIGZvciAoZmxvYXQgd1IgPSAwLjA7IHdSIDwgJHtmU2l6ZX0uMDsgd1IgKz0gMS4wKSB7XG5cbiAgICAgICAgZmxvYXQgeFIgPSAoeFJDb3JuZXIgKyB3UikgLyAke29yaWdTdHJpZGV9LjA7XG4gICAgICAgIC8vIFRPRE8oc21pbGtvdik6IFNwbGljZSB0aGlzIHdpdGggYW5vdGhlciB2ZXJzaW9uIHdoZXJlIHlvdSBjYWxsXG4gICAgICAgIC8vIGdldE1hdHJpeFZhbHVlT3JaZXJvUGFkKCkuIEhlcmUgYW5kIGJlbG93LlxuICAgICAgICBpZiAoeFIgPCAwLjAgfHwgeFIgPj0gJHt4Um93c30uMCB8fCBmcmFjdCh4UikgPiAwLjApIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZsb2F0IHdSUGVybSA9ICR7ZlNpemV9LjAgLSAxLjAgLSB3UjtcbiAgICAgICAgZmxvYXQgeFRleFIgPSB4UjtcblxuICAgICAgICBmb3IgKGZsb2F0IHdDID0gMC4wOyB3QyA8ICR7ZlNpemV9LjA7IHdDICs9IDEuMCkge1xuXG4gICAgICAgICAgZmxvYXQgeEMgPSAoeENDb3JuZXIgKyB3QykgLyAke29yaWdTdHJpZGV9LjA7XG4gICAgICAgICAgaWYgKHhDIDwgMC4wIHx8IHhDID49ICR7eENvbHN9LjAgfHwgZnJhY3QoeEMpID4gMC4wKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmbG9hdCB3Q1Blcm0gPSAke2ZTaXplfS4wIC0gMS4wIC0gd0M7XG4gICAgICAgICAgZmxvYXQgd1RleFIgPSB3UlBlcm0gKiAke2ZTaXplfS4wICogJHtvcmlnSW5wdXREZXB0aH0uMCArXG4gICAgICAgICAgICAgICAgICAgICAgICB3Q1Blcm0gKiAke29yaWdJbnB1dERlcHRofS4wICsgZDI7XG5cbiAgICAgICAgICBmb3IgKGZsb2F0IGQxID0gMC4wOyBkMSA8ICR7b3JpZ091dHB1dERlcHRofS4wOyBkMSArPSAxLjApIHtcbiAgICAgICAgICAgIGZsb2F0IHhUZXhDID0geEMgKiAke29yaWdPdXRwdXREZXB0aH0uMCArIGQxO1xuICAgICAgICAgICAgZmxvYXQgd1RleEMgPSBkMTtcblxuICAgICAgICAgICAgLy8gUmVhZCB4KHhSLCB4QywgZDEpLlxuICAgICAgICAgICAgdmVjMiB4VVYgPSAodmVjMih4VGV4QywgeFRleFIpICsgaGFsZkNSKSAvIHhTaGFwZUNSO1xuICAgICAgICAgICAgZmxvYXQgeFZhbHVlID0gdGV4dHVyZTJEKHgsIHhVVikucjtcblxuICAgICAgICAgICAgLy8gUmVhZCB3KHdSUGVybSwgd0NQZXJtLCBkMiwgZDEpLlxuICAgICAgICAgICAgdmVjMiB3VVYgPSAodmVjMih3VGV4Qywgd1RleFIpICsgaGFsZkNSKSAvIHdTaGFwZUNSO1xuICAgICAgICAgICAgZmxvYXQgd1ZhbHVlID0gdGV4dHVyZTJEKHdlaWdodHMsIHdVVikucjtcblxuICAgICAgICAgICAgZG90UHJvZCArPSB4VmFsdWUgKiB3VmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAke2JpYXNPcGVyYXRpb259XG4gICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGRvdFByb2QsIDAsIDAsIDApO1xuICAgIH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRTaGFkZXJEZXJCaWFzU291cmNlKFxuICAgIGR5U2hhcGVSQ0Q6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSkge1xuICBjb25zdCBkeVRleFNoYXBlUkMgPSBjb252X3V0aWwuY29tcHV0ZVRleFNoYXBlRnJvbTNEKGR5U2hhcGVSQ0QpO1xuICBjb25zdCBbeU51bVJvd3MsIHlOdW1Db2xzLCBvdXRwdXREZXB0aF0gPSBkeVNoYXBlUkNEO1xuXG4gIHJldHVybiBgXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIGR5O1xuXG4gICAgY29uc3QgdmVjMiBoYWxmQ1IgPSB2ZWMyKDAuNSwgMC41KTtcbiAgICBjb25zdCB2ZWMyIGR5U2hhcGVDUiA9IHZlYzIoJHtkeVRleFNoYXBlUkNbMV19LCAke2R5VGV4U2hhcGVSQ1swXX0pO1xuXG4gICAgdm9pZCBtYWluKCkge1xuICAgICAgdmVjMiBiaWFzVGV4Q1IgPSBmbG9vcihnbF9GcmFnQ29vcmQueHkpO1xuXG4gICAgICAvLyBUaGUgYmlhcyB0ZXh0dXJlIFJDIHNoYXBlIGlzIFsxLCBkMl0uXG4gICAgICBmbG9hdCBkMiA9IGJpYXNUZXhDUi54O1xuXG4gICAgICBmbG9hdCBkZXJCaWFzID0gMC4wO1xuICAgICAgZm9yIChmbG9hdCB5UiA9IDAuMDsgeVIgPCAke3lOdW1Sb3dzfS4wOyB5UiArPSAxLjApIHtcbiAgICAgICAgZmxvYXQgeVRleFIgPSB5UjtcblxuICAgICAgICBmb3IgKGZsb2F0IHlDID0gMC4wOyB5QyA8ICR7eU51bUNvbHN9LjA7IHlDICs9IDEuMCkge1xuICAgICAgICAgIC8vIE1hcCBmcm9tIDNEICh5UiwgeUMsIGQyKSB0byAyRCAoeVRleFIsIHlUZXhDKS5cbiAgICAgICAgICBmbG9hdCB5VGV4QyA9IHlDICogJHtvdXRwdXREZXB0aH0uMCArIGQyO1xuXG4gICAgICAgICAgLy8gUmVhZCBkeSh5UiwgeUMsIGQyKS5cbiAgICAgICAgICB2ZWMyIGR5VVYgPSAodmVjMih5VGV4QywgeVRleFIpICsgaGFsZkNSKSAvIGR5U2hhcGVDUjtcbiAgICAgICAgICBmbG9hdCBkeVZhbHVlID0gdGV4dHVyZTJEKGR5LCBkeVVWKS5yO1xuXG4gICAgICAgICAgZGVyQmlhcyArPSBkeVZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGRlckJpYXMsIDAsIDAsIDApO1xuICAgIH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVyQmlhcyhcbiAgICBncGdwdTogR1BHUFVDb250ZXh0LCBwcm9ncmFtOiBXZWJHTFByb2dyYW0sIGR5VGV4OiBXZWJHTFRleHR1cmUsXG4gICAgcmVzdWx0OiBXZWJHTFRleHR1cmUsIHJlc3VsdFRleFNoYXBlUkM6IFtudW1iZXIsIG51bWJlcl0pIHtcbiAgZ3BncHUuc2V0T3V0cHV0TWF0cml4VGV4dHVyZShcbiAgICAgIHJlc3VsdCwgcmVzdWx0VGV4U2hhcGVSQ1swXSwgcmVzdWx0VGV4U2hhcGVSQ1sxXSk7XG4gIGdwZ3B1LnNldFByb2dyYW0ocHJvZ3JhbSk7XG4gIGdwZ3B1LnNldElucHV0TWF0cml4VGV4dHVyZShkeVRleCwgJ2R5JywgMCk7XG4gIGdwZ3B1LmV4ZWN1dGVQcm9ncmFtKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXJXZWlnaHRzKFxuICAgIGdwZ3B1OiBHUEdQVUNvbnRleHQsIHByb2dyYW06IFdlYkdMUHJvZ3JhbSwgeFRleDogV2ViR0xUZXh0dXJlLFxuICAgIGR5VGV4OiBXZWJHTFRleHR1cmUsIHJlc3VsdDogV2ViR0xUZXh0dXJlLFxuICAgIHJlc3VsdFRleFNoYXBlUkM6IFtudW1iZXIsIG51bWJlcl0pIHtcbiAgZ3BncHUuc2V0T3V0cHV0TWF0cml4VGV4dHVyZShcbiAgICAgIHJlc3VsdCwgcmVzdWx0VGV4U2hhcGVSQ1swXSwgcmVzdWx0VGV4U2hhcGVSQ1sxXSk7XG4gIGdwZ3B1LnNldFByb2dyYW0ocHJvZ3JhbSk7XG4gIGdwZ3B1LnNldElucHV0TWF0cml4VGV4dHVyZSh4VGV4LCAneCcsIDApO1xuICBncGdwdS5zZXRJbnB1dE1hdHJpeFRleHR1cmUoZHlUZXgsICdkeScsIDEpO1xuICBncGdwdS5leGVjdXRlUHJvZ3JhbSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29udlRyYW5zcG9zZShcbiAgICBncGdwdTogR1BHUFVDb250ZXh0LCBwcm9ncmFtOiBXZWJHTFByb2dyYW0sIHhUZXg6IFdlYkdMVGV4dHVyZSxcbiAgICB3ZWlnaHRzVGV4OiBXZWJHTFRleHR1cmUsIGJpYXNlc1RleDogV2ViR0xUZXh0dXJlfG51bGwsXG4gICAgcmVzdWx0VGV4OiBXZWJHTFRleHR1cmUsIHJlc3VsdFRleFNoYXBlUkM6IFtudW1iZXIsIG51bWJlcl0pIHtcbiAgZ3BncHUuc2V0T3V0cHV0TWF0cml4VGV4dHVyZShcbiAgICAgIHJlc3VsdFRleCwgcmVzdWx0VGV4U2hhcGVSQ1swXSwgcmVzdWx0VGV4U2hhcGVSQ1sxXSk7XG4gIGdwZ3B1LnNldFByb2dyYW0ocHJvZ3JhbSk7XG4gIGdwZ3B1LnNldElucHV0TWF0cml4VGV4dHVyZSh4VGV4LCAneCcsIDApO1xuICBncGdwdS5zZXRJbnB1dE1hdHJpeFRleHR1cmUod2VpZ2h0c1RleCwgJ3dlaWdodHMnLCAxKTtcbiAgaWYgKGJpYXNlc1RleCAhPSBudWxsKSB7XG4gICAgZ3BncHUuc2V0SW5wdXRNYXRyaXhUZXh0dXJlKGJpYXNlc1RleCwgJ2JpYXNlcycsIDIpO1xuICB9XG4gIGdwZ3B1LmV4ZWN1dGVQcm9ncmFtKCk7XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCAqIGFzIGNvbnZfdXRpbCBmcm9tICcuLi9jb252X3V0aWwnO1xuaW1wb3J0IHtHUEdQVUNvbnRleHR9IGZyb20gJy4vZ3BncHVfY29udGV4dCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudFNoYWRlclByb2xvZ3VlU291cmNlKCk6IHN0cmluZyB7XG4gIHJldHVybiBgXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHg7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgd2VpZ2h0cztcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCBiaWFzZXM7XG4gICAgdmFyeWluZyB2ZWMyIHJlc3VsdFVWO2A7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudFNoYWRlckdldE1hdHJpeFZhbHVlT3JaZXJvUGFkU291cmNlKCk6IHN0cmluZyB7XG4gIHJldHVybiBgXG4gICAgZmxvYXQgZ2V0TWF0cml4VmFsdWVPclplcm9QYWQoaW4gc2FtcGxlcjJEIG1hdHJpeCwgdmVjMiBtYXRyaXhTaGFwZUNSLFxuICAgICAgICB2ZWMyIHJlcXVlc3RlZENSKSB7XG4gICAgICB2ZWMyIHV2ID0gKHJlcXVlc3RlZENSICsgdmVjMigwLjUsIDAuNSkpIC8gbWF0cml4U2hhcGVDUjtcbiAgICAgIGZsb2F0IHZhbHVlID0gdGV4dHVyZTJEKG1hdHJpeCwgdXYpLnI7XG4gICAgICBib29sIGxlc3NUaGFuWmVybyA9IGFueShsZXNzVGhhbih1diwgdmVjMigwLCAwKSkpO1xuICAgICAgYm9vbCBncmVhdGVyVGhhbk9uZSA9IGFueShncmVhdGVyVGhhbih1diwgdmVjMigxLCAxKSkpO1xuICAgICAgYm9vbCBvdXRzaWRlID0gbGVzc1RoYW5aZXJvIHx8IGdyZWF0ZXJUaGFuT25lO1xuICAgICAgcmV0dXJuIG1peCh2YWx1ZSwgMC4wLCBmbG9hdChvdXRzaWRlKSk7XG4gICAgfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudFNoYWRlckNvbnZvbHZlU291cmNlKFxuICAgIHhTaGFwZVJDRDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdLCBmU2l6ZTogbnVtYmVyLCBvdXRwdXREZXB0aDogbnVtYmVyLFxuICAgIHN0cmlkZTogbnVtYmVyLCBwYWQ6IG51bWJlciwgaGFzQmlhczogYm9vbGVhbikge1xuICBjb25zdCBbeFJvd3MsIHhDb2xzLCBpbnB1dERlcHRoXSA9IHhTaGFwZVJDRDtcblxuICBjb25zdCB4VGV4U2hhcGVSQyA9IGNvbnZfdXRpbC5jb21wdXRlVGV4U2hhcGVGcm9tM0QoeFNoYXBlUkNEKTtcbiAgY29uc3Qgd1RleFNoYXBlUkMgPVxuICAgICAgY29udl91dGlsLmNvbXB1dGVXZWlnaHRzVGV4U2hhcGUoaW5wdXREZXB0aCwgb3V0cHV0RGVwdGgsIGZTaXplKTtcblxuICByZXR1cm4gYFxuICAgIGNvbnN0IHZlYzIgaGFsZkNSID0gdmVjMigwLjUsIDAuNSk7XG4gICAgY29uc3QgdmVjMiB4U2hhcGVDUiA9IHZlYzIoJHt4VGV4U2hhcGVSQ1sxXX0sICR7eFRleFNoYXBlUkNbMF19KTtcbiAgICBjb25zdCB2ZWMyIHdTaGFwZUNSID0gdmVjMigke3dUZXhTaGFwZVJDWzFdfSwgJHt3VGV4U2hhcGVSQ1swXX0pO1xuXG4gICAgdm9pZCBtYWluKCkge1xuICAgICAgdmVjMiB5VGV4Q1IgPSBmbG9vcihnbF9GcmFnQ29vcmQueHkpO1xuXG4gICAgICAvLyBNYXAgZnJvbSAyRCAoeVRleFIsIHlUZXhDKSB0byAzRCAoeVIsIHlDLCBkMikuXG4gICAgICBmbG9hdCB5UiA9IHlUZXhDUi55O1xuICAgICAgZmxvYXQgeUMgPSBmbG9vcih5VGV4Q1IueCAvICR7b3V0cHV0RGVwdGh9LjApO1xuICAgICAgZmxvYXQgZDIgPSBtb2QoeVRleENSLngsICR7b3V0cHV0RGVwdGh9LjApO1xuICAgICAgZmxvYXQgd1RleEMgPSBkMjtcblxuICAgICAgdmVjMiB4UkNDb3JuZXIgPSB2ZWMyKHlSLCB5QykgKiB2ZWMyKCR7c3RyaWRlfSwgJHtzdHJpZGV9KSAtXG4gICAgICAgICAgdmVjMigke3BhZH0uMCwgJHtwYWR9LjApO1xuICAgICAgZmxvYXQgeFJDb3JuZXIgPSB4UkNDb3JuZXIueDtcbiAgICAgIGZsb2F0IHhDQ29ybmVyID0geFJDQ29ybmVyLnk7XG5cbiAgICAgIC8vIENvbnZvbHZlIHgoPywgPywgZDEpIHdpdGggdyg6LCA6LCBkMSwgZDIpIHRvIGdldCB5KHlSLCB5QywgZDIpLlxuICAgICAgLy8gPyA9IHRvIGJlIGRldGVybWluZWQuIDogPSBhY3Jvc3MgYWxsIHZhbHVlcyBpbiB0aGF0IGF4aXMuXG4gICAgICBmbG9hdCBkb3RQcm9kID0gMC4wO1xuICAgICAgZm9yIChmbG9hdCB3UiA9IDAuMDsgd1IgPCAke2ZTaXplfS4wOyB3UiArPSAxLjApIHtcbiAgICAgICAgZmxvYXQgeFIgPSB4UkNvcm5lciArIHdSO1xuICAgICAgICBmbG9hdCB4VGV4UiA9IHhSO1xuXG4gICAgICAgIGZvciAoZmxvYXQgd0MgPSAwLjA7IHdDIDwgJHtmU2l6ZX0uMDsgd0MgKz0gMS4wKSB7XG4gICAgICAgICAgZmxvYXQgeEMgPSB4Q0Nvcm5lciArIHdDO1xuXG4gICAgICAgICAgZm9yIChmbG9hdCBkMSA9IDAuMDsgZDEgPCAke2lucHV0RGVwdGh9LjA7IGQxICs9IDEuMCkge1xuICAgICAgICAgICAgZmxvYXQgeFRleEMgPSB4QyAqICR7aW5wdXREZXB0aH0uMCArIGQxO1xuICAgICAgICAgICAgZmxvYXQgd1RleFIgPSB3UiAqICR7ZlNpemUgKiBpbnB1dERlcHRofS4wICtcbiAgICAgICAgICAgICAgICB3QyAqICR7aW5wdXREZXB0aH0uMCArIGQxO1xuXG4gICAgICAgICAgICBmbG9hdCB4VmFsdWUgPVxuICAgICAgICAgICAgICAgIGdldE1hdHJpeFZhbHVlT3JaZXJvUGFkKHgsIHhTaGFwZUNSLCB2ZWMyKHhUZXhDLCB4VGV4UikpO1xuXG4gICAgICAgICAgICAvLyBSZWFkIHcod1IsIHdDLCBkMSwgZDIpLlxuICAgICAgICAgICAgdmVjMiB3VVYgPSAodmVjMih3VGV4Qywgd1RleFIpICsgaGFsZkNSKSAvIHdTaGFwZUNSO1xuICAgICAgICAgICAgZmxvYXQgd1ZhbHVlID0gdGV4dHVyZTJEKHdlaWdodHMsIHdVVikucjtcblxuICAgICAgICAgICAgZG90UHJvZCArPSB4VmFsdWUgKiB3VmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoJHtoYXNCaWFzfSkge1xuICAgICAgICBkb3RQcm9kICs9IGdldEJpYXNWYWx1ZShiaWFzZXMsIGQyKTtcbiAgICAgIH1cbiAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoZG90UHJvZCwgMCwgMCwgMCk7XG4gICAgfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudFNoYWRlckdldEJpYXNWYWx1ZVNvdXJjZShvdXRwdXREZXB0aDogbnVtYmVyKTpcbiAgICBzdHJpbmcge1xuICByZXR1cm4gYFxuICAgIGZsb2F0IGdldEJpYXNWYWx1ZShpbiBzYW1wbGVyMkQgYmlhcywgZmxvYXQgYmlhc0MpIHtcbiAgICAgIGNvbnN0IHZlYzIgYmlhc1NoYXBlQ1IgPSB2ZWMyKCR7b3V0cHV0RGVwdGh9LCAxKTtcbiAgICAgIHZlYzIgYmlhc0NSID0gdmVjMihtb2QoYmlhc0MsICR7b3V0cHV0RGVwdGh9LjApLCAwKTtcbiAgICAgIHZlYzIgYmlhc1VWID0gKGJpYXNDUiArIHZlYzIoMC41LCAwLjUpKSAvIGJpYXNTaGFwZUNSO1xuICAgICAgcmV0dXJuIHRleHR1cmUyRChiaWFzLCBiaWFzVVYpLnI7XG4gICAgfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudFNoYWRlclNvdXJjZShcbiAgICBhU2hhcGVSb3dDb2xEZXB0aDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdLCByZXN1bHREZXB0aDogbnVtYmVyLFxuICAgIGZpZWxkU2l6ZTogbnVtYmVyLCBzdHJpZGU6IG51bWJlciwgemVyb1BhZDogbnVtYmVyLFxuICAgIGhhc0JpYXM6IGJvb2xlYW4pOiBzdHJpbmcge1xuICBjb25zdCBhU2hhcGVSQzogW251bWJlciwgbnVtYmVyXSA9XG4gICAgICBjb252X3V0aWwuY29tcHV0ZVRleFNoYXBlRnJvbTNEKGFTaGFwZVJvd0NvbERlcHRoKTtcblxuICBjb25zdCB3ZWlnaHRTaGFwZVJDOiBbbnVtYmVyLCBudW1iZXJdID0gY29udl91dGlsLmNvbXB1dGVXZWlnaHRzVGV4U2hhcGUoXG4gICAgICBhU2hhcGVSb3dDb2xEZXB0aFsyXSwgcmVzdWx0RGVwdGgsIGZpZWxkU2l6ZSk7XG5cbiAgY29uc3QgcHJvbG9ndWUgPSBnZXRGcmFnbWVudFNoYWRlclByb2xvZ3VlU291cmNlKCk7XG4gIGNvbnN0IGdldE1hdHJpeFZhbHVlT3JaZXJvUGFkID1cbiAgICAgIGdldEZyYWdtZW50U2hhZGVyR2V0TWF0cml4VmFsdWVPclplcm9QYWRTb3VyY2UoKTtcbiAgY29uc3QgY29udm9sdmUgPSBnZXRGcmFnbWVudFNoYWRlckNvbnZvbHZlU291cmNlKFxuICAgICAgYVNoYXBlUm93Q29sRGVwdGgsIGZpZWxkU2l6ZSwgcmVzdWx0RGVwdGgsIHN0cmlkZSwgemVyb1BhZCwgaGFzQmlhcyk7XG4gIGNvbnN0IGdldEJpYXNWYWx1ZSA9IGdldEZyYWdtZW50U2hhZGVyR2V0Qmlhc1ZhbHVlU291cmNlKHJlc3VsdERlcHRoKTtcblxuICByZXR1cm4gW1xuICAgIHByb2xvZ3VlLFxuICAgIGdldE1hdHJpeFZhbHVlT3JaZXJvUGFkLFxuICAgIGdldEJpYXNWYWx1ZSxcbiAgICBjb252b2x2ZSxcbiAgXS5qb2luKCdcXG4nKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZvbHZlKFxuICAgIGdwZ3B1OiBHUEdQVUNvbnRleHQsIHByb2dyYW06IFdlYkdMUHJvZ3JhbSwgYTogV2ViR0xUZXh0dXJlLFxuICAgIHdlaWdodHM6IFdlYkdMVGV4dHVyZSwgYmlhc2VzOiBXZWJHTFRleHR1cmV8bnVsbCwgcmVzdWx0OiBXZWJHTFRleHR1cmUsXG4gICAgcmVzdWx0U2hhcGVSb3dDb2w6IFtudW1iZXIsIG51bWJlcl0pIHtcbiAgZ3BncHUuc2V0T3V0cHV0TWF0cml4VGV4dHVyZShcbiAgICAgIHJlc3VsdCwgcmVzdWx0U2hhcGVSb3dDb2xbMF0sIHJlc3VsdFNoYXBlUm93Q29sWzFdKTtcbiAgZ3BncHUuc2V0UHJvZ3JhbShwcm9ncmFtKTtcbiAgZ3BncHUuc2V0SW5wdXRNYXRyaXhUZXh0dXJlKGEsICd4JywgMCk7XG4gIGdwZ3B1LnNldElucHV0TWF0cml4VGV4dHVyZSh3ZWlnaHRzLCAnd2VpZ2h0cycsIDEpO1xuICBpZiAoYmlhc2VzICE9IG51bGwpIHtcbiAgICBncGdwdS5zZXRJbnB1dE1hdHJpeFRleHR1cmUoYmlhc2VzLCAnYmlhc2VzJywgMik7XG4gIH1cbiAgZ3BncHUuZXhlY3V0ZVByb2dyYW0oKTtcbn0iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCB7R1BHUFVDb250ZXh0fSBmcm9tICcuL2dwZ3B1X2NvbnRleHQnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoXG4gICAgc291cmNlU2hhcGVSb3dDb2w6IFtudW1iZXIsIG51bWJlcl0sIHNvdXJjZVNpemVSb3dDb2w6IFtudW1iZXIsIG51bWJlcl0sXG4gICAgZGVzdFNpemVSb3dDb2w6IFtudW1iZXIsIG51bWJlcl0pOiBzdHJpbmcge1xuICByZXR1cm4gYFxuICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCBzb3VyY2U7XG4gICAgdW5pZm9ybSB2ZWMyIHNvdXJjZVN0YXJ0Q1I7XG4gICAgdW5pZm9ybSB2ZWMyIGRlc3RTdGFydENSO1xuXG4gICAgY29uc3QgdmVjMiBzb3VyY2VTaGFwZUNSID1cbiAgICAgIHZlYzIoJHtzb3VyY2VTaGFwZVJvd0NvbFsxXX0sICR7c291cmNlU2hhcGVSb3dDb2xbMF19KTtcbiAgICBjb25zdCB2ZWMyIHNvdXJjZVNpemVDUiA9XG4gICAgICB2ZWMyKCR7c291cmNlU2l6ZVJvd0NvbFsxXX0sICR7c291cmNlU2l6ZVJvd0NvbFswXX0pO1xuICAgIGNvbnN0IHZlYzIgZGVzdFNpemVDUiA9XG4gICAgICB2ZWMyKCR7ZGVzdFNpemVSb3dDb2xbMV19LCAke2Rlc3RTaXplUm93Q29sWzBdfSk7XG5cbiAgICB2b2lkIG1haW4oKSB7XG4gICAgICB2ZWMyIGRlc3RPZmZzZXRDUiA9IGZsb29yKGdsX0ZyYWdDb29yZC54eSkgLSBkZXN0U3RhcnRDUjtcbiAgICAgIGZsb2F0IGRlc3RPZmZzZXRGbGF0ID0gKGRlc3RPZmZzZXRDUi55ICogZGVzdFNpemVDUi54KSArIGRlc3RPZmZzZXRDUi54O1xuICAgICAgdmVjMiBzb3VyY2VPZmZzZXRDUiA9IHZlYzIobW9kKGRlc3RPZmZzZXRGbGF0LCBzb3VyY2VTaXplQ1IueCksXG4gICAgICAgIGZsb29yKGRlc3RPZmZzZXRGbGF0IC8gc291cmNlU2l6ZUNSLngpKTtcbiAgICAgIHZlYzIgc291cmNlQ1IgPSBzb3VyY2VTdGFydENSICsgc291cmNlT2Zmc2V0Q1I7XG4gICAgICB2ZWMyIHNvdXJjZVVWID0gKHNvdXJjZUNSICsgdmVjMigwLjUsIDAuNSkpIC8gc291cmNlU2hhcGVDUjtcbiAgICAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRChzb3VyY2UsIHNvdXJjZVVWKTtcbiAgICB9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvcHkoXG4gICAgZ3BncHU6IEdQR1BVQ29udGV4dCwgcHJvZ3JhbTogV2ViR0xQcm9ncmFtLCBzb3VyY2U6IFdlYkdMVGV4dHVyZSxcbiAgICBzb3VyY2VTaGFwZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSwgc291cmNlU3RhcnRSb3dDb2w6IFtudW1iZXIsIG51bWJlcl0sXG4gICAgc291cmNlU2l6ZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSwgZGVzdDogV2ViR0xUZXh0dXJlLFxuICAgIGRlc3RTaGFwZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSwgZGVzdFN0YXJ0Um93Q29sOiBbbnVtYmVyLCBudW1iZXJdLFxuICAgIGRlc3RTaXplUm93Q29sOiBbbnVtYmVyLCBudW1iZXJdKSB7XG4gIGdwZ3B1LnNldE91dHB1dE1hdHJpeFRleHR1cmUoZGVzdCwgZGVzdFNoYXBlUm93Q29sWzBdLCBkZXN0U2hhcGVSb3dDb2xbMV0pO1xuICBncGdwdS5zZXRPdXRwdXRNYXRyaXhXcml0ZVJlZ2lvbihcbiAgICAgIGRlc3RTdGFydFJvd0NvbFswXSwgZGVzdFNpemVSb3dDb2xbMF0sIGRlc3RTdGFydFJvd0NvbFsxXSxcbiAgICAgIGRlc3RTaXplUm93Q29sWzFdKTtcbiAgZ3BncHUuc2V0UHJvZ3JhbShwcm9ncmFtKTtcbiAgZ3BncHUuc2V0SW5wdXRNYXRyaXhUZXh0dXJlKHNvdXJjZSwgJ3NvdXJjZScsIDApO1xuICBjb25zdCBzb3VyY2VTdGFydENSTG9jID0gZ3BncHUuZ2V0VW5pZm9ybUxvY2F0aW9uKCdzb3VyY2VTdGFydENSJyk7XG4gIGdwZ3B1LmdsLnVuaWZvcm0yZihcbiAgICAgIHNvdXJjZVN0YXJ0Q1JMb2MsIHNvdXJjZVN0YXJ0Um93Q29sWzFdLCBzb3VyY2VTdGFydFJvd0NvbFswXSk7XG4gIGNvbnN0IGRlc3RTdGFydENSTG9jID0gZ3BncHUuZ2V0VW5pZm9ybUxvY2F0aW9uKCdkZXN0U3RhcnRDUicpO1xuICBncGdwdS5nbC51bmlmb3JtMmYoZGVzdFN0YXJ0Q1JMb2MsIGRlc3RTdGFydFJvd0NvbFsxXSwgZGVzdFN0YXJ0Um93Q29sWzBdKTtcbiAgZ3BncHUuZXhlY3V0ZVByb2dyYW0oKTtcbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtHUEdQVUNvbnRleHR9IGZyb20gJy4vZ3BncHVfY29udGV4dCc7XG5pbXBvcnQgKiBhcyB1bmFyeW9wX2dwdSBmcm9tICcuL3VuYXJ5b3BfZ3B1JztcblxuZnVuY3Rpb24gZ2V0RXhwVW5hcnlPcCgpOiBzdHJpbmcge1xuICByZXR1cm4gJ2dsX0ZyYWdDb2xvciA9IHZlYzQoZXhwKHZhbHVlKSwgMCwgMCwgMCk7Jztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50U2hhZGVyU291cmNlKCk6IHN0cmluZyB7XG4gIHJldHVybiB1bmFyeW9wX2dwdS5nZXRGcmFnbWVudFNoYWRlclNvdXJjZShnZXRFeHBVbmFyeU9wKCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXhwKFxuICAgIGdwZ3B1OiBHUEdQVUNvbnRleHQsIGV4cFByb2dyYW06IFdlYkdMUHJvZ3JhbSwgYTogV2ViR0xUZXh0dXJlLFxuICAgIHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyLCByZXN1bHQ6IFdlYkdMVGV4dHVyZSkge1xuICB1bmFyeW9wX2dwdS51bmFyeU9wKGdwZ3B1LCBleHBQcm9ncmFtLCBhLCByb3dzLCBjb2x1bW5zLCByZXN1bHQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBsb2FkRXhwRG93bmxvYWQoXG4gICAgYTogRmxvYXQzMkFycmF5LCByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcik6IEZsb2F0MzJBcnJheSB7XG4gIHJldHVybiB1bmFyeW9wX2dwdS51cGxvYWRVbmFyeU9wRG93bmxvYWQoYSwgcm93cywgY29sdW1ucywgZ2V0RXhwVW5hcnlPcCgpKTtcbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0ICogYXMgZ3BncHVfdXRpbCBmcm9tICcuL2dwZ3B1X3V0aWwnO1xuaW1wb3J0ICogYXMgdGV4X3V0aWwgZnJvbSAnLi90ZXhfdXRpbCc7XG5pbXBvcnQgKiBhcyB3ZWJnbF91dGlsIGZyb20gJy4vd2ViZ2xfdXRpbCc7XG5cbmltcG9ydCB7V2ViR0xMb3NlQ29udGV4dEV4dGVuc2lvbn0gZnJvbSAnLi93ZWJnbF91dGlsJztcblxuZXhwb3J0IGNsYXNzIEdQR1BVQ29udGV4dCB7XG4gIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQ7XG4gIHRleHR1cmVGbG9hdEV4dGVuc2lvbjoge307XG4gIGNvbG9yQnVmZmVyRmxvYXRFeHRlbnNpb246IHt9O1xuICBsb3NlQ29udGV4dEV4dGVuc2lvbjogV2ViR0xMb3NlQ29udGV4dEV4dGVuc2lvbjtcbiAgdmVydGV4QnVmZmVyOiBXZWJHTEJ1ZmZlcjtcbiAgaW5kZXhCdWZmZXI6IFdlYkdMQnVmZmVyO1xuICBmcmFtZWJ1ZmZlcjogV2ViR0xGcmFtZWJ1ZmZlcjtcbiAgb3V0cHV0VGV4dHVyZTogV2ViR0xUZXh0dXJlfG51bGwgPSBudWxsO1xuICBwcm9ncmFtOiBXZWJHTFByb2dyYW18bnVsbCA9IG51bGw7XG4gIHByaXZhdGUgZGlzcG9zZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBhdXRvRGVidWdWYWxpZGF0ZSA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKGdsPzogV2ViR0xSZW5kZXJpbmdDb250ZXh0KSB7XG4gICAgaWYgKGdsICE9IG51bGwpIHtcbiAgICAgIHRoaXMuZ2wgPSBnbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5nbCA9IGdwZ3B1X3V0aWwuY3JlYXRlV2ViR0xDb250ZXh0KCk7XG4gICAgfVxuXG4gICAgLy8gV2ViR0wgMi4wIGVuYWJsZXMgdGV4dHVyZSBmbG9hdHMgd2l0aG91dCBhbiBleHRlbnNpb24uXG4gICAgaWYgKCF3ZWJnbF91dGlsLmlzV2ViR0wyRW5hYmxlZCgpKSB7XG4gICAgICB0aGlzLnRleHR1cmVGbG9hdEV4dGVuc2lvbiA9XG4gICAgICAgICAgd2ViZ2xfdXRpbC5nZXRFeHRlbnNpb25PclRocm93KHRoaXMuZ2wsICdPRVNfdGV4dHVyZV9mbG9hdCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbG9yQnVmZmVyRmxvYXRFeHRlbnNpb24gPVxuICAgICAgICAgIHdlYmdsX3V0aWwuZ2V0RXh0ZW5zaW9uT3JUaHJvdyh0aGlzLmdsLCAnRVhUX2NvbG9yX2J1ZmZlcl9mbG9hdCcpO1xuICAgIH1cblxuICAgIHRoaXMubG9zZUNvbnRleHRFeHRlbnNpb24gPVxuICAgICAgICB3ZWJnbF91dGlsLmdldEV4dGVuc2lvbk9yVGhyb3codGhpcy5nbCwgJ1dFQkdMX2xvc2VfY29udGV4dCcpIGFzXG4gICAgICAgIFdlYkdMTG9zZUNvbnRleHRFeHRlbnNpb247XG4gICAgdGhpcy52ZXJ0ZXhCdWZmZXIgPSBncGdwdV91dGlsLmNyZWF0ZVZlcnRleEJ1ZmZlcih0aGlzLmdsKTtcbiAgICB0aGlzLmluZGV4QnVmZmVyID0gZ3BncHVfdXRpbC5jcmVhdGVJbmRleEJ1ZmZlcih0aGlzLmdsKTtcbiAgICB0aGlzLmZyYW1lYnVmZmVyID0gd2ViZ2xfdXRpbC5jcmVhdGVGcmFtZWJ1ZmZlcih0aGlzLmdsKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCkge1xuICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgaWYgKHRoaXMucHJvZ3JhbSAhPSBudWxsKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgJ0Rpc3Bvc2luZyBhIEdQR1BVQ29udGV4dCB0aGF0IHN0aWxsIGhhcyBhIGJvdW5kIFdlYkdMUHJvZ3JhbS4nICtcbiAgICAgICAgICAnIFRoaXMgaXMgcHJvYmFibHkgYSByZXNvdXJjZSBsZWFrLCBkZWxldGUgdGhlIHByb2dyYW0gd2l0aCAnICtcbiAgICAgICAgICAnR1BHUFVDb250ZXh0LmRlbGV0ZVByb2dyYW0gYmVmb3JlIGRpc3Bvc2luZy4nKTtcbiAgICB9XG4gICAgaWYgKHRoaXMub3V0cHV0VGV4dHVyZSAhPSBudWxsKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgJ0Rpc3Bvc2luZyBhIEdQR1BVQ29udGV4dCB0aGF0IHN0aWxsIGhhcyBhIGJvdW5kIG91dHB1dCBtYXRyaXggJyArXG4gICAgICAgICAgJ3RleHR1cmUuICBUaGlzIGlzIHByb2JhYmx5IGEgcmVzb3VyY2UgbGVhaywgZGVsZXRlIHRoZSBvdXRwdXQgJyArXG4gICAgICAgICAgJ21hdHJpeCB0ZXh0dXJlIHdpdGggR1BHUFVDb250ZXh0LmRlbGV0ZU1hdHJpeFRleHR1cmUgYmVmb3JlICcgK1xuICAgICAgICAgICdkaXNwb3NpbmcuJyk7XG4gICAgfVxuICAgIGNvbnN0IGdsID0gdGhpcy5nbDtcbiAgICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wuZmluaXNoKCkpO1xuICAgIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIG51bGwpKTtcbiAgICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wuZGVsZXRlRnJhbWVidWZmZXIodGhpcy5mcmFtZWJ1ZmZlcikpO1xuICAgIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbnVsbCkpO1xuICAgIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5kZWxldGVCdWZmZXIodGhpcy52ZXJ0ZXhCdWZmZXIpKTtcbiAgICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhcbiAgICAgICAgZ2wsICgpID0+IGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG51bGwpKTtcbiAgICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wuZGVsZXRlQnVmZmVyKHRoaXMuaW5kZXhCdWZmZXIpKTtcbiAgICB0aGlzLmxvc2VDb250ZXh0RXh0ZW5zaW9uLmxvc2VDb250ZXh0KCk7XG4gICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7XG4gIH1cblxuICBwdWJsaWMgZW5hYmxlQXV0b21hdGljRGVidWdWYWxpZGF0aW9uKGVuYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmF1dG9EZWJ1Z1ZhbGlkYXRlID0gZW5hYmxlZDtcbiAgICB3ZWJnbF91dGlsLmVuYWJsZURlYnVnV2ViR0xFcnJvckNoZWNraW5nKGVuYWJsZWQpO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZU1hdHJpeFRleHR1cmUocm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIpOiBXZWJHTFRleHR1cmUge1xuICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgcmV0dXJuIGdwZ3B1X3V0aWwuY3JlYXRlTWF0cml4VGV4dHVyZSh0aGlzLmdsLCByb3dzLCBjb2x1bW5zKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGxvYWRQaXhlbERhdGFUb1RleHR1cmUoXG4gICAgICB0ZXh0dXJlOiBXZWJHTFRleHR1cmUsXG4gICAgICBwaXhlbHM6IEltYWdlRGF0YXxIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnQpIHtcbiAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgIGdwZ3B1X3V0aWwudXBsb2FkUGl4ZWxEYXRhVG9UZXh0dXJlKHRoaXMuZ2wsIHRleHR1cmUsIHBpeGVscyk7XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlUGFja2VkTWF0cml4VGV4dHVyZShyb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcik6XG4gICAgICBXZWJHTFRleHR1cmUge1xuICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgcmV0dXJuIGdwZ3B1X3V0aWwuY3JlYXRlUGFja2VkTWF0cml4VGV4dHVyZSh0aGlzLmdsLCByb3dzLCBjb2x1bW5zKTtcbiAgfVxuXG4gIHB1YmxpYyBkZWxldGVNYXRyaXhUZXh0dXJlKHRleHR1cmU6IFdlYkdMVGV4dHVyZSkge1xuICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgaWYgKHRoaXMub3V0cHV0VGV4dHVyZSA9PT0gdGV4dHVyZSkge1xuICAgICAgd2ViZ2xfdXRpbC51bmJpbmRDb2xvclRleHR1cmVGcm9tRnJhbWVidWZmZXIodGhpcy5nbCwgdGhpcy5mcmFtZWJ1ZmZlcik7XG4gICAgICB0aGlzLm91dHB1dFRleHR1cmUgPSBudWxsO1xuICAgIH1cbiAgICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayh0aGlzLmdsLCAoKSA9PiB0aGlzLmdsLmRlbGV0ZVRleHR1cmUodGV4dHVyZSkpO1xuICB9XG5cbiAgcHVibGljIHVwbG9hZE1hdHJpeFRvVGV4dHVyZShcbiAgICAgIHRleHR1cmU6IFdlYkdMVGV4dHVyZSwgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIsXG4gICAgICBtYXRyaXg6IEZsb2F0MzJBcnJheSkge1xuICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgY29uc3QgbnVtQ2hhbm5lbHMgPSAxO1xuICAgIHJldHVybiBncGdwdV91dGlsLnVwbG9hZE1hdHJpeFRvVGV4dHVyZShcbiAgICAgICAgdGhpcy5nbCwgdGV4dHVyZSwgcm93cywgY29sdW1ucywgbWF0cml4LCBudW1DaGFubmVscyk7XG4gIH1cblxuICBwdWJsaWMgdXBsb2FkTWF0cml4VG9QYWNrZWRUZXh0dXJlKFxuICAgICAgdGV4dHVyZTogV2ViR0xUZXh0dXJlLCByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcixcbiAgICAgIG1hdHJpeDogRmxvYXQzMkFycmF5KSB7XG4gICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICByZXR1cm4gZ3BncHVfdXRpbC51cGxvYWRNYXRyaXhUb1BhY2tlZFRleHR1cmUoXG4gICAgICAgIHRoaXMuZ2wsIHRleHR1cmUsIHJvd3MsIGNvbHVtbnMsIG1hdHJpeCk7XG4gIH1cblxuICBwdWJsaWMgZG93bmxvYWRNYXRyaXhGcm9tVGV4dHVyZShcbiAgICAgIHRleHR1cmU6IFdlYkdMVGV4dHVyZSwgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIpOiBGbG9hdDMyQXJyYXkge1xuICAgIHJldHVybiB0aGlzLmRvd25sb2FkTWF0cml4RHJpdmVyKFxuICAgICAgICB0ZXh0dXJlLFxuICAgICAgICAoKSA9PlxuICAgICAgICAgICAgZ3BncHVfdXRpbC5kb3dubG9hZE1hdHJpeEZyb21PdXRwdXRUZXh0dXJlKHRoaXMuZ2wsIHJvd3MsIGNvbHVtbnMpKTtcbiAgfVxuXG4gIHB1YmxpYyBkb3dubG9hZE1hdHJpeEZyb21QYWNrZWRUZXh0dXJlKFxuICAgICAgdGV4dHVyZTogV2ViR0xUZXh0dXJlLCByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcik6IEZsb2F0MzJBcnJheSB7XG4gICAgcmV0dXJuIHRoaXMuZG93bmxvYWRNYXRyaXhEcml2ZXIoXG4gICAgICAgIHRleHR1cmUsXG4gICAgICAgICgpID0+IGdwZ3B1X3V0aWwuZG93bmxvYWRNYXRyaXhGcm9tUGFja2VkT3V0cHV0VGV4dHVyZShcbiAgICAgICAgICAgIHRoaXMuZ2wsIHJvd3MsIGNvbHVtbnMpKTtcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGVQcm9ncmFtKGZyYWdtZW50U2hhZGVyU291cmNlOiBzdHJpbmcpOiBXZWJHTFByb2dyYW0ge1xuICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgY29uc3QgZ2wgPSB0aGlzLmdsO1xuICAgIGNvbnN0IGZyYWdtZW50U2hhZGVyOiBXZWJHTFNoYWRlciA9XG4gICAgICAgIHdlYmdsX3V0aWwuY3JlYXRlRnJhZ21lbnRTaGFkZXIoZ2wsIGZyYWdtZW50U2hhZGVyU291cmNlKTtcbiAgICBjb25zdCB2ZXJ0ZXhTaGFkZXI6IFdlYkdMU2hhZGVyID0gZ3BncHVfdXRpbC5jcmVhdGVWZXJ0ZXhTaGFkZXIoZ2wpO1xuICAgIGNvbnN0IHByb2dyYW06IFdlYkdMUHJvZ3JhbSA9IHdlYmdsX3V0aWwuY3JlYXRlUHJvZ3JhbShnbCk7XG4gICAgd2ViZ2xfdXRpbC5jYWxsQW5kQ2hlY2soZ2wsICgpID0+IGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpKTtcbiAgICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZyYWdtZW50U2hhZGVyKSk7XG4gICAgd2ViZ2xfdXRpbC5saW5rUHJvZ3JhbShnbCwgcHJvZ3JhbSk7XG4gICAgaWYgKHRoaXMuYXV0b0RlYnVnVmFsaWRhdGUpIHtcbiAgICAgIHdlYmdsX3V0aWwudmFsaWRhdGVQcm9ncmFtKGdsLCBwcm9ncmFtKTtcbiAgICB9XG4gICAgd2ViZ2xfdXRpbC5jYWxsQW5kQ2hlY2soZ2wsICgpID0+IGdsLmRldGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpKTtcbiAgICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wuZGVsZXRlU2hhZGVyKHZlcnRleFNoYWRlcikpO1xuICAgIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5kZXRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ21lbnRTaGFkZXIpKTtcbiAgICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wuZGVsZXRlU2hhZGVyKGZyYWdtZW50U2hhZGVyKSk7XG4gICAgcmV0dXJuIHByb2dyYW07XG4gIH1cblxuICBwdWJsaWMgZGVsZXRlUHJvZ3JhbShwcm9ncmFtOiBXZWJHTFByb2dyYW0pIHtcbiAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgIGlmIChwcm9ncmFtID09PSB0aGlzLnByb2dyYW0pIHtcbiAgICAgIHRoaXMucHJvZ3JhbSA9IG51bGw7XG4gICAgfVxuICAgIGlmIChwcm9ncmFtICE9IG51bGwpIHtcbiAgICAgIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKHRoaXMuZ2wsICgpID0+IHRoaXMuZ2wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNldFByb2dyYW0ocHJvZ3JhbTogV2ViR0xQcm9ncmFtfG51bGwpIHtcbiAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07XG4gICAgaWYgKCh0aGlzLnByb2dyYW0gIT0gbnVsbCkgJiYgdGhpcy5hdXRvRGVidWdWYWxpZGF0ZSkge1xuICAgICAgd2ViZ2xfdXRpbC52YWxpZGF0ZVByb2dyYW0odGhpcy5nbCwgdGhpcy5wcm9ncmFtKTtcbiAgICB9XG4gICAgd2ViZ2xfdXRpbC5jYWxsQW5kQ2hlY2sodGhpcy5nbCwgKCkgPT4gdGhpcy5nbC51c2VQcm9ncmFtKHByb2dyYW0pKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRVbmlmb3JtTG9jYXRpb24odW5pZm9ybU5hbWU6IHN0cmluZyk6IFdlYkdMVW5pZm9ybUxvY2F0aW9uIHtcbiAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgIHRoaXMudGhyb3dJZk5vUHJvZ3JhbSgpO1xuICAgIHJldHVybiB3ZWJnbF91dGlsLmdldFByb2dyYW1Vbmlmb3JtTG9jYXRpb25PclRocm93KFxuICAgICAgICB0aGlzLmdsLCB0aGlzLnByb2dyYW0hLCB1bmlmb3JtTmFtZSk7XG4gIH1cblxuICBwdWJsaWMgc2V0SW5wdXRNYXRyaXhUZXh0dXJlKFxuICAgICAgaW5wdXRNYXRyaXhUZXh0dXJlOiBXZWJHTFRleHR1cmUsIHVuaWZvcm1OYW1lOiBzdHJpbmcsXG4gICAgICB0ZXh0dXJlVW5pdDogbnVtYmVyKSB7XG4gICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICB0aGlzLnRocm93SWZOb1Byb2dyYW0oKTtcbiAgICB3ZWJnbF91dGlsLmJpbmRUZXh0dXJlVG9Qcm9ncmFtVW5pZm9ybVNhbXBsZXIoXG4gICAgICAgIHRoaXMuZ2wsIHRoaXMucHJvZ3JhbSEsIGlucHV0TWF0cml4VGV4dHVyZSwgdW5pZm9ybU5hbWUsIHRleHR1cmVVbml0KTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRPdXRwdXRNYXRyaXhUZXh0dXJlKFxuICAgICAgb3V0cHV0TWF0cml4VGV4dHVyZTogV2ViR0xUZXh0dXJlLCByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcikge1xuICAgIHRoaXMuc2V0T3V0cHV0TWF0cml4VGV4dHVyZURyaXZlcihvdXRwdXRNYXRyaXhUZXh0dXJlLCBjb2x1bW5zLCByb3dzKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRPdXRwdXRQYWNrZWRNYXRyaXhUZXh0dXJlKFxuICAgICAgb3V0cHV0UGFja2VkTWF0cml4VGV4dHVyZTogV2ViR0xUZXh0dXJlLCByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcikge1xuICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgY29uc3QgW3dpZHRoLCBoZWlnaHRdID1cbiAgICAgICAgdGV4X3V0aWwuZ2V0UGFja2VkTWF0cml4VGV4dHVyZVNoYXBlV2lkdGhIZWlnaHQocm93cywgY29sdW1ucyk7XG4gICAgdGhpcy5zZXRPdXRwdXRNYXRyaXhUZXh0dXJlRHJpdmVyKG91dHB1dFBhY2tlZE1hdHJpeFRleHR1cmUsIHdpZHRoLCBoZWlnaHQpO1xuICB9XG5cbiAgcHVibGljIHNldE91dHB1dE1hdHJpeFdyaXRlUmVnaW9uKFxuICAgICAgc3RhcnRSb3c6IG51bWJlciwgbnVtUm93czogbnVtYmVyLCBzdGFydENvbHVtbjogbnVtYmVyLFxuICAgICAgbnVtQ29sdW1uczogbnVtYmVyKSB7XG4gICAgdGhpcy5zZXRPdXRwdXRNYXRyaXhXcml0ZVJlZ2lvbkRyaXZlcihcbiAgICAgICAgc3RhcnRDb2x1bW4sIHN0YXJ0Um93LCBudW1Db2x1bW5zLCBudW1Sb3dzKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRPdXRwdXRQYWNrZWRNYXRyaXhXcml0ZVJlZ2lvbihcbiAgICAgIHN0YXJ0Um93OiBudW1iZXIsIG51bVJvd3M6IG51bWJlciwgc3RhcnRDb2x1bW46IG51bWJlcixcbiAgICAgIG51bUNvbHVtbnM6IG51bWJlcikge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0T3V0cHV0UGFja2VkTWF0cml4V3JpdGVSZWdpb24gbm90IGltcGxlbWVudGVkLicpO1xuICB9XG5cbiAgcHVibGljIGRlYnVnVmFsaWRhdGUoKSB7XG4gICAgaWYgKHRoaXMucHJvZ3JhbSAhPSBudWxsKSB7XG4gICAgICB3ZWJnbF91dGlsLnZhbGlkYXRlUHJvZ3JhbSh0aGlzLmdsLCB0aGlzLnByb2dyYW0pO1xuICAgIH1cbiAgICB3ZWJnbF91dGlsLnZhbGlkYXRlRnJhbWVidWZmZXIodGhpcy5nbCk7XG4gIH1cblxuICBwdWJsaWMgZXhlY3V0ZVByb2dyYW0oKSB7XG4gICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICB0aGlzLnRocm93SWZOb1Byb2dyYW0oKTtcbiAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XG4gICAgZ3BncHVfdXRpbC5iaW5kVmVydGV4UHJvZ3JhbUF0dHJpYnV0ZVN0cmVhbXMoXG4gICAgICAgIGdsLCB0aGlzLnByb2dyYW0hLCB0aGlzLnZlcnRleEJ1ZmZlcik7XG4gICAgaWYgKHRoaXMuYXV0b0RlYnVnVmFsaWRhdGUpIHtcbiAgICAgIHRoaXMuZGVidWdWYWxpZGF0ZSgpO1xuICAgIH1cbiAgICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhcbiAgICAgICAgZ2wsICgpID0+IGdsLmRyYXdFbGVtZW50cyhnbC5UUklBTkdMRVMsIDYsIGdsLlVOU0lHTkVEX1NIT1JULCAwKSk7XG4gIH1cblxuICBwdWJsaWMgYmxvY2tVbnRpbEFsbFByb2dyYW1zQ29tcGxldGVkKCkge1xuICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgd2ViZ2xfdXRpbC5jYWxsQW5kQ2hlY2sodGhpcy5nbCwgKCkgPT4gdGhpcy5nbC5maW5pc2goKSk7XG4gIH1cblxuICBwcml2YXRlIGRvd25sb2FkTWF0cml4RHJpdmVyKFxuICAgICAgdGV4dHVyZTogV2ViR0xUZXh0dXJlLFxuICAgICAgZG93bmxvYWRBbmREZWNvZGU6ICgpID0+IEZsb2F0MzJBcnJheSk6IEZsb2F0MzJBcnJheSB7XG4gICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICB3ZWJnbF91dGlsLmJpbmRDb2xvclRleHR1cmVUb0ZyYW1lYnVmZmVyKFxuICAgICAgICB0aGlzLmdsLCB0ZXh0dXJlLCB0aGlzLmZyYW1lYnVmZmVyKTtcbiAgICBjb25zdCByZXN1bHQgPSBkb3dubG9hZEFuZERlY29kZSgpO1xuICAgIGlmICh0aGlzLm91dHB1dFRleHR1cmUgIT0gbnVsbCkge1xuICAgICAgd2ViZ2xfdXRpbC5iaW5kQ29sb3JUZXh0dXJlVG9GcmFtZWJ1ZmZlcihcbiAgICAgICAgICB0aGlzLmdsLCB0aGlzLm91dHB1dFRleHR1cmUsIHRoaXMuZnJhbWVidWZmZXIpO1xuICAgICAgaWYgKHRoaXMuYXV0b0RlYnVnVmFsaWRhdGUpIHtcbiAgICAgICAgd2ViZ2xfdXRpbC52YWxpZGF0ZUZyYW1lYnVmZmVyKHRoaXMuZ2wpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB3ZWJnbF91dGlsLnVuYmluZENvbG9yVGV4dHVyZUZyb21GcmFtZWJ1ZmZlcih0aGlzLmdsLCB0aGlzLmZyYW1lYnVmZmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHByaXZhdGUgc2V0T3V0cHV0TWF0cml4VGV4dHVyZURyaXZlcihcbiAgICAgIG91dHB1dE1hdHJpeFRleHR1cmVNYXliZVBhY2tlZDogV2ViR0xUZXh0dXJlLCB3aWR0aDogbnVtYmVyLFxuICAgICAgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgIGNvbnN0IGdsID0gdGhpcy5nbDtcbiAgICB3ZWJnbF91dGlsLmJpbmRDb2xvclRleHR1cmVUb0ZyYW1lYnVmZmVyKFxuICAgICAgICBnbCwgb3V0cHV0TWF0cml4VGV4dHVyZU1heWJlUGFja2VkLCB0aGlzLmZyYW1lYnVmZmVyKTtcbiAgICBpZiAodGhpcy5hdXRvRGVidWdWYWxpZGF0ZSkge1xuICAgICAgd2ViZ2xfdXRpbC52YWxpZGF0ZUZyYW1lYnVmZmVyKGdsKTtcbiAgICB9XG4gICAgdGhpcy5vdXRwdXRUZXh0dXJlID0gb3V0cHV0TWF0cml4VGV4dHVyZU1heWJlUGFja2VkO1xuICAgIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC52aWV3cG9ydCgwLCAwLCB3aWR0aCwgaGVpZ2h0KSk7XG4gICAgd2ViZ2xfdXRpbC5jYWxsQW5kQ2hlY2soZ2wsICgpID0+IGdsLnNjaXNzb3IoMCwgMCwgd2lkdGgsIGhlaWdodCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRPdXRwdXRNYXRyaXhXcml0ZVJlZ2lvbkRyaXZlcihcbiAgICAgIHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgd2ViZ2xfdXRpbC5jYWxsQW5kQ2hlY2soXG4gICAgICAgIHRoaXMuZ2wsICgpID0+IHRoaXMuZ2wuc2Npc3Nvcih4LCB5LCB3aWR0aCwgaGVpZ2h0KSk7XG4gIH1cblxuICBwcml2YXRlIHRocm93SWZEaXNwb3NlZCgpIHtcbiAgICBpZiAodGhpcy5kaXNwb3NlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBdHRlbXB0ZWQgdG8gdXNlIGRpc3Bvc2VkIEdQR1BVQ29udGV4dC4nKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHRocm93SWZOb1Byb2dyYW0oKSB7XG4gICAgaWYgKHRoaXMucHJvZ3JhbSA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIEdQVSBwcm9ncmFtIGlzIGN1cnJlbnRseSBzZXQuJyk7XG4gICAgfVxuICB9XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCAqIGFzIHRleF91dGlsIGZyb20gJy4vdGV4X3V0aWwnO1xuaW1wb3J0ICogYXMgd2ViZ2xfdXRpbCBmcm9tICcuL3dlYmdsX3V0aWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2ViR0xDb250ZXh0QXR0cmlidXRlcygpOiBXZWJHTENvbnRleHRBdHRyaWJ1dGVzIHtcbiAgcmV0dXJuIHtcbiAgICBhbHBoYTogZmFsc2UsXG4gICAgYW50aWFsaWFzOiBmYWxzZSxcbiAgICBwcmVtdWx0aXBsaWVkQWxwaGE6IGZhbHNlLFxuICAgIHByZXNlcnZlRHJhd2luZ0J1ZmZlcjogZmFsc2UsXG4gICAgZGVwdGg6IGZhbHNlLFxuICAgIHN0ZW5jaWw6IGZhbHNlLFxuICAgIGZhaWxJZk1ham9yUGVyZm9ybWFuY2VDYXZlYXQ6IHRydWVcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVdlYkdMQ29udGV4dChjYW52YXM/OiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICBjb25zdCBhdHRyaWJ1dGVzID0gZ2V0V2ViR0xDb250ZXh0QXR0cmlidXRlcygpO1xuICBsZXQgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dDtcbiAgaWYgKGNhbnZhcyAhPSBudWxsKSB7XG4gICAgZ2wgPSB3ZWJnbF91dGlsLmNyZWF0ZVdlYkdMUmVuZGVyaW5nQ29udGV4dEZyb21DYW52YXMoY2FudmFzLCBhdHRyaWJ1dGVzKTtcbiAgfSBlbHNlIHtcbiAgICBnbCA9IHdlYmdsX3V0aWwuY3JlYXRlV2ViR0xSZW5kZXJpbmdDb250ZXh0KGF0dHJpYnV0ZXMpO1xuICB9XG4gIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5kaXNhYmxlKGdsLkRFUFRIX1RFU1QpKTtcbiAgd2ViZ2xfdXRpbC5jYWxsQW5kQ2hlY2soZ2wsICgpID0+IGdsLmRpc2FibGUoZ2wuU1RFTkNJTF9URVNUKSk7XG4gIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5kaXNhYmxlKGdsLkJMRU5EKSk7XG4gIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5kaXNhYmxlKGdsLkRJVEhFUikpO1xuICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wuZGlzYWJsZShnbC5QT0xZR09OX09GRlNFVF9GSUxMKSk7XG4gIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5kaXNhYmxlKGdsLlNBTVBMRV9DT1ZFUkFHRSkpO1xuICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wuZW5hYmxlKGdsLlNDSVNTT1JfVEVTVCkpO1xuICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wuZW5hYmxlKGdsLkNVTExfRkFDRSkpO1xuICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wuY3VsbEZhY2UoZ2wuQkFDSykpO1xuICByZXR1cm4gZ2w7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVWZXJ0ZXhTaGFkZXIoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCk6IFdlYkdMU2hhZGVyIHtcbiAgY29uc3QgdmVydGV4U2hhZGVyU291cmNlID0gYFxuICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcbiAgICBhdHRyaWJ1dGUgdmVjMyBjbGlwU3BhY2VQb3M7XG4gICAgYXR0cmlidXRlIHZlYzIgdXY7XG4gICAgdmFyeWluZyB2ZWMyIHJlc3VsdFVWO1xuXG4gICAgdm9pZCBtYWluKCkge1xuICAgICAgZ2xfUG9zaXRpb24gPSB2ZWM0KGNsaXBTcGFjZVBvcywgMSk7XG4gICAgICByZXN1bHRVViA9IHV2O1xuICAgIH1gO1xuICByZXR1cm4gd2ViZ2xfdXRpbC5jcmVhdGVWZXJ0ZXhTaGFkZXIoZ2wsIHZlcnRleFNoYWRlclNvdXJjZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVWZXJ0ZXhCdWZmZXIoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCk6IFdlYkdMQnVmZmVyIHtcbiAgLy8gW3ggeSB6IHUgdl0gKiBbdXBwZXItbGVmdCwgbG93ZXItbGVmdCwgdXBwZXItcmlnaHQsIGxvd2VyLXJpZ2h0XVxuICBjb25zdCB2ZXJ0ZXhBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoXG4gICAgICBbLTEsIDEsIDAsIDAsIDEsIC0xLCAtMSwgMCwgMCwgMCwgMSwgMSwgMCwgMSwgMSwgMSwgLTEsIDAsIDEsIDBdKTtcbiAgcmV0dXJuIHdlYmdsX3V0aWwuY3JlYXRlU3RhdGljVmVydGV4QnVmZmVyKGdsLCB2ZXJ0ZXhBcnJheSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJbmRleEJ1ZmZlcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KTogV2ViR0xCdWZmZXIge1xuICAvLyBPcGVuR0wgKGFuZCBXZWJHTCkgaGF2ZSBcIkNDVyA9PSBmcm9udFwiIHdpbmRpbmdcbiAgY29uc3QgdHJpYW5nbGVWZXJ0ZXhJbmRpY2VzID0gbmV3IFVpbnQxNkFycmF5KFswLCAxLCAyLCAyLCAxLCAzXSk7XG4gIHJldHVybiB3ZWJnbF91dGlsLmNyZWF0ZVN0YXRpY0luZGV4QnVmZmVyKGdsLCB0cmlhbmdsZVZlcnRleEluZGljZXMpO1xufVxuXG5mdW5jdGlvbiBnZXRUZXh0dXJlSW50ZXJuYWxGb3JtYXQoXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgbnVtQ2hhbm5lbHM6IG51bWJlcik6IG51bWJlciB7XG4gIGlmICh3ZWJnbF91dGlsLmlzV2ViR0wyRW5hYmxlZCgpKSB7XG4gICAgaWYgKG51bUNoYW5uZWxzID09PSA0KSB7XG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG4gICAgICByZXR1cm4gKGdsIGFzIGFueSkuUkdCQTMyRjtcbiAgICB9XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxuICAgIHJldHVybiAoZ2wgYXMgYW55KS5SMzJGO1xuICB9XG4gIHJldHVybiBnbC5SR0JBO1xufVxuXG5mdW5jdGlvbiBnZXRUZXh0dXJlRm9ybWF0KFxuICAgIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIG51bUNoYW5uZWxzOiBudW1iZXIpOiBudW1iZXIge1xuICBpZiAod2ViZ2xfdXRpbC5pc1dlYkdMMkVuYWJsZWQoKSAmJiBudW1DaGFubmVscyA9PT0gMSkge1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcbiAgICByZXR1cm4gKGdsIGFzIGFueSkuUkVEO1xuICB9XG4gIHJldHVybiBnbC5SR0JBO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBbmRDb25maWd1cmVUZXh0dXJlKFxuICAgIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLFxuICAgIG51bUNoYW5uZWxzOiBudW1iZXIpOiBXZWJHTFRleHR1cmUge1xuICB3ZWJnbF91dGlsLnZhbGlkYXRlVGV4dHVyZVNpemUoZ2wsIHdpZHRoLCBoZWlnaHQpO1xuICBjb25zdCB0ZXh0dXJlID0gd2ViZ2xfdXRpbC5jcmVhdGVUZXh0dXJlKGdsKTtcblxuICBjb25zdCB0ZXgyZCA9IGdsLlRFWFRVUkVfMkQ7XG4gIGNvbnN0IGludGVybmFsRm9ybWF0ID0gZ2V0VGV4dHVyZUludGVybmFsRm9ybWF0KGdsLCBudW1DaGFubmVscyk7XG4gIGNvbnN0IGZvcm1hdCA9IGdldFRleHR1cmVGb3JtYXQoZ2wsIG51bUNoYW5uZWxzKTtcbiAgd2ViZ2xfdXRpbC5jYWxsQW5kQ2hlY2soZ2wsICgpID0+IGdsLmJpbmRUZXh0dXJlKHRleDJkLCB0ZXh0dXJlKSk7XG4gIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKFxuICAgICAgZ2wsICgpID0+IGdsLnRleFBhcmFtZXRlcmkodGV4MmQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKSk7XG4gIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKFxuICAgICAgZ2wsICgpID0+IGdsLnRleFBhcmFtZXRlcmkodGV4MmQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKSk7XG4gIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKFxuICAgICAgZ2wsICgpID0+IGdsLnRleFBhcmFtZXRlcmkodGV4MmQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTkVBUkVTVCkpO1xuICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhcbiAgICAgIGdsLCAoKSA9PiBnbC50ZXhQYXJhbWV0ZXJpKHRleDJkLCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpKTtcbiAgd2ViZ2xfdXRpbC5jYWxsQW5kQ2hlY2soXG4gICAgICBnbCxcbiAgICAgICgpID0+IGdsLnRleEltYWdlMkQoXG4gICAgICAgICAgdGV4MmQsIDAsIGludGVybmFsRm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCAwLCBmb3JtYXQsIGdsLkZMT0FULCBudWxsKSk7XG4gIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBudWxsKSk7XG4gIHJldHVybiB0ZXh0dXJlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTWF0cml4VGV4dHVyZShcbiAgICBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcik6IFdlYkdMVGV4dHVyZSB7XG4gIGNvbnN0IFt3aWR0aCwgaGVpZ2h0XSA9XG4gICAgICB0ZXhfdXRpbC5nZXRVbnBhY2tlZE1hdHJpeFRleHR1cmVTaGFwZVdpZHRoSGVpZ2h0KHJvd3MsIGNvbHVtbnMpO1xuICBjb25zdCBudW1DaGFubmVscyA9IDE7XG4gIHJldHVybiBjcmVhdGVBbmRDb25maWd1cmVUZXh0dXJlKGdsLCB3aWR0aCwgaGVpZ2h0LCBudW1DaGFubmVscyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb2xvck1hdHJpeFRleHR1cmUoXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIpOiBXZWJHTFRleHR1cmUge1xuICBjb25zdCBbd2lkdGgsIGhlaWdodF0gPVxuICAgICAgdGV4X3V0aWwuZ2V0Q29sb3JNYXRyaXhUZXh0dXJlU2hhcGVXaWR0aEhlaWdodChyb3dzLCBjb2x1bW5zKTtcbiAgY29uc3QgbnVtQ2hhbm5lbHMgPSA0O1xuICByZXR1cm4gY3JlYXRlQW5kQ29uZmlndXJlVGV4dHVyZShnbCwgd2lkdGgsIGhlaWdodCwgbnVtQ2hhbm5lbHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUGFja2VkTWF0cml4VGV4dHVyZShcbiAgICBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcik6IFdlYkdMVGV4dHVyZSB7XG4gIGNvbnN0IFt3aWR0aCwgaGVpZ2h0XSA9XG4gICAgICB0ZXhfdXRpbC5nZXRQYWNrZWRNYXRyaXhUZXh0dXJlU2hhcGVXaWR0aEhlaWdodChyb3dzLCBjb2x1bW5zKTtcbiAgY29uc3QgbnVtQ2hhbm5lbHMgPSA0O1xuICByZXR1cm4gY3JlYXRlQW5kQ29uZmlndXJlVGV4dHVyZShnbCwgd2lkdGgsIGhlaWdodCwgbnVtQ2hhbm5lbHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmluZFZlcnRleFByb2dyYW1BdHRyaWJ1dGVTdHJlYW1zKFxuICAgIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHByb2dyYW06IFdlYkdMUHJvZ3JhbSxcbiAgICB2ZXJ0ZXhCdWZmZXI6IFdlYkdMQnVmZmVyKSB7XG4gIGNvbnN0IHBvc09mZnNldCA9IDA7ICAgICAgICAgICAgICAgLy8geCBpcyB0aGUgZmlyc3QgYnVmZmVyIGVsZW1lbnRcbiAgY29uc3QgdXZPZmZzZXQgPSAzICogNDsgICAgICAgICAgICAvLyB1diBjb21lcyBhZnRlciBbeCB5IHpdXG4gIGNvbnN0IHN0cmlkZSA9ICgzICogNCkgKyAoMiAqIDQpOyAgLy8geHl6ICsgdXYsIGVhY2ggZW50cnkgaXMgNC1ieXRlIGZsb2F0LlxuICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhcbiAgICAgIGdsLCAoKSA9PiBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdmVydGV4QnVmZmVyKSk7XG4gIHdlYmdsX3V0aWwuYmluZFZlcnRleEJ1ZmZlclRvUHJvZ3JhbUF0dHJpYnV0ZShcbiAgICAgIGdsLCBwcm9ncmFtLCAnY2xpcFNwYWNlUG9zJywgdmVydGV4QnVmZmVyLCAzLCBzdHJpZGUsIHBvc09mZnNldCk7XG4gIHRyeSB7XG4gICAgd2ViZ2xfdXRpbC5iaW5kVmVydGV4QnVmZmVyVG9Qcm9ncmFtQXR0cmlidXRlKFxuICAgICAgICBnbCwgcHJvZ3JhbSwgJ3V2JywgdmVydGV4QnVmZmVyLCAyLCBzdHJpZGUsIHV2T2Zmc2V0KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIFByb2dyYW1zIHdpdGggMXgxIG91dHB1dCB0ZXh0dXJlcyBkb24ndCB1c2UgdGhlIHV2IGF0dHJpYnV0ZS5cbiAgICAvLyBUaGlzIGNhbiBjYXVzZSB0aGUgc2hhZGVyIGxpbmtlciB0byBkZWFkLXN0cmlwIGl0LCBzbyB3ZSBzaG91bGRuJ3RcbiAgICAvLyBjb21wbGFpbiBvciBmYWlsIGlmIGl0J3Mgbm90IHByZXNlbnQuXG4gICAgaWYgKCFlLmhhc093blByb3BlcnR5KCduYW1lZFZlcnRleEF0dHJpYnV0ZU5vdEZvdW5kJykpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGxvYWRQaXhlbERhdGFUb1RleHR1cmUoXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdGV4dHVyZTogV2ViR0xUZXh0dXJlLFxuICAgIHBpeGVsczogSW1hZ2VEYXRhfEhUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudCkge1xuICBjb25zdCBudW1DaGFubmVscyA9IDQ7XG4gIGNvbnN0IGludGVybmFsRm9ybWF0ID0gZ2V0VGV4dHVyZUludGVybmFsRm9ybWF0KGdsLCBudW1DaGFubmVscyk7XG4gIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKSk7XG4gIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKFxuICAgICAgZ2wsXG4gICAgICAoKSA9PiBnbC50ZXhJbWFnZTJEKFxuICAgICAgICAgIGdsLlRFWFRVUkVfMkQsIDAsIGludGVybmFsRm9ybWF0LCBnbC5SR0JBLCBnbC5GTE9BVCwgcGl4ZWxzKSk7XG4gIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBudWxsKSk7XG59XG5cbmZ1bmN0aW9uIHVwbG9hZERhdGFUb1RleHR1cmUoXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdGV4dHVyZTogV2ViR0xUZXh0dXJlLCB3aWR0aDogbnVtYmVyLFxuICAgIGhlaWdodDogbnVtYmVyLCBkYXRhOiBGbG9hdDMyQXJyYXksIG51bUNoYW5uZWxzOiBudW1iZXIpIHtcbiAgY29uc3QgdGV4dHVyZUZvcm1hdCA9IGdldFRleHR1cmVGb3JtYXQoZ2wsIG51bUNoYW5uZWxzKTtcblxuICB3ZWJnbF91dGlsLnZhbGlkYXRlVGV4dHVyZVNpemUoZ2wsIHdpZHRoLCBoZWlnaHQpO1xuICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZSkpO1xuICB3ZWJnbF91dGlsLmNhbGxBbmRDaGVjayhcbiAgICAgIGdsLFxuICAgICAgKCkgPT4gZ2wudGV4U3ViSW1hZ2UyRChcbiAgICAgICAgICBnbC5URVhUVVJFXzJELCAwLCAwLCAwLCB3aWR0aCwgaGVpZ2h0LCB0ZXh0dXJlRm9ybWF0LCBnbC5GTE9BVCxcbiAgICAgICAgICBkYXRhKSk7XG4gIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBudWxsKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGxvYWRNYXRyaXhUb1RleHR1cmUoXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdGV4dHVyZTogV2ViR0xUZXh0dXJlLCByb3dzOiBudW1iZXIsXG4gICAgY29sdW1uczogbnVtYmVyLCBtYXRyaXg6IEZsb2F0MzJBcnJheSwgbnVtQ2hhbm5lbHM6IG51bWJlcikge1xuICBjb25zdCBbdywgaF0gPVxuICAgICAgdGV4X3V0aWwuZ2V0VW5wYWNrZWRNYXRyaXhUZXh0dXJlU2hhcGVXaWR0aEhlaWdodChyb3dzLCBjb2x1bW5zKTtcblxuICBjb25zdCBjaGFubmVsc1BlclRleHR1cmUgPVxuICAgICAgbnVtQ2hhbm5lbHMgPT09IDEgPyB3ZWJnbF91dGlsLmdldENoYW5uZWxzUGVyVGV4dHVyZSgpIDogbnVtQ2hhbm5lbHM7XG4gIGNvbnN0IHVucGFja2VkQXJyYXkgPVxuICAgICAgbmV3IEZsb2F0MzJBcnJheSh0ZXhfdXRpbC5nZXRVbnBhY2tlZEFycmF5U2l6ZUZyb21NYXRyaXhTaXplKFxuICAgICAgICAgIG1hdHJpeC5sZW5ndGgsIGNoYW5uZWxzUGVyVGV4dHVyZSkpO1xuICB0ZXhfdXRpbC5lbmNvZGVNYXRyaXhUb1VucGFja2VkQXJyYXkoXG4gICAgICBtYXRyaXgsIHVucGFja2VkQXJyYXksIGNoYW5uZWxzUGVyVGV4dHVyZSk7XG5cbiAgdXBsb2FkRGF0YVRvVGV4dHVyZShnbCwgdGV4dHVyZSwgdywgaCwgdW5wYWNrZWRBcnJheSwgbnVtQ2hhbm5lbHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBsb2FkTWF0cml4VG9QYWNrZWRUZXh0dXJlKFxuICAgIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHRleHR1cmU6IFdlYkdMVGV4dHVyZSwgcm93czogbnVtYmVyLFxuICAgIGNvbHVtbnM6IG51bWJlciwgbWF0cml4OiBGbG9hdDMyQXJyYXkpIHtcbiAgY29uc3QgW3csIGhdID0gdGV4X3V0aWwuZ2V0UGFja2VkTWF0cml4VGV4dHVyZVNoYXBlV2lkdGhIZWlnaHQocm93cywgY29sdW1ucyk7XG4gIGNvbnN0IHBhY2tlZFJHQkEgPSBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgdGV4X3V0aWwuZ2V0UGFja2VkUkdCQUFycmF5U2l6ZUZyb21NYXRyaXhTaGFwZShyb3dzLCBjb2x1bW5zKSk7XG4gIHRleF91dGlsLmVuY29kZU1hdHJpeFRvUGFja2VkUkdCQShtYXRyaXgsIHJvd3MsIGNvbHVtbnMsIHBhY2tlZFJHQkEpO1xuICBjb25zdCBudW1DaGFubmVscyA9IDQ7XG4gIHVwbG9hZERhdGFUb1RleHR1cmUoZ2wsIHRleHR1cmUsIHcsIGgsIHBhY2tlZFJHQkEsIG51bUNoYW5uZWxzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkTWF0cml4RnJvbU91dHB1dFRleHR1cmUoXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIpOiBGbG9hdDMyQXJyYXkge1xuICBjb25zdCBbdywgaF0gPVxuICAgICAgdGV4X3V0aWwuZ2V0VW5wYWNrZWRNYXRyaXhUZXh0dXJlU2hhcGVXaWR0aEhlaWdodChyb3dzLCBjb2x1bW5zKTtcblxuICBjb25zdCBjaGFubmVsc1BlclRleHR1cmUgPSA0O1xuICBjb25zdCB1bnBhY2tlZEFycmF5ID1cbiAgICAgIG5ldyBGbG9hdDMyQXJyYXkodGV4X3V0aWwuZ2V0VW5wYWNrZWRBcnJheVNpemVGcm9tTWF0cml4U2l6ZShcbiAgICAgICAgICByb3dzICogY29sdW1ucywgY2hhbm5lbHNQZXJUZXh0dXJlKSk7XG4gIGNvbnN0IHRleHR1cmVGb3JtYXQgPSBnZXRUZXh0dXJlRm9ybWF0KGdsLCBjaGFubmVsc1BlclRleHR1cmUpO1xuXG4gIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKFxuICAgICAgZ2wsICgpID0+IGdsLnJlYWRQaXhlbHMoMCwgMCwgdywgaCwgZ2wuUkdCQSwgZ2wuRkxPQVQsIHVucGFja2VkQXJyYXkpKTtcblxuICBjb25zdCBtYXRyaXggPSBuZXcgRmxvYXQzMkFycmF5KHJvd3MgKiBjb2x1bW5zKTtcbiAgdGV4X3V0aWwuZGVjb2RlTWF0cml4RnJvbVVucGFja2VkQXJyYXkoXG4gICAgICB1bnBhY2tlZEFycmF5LCBtYXRyaXgsIGNoYW5uZWxzUGVyVGV4dHVyZSk7XG4gIHJldHVybiBtYXRyaXg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb3dubG9hZE1hdHJpeEZyb21QYWNrZWRPdXRwdXRUZXh0dXJlKFxuICAgIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyKTogRmxvYXQzMkFycmF5IHtcbiAgY29uc3QgW3csIGhdID0gdGV4X3V0aWwuZ2V0UGFja2VkTWF0cml4VGV4dHVyZVNoYXBlV2lkdGhIZWlnaHQocm93cywgY29sdW1ucyk7XG4gIGNvbnN0IHBhY2tlZFJHQkEgPSBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgdGV4X3V0aWwuZ2V0UGFja2VkUkdCQUFycmF5U2l6ZUZyb21NYXRyaXhTaGFwZShyb3dzLCBjb2x1bW5zKSk7XG4gIHdlYmdsX3V0aWwuY2FsbEFuZENoZWNrKFxuICAgICAgZ2wsICgpID0+IGdsLnJlYWRQaXhlbHMoMCwgMCwgdywgaCwgZ2wuUkdCQSwgZ2wuRkxPQVQsIHBhY2tlZFJHQkEpKTtcbiAgY29uc3QgbWF0cml4ID0gbmV3IEZsb2F0MzJBcnJheShyb3dzICogY29sdW1ucyk7XG4gIHJldHVybiB0ZXhfdXRpbC5kZWNvZGVNYXRyaXhGcm9tUGFja2VkUkdCQShwYWNrZWRSR0JBLCByb3dzLCBjb2x1bW5zLCBtYXRyaXgpO1xufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge0dQR1BVQ29udGV4dH0gZnJvbSAnLi9ncGdwdV9jb250ZXh0JztcbmltcG9ydCAqIGFzIHVuYXJ5b3BfZ3B1IGZyb20gJy4vdW5hcnlvcF9ncHUnO1xuXG5mdW5jdGlvbiBnZXRMb2dVbmFyeU9wKCk6IHN0cmluZyB7XG4gIHJldHVybiAnZ2xfRnJhZ0NvbG9yID0gdmVjNChsb2codmFsdWUpLCAwLCAwLCAwKTsnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHtcbiAgcmV0dXJuIHVuYXJ5b3BfZ3B1LmdldEZyYWdtZW50U2hhZGVyU291cmNlKGdldExvZ1VuYXJ5T3AoKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2coXG4gICAgZ3BncHU6IEdQR1BVQ29udGV4dCwgbG9nUHJvZ3JhbTogV2ViR0xQcm9ncmFtLCBhOiBXZWJHTFRleHR1cmUsXG4gICAgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIsIHJlc3VsdDogV2ViR0xUZXh0dXJlKSB7XG4gIHVuYXJ5b3BfZ3B1LnVuYXJ5T3AoZ3BncHUsIGxvZ1Byb2dyYW0sIGEsIHJvd3MsIGNvbHVtbnMsIHJlc3VsdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGxvYWRMb2dEb3dubG9hZChcbiAgICBhOiBGbG9hdDMyQXJyYXksIHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyKTogRmxvYXQzMkFycmF5IHtcbiAgcmV0dXJuIHVuYXJ5b3BfZ3B1LnVwbG9hZFVuYXJ5T3BEb3dubG9hZChhLCByb3dzLCBjb2x1bW5zLCBnZXRMb2dVbmFyeU9wKCkpO1xufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge0dQR1BVQ29udGV4dH0gZnJvbSAnLi9ncGdwdV9jb250ZXh0JztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50U2hhZGVyU291cmNlKHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgbWF0cml4QTtcbiAgICB2YXJ5aW5nIHZlYzIgcmVzdWx0VVY7XG5cbiAgICBjb25zdCB2ZWMyIGFEaW1DUiA9IHZlYzIoJHtjb2x1bW5zfS4wLCAke3Jvd3N9LjApO1xuICAgIGNvbnN0IHZlYzIgaGFsZkNSID0gdmVjMigwLjUsIDAuNSk7XG5cbiAgICB2b2lkIG1haW4oKSB7XG4gICAgICBmbG9hdCBhTWF4ID0gdGV4dHVyZTJEKG1hdHJpeEEsIGhhbGZDUiAvIGFEaW1DUikucjtcbiAgICAgIGZvciAoZmxvYXQgciA9IDAuMDsgciA8IGFEaW1DUi55OyByICs9IDEuMCkge1xuICAgICAgICBmb3IgKGZsb2F0IGMgPSAwLjA7IGMgPCBhRGltQ1IueDsgYyArPSAxLjApIHtcbiAgICAgICAgICB2ZWMyIHV2ID0gKHZlYzIoYywgcikgKyBoYWxmQ1IpIC8gYURpbUNSO1xuICAgICAgICAgIGZsb2F0IGFDdXIgPSB0ZXh0dXJlMkQobWF0cml4QSwgdXYpLnI7XG4gICAgICAgICAgYU1heCA9IG1heChhTWF4LCBhQ3VyKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmbG9hdCBleHBTdW0gPSAwLjA7XG4gICAgICBmb3IgKGZsb2F0IHIgPSAwLjA7IHIgPCBhRGltQ1IueTsgciArPSAxLjApIHtcbiAgICAgICAgZm9yIChmbG9hdCBjID0gMC4wOyBjIDwgYURpbUNSLng7IGMgKz0gMS4wKSB7XG4gICAgICAgICAgdmVjMiB1diA9ICh2ZWMyKGMsIHIpICsgaGFsZkNSKSAvIGFEaW1DUjtcbiAgICAgICAgICBmbG9hdCBhQ3VyID0gdGV4dHVyZTJEKG1hdHJpeEEsIHV2KS5yO1xuICAgICAgICAgIGV4cFN1bSArPSBleHAoYUN1ciAtIGFNYXgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoYU1heCArIGxvZyhleHBTdW0pLCAwLCAwLCAwKTtcbiAgICB9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvZ1N1bUV4cChcbiAgICBncGdwdTogR1BHUFVDb250ZXh0LCBsb2dTdW1FeHBQcm9ncmFtOiBXZWJHTFByb2dyYW0sIGE6IFdlYkdMVGV4dHVyZSxcbiAgICByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlciwgcmVzdWx0OiBXZWJHTFRleHR1cmUpIHtcbiAgZ3BncHUuc2V0T3V0cHV0TWF0cml4VGV4dHVyZShyZXN1bHQsIDEsIDEpO1xuICBncGdwdS5zZXRQcm9ncmFtKGxvZ1N1bUV4cFByb2dyYW0pO1xuICBncGdwdS5zZXRJbnB1dE1hdHJpeFRleHR1cmUoYSwgJ21hdHJpeEEnLCAwKTtcbiAgZ3BncHUuZXhlY3V0ZVByb2dyYW0oKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwbG9hZExvZ1N1bUV4cERvd25sb2FkKFxuICAgIGE6IEZsb2F0MzJBcnJheSwgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIpOiBudW1iZXIge1xuICBjb25zdCBncGdwdSA9IG5ldyBHUEdQVUNvbnRleHQoKTtcbiAgY29uc3QgcHJvZ3JhbSA9IGdwZ3B1LmNyZWF0ZVByb2dyYW0oZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2Uocm93cywgY29sdW1ucykpO1xuICBjb25zdCBhVGV4dHVyZSA9IGdwZ3B1LmNyZWF0ZU1hdHJpeFRleHR1cmUocm93cywgY29sdW1ucyk7XG4gIGNvbnN0IHJlc3VsdFRleHR1cmUgPSBncGdwdS5jcmVhdGVNYXRyaXhUZXh0dXJlKDEsIDEpO1xuICBncGdwdS51cGxvYWRNYXRyaXhUb1RleHR1cmUoYVRleHR1cmUsIHJvd3MsIGNvbHVtbnMsIGEpO1xuICBsb2dTdW1FeHAoZ3BncHUsIHByb2dyYW0sIGFUZXh0dXJlLCByb3dzLCBjb2x1bW5zLCByZXN1bHRUZXh0dXJlKTtcbiAgY29uc3QgcmVzdWx0ID0gZ3BncHUuZG93bmxvYWRNYXRyaXhGcm9tVGV4dHVyZShyZXN1bHRUZXh0dXJlLCAxLCAxKTtcbiAgZ3BncHUuZGVsZXRlTWF0cml4VGV4dHVyZShhVGV4dHVyZSk7XG4gIGdwZ3B1LmRlbGV0ZU1hdHJpeFRleHR1cmUocmVzdWx0VGV4dHVyZSk7XG4gIGdwZ3B1LmRlbGV0ZVByb2dyYW0ocHJvZ3JhbSk7XG4gIGdwZ3B1LmRpc3Bvc2UoKTtcbiAgcmV0dXJuIHJlc3VsdFswXTtcbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0ICogYXMgY29udl91dGlsIGZyb20gJy4uL2NvbnZfdXRpbCc7XG5pbXBvcnQge0dQR1BVQ29udGV4dH0gZnJvbSAnLi9ncGdwdV9jb250ZXh0JztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50U2hhZGVyTWF4UG9vbEJhY2twcm9wKFxuICAgIGR5U2hhcGVSQ0Q6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgZlNpemU6IG51bWJlciwgb3JpZ1N0cmlkZTogbnVtYmVyLFxuICAgIG9yaWdQYWQ6IG51bWJlcikge1xuICBjb25zdCBvcmlnSW5wdXREZXB0aCA9IGR5U2hhcGVSQ0RbMl07XG4gIGNvbnN0IHBhZCA9IGZTaXplIC0gMSAtIG9yaWdQYWQ7XG4gIGNvbnN0IFtkeVJvd3MsIGR5Q29scywgZGVwdGhdID0gZHlTaGFwZVJDRDtcblxuICBjb25zdCBkeVRleFNoYXBlUkMgPSBjb252X3V0aWwuY29tcHV0ZVRleFNoYXBlRnJvbTNEKGR5U2hhcGVSQ0QpO1xuXG4gIHJldHVybiBgXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIGR5O1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIG1heFBvcztcblxuICAgIGNvbnN0IHZlYzIgaGFsZkNSID0gdmVjMigwLjUsIDAuNSk7XG4gICAgY29uc3QgdmVjMiBkeVNoYXBlQ1IgPSB2ZWMyKCR7ZHlUZXhTaGFwZVJDWzFdfSwgJHtkeVRleFNoYXBlUkNbMF19KTtcblxuICAgIHZvaWQgbWFpbigpIHtcbiAgICAgIHZlYzIgZHhUZXhDUiA9IGZsb29yKGdsX0ZyYWdDb29yZC54eSk7XG5cbiAgICAgIC8vIE1hcCBmcm9tIDJEIChkeFRleFIsIGR4VGV4QykgdG8gM0QgKGR4UiwgZHhDLCBkKS5cbiAgICAgIGZsb2F0IGR4UiA9IGR4VGV4Q1IueTtcbiAgICAgIGZsb2F0IGR4QyA9IGZsb29yKGR4VGV4Q1IueCAvICR7b3JpZ0lucHV0RGVwdGh9LjApO1xuICAgICAgZmxvYXQgZCA9IG1vZChkeFRleENSLngsICR7b3JpZ0lucHV0RGVwdGh9LjApO1xuXG4gICAgICB2ZWMyIGR5UkNDb3JuZXIgPSB2ZWMyKGR4UiwgZHhDKSAtIHZlYzIoJHtwYWR9LjAsICR7cGFkfS4wKTtcbiAgICAgIGZsb2F0IGR5UkNvcm5lciA9IGR5UkNDb3JuZXIueDtcbiAgICAgIGZsb2F0IGR5Q0Nvcm5lciA9IGR5UkNDb3JuZXIueTtcblxuICAgICAgLy8gQ29udm9sdmUgZHkoPywgPywgZCkgd2l0aCBwb3MgbWFzayg6LCA6LCBkKSB0byBnZXQgZHgoeVIsIGR4QywgZCkuXG4gICAgICAvLyA/ID0gdG8gYmUgZGV0ZXJtaW5lZC4gOiA9IGFjcm9zcyBhbGwgdmFsdWVzIGluIHRoYXQgYXhpcy5cbiAgICAgIGZsb2F0IGRvdFByb2QgPSAwLjA7XG4gICAgICBmb3IgKGZsb2F0IHdSID0gMC4wOyB3UiA8ICR7ZlNpemV9LjA7IHdSICs9IDEuMCkge1xuXG4gICAgICAgIGZsb2F0IGR5UiA9IChkeVJDb3JuZXIgKyB3UikgLyAke29yaWdTdHJpZGV9LjA7XG4gICAgICAgIC8vIFRPRE8obnN0aG9yYXQpOiBTcGxpY2UgdGhpcyB3aXRoIGFub3RoZXIgdmVyc2lvbiB3aGVyZSB5b3UgY2FsbFxuICAgICAgICAvLyBnZXRNYXRyaXhWYWx1ZU9yWmVyb1BhZCgpLiBIZXJlIGFuZCBiZWxvdy5cbiAgICAgICAgaWYgKGR5UiA8IDAuMCB8fCBkeVIgPj0gJHtkeVJvd3N9LjAgfHwgZnJhY3QoZHlSKSA+IDAuMCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZmxvYXQgZHlUZXhSID0gZHlSO1xuXG4gICAgICAgIGZvciAoZmxvYXQgd0MgPSAwLjA7IHdDIDwgJHtmU2l6ZX0uMDsgd0MgKz0gMS4wKSB7XG5cbiAgICAgICAgICBmbG9hdCBkeUMgPSAoZHlDQ29ybmVyICsgd0MpIC8gJHtvcmlnU3RyaWRlfS4wO1xuICAgICAgICAgIGlmIChkeUMgPCAwLjAgfHwgZHlDID49ICR7ZHlDb2xzfS4wIHx8IGZyYWN0KGR5QykgPiAwLjApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZsb2F0IGR5VGV4QyA9IGR5QyAqICR7ZGVwdGh9LjAgKyBkO1xuXG4gICAgICAgICAgLy8gUmVhZCBkeShkeVIsIGR5QywgZCkuXG4gICAgICAgICAgdmVjMiBkeVVWID0gKHZlYzIoZHlUZXhDLCBkeVRleFIpICsgaGFsZkNSKSAvIGR5U2hhcGVDUjtcbiAgICAgICAgICBmbG9hdCBkeVZhbHVlID0gdGV4dHVyZTJEKGR5LCBkeVVWKS5yO1xuXG4gICAgICAgICAgLy8gUmVhZCBtYXhQb3MoZHlSLCBkeUMsIGQpLlxuICAgICAgICAgIGZsb2F0IG1heFBvc1ZhbHVlID1cbiAgICAgICAgICAgICAgJHtmU2l6ZSAqIGZTaXplIC0gMX0uMCAtIHRleHR1cmUyRChtYXhQb3MsIGR5VVYpLnI7XG5cbiAgICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgdmFsdWUsIGNoZWNrIGl0IGFnYWluc3QgdGhlIHZhbHVlIGZyb20gdGhlXG4gICAgICAgICAgLy8gcG9zaXRpb24gbWF0cml4LlxuICAgICAgICAgIGZsb2F0IGN1clBvc1ZhbHVlID0gd1IgKiAke2ZTaXplfS4wICsgd0M7XG4gICAgICAgICAgZmxvYXQgbWFzayA9IGZsb2F0KG1heFBvc1ZhbHVlID09IGN1clBvc1ZhbHVlID8gMS4wIDogMC4wKTtcblxuICAgICAgICAgIGRvdFByb2QgKz0gZHlWYWx1ZSAqIG1hc2s7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoZG90UHJvZCwgMCwgMCwgMCk7XG4gICAgfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXhQb29sQmFja3Byb3AoXG4gICAgZ3BncHU6IEdQR1BVQ29udGV4dCwgcHJvZ3JhbTogV2ViR0xQcm9ncmFtLCBkeVRleDogV2ViR0xUZXh0dXJlLFxuICAgIG1heFBvc2l0aW9uc1RleDogV2ViR0xUZXh0dXJlLCByZXN1bHRUZXg6IFdlYkdMVGV4dHVyZSxcbiAgICByZXN1bHRUZXhTaGFwZVJDOiBbbnVtYmVyLCBudW1iZXJdKSB7XG4gIGdwZ3B1LnNldE91dHB1dE1hdHJpeFRleHR1cmUoXG4gICAgICByZXN1bHRUZXgsIHJlc3VsdFRleFNoYXBlUkNbMF0sIHJlc3VsdFRleFNoYXBlUkNbMV0pO1xuICBncGdwdS5zZXRQcm9ncmFtKHByb2dyYW0pO1xuICBncGdwdS5zZXRJbnB1dE1hdHJpeFRleHR1cmUoZHlUZXgsICdkeScsIDApO1xuICBncGdwdS5zZXRJbnB1dE1hdHJpeFRleHR1cmUobWF4UG9zaXRpb25zVGV4LCAnbWF4UG9zJywgMSk7XG4gIGdwZ3B1LmV4ZWN1dGVQcm9ncmFtKCk7XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCB7R1BHUFVDb250ZXh0fSBmcm9tICcuL2dwZ3B1X2NvbnRleHQnO1xuaW1wb3J0ICogYXMgcG9vbF9ncHUgZnJvbSAnLi9wb29sX2dwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudFNoYWRlck1heFBvb2xQb3NpdGlvbnNTb3VyY2UoXG4gICAgeFNoYXBlUkNEOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIGZTaXplOiBudW1iZXIsIHN0cmlkZTogbnVtYmVyLFxuICAgIHBhZDogbnVtYmVyKSB7XG4gIHJldHVybiBnZXRGcmFnbWVudFNoYWRlck1heFBvb2xDb21tb25Tb3VyY2UoXG4gICAgICB4U2hhcGVSQ0QsIGZTaXplLCBzdHJpZGUsIHBhZCwgdHJ1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudFNoYWRlck1heFBvb2xTb3VyY2UoXG4gICAgeFNoYXBlUkNEOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIGZTaXplOiBudW1iZXIsIHN0cmlkZTogbnVtYmVyLFxuICAgIHBhZDogbnVtYmVyKSB7XG4gIHJldHVybiBnZXRGcmFnbWVudFNoYWRlck1heFBvb2xDb21tb25Tb3VyY2UoXG4gICAgICB4U2hhcGVSQ0QsIGZTaXplLCBzdHJpZGUsIHBhZCwgZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBnZXRGcmFnbWVudFNoYWRlck1heFBvb2xDb21tb25Tb3VyY2UoXG4gICAgeFNoYXBlUkNEOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIGZTaXplOiBudW1iZXIsIHN0cmlkZTogbnVtYmVyLFxuICAgIHBhZDogbnVtYmVyLCBjb21wdXRlTWF4UG9zaXRpb25zOiBib29sZWFuKSB7XG4gIHJldHVybiBwb29sX2dwdS5nZXRGcmFnbWVudFNoYWRlclBvb2xDb21tb25Tb3VyY2UoXG4gICAgICB4U2hhcGVSQ0QsIGZTaXplLCBzdHJpZGUsIHBhZCwgJ21heCcsIGNvbXB1dGVNYXhQb3NpdGlvbnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWF4UG9vbENvbW1vbihcbiAgICBncGdwdTogR1BHUFVDb250ZXh0LCBwcm9ncmFtOiBXZWJHTFByb2dyYW0sIHg6IFdlYkdMVGV4dHVyZSxcbiAgICByZXN1bHQ6IFdlYkdMVGV4dHVyZSwgcmVzdWx0U2hhcGVSb3dDb2w6IFtudW1iZXIsIG51bWJlcl0pIHtcbiAgcG9vbF9ncHUucG9vbENvbW1vbihncGdwdSwgcHJvZ3JhbSwgeCwgcmVzdWx0LCByZXN1bHRTaGFwZVJvd0NvbCk7XG59IiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge0dQR1BVQ29udGV4dH0gZnJvbSAnLi9ncGdwdV9jb250ZXh0JztcbmltcG9ydCAqIGFzIHBvb2xfZ3B1IGZyb20gJy4vcG9vbF9ncHUnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRTaGFkZXJNaW5Qb29sU291cmNlKFxuICAgIHhTaGFwZVJDRDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdLCBmU2l6ZTogbnVtYmVyLCBzdHJpZGU6IG51bWJlcixcbiAgICBwYWQ6IG51bWJlcikge1xuICByZXR1cm4gcG9vbF9ncHUuZ2V0RnJhZ21lbnRTaGFkZXJQb29sQ29tbW9uU291cmNlKFxuICAgICAgeFNoYXBlUkNELCBmU2l6ZSwgc3RyaWRlLCBwYWQsICdtaW4nLCBmYWxzZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtaW5Qb29sKFxuICAgIGdwZ3B1OiBHUEdQVUNvbnRleHQsIHByb2dyYW06IFdlYkdMUHJvZ3JhbSwgeDogV2ViR0xUZXh0dXJlLFxuICAgIHJlc3VsdDogV2ViR0xUZXh0dXJlLCByZXN1bHRTaGFwZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSkge1xuICBwb29sX2dwdS5wb29sQ29tbW9uKGdwZ3B1LCBwcm9ncmFtLCB4LCByZXN1bHQsIHJlc3VsdFNoYXBlUm93Q29sKTtcbn0iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCB7R1BHUFVDb250ZXh0fSBmcm9tICcuL2dwZ3B1X2NvbnRleHQnO1xuaW1wb3J0IHtJU19OQU5fU0hBREVSX0ZVTkN9IGZyb20gJy4vd2ViZ2xfdXRpbCc7XG5cbmZ1bmN0aW9uIGdldEZyYWdtZW50U2hhZGVyU291cmNlKFxuICAgIHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyLCBjb21wT3A6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBgXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIG1hdHJpeEE7XG4gICAgdmFyeWluZyB2ZWMyIG91dHB1dENvbHVtblJvdztcblxuICAgIGNvbnN0IHZlYzIgYURpbUNSID0gdmVjMigke2NvbHVtbnN9LjAsICR7cm93c30uMCk7XG4gICAgY29uc3QgdmVjMiBoYWxmQ1IgPSB2ZWMyKDAuNSwgMC41KTtcblxuICAgICR7SVNfTkFOX1NIQURFUl9GVU5DfVxuXG4gICAgdm9pZCBtYWluKCkge1xuICAgICAgZmxvYXQgdmFsdWUgPSB0ZXh0dXJlMkQobWF0cml4QSwgaGFsZkNSIC8gYURpbUNSKS5yO1xuICAgICAgZm9yIChmbG9hdCByID0gMC4wOyByIDwgYURpbUNSLnk7IHIgKz0gMS4wKSB7XG4gICAgICAgIGZvciAoZmxvYXQgYyA9IDAuMDsgYyA8IGFEaW1DUi54OyBjICs9IDEuMCkge1xuICAgICAgICAgIHZlYzIgY3IgPSB2ZWMyKGMsIHIpO1xuICAgICAgICAgIHZlYzIgdXYgPSAoY3IgKyBoYWxmQ1IpIC8gYURpbUNSO1xuICAgICAgICAgIGZsb2F0IGNhbmRpZGF0ZSA9IHRleHR1cmUyRChtYXRyaXhBLCB1dikucjtcbiAgICAgICAgICBpZiAoaXNOYU4oY2FuZGlkYXRlKSkge1xuICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChjYW5kaWRhdGUsIDAsIDAsIDApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSA9ICR7Y29tcE9wfSh2YWx1ZSwgY2FuZGlkYXRlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh2YWx1ZSwgMCwgMCwgMCk7XG4gICAgfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNaW5GcmFnbWVudFNoYWRlclNvdXJjZShcbiAgICByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiBnZXRGcmFnbWVudFNoYWRlclNvdXJjZShyb3dzLCBjb2x1bW5zLCAnbWluJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXhGcmFnbWVudFNoYWRlclNvdXJjZShcbiAgICByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiBnZXRGcmFnbWVudFNoYWRlclNvdXJjZShyb3dzLCBjb2x1bW5zLCAnbWF4Jyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtaW5NYXgoXG4gICAgZ3BncHU6IEdQR1BVQ29udGV4dCwgbWluTWF4UHJvZ3JhbTogV2ViR0xQcm9ncmFtLCBhOiBXZWJHTFRleHR1cmUsXG4gICAgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIsIHJlc3VsdDogV2ViR0xUZXh0dXJlKSB7XG4gIGdwZ3B1LnNldE91dHB1dE1hdHJpeFRleHR1cmUocmVzdWx0LCAxLCAxKTtcbiAgZ3BncHUuc2V0UHJvZ3JhbShtaW5NYXhQcm9ncmFtKTtcbiAgZ3BncHUuc2V0SW5wdXRNYXRyaXhUZXh0dXJlKGEsICdtYXRyaXhBJywgMCk7XG4gIGdwZ3B1LmV4ZWN1dGVQcm9ncmFtKCk7XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCB7TWF0cml4T3JpZW50YXRpb259IGZyb20gJy4uL21hdGgnO1xuaW1wb3J0IHtBcnJheTJEfSBmcm9tICcuLi9uZGFycmF5JztcblxuaW1wb3J0IHtHUEdQVUNvbnRleHR9IGZyb20gJy4vZ3BncHVfY29udGV4dCc7XG5pbXBvcnQgKiBhcyBzaGFkZXJfY29tcGlsZXIgZnJvbSAnLi9zaGFkZXJfY29tcGlsZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRTaGFkZXIoXG4gICAgYTogQXJyYXkyRCwgYjogQXJyYXkyRCwgb3V0OiBBcnJheTJELCBhT3JpZW50YXRpb246IE1hdHJpeE9yaWVudGF0aW9uLFxuICAgIGJPcmllbnRhdGlvbjogTWF0cml4T3JpZW50YXRpb24pOiBzdHJpbmcge1xuICBjb25zdCBzaGFyZWREaW0gPVxuICAgICAgKGFPcmllbnRhdGlvbiA9PT0gTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUiA/IGEuc2hhcGVbMV0gOiBhLnNoYXBlWzBdKTtcbiAgY29uc3QgYVNuaXBwZXQgPVxuICAgICAgKGFPcmllbnRhdGlvbiA9PT0gTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUikgPyAnYVJvdywgaScgOiAnaSwgYVJvdyc7XG4gIGNvbnN0IGJTbmlwcGV0ID1cbiAgICAgIChiT3JpZW50YXRpb24gPT09IE1hdHJpeE9yaWVudGF0aW9uLlJFR1VMQVIpID8gJ2ksIGJDb2wnIDogJ2JDb2wsIGknO1xuXG4gIGNvbnN0IGlucHV0cyA9IFt7bmFtZTogJ21hdHJpeEEnLCBhcnJheTogYX0sIHtuYW1lOiAnbWF0cml4QicsIGFycmF5OiBifV07XG4gIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgIGNvbnN0IGZsb2F0IHNoYXJlZERpbSA9ICR7c2hhcmVkRGltfS4wO1xuXG4gICAgZmxvYXQgZG90QVJvd0JDb2woZmxvYXQgYVJvdywgZmxvYXQgYkNvbCkge1xuICAgICAgZmxvYXQgcmVzdWx0ID0gMC4wO1xuICAgICAgZm9yIChmbG9hdCBpID0gMC4wOyBpIDwgc2hhcmVkRGltOyBpICs9IDEuMCkge1xuICAgICAgICBmbG9hdCBhID0gZ2V0TWF0cml4QSgke2FTbmlwcGV0fSk7XG4gICAgICAgIGZsb2F0IGIgPSBnZXRNYXRyaXhCKCR7YlNuaXBwZXR9KTtcbiAgICAgICAgcmVzdWx0ICs9IChhICogYik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHZvaWQgbWFpbigpIHtcbiAgICAgIHZlYzIgcmVzUkMgPSBnZXRPdXRwdXRDb29yZHMoKTtcbiAgICAgIHNldE91dHB1dChkb3RBUm93QkNvbChyZXNSQy54LCByZXNSQy55KSk7XG4gICAgfVxuICBgO1xuICByZXR1cm4gc2hhZGVyX2NvbXBpbGVyLm1ha2VTaGFkZXIoaW5wdXRzLCBvdXQsIHVzZXJDb2RlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5TWF0cml4KFxuICAgIGdwZ3B1OiBHUEdQVUNvbnRleHQsIG11bHRpcGx5UHJvZ3JhbTogV2ViR0xQcm9ncmFtLCBhOiBXZWJHTFRleHR1cmUsXG4gICAgYjogV2ViR0xUZXh0dXJlLCByZXN1bHQ6IFdlYkdMVGV4dHVyZSwgb3V0VGV4U2hhcGU6IFtudW1iZXIsIG51bWJlcl0pIHtcbiAgZ3BncHUuc2V0T3V0cHV0TWF0cml4VGV4dHVyZShyZXN1bHQsIG91dFRleFNoYXBlWzBdLCBvdXRUZXhTaGFwZVsxXSk7XG4gIGdwZ3B1LnNldFByb2dyYW0obXVsdGlwbHlQcm9ncmFtKTtcbiAgZ3BncHUuc2V0SW5wdXRNYXRyaXhUZXh0dXJlKGEsICdtYXRyaXhBJywgMCk7XG4gIGdwZ3B1LnNldElucHV0TWF0cml4VGV4dHVyZShiLCAnbWF0cml4QicsIDEpO1xuICBncGdwdS5leGVjdXRlUHJvZ3JhbSgpO1xufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge0dQR1BVQ29udGV4dH0gZnJvbSAnLi9ncGdwdV9jb250ZXh0JztcbmltcG9ydCAqIGFzIHVuYXJ5b3BfZ3B1IGZyb20gJy4vdW5hcnlvcF9ncHUnO1xuXG5mdW5jdGlvbiBnZXROZWdVbmFyeU9wKCk6IHN0cmluZyB7XG4gIHJldHVybiAnZ2xfRnJhZ0NvbG9yID0gdmVjNCgtdmFsdWUsIDAsIDAsIDApOyc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudFNoYWRlclNvdXJjZSgpOiBzdHJpbmcge1xuICByZXR1cm4gdW5hcnlvcF9ncHUuZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoZ2V0TmVnVW5hcnlPcCgpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5lZyhcbiAgICBncGdwdTogR1BHUFVDb250ZXh0LCBwcm9ncmFtOiBXZWJHTFByb2dyYW0sIGE6IFdlYkdMVGV4dHVyZSwgcm93czogbnVtYmVyLFxuICAgIGNvbHVtbnM6IG51bWJlciwgcmVzdWx0OiBXZWJHTFRleHR1cmUpIHtcbiAgdW5hcnlvcF9ncHUudW5hcnlPcChncGdwdSwgcHJvZ3JhbSwgYSwgcm93cywgY29sdW1ucywgcmVzdWx0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwbG9hZE5lZ0Rvd25sb2FkKFxuICAgIGE6IEZsb2F0MzJBcnJheSwgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIpOiBGbG9hdDMyQXJyYXkge1xuICByZXR1cm4gdW5hcnlvcF9ncHUudXBsb2FkVW5hcnlPcERvd25sb2FkKGEsIHJvd3MsIGNvbHVtbnMsIGdldE5lZ1VuYXJ5T3AoKSk7XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCAqIGFzIGNvbnZfdXRpbCBmcm9tICcuLi9jb252X3V0aWwnO1xuaW1wb3J0IHtHUEdQVUNvbnRleHR9IGZyb20gJy4vZ3BncHVfY29udGV4dCc7XG5pbXBvcnQge0lTX05BTl9TSEFERVJfRlVOQ30gZnJvbSAnLi93ZWJnbF91dGlsJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50U2hhZGVyUG9vbENvbW1vblNvdXJjZShcbiAgICB4U2hhcGVSQ0Q6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgZlNpemU6IG51bWJlciwgc3RyaWRlOiBudW1iZXIsXG4gICAgcGFkOiBudW1iZXIsIHBvb2xUeXBlOiAnbWF4J3wnbWluJ3wnYXZnJywgY29tcHV0ZVBvc2l0aW9uczogYm9vbGVhbikge1xuICBpZiAocG9vbFR5cGUgPT09ICdhdmcnICYmIGNvbXB1dGVQb3NpdGlvbnMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBjb21wdXRlIHBvc2l0aW9ucyBmb3IgYXZlcmFnZSBwb29sLicpO1xuICB9XG5cbiAgY29uc3QgZGVwdGggPSB4U2hhcGVSQ0RbMl07XG5cbiAgY29uc3QgeFRleFNoYXBlUkMgPSBjb252X3V0aWwuY29tcHV0ZVRleFNoYXBlRnJvbTNEKHhTaGFwZVJDRCk7XG5cbiAgbGV0IHJldHVyblZhbHVlID0gJ21pbk1heFZhbHVlJztcbiAgaWYgKGNvbXB1dGVQb3NpdGlvbnMpIHtcbiAgICByZXR1cm5WYWx1ZSA9ICdtaW5NYXhQb3NpdGlvbic7XG4gIH0gZWxzZSBpZiAocG9vbFR5cGUgPT09ICdhdmcnKSB7XG4gICAgcmV0dXJuVmFsdWUgPSAnYXZnVmFsdWUnO1xuICB9XG5cbiAgcmV0dXJuIGBcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgeDtcbiAgICB2YXJ5aW5nIHZlYzIgcmVzdWx0VVY7XG5cbiAgICBjb25zdCB2ZWMyIGhhbGZDUiA9IHZlYzIoMC41LCAwLjUpO1xuICAgIGNvbnN0IHZlYzIgeFNoYXBlQ1IgPSB2ZWMyKCR7eFRleFNoYXBlUkNbMV19LCAke3hUZXhTaGFwZVJDWzBdfSk7XG5cbiAgICAke0lTX05BTl9TSEFERVJfRlVOQ31cblxuICAgIHZvaWQgbWFpbigpIHtcbiAgICAgIHZlYzIgeVRleENSID0gZmxvb3IoZ2xfRnJhZ0Nvb3JkLnh5KTtcblxuICAgICAgLy8gTWFwIGZyb20gMkQgKHlUZXhSLCB5VGV4QykgdG8gM0QgKHlSLCB5QywgZDIpLlxuICAgICAgZmxvYXQgeVIgPSB5VGV4Q1IueTtcbiAgICAgIGZsb2F0IHlDID0gZmxvb3IoeVRleENSLnggLyAke2RlcHRofS4wKTtcbiAgICAgIGZsb2F0IGQgPSBtb2QoeVRleENSLngsICR7ZGVwdGh9LjApO1xuXG4gICAgICB2ZWMyIHhSQ0Nvcm5lciA9IHZlYzIoeVIsIHlDKSAqIHZlYzIoJHtzdHJpZGV9LCAke3N0cmlkZX0pIC1cbiAgICAgICAgICB2ZWMyKCR7cGFkfS4wLCAke3BhZH0uMCk7XG4gICAgICBmbG9hdCB4UkNvcm5lciA9IHhSQ0Nvcm5lci54O1xuICAgICAgZmxvYXQgeENDb3JuZXIgPSB4UkNDb3JuZXIueTtcblxuICAgICAgLy8gbWF4L21pbiB4KD8sID8sIGQpIHRvIGdldCB5KHlSLCB5QywgZCkuXG4gICAgICAvLyA/ID0gdG8gYmUgZGV0ZXJtaW5lZFxuICAgICAgZmxvYXQgbWluTWF4VmFsdWUgPSAwLjA7XG4gICAgICBmbG9hdCBtaW5NYXhWYWx1ZUZvdW5kID0gMC4wO1xuICAgICAgZmxvYXQgbWluTWF4UG9zaXRpb24gPSAwLjA7XG4gICAgICBmbG9hdCBhdmdWYWx1ZSA9IDAuMDtcblxuICAgICAgZm9yIChmbG9hdCB3UiA9IDAuMDsgd1IgPCAke2ZTaXplfS4wOyB3UiArPSAxLjApIHtcbiAgICAgICAgZmxvYXQgeFIgPSB4UkNvcm5lciArIHdSO1xuICAgICAgICBmbG9hdCB4VGV4UiA9IHhSO1xuXG4gICAgICAgIGZvciAoZmxvYXQgd0MgPSAwLjA7IHdDIDwgJHtmU2l6ZX0uMDsgd0MgKz0gMS4wKSB7XG4gICAgICAgICAgZmxvYXQgeEMgPSB4Q0Nvcm5lciArIHdDO1xuICAgICAgICAgIGZsb2F0IHhUZXhDID0geEMgKiAke2RlcHRofS4wICsgZDtcblxuICAgICAgICAgIHZlYzIgdGV4Q1IgPSB2ZWMyKHhUZXhDLCB4VGV4Uik7XG5cbiAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcmVxdWVzdGVkIFVWIGlzIGludmFsaWQuXG4gICAgICAgICAgdmVjMiB1diA9ICh0ZXhDUiArIGhhbGZDUikgLyB4U2hhcGVDUjtcbiAgICAgICAgICBib29sIGxlc3NUaGFuWmVybyA9IGFueShsZXNzVGhhbih1diwgdmVjMigwLCAwKSkpO1xuICAgICAgICAgIGJvb2wgZ3JlYXRlclRoYW5PbmUgPSBhbnkoZ3JlYXRlclRoYW4odXYsIHZlYzIoMSwgMSkpKTtcbiAgICAgICAgICBib29sIG91dHNpZGUgPSBsZXNzVGhhblplcm8gfHwgZ3JlYXRlclRoYW5PbmU7XG4gICAgICAgICAgaWYgKG91dHNpZGUpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZsb2F0IHZhbHVlID0gdGV4dHVyZTJEKHgsIHV2KS5yO1xuICAgICAgICAgIGlmIChpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQodmFsdWUsIDAsIDAsIDApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoJHtwb29sVHlwZSA9PT0gJ2F2Zyd9KSB7XG4gICAgICAgICAgICBhdmdWYWx1ZSArPSB2YWx1ZSAvICR7ZlNpemUgKiBmU2l6ZX0uMDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgYSBtaW4gLyBtYXggdmFsdWUgaGFzIGFscmVhZHkgYmVlbiBmb3VuZCwgdXNlIGl0LiBJZiBub3QsIHVzZVxuICAgICAgICAgICAgLy8gdGhlIGN1cnJlbnQgdmFsdWUuXG4gICAgICAgICAgICBmbG9hdCBjdXJyZW50TWluTWF4VmFsdWUgPSBtaXgoXG4gICAgICAgICAgICAgICAgdmFsdWUsIG1pbk1heFZhbHVlLCBtaW5NYXhWYWx1ZUZvdW5kKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAke3Bvb2xUeXBlID09PSAnbWluJyA/ICc8PScgOiAnPj0nfSBjdXJyZW50TWluTWF4VmFsdWUpIHtcbiAgICAgICAgICAgICAgbWluTWF4VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgbWluTWF4VmFsdWVGb3VuZCA9IDEuMDtcbiAgICAgICAgICAgICAgaWYgKCR7Y29tcHV0ZVBvc2l0aW9uc30pIHtcbiAgICAgICAgICAgICAgICBtaW5NYXhQb3NpdGlvbiA9IHdSICogJHtmU2l6ZX0uMCArIHdDO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KCR7cmV0dXJuVmFsdWV9LCAwLCAwLCAwKTtcbiAgICB9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBvb2xDb21tb24oXG4gICAgZ3BncHU6IEdQR1BVQ29udGV4dCwgcHJvZ3JhbTogV2ViR0xQcm9ncmFtLCB4OiBXZWJHTFRleHR1cmUsXG4gICAgcmVzdWx0OiBXZWJHTFRleHR1cmUsIHJlc3VsdFNoYXBlUm93Q29sOiBbbnVtYmVyLCBudW1iZXJdKSB7XG4gIGdwZ3B1LnNldE91dHB1dE1hdHJpeFRleHR1cmUoXG4gICAgICByZXN1bHQsIHJlc3VsdFNoYXBlUm93Q29sWzBdLCByZXN1bHRTaGFwZVJvd0NvbFsxXSk7XG4gIGdwZ3B1LnNldFByb2dyYW0ocHJvZ3JhbSk7XG4gIGdwZ3B1LnNldElucHV0TWF0cml4VGV4dHVyZSh4LCAneCcsIDApO1xuICBncGdwdS5leGVjdXRlUHJvZ3JhbSgpO1xufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge0dQR1BVQ29udGV4dH0gZnJvbSAnLi9ncGdwdV9jb250ZXh0JztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50U2hhZGVyU291cmNlKHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgbWF0cml4QTtcbiAgICB2YXJ5aW5nIHZlYzIgcmVzdWx0VVY7XG5cbiAgICBjb25zdCB2ZWMyIGFEaW1DUiA9IHZlYzIoJHtjb2x1bW5zfS4wLCAke3Jvd3N9LjApO1xuICAgIGNvbnN0IHZlYzIgaGFsZkNSID0gdmVjMigwLjUsIDAuNSk7XG5cbiAgICB2b2lkIG1haW4oKSB7XG4gICAgICBmbG9hdCBzdW0gPSAwLjA7XG4gICAgICBmb3IgKGZsb2F0IHIgPSAwLjA7IHIgPCBhRGltQ1IueTsgciArPSAxLjApIHtcbiAgICAgICAgZm9yIChmbG9hdCBjID0gMC4wOyBjIDwgYURpbUNSLng7IGMgKz0gMS4wKSB7XG4gICAgICAgICAgdmVjMiB1diA9ICh2ZWMyKGMsIHIpICsgaGFsZkNSKSAvIGFEaW1DUjtcbiAgICAgICAgICBzdW0gKz0gdGV4dHVyZTJEKG1hdHJpeEEsIHV2KS5yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHN1bSwgMCwgMCwgMCk7XG4gICAgfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VTdW0oXG4gICAgZ3BncHU6IEdQR1BVQ29udGV4dCwgcmVkdWNlU3VtUHJvZ3JhbTogV2ViR0xQcm9ncmFtLCBhOiBXZWJHTFRleHR1cmUsXG4gICAgYU51bVJvd3M6IG51bWJlciwgYU51bUNvbHM6IG51bWJlciwgcmVzdWx0OiBXZWJHTFRleHR1cmUpIHtcbiAgZ3BncHUuc2V0T3V0cHV0TWF0cml4VGV4dHVyZShyZXN1bHQsIDEsIDEpO1xuICBncGdwdS5zZXRQcm9ncmFtKHJlZHVjZVN1bVByb2dyYW0pO1xuICBncGdwdS5zZXRJbnB1dE1hdHJpeFRleHR1cmUoYSwgJ21hdHJpeEEnLCAwKTtcbiAgZ3BncHUuZXhlY3V0ZVByb2dyYW0oKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwbG9hZFJlZHVjZVN1bURvd25sb2FkKFxuICAgIGE6IEZsb2F0MzJBcnJheSwgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIpOiBudW1iZXIge1xuICBjb25zdCBncGdwdSA9IG5ldyBHUEdQVUNvbnRleHQoKTtcbiAgY29uc3QgcHJvZ3JhbTogV2ViR0xQcm9ncmFtID1cbiAgICAgIGdwZ3B1LmNyZWF0ZVByb2dyYW0oZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2Uocm93cywgY29sdW1ucykpO1xuICBjb25zdCBhVGV4dHVyZTogV2ViR0xUZXh0dXJlID0gZ3BncHUuY3JlYXRlTWF0cml4VGV4dHVyZShyb3dzLCBjb2x1bW5zKTtcbiAgY29uc3QgcmVzdWx0VGV4dHVyZTogV2ViR0xUZXh0dXJlID0gZ3BncHUuY3JlYXRlTWF0cml4VGV4dHVyZSgxLCAxKTtcbiAgZ3BncHUudXBsb2FkTWF0cml4VG9UZXh0dXJlKGFUZXh0dXJlLCByb3dzLCBjb2x1bW5zLCBhKTtcbiAgcmVkdWNlU3VtKGdwZ3B1LCBwcm9ncmFtLCBhVGV4dHVyZSwgcm93cywgY29sdW1ucywgcmVzdWx0VGV4dHVyZSk7XG4gIGNvbnN0IHJlc3VsdCA9IGdwZ3B1LmRvd25sb2FkTWF0cml4RnJvbVRleHR1cmUocmVzdWx0VGV4dHVyZSwgMSwgMSlbMF07XG4gIGdwZ3B1LmRlbGV0ZU1hdHJpeFRleHR1cmUoYVRleHR1cmUpO1xuICBncGdwdS5kZWxldGVNYXRyaXhUZXh0dXJlKHJlc3VsdFRleHR1cmUpO1xuICBncGdwdS5kZWxldGVQcm9ncmFtKHByb2dyYW0pO1xuICBncGdwdS5kaXNwb3NlKCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCB7R1BHUFVDb250ZXh0fSBmcm9tICcuL2dwZ3B1X2NvbnRleHQnO1xuaW1wb3J0ICogYXMgdW5hcnlvcF9ncHUgZnJvbSAnLi91bmFyeW9wX2dwdSc7XG5cbmZ1bmN0aW9uIGdldFJlbHVVbmFyeU9wKCk6IHN0cmluZyB7XG4gIHJldHVybiBgXG4gICAgZmxvYXQgcmVzdWx0ID0gKHZhbHVlIDwgMC4wID8gMC4wIDogdmFsdWUpO1xuICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQocmVzdWx0LCAwLCAwLCAwKTtcbiAgYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50U2hhZGVyU291cmNlKCk6IHN0cmluZyB7XG4gIHJldHVybiB1bmFyeW9wX2dwdS5nZXRGcmFnbWVudFNoYWRlclNvdXJjZShnZXRSZWx1VW5hcnlPcCgpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbHUoXG4gICAgZ3BncHU6IEdQR1BVQ29udGV4dCwgcmVsdVByb2dyYW06IFdlYkdMUHJvZ3JhbSwgYTogV2ViR0xUZXh0dXJlLFxuICAgIHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyLCByZXN1bHQ6IFdlYkdMVGV4dHVyZSkge1xuICB1bmFyeW9wX2dwdS51bmFyeU9wKGdwZ3B1LCByZWx1UHJvZ3JhbSwgYSwgcm93cywgY29sdW1ucywgcmVzdWx0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwbG9hZFJlbHVEb3dubG9hZChcbiAgICBhOiBGbG9hdDMyQXJyYXksIHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyKTogRmxvYXQzMkFycmF5IHtcbiAgcmV0dXJuIHVuYXJ5b3BfZ3B1LnVwbG9hZFVuYXJ5T3BEb3dubG9hZChhLCByb3dzLCBjb2x1bW5zLCBnZXRSZWx1VW5hcnlPcCgpKTtcbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtHUEdQVUNvbnRleHR9IGZyb20gJy4vZ3BncHVfY29udGV4dCc7XG5cbmltcG9ydCAqIGFzIHdlYmdsX3V0aWwgZnJvbSAnLi93ZWJnbF91dGlsJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlbmRlclJHQlNoYWRlcihcbiAgICBncGdwdTogR1BHUFVDb250ZXh0LCBkZXN0aW5hdGlvbldpZHRoOiBudW1iZXIpOiBXZWJHTFByb2dyYW0ge1xuICBjb25zdCBmcmFnbWVudFNoYWRlclNvdXJjZSA9IGBcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgc291cmNlO1xuICAgIHZhcnlpbmcgdmVjMiByZXN1bHRVVjtcblxuICAgIGNvbnN0IGZsb2F0IGRlc3RpbmF0aW9uV2lkdGggPSAke2Rlc3RpbmF0aW9uV2lkdGh9LjA7XG4gICAgY29uc3QgZmxvYXQgYSA9IDEuMDtcblxuICAgIHZvaWQgbWFpbigpIHtcbiAgICAgIGZsb2F0IHhyID0gZmxvb3IocmVzdWx0VVYucyAqIGRlc3RpbmF0aW9uV2lkdGgpICogMy4wO1xuICAgICAgdmVjMyB4ID0geHIgKyB2ZWMzKDAsIDEsIDIpO1xuXG4gICAgICBmbG9hdCBzb3VyY2VXaWR0aCA9IGRlc3RpbmF0aW9uV2lkdGggKiAzLjA7XG4gICAgICB2ZWMzIHUgPSAoeCArIDAuNSkgLyBzb3VyY2VXaWR0aDtcbiAgICAgIGZsb2F0IHYgPSAxLjAgLSByZXN1bHRVVi50O1xuXG4gICAgICBmbG9hdCByID0gdGV4dHVyZTJEKHNvdXJjZSwgdmVjMih1WzBdLCB2KSkucjtcbiAgICAgIGZsb2F0IGcgPSB0ZXh0dXJlMkQoc291cmNlLCB2ZWMyKHVbMV0sIHYpKS5yO1xuICAgICAgZmxvYXQgYiA9IHRleHR1cmUyRChzb3VyY2UsIHZlYzIodVsyXSwgdikpLnI7XG5cbiAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQociwgZywgYiwgYSk7XG4gICAgfWA7XG5cbiAgcmV0dXJuIGdwZ3B1LmNyZWF0ZVByb2dyYW0oZnJhZ21lbnRTaGFkZXJTb3VyY2UpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyVG9DYW52YXMoXG4gICAgZ3BncHU6IEdQR1BVQ29udGV4dCwgcmVuZGVyU2hhZGVyOiBXZWJHTFByb2dyYW0sIHNvdXJjZVRleDogV2ViR0xUZXh0dXJlKSB7XG4gIHdlYmdsX3V0aWwuYmluZENhbnZhc1RvRnJhbWVidWZmZXIoZ3BncHUuZ2wpO1xuICByZW5kZXJUb0ZyYW1lYnVmZmVyKGdwZ3B1LCByZW5kZXJTaGFkZXIsIHNvdXJjZVRleCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJUb0ZyYW1lYnVmZmVyKFxuICAgIGdwZ3B1OiBHUEdQVUNvbnRleHQsIHJlbmRlclNoYWRlcjogV2ViR0xQcm9ncmFtLCBzb3VyY2VUZXg6IFdlYkdMVGV4dHVyZSkge1xuICBncGdwdS5zZXRQcm9ncmFtKHJlbmRlclNoYWRlcik7XG4gIGdwZ3B1LnNldElucHV0TWF0cml4VGV4dHVyZShzb3VyY2VUZXgsICdzb3VyY2UnLCAwKTtcbiAgZ3BncHUuZXhlY3V0ZVByb2dyYW0oKTtcbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuLi8uLi91dGlsJztcbmltcG9ydCB7R1BHUFVDb250ZXh0fSBmcm9tICcuL2dwZ3B1X2NvbnRleHQnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgbWF0cml4QTtcbiAgICB1bmlmb3JtIHZlYzIgaW5wdXREaW1DUjtcbiAgICB1bmlmb3JtIHZlYzIgcmVzdWx0RGltQ1I7XG4gICAgdmFyeWluZyB2ZWMyIHJlc3VsdFVWO1xuICAgIGNvbnN0IHZlYzIgaGFsZkNSID0gdmVjMigwLjUsIDAuNSk7XG5cbiAgICB2b2lkIG1haW4oKSB7XG4gICAgICB2ZWMyIHJlc3VsdENSID0gZmxvb3IocmVzdWx0VVYgKiByZXN1bHREaW1DUik7XG4gICAgICAvLyBpbmRleEluRmxhdCA9IHJvdyAqIHN0cmlkZSArIGNvbHVtbiwgd2hlcmUgc3RyaWRlID09IG51bU91dHB1dENvbHVtbnNcbiAgICAgIGZsb2F0IGluZGV4SW5GbGF0ID0gcmVzdWx0Q1IueSAqIHJlc3VsdERpbUNSLnggKyByZXN1bHRDUi54O1xuXG4gICAgICB2ZWMyIGlucHV0Q1IgPSB2ZWMyKFxuICAgICAgICBtb2QoaW5kZXhJbkZsYXQsIGlucHV0RGltQ1IueCksIC8vIGNvbCA9IGluZGV4SW5GbGF0ICUgbnVtSW5wdXRDb2x1bW5zXG4gICAgICAgIGZsb29yKGluZGV4SW5GbGF0IC8gaW5wdXREaW1DUi54KSAvLyByb3cgPSBpbmRleEluRmxhdCAvIG51bUlucHV0Q29sdW1uc1xuICAgICAgKSArIGhhbGZDUjtcblxuICAgICAgdmVjMiBpbnB1dFVWID0gaW5wdXRDUiAvIGlucHV0RGltQ1I7XG4gICAgICBnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQobWF0cml4QSwgaW5wdXRVVik7XG4gICAgfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNoYXBlKFxuICAgIGdwZ3B1OiBHUEdQVUNvbnRleHQsIHJlc2hhcGVQcm9ncmFtOiBXZWJHTFByb2dyYW0sIGE6IFdlYkdMVGV4dHVyZSxcbiAgICBhTnVtUm93czogbnVtYmVyLCBhTnVtQ29sczogbnVtYmVyLCByZXN1bHQ6IFdlYkdMVGV4dHVyZSxcbiAgICByZXN1bHROdW1Sb3dzOiBudW1iZXIsIHJlc3VsdE51bUNvbHM6IG51bWJlcikge1xuICBjb25zdCBpbnB1dFNpemUgPSBhTnVtUm93cyAqIGFOdW1Db2xzO1xuICBjb25zdCBvdXRwdXRTaXplID0gcmVzdWx0TnVtQ29scyAqIHJlc3VsdE51bVJvd3M7XG4gIHV0aWwuYXNzZXJ0KFxuICAgICAgaW5wdXRTaXplID09PSBvdXRwdXRTaXplLFxuICAgICAgYFRoZSBpbnB1dCBzaXplICgke2lucHV0U2l6ZX0pIGFuZCBvdXRwdXQgc2l6ZSAoJHtvdXRwdXRTaXplfSkgYCArXG4gICAgICAgICAgYG11c3QgbWF0Y2hgKTtcblxuICBncGdwdS5zZXRPdXRwdXRNYXRyaXhUZXh0dXJlKHJlc3VsdCwgcmVzdWx0TnVtUm93cywgcmVzdWx0TnVtQ29scyk7XG4gIGdwZ3B1LnNldFByb2dyYW0ocmVzaGFwZVByb2dyYW0pO1xuICBncGdwdS5zZXRJbnB1dE1hdHJpeFRleHR1cmUoYSwgJ21hdHJpeEEnLCAwKTtcblxuICBjb25zdCBpbnB1dERpbUNSTG9jYXRpb24gPSBncGdwdS5nZXRVbmlmb3JtTG9jYXRpb24oJ2lucHV0RGltQ1InKTtcbiAgZ3BncHUuZ2wudW5pZm9ybTJmKGlucHV0RGltQ1JMb2NhdGlvbiwgYU51bUNvbHMsIGFOdW1Sb3dzKTtcblxuICBjb25zdCByZXN1bHREaW1DUkxvY2F0aW9uID0gZ3BncHUuZ2V0VW5pZm9ybUxvY2F0aW9uKCdyZXN1bHREaW1DUicpO1xuICBncGdwdS5nbC51bmlmb3JtMmYocmVzdWx0RGltQ1JMb2NhdGlvbiwgcmVzdWx0TnVtQ29scywgcmVzdWx0TnVtUm93cyk7XG5cbiAgZ3BncHUuZXhlY3V0ZVByb2dyYW0oKTtcbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0ICogYXMgY29udl91dGlsIGZyb20gJy4uL2NvbnZfdXRpbCc7XG5cbmltcG9ydCB7R1BHUFVDb250ZXh0fSBmcm9tICcuL2dwZ3B1X2NvbnRleHQnO1xuaW1wb3J0ICogYXMgd2ViZ2xfdXRpbCBmcm9tICcuL3dlYmdsX3V0aWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoXG4gICAgaW5wdXRTaGFwZVJDRDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdLFxuICAgIG91dHB1dERpbWVuc2lvbnNSb3dDb2w6IFtudW1iZXIsIG51bWJlcl0sIGFsaWduQ29ybmVyczogYm9vbGVhbik6IHN0cmluZyB7XG4gIGNvbnN0IGRlcHRoID0gaW5wdXRTaGFwZVJDRFsyXTtcblxuICBjb25zdCBpbnB1dFRleFNoYXBlUkMgPSBjb252X3V0aWwuY29tcHV0ZVRleFNoYXBlRnJvbTNEKGlucHV0U2hhcGVSQ0QpO1xuXG4gIGNvbnN0IGVmZmVjdGl2ZUlucHV0U2hhcGVSQ0QgPSBhbGlnbkNvcm5lcnMgP1xuICAgICAgW2lucHV0U2hhcGVSQ0RbMF0gLSAxLCBpbnB1dFNoYXBlUkNEWzFdIC0gMSwgZGVwdGhdIDpcbiAgICAgIGlucHV0U2hhcGVSQ0Q7XG5cbiAgY29uc3QgZWZmZWN0aXZlT3V0cHV0U2hhcGVSQ0QgPSBhbGlnbkNvcm5lcnMgP1xuICAgICAgW291dHB1dERpbWVuc2lvbnNSb3dDb2xbMF0gLSAxLCBvdXRwdXREaW1lbnNpb25zUm93Q29sWzFdIC0gMSwgZGVwdGhdIDpcbiAgICAgIFtvdXRwdXREaW1lbnNpb25zUm93Q29sWzBdLCBvdXRwdXREaW1lbnNpb25zUm93Q29sWzFdLCBkZXB0aF07XG5cbiAgcmV0dXJuIGBcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgbWF0cml4QTtcbiAgICB2YXJ5aW5nIHZlYzIgcmVzdWx0VVY7XG4gICAgY29uc3QgdmVjMiBoYWxmQ1IgPSB2ZWMyKDAuNSwgMC41KTtcblxuICAgIGNvbnN0IHZlYzIgaW5wdXRTaGFwZUNSID0gdmVjMigke2lucHV0U2hhcGVSQ0RbMV19LCAke2lucHV0U2hhcGVSQ0RbMF19KTtcbiAgICBjb25zdCB2ZWMyIGlucHV0U2hhcGVUZXhDUiA9IHZlYzIoXG4gICAgICAgICR7aW5wdXRUZXhTaGFwZVJDWzFdfSwgJHtpbnB1dFRleFNoYXBlUkNbMF19KTtcblxuICAgIGNvbnN0IHZlYzIgZWZmZWN0aXZlSW5wdXRPdmVyT3V0cHV0UmF0aW9DUiA9IHZlYzIoXG4gICAgICAgICR7ZWZmZWN0aXZlSW5wdXRTaGFwZVJDRFsxXSAvIGVmZmVjdGl2ZU91dHB1dFNoYXBlUkNEWzFdfSxcbiAgICAgICAgJHtlZmZlY3RpdmVJbnB1dFNoYXBlUkNEWzBdIC8gZWZmZWN0aXZlT3V0cHV0U2hhcGVSQ0RbMF19KTtcblxuICAgIGZsb2F0IHNhbXBsZUlucHV0KGZsb2F0IGNvbCwgZmxvYXQgcm93LCBmbG9hdCBkKSB7XG4gICAgICB2ZWMyIHV2ID0gKHZlYzIoY29sICogJHtkZXB0aH0uMCArIGQsIHJvdykgKyBoYWxmQ1IpIC8gaW5wdXRTaGFwZVRleENSO1xuICAgICAgcmV0dXJuIHRleHR1cmUyRChtYXRyaXhBLCB1dikucjtcbiAgICB9XG5cbiAgICB2b2lkIG1haW4oKSB7XG4gICAgICB2ZWMyIHlUZXhDUiA9IGZsb29yKGdsX0ZyYWdDb29yZC54eSk7XG5cbiAgICAgIC8vIE1hcCBmcm9tIDJEICh5VGV4UiwgeVRleEMpIHRvIDNEICh5UiwgeUMsIGQpLlxuICAgICAgdmVjMiB5Q1IgPSB2ZWMyKGZsb29yKHlUZXhDUi54IC8gJHtkZXB0aH0uMCksIHlUZXhDUi55KTtcbiAgICAgIGZsb2F0IGQgPSBtb2QoeVRleENSLngsICR7ZGVwdGh9LjApO1xuXG4gICAgICAvLyBGcmFjdGlvbmFsIHNvdXJjZSBpbmRleC5cbiAgICAgIHZlYzIgc291cmNlRnJhY0luZGV4Q1IgPSB5Q1IgKiBlZmZlY3RpdmVJbnB1dE92ZXJPdXRwdXRSYXRpb0NSO1xuXG4gICAgICAvLyBDb21wdXRlIHRoZSBmb3VyIGludGVnZXIgaW5kaWNlcy5cbiAgICAgIHZlYzIgc291cmNlRmxvb3JDUiA9IGZsb29yKHNvdXJjZUZyYWNJbmRleENSKTtcbiAgICAgIHZlYzIgc291cmNlQ2VpbENSID0gbWluKGlucHV0U2hhcGVDUiAtIDEuMCwgY2VpbChzb3VyY2VGcmFjSW5kZXhDUikpO1xuXG4gICAgICBmbG9hdCB0b3BMZWZ0ID0gc2FtcGxlSW5wdXQoc291cmNlRmxvb3JDUlswXSwgc291cmNlRmxvb3JDUlsxXSwgZCk7XG4gICAgICBmbG9hdCBib3R0b21MZWZ0ID0gc2FtcGxlSW5wdXQoc291cmNlRmxvb3JDUlswXSwgc291cmNlQ2VpbENSWzFdLCBkKTtcbiAgICAgIGZsb2F0IHRvcFJpZ2h0ID0gc2FtcGxlSW5wdXQoc291cmNlQ2VpbENSWzBdLCBzb3VyY2VGbG9vckNSWzFdLCBkKTtcbiAgICAgIGZsb2F0IGJvdHRvbVJpZ2h0ID0gc2FtcGxlSW5wdXQoc291cmNlQ2VpbENSWzBdLCBzb3VyY2VDZWlsQ1JbMV0sIGQpO1xuXG4gICAgICB2ZWMyIGZyYWNDUiA9IHNvdXJjZUZyYWNJbmRleENSIC0gc291cmNlRmxvb3JDUjtcblxuICAgICAgZmxvYXQgdG9wID0gdG9wTGVmdCArICh0b3BSaWdodCAtIHRvcExlZnQpICogZnJhY0NSWzBdO1xuICAgICAgZmxvYXQgYm90dG9tID0gYm90dG9tTGVmdCArIChib3R0b21SaWdodCAtIGJvdHRvbUxlZnQpICogZnJhY0NSWzBdO1xuICAgICAgZmxvYXQgbmV3VmFsdWUgPSB0b3AgKyAoYm90dG9tIC0gdG9wKSAqIGZyYWNDUlsxXTtcblxuICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChuZXdWYWx1ZSwgMC4wLCAwLjAsIDAuMCk7XG4gICAgfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNpemVCaWxpbmVhcihcbiAgICBncGdwdTogR1BHUFVDb250ZXh0LCByZXNpemVCaWxpbmVhclByb2dyYW06IFdlYkdMUHJvZ3JhbSwgYTogV2ViR0xUZXh0dXJlLFxuICAgIHJlc3VsdDogV2ViR0xUZXh0dXJlLCByZXN1bHRTaGFwZVJvd0NvbDogW251bWJlciwgbnVtYmVyXSkge1xuICBncGdwdS5zZXRPdXRwdXRNYXRyaXhUZXh0dXJlKFxuICAgICAgcmVzdWx0LCByZXN1bHRTaGFwZVJvd0NvbFswXSwgcmVzdWx0U2hhcGVSb3dDb2xbMV0pO1xuICBncGdwdS5zZXRQcm9ncmFtKHJlc2l6ZUJpbGluZWFyUHJvZ3JhbSk7XG4gIGdwZ3B1LnNldElucHV0TWF0cml4VGV4dHVyZShhLCAnbWF0cml4QScsIDApO1xuICBncGdwdS5leGVjdXRlUHJvZ3JhbSgpO1xufSIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuLi8uLi91dGlsJztcbmltcG9ydCB7TkRBcnJheX0gZnJvbSAnLi4vbmRhcnJheSc7XG5cbmV4cG9ydCB0eXBlIElucHV0ID0ge1xuICBuYW1lOiBzdHJpbmc7IGFycmF5OiBOREFycmF5O1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTaGFkZXJLZXkoaW5wdXRzOiBOREFycmF5W10sIG91dHB1dDogTkRBcnJheSk6IHN0cmluZyB7XG4gIGNvbnN0IGlucyA9IGlucHV0cy5tYXAoeCA9PiB4LnNoYXBlICsgJ18nICsgeC5nZXRUZXh0dXJlU2hhcGVSQygpKTtcbiAgcmV0dXJuIGlucy5qb2luKCdfJykgKyAnXycgKyBvdXRwdXQuc2hhcGUgKyAnXycgKyBvdXRwdXQuZ2V0VGV4dHVyZVNoYXBlUkMoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTaGFkZXIoXG4gICAgaW5wdXRzOiBJbnB1dFtdLCBvdXRwdXQ6IE5EQXJyYXksIHVzZXJDb2RlOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBpbnB1dFByZWZpeFNuaXBwZXQgPVxuICAgICAgaW5wdXRzLm1hcCh4ID0+IGB1bmlmb3JtIHNhbXBsZXIyRCAke3gubmFtZX07YCkuam9pbignXFxuJyk7XG4gIGNvbnN0IGlucHV0U2FtcGxpbmdTbmlwcGV0ID1cbiAgICAgIGlucHV0cy5tYXAoeCA9PiBnZXRJbnB1dFNhbXBsaW5nU25pcHBldCh4KSkuam9pbignXFxuJyk7XG4gIGNvbnN0IG91dFRleFNoYXBlID0gb3V0cHV0LmdldFRleHR1cmVTaGFwZVJDKCk7XG4gIGNvbnN0IG91dHB1dFNhbXBsaW5nU25pcHBldCA9XG4gICAgICBnZXRPdXRwdXRTYW1wbGluZ1NuaXBwZXQob3V0cHV0LnNoYXBlLCBvdXRUZXhTaGFwZSk7XG4gIGNvbnN0IHNvdXJjZSA9IFtcbiAgICBTSEFERVJfUFJFRklYLCBpbnB1dFByZWZpeFNuaXBwZXQsIFNBTVBMRV8yRF9TTklQUEVULCBpbnB1dFNhbXBsaW5nU25pcHBldCxcbiAgICBvdXRwdXRTYW1wbGluZ1NuaXBwZXQsIHVzZXJDb2RlXG4gIF0uam9pbignXFxuJyk7XG4gIHJldHVybiBzb3VyY2U7XG59XG5cbmZ1bmN0aW9uIGdldElucHV0U2FtcGxpbmdTbmlwcGV0KGlucHV0OiBJbnB1dCkge1xuICBjb25zdCBhcnIgPSBpbnB1dC5hcnJheTtcbiAgY29uc3Qgc2hhcGUgPSBhcnIuc2hhcGU7XG4gIGNvbnN0IHRleFNoYXBlID0gYXJyLmdldFRleHR1cmVTaGFwZVJDKHNoYXBlIGFzIFtudW1iZXIsIG51bWJlcl0pO1xuICBzd2l0Y2ggKHNoYXBlLmxlbmd0aCkge1xuICAgIGNhc2UgMjpcbiAgICAgIHJldHVybiBnZXRTYW1wbGVyMkQoaW5wdXQubmFtZSwgc2hhcGUgYXMgW251bWJlciwgbnVtYmVyXSwgdGV4U2hhcGUpO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7YXJyLnJhbmt9LUQgaW5wdXQgc2FtcGxpbmcgaXMgbm90IHlldCBzdXBwb3J0ZWRgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRPdXRwdXRTYW1wbGluZ1NuaXBwZXQoXG4gICAgb3V0U2hhcGU6IG51bWJlcltdLCBvdXRUZXhTaGFwZTogW251bWJlciwgbnVtYmVyXSk6IHN0cmluZyB7XG4gIHN3aXRjaCAob3V0U2hhcGUubGVuZ3RoKSB7XG4gICAgY2FzZSAyOlxuICAgICAgcmV0dXJuIGdldE91dHB1dDJEQ29vcmRzKG91dFNoYXBlIGFzIFtudW1iZXIsIG51bWJlcl0sIG91dFRleFNoYXBlKTtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGAke291dFNoYXBlLmxlbmd0aH0tRCBvdXRwdXQgc2FtcGxpbmcgaXMgbm90IHlldCBzdXBwb3J0ZWRgKTtcbiAgfVxufVxuXG5jb25zdCBTSEFERVJfUFJFRklYID0gYFxuICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gIHZhcnlpbmcgdmVjMiByZXN1bHRVVjtcbiAgY29uc3QgdmVjMiBoYWxmQ1IgPSB2ZWMyKDAuNSwgMC41KTtcblxuICB2b2lkIHNldE91dHB1dChmbG9hdCB2YWwpIHtcbiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHZhbCwgMCwgMCwgMCk7XG4gIH1cbmA7XG5cbmNvbnN0IFNBTVBMRV8yRF9TTklQUEVUID0gYFxuICBmbG9hdCBzYW1wbGUyRChzYW1wbGVyMkQgdGV4dHVyZSwgZmxvYXQgdGV4TnVtUiwgZmxvYXQgdGV4TnVtQywgZmxvYXQgbnVtQyxcbiAgICAgIGZsb2F0IHJvdywgZmxvYXQgY29sKSB7XG4gICAgZmxvYXQgaW5kZXggPSBkb3QodmVjMihyb3csIGNvbCksIHZlYzIobnVtQywgMS4wKSk7XG4gICAgZmxvYXQgdGV4UiA9IGZsb29yKGluZGV4IC8gdGV4TnVtQyk7XG4gICAgZmxvYXQgdGV4QyA9IG1vZChpbmRleCwgdGV4TnVtQyk7XG4gICAgdmVjMiB1diA9ICh2ZWMyKHRleEMsIHRleFIpICsgaGFsZkNSKSAvIHZlYzIodGV4TnVtQywgdGV4TnVtUik7XG4gICAgcmV0dXJuIHRleHR1cmUyRCh0ZXh0dXJlLCB1dikucjtcbiAgfVxuYDtcblxuZnVuY3Rpb24gZ2V0T3V0cHV0MkRDb29yZHMoXG4gICAgc2hhcGU6IFtudW1iZXIsIG51bWJlcl0sIHRleFNoYXBlOiBbbnVtYmVyLCBudW1iZXJdKSB7XG4gIGlmICh1dGlsLmFycmF5c0VxdWFsKHNoYXBlLCB0ZXhTaGFwZSkpIHtcbiAgICByZXR1cm4gYFxuICAgICAgdmVjMiBnZXRPdXRwdXRDb29yZHMoKSB7XG4gICAgICAgIHJldHVybiBmbG9vcihnbF9GcmFnQ29vcmQueXgpO1xuICAgICAgfVxuICAgIGA7XG4gIH1cbiAgcmV0dXJuIGBcbiAgICB2ZWMyIGdldE91dHB1dENvb3JkcygpIHtcbiAgICAgIHZlYzIgcmVzVGV4UkMgPSBmbG9vcihnbF9GcmFnQ29vcmQueXgpO1xuICAgICAgZmxvYXQgaW5kZXggPSBkb3QocmVzVGV4UkMsIHZlYzIoJHt0ZXhTaGFwZVsxXX0uMCwgMS4wKSk7XG4gICAgICBmbG9hdCByID0gZmxvb3IoaW5kZXggLyAke3NoYXBlWzFdfS4wKTtcbiAgICAgIGZsb2F0IGMgPSBtb2QoaW5kZXgsICR7c2hhcGVbMV19LjApO1xuICAgICAgcmV0dXJuIHZlYzIociwgYyk7XG4gICAgfVxuICBgO1xufVxuXG5mdW5jdGlvbiBnZXRTYW1wbGVyMkQoXG4gICAgdGV4TmFtZTogc3RyaW5nLCBzaGFwZTogW251bWJlciwgbnVtYmVyXSwgdGV4U2hhcGU6IFtudW1iZXIsIG51bWJlcl0pIHtcbiAgY29uc3QgZnVuY05hbWUgPSAnZ2V0JyArIHRleE5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0ZXhOYW1lLnNsaWNlKDEpO1xuICBjb25zdCB0UiA9IHRleFNoYXBlWzBdO1xuICBjb25zdCB0QyA9IHRleFNoYXBlWzFdO1xuICBpZiAodXRpbC5hcnJheXNFcXVhbChzaGFwZSwgdGV4U2hhcGUpKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgIGZsb2F0ICR7ZnVuY05hbWV9KGZsb2F0IHJvdywgZmxvYXQgY29sKSB7XG4gICAgICAgIHZlYzIgdXYgPSAodmVjMihjb2wsIHJvdykgKyBoYWxmQ1IpIC8gdmVjMigke3RDfS4wLCAke3RSfS4wKTtcbiAgICAgICAgcmV0dXJuIHRleHR1cmUyRCgke3RleE5hbWV9LCB1dikucjtcbiAgICAgIH1cbiAgICBgO1xuICB9XG4gIHJldHVybiBgXG4gICAgZmxvYXQgJHtmdW5jTmFtZX0oZmxvYXQgcm93LCBmbG9hdCBjb2wpIHtcbiAgICAgIHJldHVybiBzYW1wbGUyRCgke3RleE5hbWV9LCAke3RSfS4wLCAke3RDfS4wLCAke3NoYXBlWzFdfS4wLCByb3csIGNvbCk7XG4gICAgfVxuICBgO1xufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge0dQR1BVQ29udGV4dH0gZnJvbSAnLi9ncGdwdV9jb250ZXh0JztcbmltcG9ydCAqIGFzIHVuYXJ5b3BfZ3B1IGZyb20gJy4vdW5hcnlvcF9ncHUnO1xuXG5mdW5jdGlvbiBnZXRTaWdtb2lkVW5hcnlPcCgpOiBzdHJpbmcge1xuICByZXR1cm4gJ2dsX0ZyYWdDb2xvciA9IHZlYzQoMS4wIC8gKDEuMCArIGV4cCgtMS4wICogdmFsdWUpKSwgMCwgMCwgMCk7Jztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNpZ21vaWRGcmFnbWVudFNoYWRlclNvdXJjZSgpOiBzdHJpbmcge1xuICByZXR1cm4gdW5hcnlvcF9ncHUuZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoZ2V0U2lnbW9pZFVuYXJ5T3AoKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaWdtb2lkKFxuICAgIGdwZ3B1OiBHUEdQVUNvbnRleHQsIHNpZ21vaWRQcm9ncmFtOiBXZWJHTFByb2dyYW0sIGE6IFdlYkdMVGV4dHVyZSxcbiAgICByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlciwgcmVzdWx0OiBXZWJHTFRleHR1cmUpIHtcbiAgdW5hcnlvcF9ncHUudW5hcnlPcChncGdwdSwgc2lnbW9pZFByb2dyYW0sIGEsIHJvd3MsIGNvbHVtbnMsIHJlc3VsdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGxvYWRTaWdtb2lkRG93bmxvYWQoXG4gICAgYTogRmxvYXQzMkFycmF5LCByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcik6IEZsb2F0MzJBcnJheSB7XG4gIHJldHVybiB1bmFyeW9wX2dwdS51cGxvYWRVbmFyeU9wRG93bmxvYWQoXG4gICAgICBhLCByb3dzLCBjb2x1bW5zLCBnZXRTaWdtb2lkVW5hcnlPcCgpKTtcbn0iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCB7R1BHUFVDb250ZXh0fSBmcm9tICcuL2dwZ3B1X2NvbnRleHQnO1xuaW1wb3J0ICogYXMgdW5hcnlvcF9ncHUgZnJvbSAnLi91bmFyeW9wX2dwdSc7XG5cbmZ1bmN0aW9uIGdldFN0ZXBVbmFyeU9wKCk6IHN0cmluZyB7XG4gIHJldHVybiBgXG4gICAgZmxvYXQgcmVzID0gdmFsdWUgPT0gdmFsdWUgPyAodmFsdWUgPiAwLjAgPyAxLjAgOiAwLjApIDogdmFsdWU7XG4gICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChyZXMsIDAsIDAsIDApO1xuICBgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHtcbiAgcmV0dXJuIHVuYXJ5b3BfZ3B1LmdldEZyYWdtZW50U2hhZGVyU291cmNlKGdldFN0ZXBVbmFyeU9wKCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RlcChcbiAgICBncGdwdTogR1BHUFVDb250ZXh0LCBzdGVwUHJvZ3JhbTogV2ViR0xQcm9ncmFtLCBhOiBXZWJHTFRleHR1cmUsXG4gICAgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIsIHJlc3VsdDogV2ViR0xUZXh0dXJlKSB7XG4gIHVuYXJ5b3BfZ3B1LnVuYXJ5T3AoZ3BncHUsIHN0ZXBQcm9ncmFtLCBhLCByb3dzLCBjb2x1bW5zLCByZXN1bHQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBsb2FkU3RlcERvd25sb2FkKFxuICAgIGE6IEZsb2F0MzJBcnJheSwgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIpOiBGbG9hdDMyQXJyYXkge1xuICByZXR1cm4gdW5hcnlvcF9ncHUudXBsb2FkVW5hcnlPcERvd25sb2FkKGEsIHJvd3MsIGNvbHVtbnMsIGdldFN0ZXBVbmFyeU9wKCkpO1xufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VW5wYWNrZWRNYXRyaXhUZXh0dXJlU2hhcGVXaWR0aEhlaWdodChcbiAgICByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl0ge1xuICByZXR1cm4gW2NvbHVtbnMsIHJvd3NdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VW5wYWNrZWRBcnJheVNpemVGcm9tTWF0cml4U2l6ZShcbiAgICBtYXRyaXhTaXplOiBudW1iZXIsIGNoYW5uZWxzUGVyVGV4dHVyZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgcmV0dXJuIG1hdHJpeFNpemUgKiBjaGFubmVsc1BlclRleHR1cmU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb2xvck1hdHJpeFRleHR1cmVTaGFwZVdpZHRoSGVpZ2h0KFxuICAgIHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXSB7XG4gIHJldHVybiBbY29sdW1ucyAqIDQsIHJvd3NdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF0cml4U2l6ZUZyb21VbnBhY2tlZEFycmF5U2l6ZShcbiAgICB1bnBhY2tlZFNpemU6IG51bWJlciwgY2hhbm5lbHNQZXJUZXh0dXJlOiBudW1iZXIpOiBudW1iZXIge1xuICBpZiAodW5wYWNrZWRTaXplICUgY2hhbm5lbHNQZXJUZXh0dXJlICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAndW5wYWNrZWRTaXplICgnICsgdW5wYWNrZWRTaXplICsgJykgbXVzdCBiZSBhIG11bHRpcGxlIG9mICcgK1xuICAgICAgICBjaGFubmVsc1BlclRleHR1cmUpO1xuICB9XG4gIHJldHVybiB1bnBhY2tlZFNpemUgLyBjaGFubmVsc1BlclRleHR1cmU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGVNYXRyaXhUb1VucGFja2VkQXJyYXkoXG4gICAgbWF0cml4OiBGbG9hdDMyQXJyYXksIHVucGFja2VkQXJyYXk6IEZsb2F0MzJBcnJheSxcbiAgICBjaGFubmVsc1BlclRleHR1cmU6IG51bWJlcikge1xuICBjb25zdCByZXF1aXJlZFNpemUgPVxuICAgICAgZ2V0VW5wYWNrZWRBcnJheVNpemVGcm9tTWF0cml4U2l6ZShtYXRyaXgubGVuZ3RoLCBjaGFubmVsc1BlclRleHR1cmUpO1xuICBpZiAodW5wYWNrZWRBcnJheS5sZW5ndGggPCByZXF1aXJlZFNpemUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICd1bnBhY2tlZEFycmF5IGxlbmd0aCAoJyArIHVucGFja2VkQXJyYXkubGVuZ3RoICtcbiAgICAgICAgJykgbXVzdCBiZSA+PSAnICsgcmVxdWlyZWRTaXplKTtcbiAgfVxuICBsZXQgZHN0ID0gMDtcbiAgZm9yIChsZXQgc3JjID0gMDsgc3JjIDwgbWF0cml4Lmxlbmd0aDsgKytzcmMpIHtcbiAgICB1bnBhY2tlZEFycmF5W2RzdF0gPSBtYXRyaXhbc3JjXTtcbiAgICBkc3QgKz0gY2hhbm5lbHNQZXJUZXh0dXJlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVNYXRyaXhGcm9tVW5wYWNrZWRBcnJheShcbiAgICB1bnBhY2tlZEFycmF5OiBGbG9hdDMyQXJyYXksIG1hdHJpeDogRmxvYXQzMkFycmF5LFxuICAgIGNoYW5uZWxzUGVyVGV4dHVyZTogbnVtYmVyKSB7XG4gIGNvbnN0IHJlcXVpcmVkU2l6ZSA9IGdldE1hdHJpeFNpemVGcm9tVW5wYWNrZWRBcnJheVNpemUoXG4gICAgICB1bnBhY2tlZEFycmF5Lmxlbmd0aCwgY2hhbm5lbHNQZXJUZXh0dXJlKTtcbiAgaWYgKG1hdHJpeC5sZW5ndGggPCByZXF1aXJlZFNpemUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdtYXRyaXggbGVuZ3RoICgnICsgbWF0cml4Lmxlbmd0aCArICcpIG11c3QgYmUgPj0gJyArIHJlcXVpcmVkU2l6ZSk7XG4gIH1cbiAgbGV0IGRzdCA9IDA7XG4gIGZvciAobGV0IHNyYyA9IDA7IHNyYyA8IHVucGFja2VkQXJyYXkubGVuZ3RoOyBzcmMgKz0gY2hhbm5lbHNQZXJUZXh0dXJlKSB7XG4gICAgbWF0cml4W2RzdCsrXSA9IHVucGFja2VkQXJyYXlbc3JjXTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFja2VkTWF0cml4VGV4dHVyZVNoYXBlV2lkdGhIZWlnaHQoXG4gICAgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgcmV0dXJuIFtNYXRoLmNlaWwoY29sdW1ucyAvIDIpLCBNYXRoLmNlaWwocm93cyAvIDIpXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhY2tlZFJHQkFBcnJheVNpemVGcm9tTWF0cml4U2hhcGUoXG4gICAgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIpOiBudW1iZXIge1xuICBjb25zdCBbdywgaF0gPSBnZXRQYWNrZWRNYXRyaXhUZXh0dXJlU2hhcGVXaWR0aEhlaWdodChyb3dzLCBjb2x1bW5zKTtcbiAgcmV0dXJuIHcgKiBoICogNDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZU1hdHJpeFRvUGFja2VkUkdCQShcbiAgICBtYXRyaXg6IEZsb2F0MzJBcnJheSwgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIsXG4gICAgcGFja2VkUkdCQTogRmxvYXQzMkFycmF5KSB7XG4gIGNvbnN0IHJlcXVpcmVkU2l6ZSA9IGdldFBhY2tlZFJHQkFBcnJheVNpemVGcm9tTWF0cml4U2hhcGUocm93cywgY29sdW1ucyk7XG4gIGlmIChwYWNrZWRSR0JBLmxlbmd0aCA8IHJlcXVpcmVkU2l6ZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ3BhY2tlZFJHQkEgbGVuZ3RoICgnICsgcGFja2VkUkdCQS5sZW5ndGggK1xuICAgICAgICAnKSBtdXN0IGJlID49ICcgKyByZXF1aXJlZFNpemUpO1xuICB9XG4gIC8qXG4gICAgVW5wYWNrZWQgbWF0cml4LCByb3ctbWFqb3Igb3JkZXIgaW4gRmxvYXQzMkFycmF5WzE2XTogIEEgQiBDIERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRSBGIEcgSFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJIEogSyBMXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE0gTiBPIFBcblxuICAgIFBhY2tlZCBtYXRyaXgsIDJ4MiBSR0JBMzIgdGV4dHVyZSAobWVtb3J5IHZpZXcpOiAgICAgICBBQkVGIENER0ggSUpNTiBLTE9QXG5cbiAgICBQYWNrZWQgbWF0cml4LCAyeDIgUkdCQTMyIHRleHR1cmUgKG1hdHJpeCB2aWV3KTogICAgICAgQUJ8Q0RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRUZ8R0hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0rLS1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSUp8S0xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTU58T1BcbiAgICovXG4gIGNvbnN0IFt0ZXh0dXJlV2lkdGgsIHRleHR1cmVIZWlnaHRdID1cbiAgICAgIGdldFBhY2tlZE1hdHJpeFRleHR1cmVTaGFwZVdpZHRoSGVpZ2h0KHJvd3MsIGNvbHVtbnMpO1xuICBjb25zdCBvZGRXaWR0aCA9IChjb2x1bW5zICUgMikgPT09IDE7XG4gIGNvbnN0IG9kZEhlaWdodCA9IChyb3dzICUgMikgPT09IDE7XG4gIGNvbnN0IHdpZHRoSW5GdWxsQmxvY2tzID0gTWF0aC5mbG9vcihjb2x1bW5zIC8gMik7XG4gIGNvbnN0IGhlaWdodEluRnVsbEJsb2NrcyA9IE1hdGguZmxvb3Iocm93cyAvIDIpO1xuXG4gIC8vIGxvb3Agb3ZlciBmdWxsIDJ4MiBibG9ja3NcbiAge1xuICAgIGNvbnN0IGRzdFN0cmlkZSA9IChvZGRXaWR0aCA/IDQgOiAwKTtcbiAgICBjb25zdCBvbmVSb3cgPSBjb2x1bW5zO1xuICAgIGxldCBkc3QgPSAwO1xuICAgIGZvciAobGV0IGJsb2NrWSA9IDA7IGJsb2NrWSA8IGhlaWdodEluRnVsbEJsb2NrczsgKytibG9ja1kpIHtcbiAgICAgIGNvbnN0IG1hdHJpeFNyY1JvdyA9IChibG9ja1kgKiAyICogY29sdW1ucyk7XG4gICAgICBmb3IgKGxldCBibG9ja1ggPSAwOyBibG9ja1ggPCB3aWR0aEluRnVsbEJsb2NrczsgKytibG9ja1gpIHtcbiAgICAgICAgY29uc3QgbWF0cml4U3JjQ29sID0gYmxvY2tYICogMjtcbiAgICAgICAgY29uc3Qgc3JjID0gbWF0cml4U3JjUm93ICsgbWF0cml4U3JjQ29sO1xuICAgICAgICBwYWNrZWRSR0JBW2RzdF0gPSBtYXRyaXhbc3JjXTtcbiAgICAgICAgcGFja2VkUkdCQVtkc3QgKyAxXSA9IG1hdHJpeFtzcmMgKyAxXTtcbiAgICAgICAgcGFja2VkUkdCQVtkc3QgKyAyXSA9IG1hdHJpeFtzcmMgKyBvbmVSb3ddO1xuICAgICAgICBwYWNrZWRSR0JBW2RzdCArIDNdID0gbWF0cml4W3NyYyArIG9uZVJvdyArIDFdO1xuICAgICAgICBkc3QgKz0gNDtcbiAgICAgIH1cbiAgICAgIGRzdCArPSBkc3RTdHJpZGU7XG4gICAgfVxuICB9XG5cbiAgLy8gbG9vcCBkb3duIGZpbmFsIG9kZCBjb2x1bW5cbiAgaWYgKG9kZFdpZHRoKSB7XG4gICAgbGV0IHNyYyA9IGNvbHVtbnMgLSAxO1xuICAgIGxldCBkc3QgPSAodGV4dHVyZVdpZHRoIC0gMSkgKiA0O1xuICAgIGNvbnN0IHNyY1N0cmlkZSA9IDIgKiBjb2x1bW5zO1xuICAgIGNvbnN0IGRzdFN0cmlkZSA9IHRleHR1cmVXaWR0aCAqIDQ7XG4gICAgZm9yIChsZXQgYmxvY2tZID0gMDsgYmxvY2tZIDwgaGVpZ2h0SW5GdWxsQmxvY2tzOyArK2Jsb2NrWSkge1xuICAgICAgcGFja2VkUkdCQVtkc3RdID0gbWF0cml4W3NyY107XG4gICAgICBwYWNrZWRSR0JBW2RzdCArIDJdID0gbWF0cml4W3NyYyArIGNvbHVtbnNdO1xuICAgICAgc3JjICs9IHNyY1N0cmlkZTtcbiAgICAgIGRzdCArPSBkc3RTdHJpZGU7XG4gICAgfVxuICB9XG5cbiAgLy8gbG9vcCBhY3Jvc3MgZmluYWwgcm93XG4gIGlmIChvZGRIZWlnaHQpIHtcbiAgICBsZXQgc3JjID0gKHJvd3MgLSAxKSAqIGNvbHVtbnM7XG4gICAgbGV0IGRzdCA9ICh0ZXh0dXJlSGVpZ2h0IC0gMSkgKiB0ZXh0dXJlV2lkdGggKiA0O1xuICAgIGZvciAobGV0IGJsb2NrWCA9IDA7IGJsb2NrWCA8IHdpZHRoSW5GdWxsQmxvY2tzOyArK2Jsb2NrWCkge1xuICAgICAgcGFja2VkUkdCQVtkc3QrK10gPSBtYXRyaXhbc3JjKytdO1xuICAgICAgcGFja2VkUkdCQVtkc3QrK10gPSBtYXRyaXhbc3JjKytdO1xuICAgICAgZHN0ICs9IDI7XG4gICAgfVxuICB9XG5cbiAgLy8gZmlsbCBpbiBib3R0b20tcmlnaHQgdGV4ZWxcbiAgaWYgKG9kZFdpZHRoICYmIG9kZEhlaWdodCkge1xuICAgIHBhY2tlZFJHQkFbcGFja2VkUkdCQS5sZW5ndGggLSA0XSA9IG1hdHJpeFttYXRyaXgubGVuZ3RoIC0gMV07XG4gIH1cblxuICByZXR1cm4gcGFja2VkUkdCQTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZU1hdHJpeEZyb21QYWNrZWRSR0JBKFxuICAgIHBhY2tlZFJHQkE6IEZsb2F0MzJBcnJheSwgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIsXG4gICAgbWF0cml4OiBGbG9hdDMyQXJyYXkpOiBGbG9hdDMyQXJyYXkge1xuICBjb25zdCByZXF1aXJlZFNpemUgPSByb3dzICogY29sdW1ucztcbiAgaWYgKHJlcXVpcmVkU2l6ZSA8IG1hdHJpeC5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdtYXRyaXggbGVuZ3RoICgnICsgbWF0cml4Lmxlbmd0aCArICcpIG11c3QgYmUgPj0gJyArIHJlcXVpcmVkU2l6ZSk7XG4gIH1cbiAgY29uc3Qgb2RkV2lkdGggPSAoY29sdW1ucyAlIDIpID09PSAxO1xuICBjb25zdCBvZGRIZWlnaHQgPSAocm93cyAlIDIpID09PSAxO1xuICBjb25zdCB3aWR0aEluRnVsbEJsb2NrcyA9IE1hdGguZmxvb3IoY29sdW1ucyAvIDIpO1xuICBjb25zdCBoZWlnaHRJbkZ1bGxCbG9ja3MgPSBNYXRoLmZsb29yKHJvd3MgLyAyKTtcbiAgY29uc3QgW3RleHR1cmVXaWR0aCwgdGV4dHVyZUhlaWdodF0gPVxuICAgICAgZ2V0UGFja2VkTWF0cml4VGV4dHVyZVNoYXBlV2lkdGhIZWlnaHQocm93cywgY29sdW1ucyk7XG5cbiAgLy8gbG9vcCBvdmVyIGZ1bGwgMngyIGJsb2Nrc1xuICB7XG4gICAgY29uc3Qgc3JjU3RyaWRlID0gb2RkV2lkdGggPyA0IDogMDtcbiAgICBjb25zdCBkc3RTdHJpZGUgPSBjb2x1bW5zICsgKG9kZFdpZHRoID8gMSA6IDApO1xuICAgIGxldCBzcmMgPSAwO1xuICAgIGxldCBkc3RSb3cxID0gMDtcbiAgICBsZXQgZHN0Um93MiA9IGNvbHVtbnM7XG4gICAgZm9yIChsZXQgYmxvY2tZID0gMDsgYmxvY2tZIDwgaGVpZ2h0SW5GdWxsQmxvY2tzOyArK2Jsb2NrWSkge1xuICAgICAgZm9yIChsZXQgYmxvY2tYID0gMDsgYmxvY2tYIDwgd2lkdGhJbkZ1bGxCbG9ja3M7ICsrYmxvY2tYKSB7XG4gICAgICAgIG1hdHJpeFtkc3RSb3cxKytdID0gcGFja2VkUkdCQVtzcmMrK107XG4gICAgICAgIG1hdHJpeFtkc3RSb3cxKytdID0gcGFja2VkUkdCQVtzcmMrK107XG4gICAgICAgIG1hdHJpeFtkc3RSb3cyKytdID0gcGFja2VkUkdCQVtzcmMrK107XG4gICAgICAgIG1hdHJpeFtkc3RSb3cyKytdID0gcGFja2VkUkdCQVtzcmMrK107XG4gICAgICB9XG4gICAgICBzcmMgKz0gc3JjU3RyaWRlO1xuICAgICAgZHN0Um93MSArPSBkc3RTdHJpZGU7XG4gICAgICBkc3RSb3cyICs9IGRzdFN0cmlkZTtcbiAgICB9XG4gIH1cblxuICAvLyBsb29wIGRvd24gZmluYWwgY29sdW1uXG4gIGlmIChvZGRXaWR0aCkge1xuICAgIGxldCBzcmMgPSAodGV4dHVyZVdpZHRoIC0gMSkgKiA0O1xuICAgIGxldCBkc3QgPSBjb2x1bW5zIC0gMTtcbiAgICBjb25zdCBzcmNTdHJpZGUgPSB0ZXh0dXJlV2lkdGggKiA0O1xuICAgIGNvbnN0IGRzdFN0cmlkZSA9IDIgKiBjb2x1bW5zO1xuICAgIGZvciAobGV0IGJsb2NrWSA9IDA7IGJsb2NrWSA8IGhlaWdodEluRnVsbEJsb2NrczsgKytibG9ja1kpIHtcbiAgICAgIG1hdHJpeFtkc3RdID0gcGFja2VkUkdCQVtzcmNdO1xuICAgICAgbWF0cml4W2RzdCArIGNvbHVtbnNdID0gcGFja2VkUkdCQVtzcmMgKyAyXTtcbiAgICAgIHNyYyArPSBzcmNTdHJpZGU7XG4gICAgICBkc3QgKz0gZHN0U3RyaWRlO1xuICAgIH1cbiAgfVxuXG4gIC8vIGxvb3AgYWNyb3NzIGZpbmFsIHJvd1xuICBpZiAob2RkSGVpZ2h0KSB7XG4gICAgbGV0IHNyYyA9ICh0ZXh0dXJlSGVpZ2h0IC0gMSkgKiB0ZXh0dXJlV2lkdGggKiA0O1xuICAgIGxldCBkc3QgPSAocm93cyAtIDEpICogY29sdW1ucztcbiAgICBmb3IgKGxldCBibG9ja1ggPSAwOyBibG9ja1ggPCB3aWR0aEluRnVsbEJsb2NrczsgKytibG9ja1gpIHtcbiAgICAgIG1hdHJpeFtkc3QrK10gPSBwYWNrZWRSR0JBW3NyYysrXTtcbiAgICAgIG1hdHJpeFtkc3QrK10gPSBwYWNrZWRSR0JBW3NyYysrXTtcbiAgICAgIHNyYyArPSAyO1xuICAgIH1cbiAgfVxuXG4gIC8vIGZpbGwgaW4gYm90dG9tLXJpZ2h0IGNlbGxcbiAgaWYgKG9kZFdpZHRoICYmIG9kZEhlaWdodCkge1xuICAgIG1hdHJpeFttYXRyaXgubGVuZ3RoIC0gMV0gPSBwYWNrZWRSR0JBW3BhY2tlZFJHQkEubGVuZ3RoIC0gNF07XG4gIH1cblxuICByZXR1cm4gbWF0cml4O1xufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge0dQR1BVQ29udGV4dH0gZnJvbSAnLi9ncGdwdV9jb250ZXh0JztcblxuZXhwb3J0IGNsYXNzIFRleHR1cmVNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBudW1Vc2VkVGV4dHVyZXMgPSAwO1xuICBwcml2YXRlIG51bUZyZWVUZXh0dXJlcyA9IDA7XG4gIHByaXZhdGUgZnJlZVRleHR1cmVzOiB7W3NoYXBlOiBzdHJpbmddOiBXZWJHTFRleHR1cmVbXX0gPSB7fTtcbiAgcHJpdmF0ZSBsb2dFbmFibGVkID0gZmFsc2U7XG4gIHByaXZhdGUgdXNlZFRleHR1cmVDb3VudDoge1tzaGFwZTogc3RyaW5nXTogbnVtYmVyfSA9IHt9O1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZ3BncHU6IEdQR1BVQ29udGV4dCkge31cblxuICBhY3F1aXJlVGV4dHVyZShzaGFwZVJDOiBbbnVtYmVyLCBudW1iZXJdKTogV2ViR0xUZXh0dXJlIHtcbiAgICBjb25zdCBzaGFwZUtleSA9IGdldEtleUZyb21UZXh0dXJlU2hhcGUoc2hhcGVSQyk7XG4gICAgaWYgKCEoc2hhcGVLZXkgaW4gdGhpcy5mcmVlVGV4dHVyZXMpKSB7XG4gICAgICB0aGlzLmZyZWVUZXh0dXJlc1tzaGFwZUtleV0gPSBbXTtcbiAgICB9XG4gICAgaWYgKCEoc2hhcGVLZXkgaW4gdGhpcy51c2VkVGV4dHVyZUNvdW50KSkge1xuICAgICAgdGhpcy51c2VkVGV4dHVyZUNvdW50W3NoYXBlS2V5XSA9IDA7XG4gICAgfVxuICAgIHRoaXMudXNlZFRleHR1cmVDb3VudFtzaGFwZUtleV0rKztcblxuICAgIGlmICh0aGlzLmZyZWVUZXh0dXJlc1tzaGFwZUtleV0ubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5udW1GcmVlVGV4dHVyZXMtLTtcbiAgICAgIHRoaXMubnVtVXNlZFRleHR1cmVzKys7XG4gICAgICB0aGlzLmxvZygpO1xuICAgICAgcmV0dXJuIHRoaXMuZnJlZVRleHR1cmVzW3NoYXBlS2V5XS5zaGlmdCgpITtcbiAgICB9XG4gICAgdGhpcy5udW1Vc2VkVGV4dHVyZXMrKztcbiAgICB0aGlzLmxvZygpO1xuXG4gICAgcmV0dXJuIHRoaXMuZ3BncHUuY3JlYXRlTWF0cml4VGV4dHVyZShzaGFwZVJDWzBdLCBzaGFwZVJDWzFdKTtcbiAgfVxuXG4gIHJlbGVhc2VUZXh0dXJlKHRleHR1cmU6IFdlYkdMVGV4dHVyZSwgc2hhcGU6IFtudW1iZXIsIG51bWJlcl0pOiB2b2lkIHtcbiAgICBjb25zdCBzaGFwZUtleSA9IGdldEtleUZyb21UZXh0dXJlU2hhcGUoc2hhcGUpO1xuICAgIGlmICghKHNoYXBlS2V5IGluIHRoaXMuZnJlZVRleHR1cmVzKSkge1xuICAgICAgdGhpcy5mcmVlVGV4dHVyZXNbc2hhcGVLZXldID0gW107XG4gICAgfVxuICAgIHRoaXMuZnJlZVRleHR1cmVzW3NoYXBlS2V5XS5wdXNoKHRleHR1cmUpO1xuICAgIHRoaXMubnVtRnJlZVRleHR1cmVzKys7XG4gICAgdGhpcy5udW1Vc2VkVGV4dHVyZXMtLTtcbiAgICB0aGlzLnVzZWRUZXh0dXJlQ291bnRbc2hhcGVLZXldLS07XG4gICAgdGhpcy5sb2coKTtcbiAgfVxuXG4gIHByaXZhdGUgbG9nKCkge1xuICAgIGlmICghdGhpcy5sb2dFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRvdGFsID0gdGhpcy5udW1GcmVlVGV4dHVyZXMgKyB0aGlzLm51bVVzZWRUZXh0dXJlcztcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgJ0ZyZWUvVXNlZCcsIHRoaXMubnVtRnJlZVRleHR1cmVzICsgJyAvICcgKyB0aGlzLm51bVVzZWRUZXh0dXJlcyxcbiAgICAgICAgYCgke3RvdGFsfSlgKTtcbiAgfVxuXG4gIGdldE51bVVzZWRUZXh0dXJlcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm51bVVzZWRUZXh0dXJlcztcbiAgfVxuXG4gIGdldE51bUZyZWVUZXh0dXJlcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm51bUZyZWVUZXh0dXJlcztcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgZm9yIChjb25zdCBzaGFwZSBpbiB0aGlzLmZyZWVUZXh0dXJlcykge1xuICAgICAgaWYgKHRoaXMuZnJlZVRleHR1cmVzLmhhc093blByb3BlcnR5KHNoYXBlKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZnJlZVRleHR1cmVzW3NoYXBlXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRoaXMuZ3BncHUuZGVsZXRlTWF0cml4VGV4dHVyZSh0aGlzLmZyZWVUZXh0dXJlc1tzaGFwZV1baV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldEtleUZyb21UZXh0dXJlU2hhcGUoc2hhcGVSb3dzQ29sOiBbbnVtYmVyLCBudW1iZXJdKTogc3RyaW5nIHtcbiAgcmV0dXJuIHNoYXBlUm93c0NvbFswXSArICdfJyArIHNoYXBlUm93c0NvbFsxXTtcbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtHUEdQVUNvbnRleHR9IGZyb20gJy4vZ3BncHVfY29udGV4dCc7XG5pbXBvcnQgKiBhcyB1bmFyeW9wX2dwdSBmcm9tICcuL3VuYXJ5b3BfZ3B1JztcblxuLyoqXG4gKiBTaW5lXG4gKi9cbmZ1bmN0aW9uIGdldFNpblVuYXJ5T3AoKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBcbiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHNpbih2YWx1ZSksIDAsIDAsIDApO1xuICBgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2luRnJhZ21lbnRTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHtcbiAgcmV0dXJuIHVuYXJ5b3BfZ3B1LmdldEZyYWdtZW50U2hhZGVyU291cmNlKGdldFNpblVuYXJ5T3AoKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaW4oXG4gICAgZ3BncHU6IEdQR1BVQ29udGV4dCwgc2luUHJvZ3JhbTogV2ViR0xQcm9ncmFtLCBhOiBXZWJHTFRleHR1cmUsXG4gICAgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIsIHJlc3VsdDogV2ViR0xUZXh0dXJlKSB7XG4gIHVuYXJ5b3BfZ3B1LnVuYXJ5T3AoZ3BncHUsIHNpblByb2dyYW0sIGEsIHJvd3MsIGNvbHVtbnMsIHJlc3VsdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGxvYWRTaW5Eb3dubG9hZChcbiAgICBhOiBGbG9hdDMyQXJyYXksIHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyKTogRmxvYXQzMkFycmF5IHtcbiAgcmV0dXJuIHVuYXJ5b3BfZ3B1LnVwbG9hZFVuYXJ5T3BEb3dubG9hZChhLCByb3dzLCBjb2x1bW5zLCBnZXRTaW5VbmFyeU9wKCkpO1xufVxuXG4vKipcbiAqIFRhbmhcbiAqL1xuZnVuY3Rpb24gZ2V0VGFuaFVuYXJ5T3AoKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBcbiAgICBmbG9hdCBlMnggPSBleHAoLTIuMCAqIHZhbHVlKTtcbiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KCgxLjAgLSBlMngpIC8gKDEuMCArIGUyeCksIDAsIDAsIDApO1xuICBgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFuaEZyYWdtZW50U2hhZGVyU291cmNlKCk6IHN0cmluZyB7XG4gIHJldHVybiB1bmFyeW9wX2dwdS5nZXRGcmFnbWVudFNoYWRlclNvdXJjZShnZXRUYW5oVW5hcnlPcCgpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRhbmgoXG4gICAgZ3BncHU6IEdQR1BVQ29udGV4dCwgdGFuaFByb2dyYW06IFdlYkdMUHJvZ3JhbSwgYTogV2ViR0xUZXh0dXJlLFxuICAgIHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyLCByZXN1bHQ6IFdlYkdMVGV4dHVyZSkge1xuICB1bmFyeW9wX2dwdS51bmFyeU9wKGdwZ3B1LCB0YW5oUHJvZ3JhbSwgYSwgcm93cywgY29sdW1ucywgcmVzdWx0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwbG9hZFRhbmhEb3dubG9hZChcbiAgICBhOiBGbG9hdDMyQXJyYXksIHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyKTogRmxvYXQzMkFycmF5IHtcbiAgcmV0dXJuIHVuYXJ5b3BfZ3B1LnVwbG9hZFVuYXJ5T3BEb3dubG9hZChhLCByb3dzLCBjb2x1bW5zLCBnZXRUYW5oVW5hcnlPcCgpKTtcbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtHUEdQVUNvbnRleHR9IGZyb20gJy4vZ3BncHVfY29udGV4dCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudFNoYWRlclNvdXJjZShyZXN1bHRPcDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgbWF0cml4QTtcbiAgICB2YXJ5aW5nIHZlYzIgcmVzdWx0VVY7XG5cbiAgICB2b2lkIG1haW4oKSB7XG4gICAgICBmbG9hdCB2YWx1ZSA9IHRleHR1cmUyRChtYXRyaXhBLCByZXN1bHRVVikucjtcbiAgICAgICR7cmVzdWx0T3B9XG4gICAgfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmFyeU9wKFxuICAgIGdwZ3B1OiBHUEdQVUNvbnRleHQsIHVuYXJ5T3BQcm9ncmFtOiBXZWJHTFByb2dyYW0sIGE6IFdlYkdMVGV4dHVyZSxcbiAgICByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlciwgcmVzdWx0OiBXZWJHTFRleHR1cmUpIHtcbiAgZ3BncHUuc2V0T3V0cHV0TWF0cml4VGV4dHVyZShyZXN1bHQsIHJvd3MsIGNvbHVtbnMpO1xuICBncGdwdS5zZXRQcm9ncmFtKHVuYXJ5T3BQcm9ncmFtKTtcbiAgZ3BncHUuc2V0SW5wdXRNYXRyaXhUZXh0dXJlKGEsICdtYXRyaXhBJywgMCk7XG4gIGdwZ3B1LmV4ZWN1dGVQcm9ncmFtKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGxvYWRVbmFyeU9wRG93bmxvYWQoXG4gICAgYTogRmxvYXQzMkFycmF5LCByb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlcixcbiAgICByZXN1bHRPcDogc3RyaW5nKTogRmxvYXQzMkFycmF5IHtcbiAgY29uc3QgZ3BncHUgPSBuZXcgR1BHUFVDb250ZXh0KCk7XG4gIGNvbnN0IGZyYWdtZW50U2hhZGVyU3JjID0gZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UocmVzdWx0T3ApO1xuICBjb25zdCBwcm9ncmFtOiBXZWJHTFByb2dyYW0gPSBncGdwdS5jcmVhdGVQcm9ncmFtKGZyYWdtZW50U2hhZGVyU3JjKTtcbiAgY29uc3QgYVRleHR1cmU6IFdlYkdMVGV4dHVyZSA9IGdwZ3B1LmNyZWF0ZU1hdHJpeFRleHR1cmUocm93cywgY29sdW1ucyk7XG4gIGNvbnN0IHJlc3VsdFRleHR1cmU6IFdlYkdMVGV4dHVyZSA9IGdwZ3B1LmNyZWF0ZU1hdHJpeFRleHR1cmUocm93cywgY29sdW1ucyk7XG4gIGdwZ3B1LnVwbG9hZE1hdHJpeFRvVGV4dHVyZShhVGV4dHVyZSwgcm93cywgY29sdW1ucywgYSk7XG4gIHVuYXJ5T3AoZ3BncHUsIHByb2dyYW0sIGFUZXh0dXJlLCByb3dzLCBjb2x1bW5zLCByZXN1bHRUZXh0dXJlKTtcbiAgY29uc3QgcmVzdWx0ID0gZ3BncHUuZG93bmxvYWRNYXRyaXhGcm9tVGV4dHVyZShyZXN1bHRUZXh0dXJlLCByb3dzLCBjb2x1bW5zKTtcbiAgZ3BncHUuZGVsZXRlTWF0cml4VGV4dHVyZShhVGV4dHVyZSk7XG4gIGdwZ3B1LmRlbGV0ZU1hdHJpeFRleHR1cmUocmVzdWx0VGV4dHVyZSk7XG4gIGdwZ3B1LmRlbGV0ZVByb2dyYW0ocHJvZ3JhbSk7XG4gIGdwZ3B1LmRpc3Bvc2UoKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxubGV0IFVTRV9XRUJHTDJfV0hFTl9BVkFJTEFCTEUgPSBmYWxzZTtcbmxldCBXRUJHTDJfRU5BQkxFRDogYm9vbGVhbnx1bmRlZmluZWQgPSBudWxsITtcbmxldCBNQVhfVEVYVFVSRV9TSVpFOiBudW1iZXIgPSBudWxsITtcblxuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuLi8uLi91dGlsJztcblxuZXhwb3J0IGludGVyZmFjZSBXZWJHTENvbnRleHRBdHRyaWJ1dGVzIHtcbiAgYWxwaGE/OiBib29sZWFuO1xuICBhbnRpYWxpYXM/OiBib29sZWFuO1xuICBwcmVtdWx0aXBsaWVkQWxwaGE/OiBib29sZWFuO1xuICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI/OiBib29sZWFuO1xuICBkZXB0aD86IGJvb2xlYW47XG4gIHN0ZW5jaWw/OiBib29sZWFuO1xuICBmYWlsSWZNYWpvclBlcmZvcm1hbmNlQ2F2ZWF0PzogYm9vbGVhbjtcbn1cblxuLyoqIEBoaWRkZW4gKi9cbmV4cG9ydCBjb25zdCBJU19OQU5fU0hBREVSX0ZVTkMgPSBgXG5ib29sIGlzTmFOKGZsb2F0IHZhbCkge1xuICByZXR1cm4gdmFsID09IHZhbCA/IGZhbHNlIDogdHJ1ZTtcbn1cbmA7XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2ViR0xMb3NlQ29udGV4dEV4dGVuc2lvbiB7IGxvc2VDb250ZXh0KCk6IHZvaWQ7IH1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVdlYkdMUmVuZGVyaW5nQ29udGV4dChhdHRyaWJ1dGVzOiBXZWJHTENvbnRleHRBdHRyaWJ1dGVzKTpcbiAgICBXZWJHTFJlbmRlcmluZ0NvbnRleHQge1xuICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgY2FudmFzLndpZHRoID0gMTtcbiAgY2FudmFzLmhlaWdodCA9IDE7XG4gIHJldHVybiBjcmVhdGVXZWJHTFJlbmRlcmluZ0NvbnRleHRGcm9tQ2FudmFzKGNhbnZhcywgYXR0cmlidXRlcyk7XG59XG5cbi8qKlxuICogRm9yY2UgdGhlIGxpYnJhcnkgdG8gcHJlZmVyIFdlYkdMIDEuMCBpbnN0ZWFkIG9mIFdlYkdMIDIuMCBldmVuIHdoZW4gV2ViR0xcbiAqIDIuMCBpcyBhdmFpbGFibGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcmVmZXJXZWJHTDEoKSB7XG4gIFVTRV9XRUJHTDJfV0hFTl9BVkFJTEFCTEUgPSBmYWxzZTtcbiAgV0VCR0wyX0VOQUJMRUQgPSB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogUHJlZmVyIFdlYkdMIDIuMCB0byBXZWJHTCAxLjAuIFRoaXMgaXMgdGhlIGRlZmF1bHQgY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByZWZlcldlYkdMMigpIHtcbiAgVVNFX1dFQkdMMl9XSEVOX0FWQUlMQUJMRSA9IHRydWU7XG4gIFdFQkdMMl9FTkFCTEVEID0gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNXZWJHTDJFbmFibGVkKCkge1xuICBpZiAoIVVTRV9XRUJHTDJfV0hFTl9BVkFJTEFCTEUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoV0VCR0wyX0VOQUJMRUQgPT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IHRlbXBDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjb25zdCBnbCA9IHRlbXBDYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wyJyk7XG4gICAgaWYgKGdsICE9IG51bGwpIHtcbiAgICAgIFdFQkdMMl9FTkFCTEVEID0gdHJ1ZTtcblxuICAgICAgY29uc3QgbG9zZUNvbnRleHRFeHRlbnNpb24gPVxuICAgICAgICAgIGdldEV4dGVuc2lvbk9yVGhyb3coXG4gICAgICAgICAgICAgIGdsIGFzIFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgJ1dFQkdMX2xvc2VfY29udGV4dCcpIGFzXG4gICAgICAgICAgV2ViR0xMb3NlQ29udGV4dEV4dGVuc2lvbjtcbiAgICAgIGxvc2VDb250ZXh0RXh0ZW5zaW9uLmxvc2VDb250ZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFdFQkdMMl9FTkFCTEVEID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiBXRUJHTDJfRU5BQkxFRDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVdlYkdMUmVuZGVyaW5nQ29udGV4dEZyb21DYW52YXMoXG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCxcbiAgICBhdHRyaWJ1dGVzOiBXZWJHTENvbnRleHRBdHRyaWJ1dGVzKTogV2ViR0xSZW5kZXJpbmdDb250ZXh0IHtcbiAgbGV0IGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQ7XG4gIGlmIChpc1dlYkdMMkVuYWJsZWQoKSkge1xuICAgIGdsID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsMicsIGF0dHJpYnV0ZXMpIGFzIFdlYkdMUmVuZGVyaW5nQ29udGV4dDtcbiAgfSBlbHNlIHtcbiAgICBnbCA9IChjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnLCBhdHRyaWJ1dGVzKSB8fFxuICAgICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCdleHBlcmltZW50YWwtd2ViZ2wnLCBhdHRyaWJ1dGVzKSkgYXNcbiAgICAgICAgV2ViR0xSZW5kZXJpbmdDb250ZXh0O1xuICB9XG5cbiAgaWYgKGdsID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFdlYkdMLicpO1xuICB9XG4gIHJldHVybiBnbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGxBbmRDaGVjazxUPihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBmdW5jOiAoKSA9PiBUKTogVCB7XG4gIGNvbnN0IHJldHVyblZhbHVlID0gZnVuYygpO1xuICBjaGVja1dlYkdMRXJyb3IoZ2wpO1xuICByZXR1cm4gcmV0dXJuVmFsdWU7XG59XG5cbmxldCB3ZWJHTERlYnVnRXJyb3JDaGVja2luZ0VuYWJsZWQgPSBmYWxzZTtcblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZURlYnVnV2ViR0xFcnJvckNoZWNraW5nKGVuYWJsZWQ6IGJvb2xlYW4pIHtcbiAgd2ViR0xEZWJ1Z0Vycm9yQ2hlY2tpbmdFbmFibGVkID0gZW5hYmxlZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrV2ViR0xFcnJvcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KSB7XG4gIGlmICh3ZWJHTERlYnVnRXJyb3JDaGVja2luZ0VuYWJsZWQpIHtcbiAgICBjb25zdCBlcnJvciA9IGdsLmdldEVycm9yKCk7XG4gICAgaWYgKGVycm9yICE9PSBnbC5OT19FUlJPUikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJHTCBFcnJvcjogJyArIGdldFdlYkdMRXJyb3JNZXNzYWdlKGdsLCBlcnJvcikpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2ViR0xFcnJvck1lc3NhZ2UoXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgc3RhdHVzOiBudW1iZXIpOiBzdHJpbmcge1xuICBzd2l0Y2ggKHN0YXR1cykge1xuICAgIGNhc2UgZ2wuTk9fRVJST1I6XG4gICAgICByZXR1cm4gJ05PX0VSUk9SJztcbiAgICBjYXNlIGdsLklOVkFMSURfRU5VTTpcbiAgICAgIHJldHVybiAnSU5WQUxJRF9FTlVNJztcbiAgICBjYXNlIGdsLklOVkFMSURfVkFMVUU6XG4gICAgICByZXR1cm4gJ0lOVkFMSURfVkFMVUUnO1xuICAgIGNhc2UgZ2wuSU5WQUxJRF9PUEVSQVRJT046XG4gICAgICByZXR1cm4gJ0lOVkFMSURfT1BFUkFUSU9OJztcbiAgICBjYXNlIGdsLklOVkFMSURfRlJBTUVCVUZGRVJfT1BFUkFUSU9OOlxuICAgICAgcmV0dXJuICdJTlZBTElEX0ZSQU1FQlVGRkVSX09QRVJBVElPTic7XG4gICAgY2FzZSBnbC5PVVRfT0ZfTUVNT1JZOlxuICAgICAgcmV0dXJuICdPVVRfT0ZfTUVNT1JZJztcbiAgICBjYXNlIGdsLkNPTlRFWFRfTE9TVF9XRUJHTDpcbiAgICAgIHJldHVybiAnQ09OVEVYVF9MT1NUX1dFQkdMJztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICdVbmtub3duIGVycm9yIGNvZGUgJyArIHN0YXR1cztcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXh0ZW5zaW9uT3JUaHJvdyhcbiAgICBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBleHRlbnNpb25OYW1lOiBzdHJpbmcpOiB7fSB7XG4gIHJldHVybiB0aHJvd0lmTnVsbDx7fT4oXG4gICAgICBnbCwgKCkgPT4gZ2wuZ2V0RXh0ZW5zaW9uKGV4dGVuc2lvbk5hbWUpLFxuICAgICAgJ0V4dGVuc2lvbiBcIicgKyBleHRlbnNpb25OYW1lICsgJ1wiIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyLicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVmVydGV4U2hhZGVyKFxuICAgIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHZlcnRleFNoYWRlclNvdXJjZTogc3RyaW5nKTogV2ViR0xTaGFkZXIge1xuICBjb25zdCB2ZXJ0ZXhTaGFkZXI6IFdlYkdMU2hhZGVyID0gdGhyb3dJZk51bGw8V2ViR0xTaGFkZXI+KFxuICAgICAgZ2wsICgpID0+IGdsLmNyZWF0ZVNoYWRlcihnbC5WRVJURVhfU0hBREVSKSxcbiAgICAgICdVbmFibGUgdG8gY3JlYXRlIHZlcnRleCBXZWJHTFNoYWRlci4nKTtcbiAgY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5zaGFkZXJTb3VyY2UodmVydGV4U2hhZGVyLCB2ZXJ0ZXhTaGFkZXJTb3VyY2UpKTtcbiAgY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5jb21waWxlU2hhZGVyKHZlcnRleFNoYWRlcikpO1xuICBpZiAoZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHZlcnRleFNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpID09PSBmYWxzZSkge1xuICAgIGNvbnNvbGUubG9nKGdsLmdldFNoYWRlckluZm9Mb2codmVydGV4U2hhZGVyKSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY29tcGlsZSB2ZXJ0ZXggc2hhZGVyLicpO1xuICB9XG4gIHJldHVybiB2ZXJ0ZXhTaGFkZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcmFnbWVudFNoYWRlcihcbiAgICBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBmcmFnbWVudFNoYWRlclNvdXJjZTogc3RyaW5nKTogV2ViR0xTaGFkZXIge1xuICBjb25zdCBmcmFnbWVudFNoYWRlcjogV2ViR0xTaGFkZXIgPSB0aHJvd0lmTnVsbDxXZWJHTFNoYWRlcj4oXG4gICAgICBnbCwgKCkgPT4gZ2wuY3JlYXRlU2hhZGVyKGdsLkZSQUdNRU5UX1NIQURFUiksXG4gICAgICAnVW5hYmxlIHRvIGNyZWF0ZSBmcmFnbWVudCBXZWJHTFNoYWRlci4nKTtcbiAgY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5zaGFkZXJTb3VyY2UoZnJhZ21lbnRTaGFkZXIsIGZyYWdtZW50U2hhZGVyU291cmNlKSk7XG4gIGNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wuY29tcGlsZVNoYWRlcihmcmFnbWVudFNoYWRlcikpO1xuICBpZiAoZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKGZyYWdtZW50U2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykgPT09IGZhbHNlKSB7XG4gICAgY29uc29sZS5sb2coZ2wuZ2V0U2hhZGVySW5mb0xvZyhmcmFnbWVudFNoYWRlcikpO1xuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNvbXBpbGUgZnJhZ21lbnQgc2hhZGVyLicpO1xuICB9XG4gIHJldHVybiBmcmFnbWVudFNoYWRlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2dyYW0oZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCk6IFdlYkdMUHJvZ3JhbSB7XG4gIHJldHVybiB0aHJvd0lmTnVsbDxXZWJHTFByb2dyYW0+KFxuICAgICAgZ2wsICgpID0+IGdsLmNyZWF0ZVByb2dyYW0oKSwgJ1VuYWJsZSB0byBjcmVhdGUgV2ViR0xQcm9ncmFtLicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbGlua1Byb2dyYW0oZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgcHJvZ3JhbTogV2ViR0xQcm9ncmFtKSB7XG4gIGNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSkpO1xuICBpZiAoZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5MSU5LX1NUQVRVUykgPT09IGZhbHNlKSB7XG4gICAgY29uc29sZS5sb2coZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSkpO1xuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGxpbmsgdmVydGV4IGFuZCBmcmFnbWVudCBzaGFkZXJzLicpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVByb2dyYW0oXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgcHJvZ3JhbTogV2ViR0xQcm9ncmFtKSB7XG4gIGNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wudmFsaWRhdGVQcm9ncmFtKHByb2dyYW0pKTtcbiAgaWYgKGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuVkFMSURBVEVfU1RBVFVTKSA9PT0gZmFsc2UpIHtcbiAgICBjb25zb2xlLmxvZyhnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTaGFkZXIgcHJvZ3JhbSB2YWxpZGF0aW9uIGZhaWxlZC4nKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3RhdGljVmVydGV4QnVmZmVyKFxuICAgIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIGRhdGE6IEZsb2F0MzJBcnJheSk6IFdlYkdMQnVmZmVyIHtcbiAgY29uc3QgYnVmZmVyOiBXZWJHTEJ1ZmZlciA9IHRocm93SWZOdWxsPFdlYkdMQnVmZmVyPihcbiAgICAgIGdsLCAoKSA9PiBnbC5jcmVhdGVCdWZmZXIoKSwgJ1VuYWJsZSB0byBjcmVhdGUgV2ViR0xCdWZmZXInKTtcbiAgY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgYnVmZmVyKSk7XG4gIGNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIGRhdGEsIGdsLlNUQVRJQ19EUkFXKSk7XG4gIHJldHVybiBidWZmZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdGF0aWNJbmRleEJ1ZmZlcihcbiAgICBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBkYXRhOiBVaW50MTZBcnJheSk6IFdlYkdMQnVmZmVyIHtcbiAgY29uc3QgYnVmZmVyOiBXZWJHTEJ1ZmZlciA9IHRocm93SWZOdWxsPFdlYkdMQnVmZmVyPihcbiAgICAgIGdsLCAoKSA9PiBnbC5jcmVhdGVCdWZmZXIoKSwgJ1VuYWJsZSB0byBjcmVhdGUgV2ViR0xCdWZmZXInKTtcbiAgY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBidWZmZXIpKTtcbiAgY2FsbEFuZENoZWNrKFxuICAgICAgZ2wsICgpID0+IGdsLmJ1ZmZlckRhdGEoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGRhdGEsIGdsLlNUQVRJQ19EUkFXKSk7XG4gIHJldHVybiBidWZmZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBxdWVyeU1heFRleHR1cmVTaXplKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpOiBudW1iZXIge1xuICBpZiAoTUFYX1RFWFRVUkVfU0laRSAhPSBudWxsKSB7XG4gICAgcmV0dXJuIE1BWF9URVhUVVJFX1NJWkU7XG4gIH1cbiAgTUFYX1RFWFRVUkVfU0laRSA9XG4gICAgICBjYWxsQW5kQ2hlY2soZ2wsICgpID0+IGdsIS5nZXRQYXJhbWV0ZXIoZ2whLk1BWF9URVhUVVJFX1NJWkUpKTtcbiAgcmV0dXJuIE1BWF9URVhUVVJFX1NJWkU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDaGFubmVsc1BlclRleHR1cmUoKTogbnVtYmVyIHtcbiAgaWYgKGlzV2ViR0wyRW5hYmxlZCgpKSB7XG4gICAgcmV0dXJuIDE7XG4gIH1cbiAgcmV0dXJuIDQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUZXh0dXJlKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpOiBXZWJHTFRleHR1cmUge1xuICByZXR1cm4gdGhyb3dJZk51bGw8V2ViR0xUZXh0dXJlPihcbiAgICAgIGdsLCAoKSA9PiBnbC5jcmVhdGVUZXh0dXJlKCksICdVbmFibGUgdG8gY3JlYXRlIFdlYkdMVGV4dHVyZS4nKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVGV4dHVyZVNpemUoXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgY29uc3QgbWF4VGV4dHVyZVNpemU6IG51bWJlciA9IHF1ZXJ5TWF4VGV4dHVyZVNpemUoZ2wpO1xuICBpZiAoKHdpZHRoIDw9IDApIHx8IChoZWlnaHQgPD0gMCkpIHtcbiAgICBjb25zdCByZXF1ZXN0ZWQgPSAnWycgKyB3aWR0aCArICd4JyArIGhlaWdodCArICddJztcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVlc3RlZCB0ZXh0dXJlIHNpemUgJyArIHJlcXVlc3RlZCArICcgaXMgaW52YWxpZC4nKTtcbiAgfVxuICBpZiAoKHdpZHRoID4gbWF4VGV4dHVyZVNpemUpIHx8IChoZWlnaHQgPiBtYXhUZXh0dXJlU2l6ZSkpIHtcbiAgICBjb25zdCByZXF1ZXN0ZWQgPSAnWycgKyB3aWR0aCArICd4JyArIGhlaWdodCArICddJztcbiAgICBjb25zdCBtYXggPSAnWycgKyBtYXhUZXh0dXJlU2l6ZSArICd4JyArIG1heFRleHR1cmVTaXplICsgJ10nO1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1JlcXVlc3RlZCB0ZXh0dXJlIHNpemUgJyArIHJlcXVlc3RlZCArXG4gICAgICAgICcgZ3JlYXRlciB0aGFuIFdlYkdMIG1heGltdW0gb24gdGhpcyBicm93c2VyIC8gR1BVICcgKyBtYXggKyAnLicpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcmFtZWJ1ZmZlcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KTogV2ViR0xGcmFtZWJ1ZmZlciB7XG4gIHJldHVybiB0aHJvd0lmTnVsbDxXZWJHTEZyYW1lYnVmZmVyPihcbiAgICAgIGdsLCAoKSA9PiBnbC5jcmVhdGVGcmFtZWJ1ZmZlcigpLCAnVW5hYmxlIHRvIGNyZWF0ZSBXZWJHTEZyYW1lYnVmZmVyLicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmluZFZlcnRleEJ1ZmZlclRvUHJvZ3JhbUF0dHJpYnV0ZShcbiAgICBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBwcm9ncmFtOiBXZWJHTFByb2dyYW0sIGF0dHJpYnV0ZTogc3RyaW5nLFxuICAgIGJ1ZmZlcjogV2ViR0xCdWZmZXIsIGFycmF5RW50cmllc1Blckl0ZW06IG51bWJlciwgaXRlbVN0cmlkZUluQnl0ZXM6IG51bWJlcixcbiAgICBpdGVtT2Zmc2V0SW5CeXRlczogbnVtYmVyKSB7XG4gIGNvbnN0IGxvYyA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIGF0dHJpYnV0ZSk7XG4gIGlmIChsb2MgPT09IC0xKSB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgICdVbmFibGUgdG8gZ2V0IGF0dHJpYnV0ZSBcIicgKyBhdHRyaWJ1dGUgKyAnXCIgb24gV2ViR0xQcm9ncmFtLicpO1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcbiAgICAoZXJyb3IgYXMgYW55KS5uYW1lZFZlcnRleEF0dHJpYnV0ZU5vdEZvdW5kID0gYXR0cmlidXRlO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIGNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGJ1ZmZlcikpO1xuICBjYWxsQW5kQ2hlY2soXG4gICAgICBnbCxcbiAgICAgICgpID0+IGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoXG4gICAgICAgICAgbG9jLCBhcnJheUVudHJpZXNQZXJJdGVtLCBnbC5GTE9BVCwgZmFsc2UsIGl0ZW1TdHJpZGVJbkJ5dGVzLFxuICAgICAgICAgIGl0ZW1PZmZzZXRJbkJ5dGVzKSk7XG4gIGNhbGxBbmRDaGVjayhnbCwgKCkgPT4gZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkobG9jKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiaW5kVGV4dHVyZVVuaXQoXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdGV4dHVyZTogV2ViR0xUZXh0dXJlLCB0ZXh0dXJlVW5pdDogbnVtYmVyKSB7XG4gIHZhbGlkYXRlVGV4dHVyZVVuaXQoZ2wsIHRleHR1cmVVbml0KTtcbiAgY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwICsgdGV4dHVyZVVuaXQpKTtcbiAgY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmJpbmRUZXh0dXJlVW5pdChcbiAgICBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB0ZXh0dXJlVW5pdDogbnVtYmVyKSB7XG4gIHZhbGlkYXRlVGV4dHVyZVVuaXQoZ2wsIHRleHR1cmVVbml0KTtcbiAgY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwICsgdGV4dHVyZVVuaXQpKTtcbiAgY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBudWxsKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9ncmFtVW5pZm9ybUxvY2F0aW9uT3JUaHJvdyhcbiAgICBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBwcm9ncmFtOiBXZWJHTFByb2dyYW0sXG4gICAgdW5pZm9ybU5hbWU6IHN0cmluZyk6IFdlYkdMVW5pZm9ybUxvY2F0aW9uIHtcbiAgcmV0dXJuIHRocm93SWZOdWxsPFdlYkdMVW5pZm9ybUxvY2F0aW9uPihcbiAgICAgIGdsLCAoKSA9PiBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdW5pZm9ybU5hbWUpLFxuICAgICAgJ3VuaWZvcm0gXCInICsgdW5pZm9ybU5hbWUgKyAnXCIgbm90IHByZXNlbnQgaW4gcHJvZ3JhbS4nKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJpbmRUZXh0dXJlVG9Qcm9ncmFtVW5pZm9ybVNhbXBsZXIoXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgcHJvZ3JhbTogV2ViR0xQcm9ncmFtLCB0ZXh0dXJlOiBXZWJHTFRleHR1cmUsXG4gICAgdW5pZm9ybVNhbXBsZXJOYW1lOiBzdHJpbmcsIHRleHR1cmVVbml0OiBudW1iZXIpIHtcbiAgY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBiaW5kVGV4dHVyZVVuaXQoZ2wsIHRleHR1cmUsIHRleHR1cmVVbml0KSk7XG4gIGNvbnN0IHNhbXBsZXJMb2NhdGlvbiA9XG4gICAgICBnZXRQcm9ncmFtVW5pZm9ybUxvY2F0aW9uT3JUaHJvdyhnbCwgcHJvZ3JhbSwgdW5pZm9ybVNhbXBsZXJOYW1lKTtcbiAgY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC51bmlmb3JtMWkoc2FtcGxlckxvY2F0aW9uLCB0ZXh0dXJlVW5pdCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmluZENhbnZhc1RvRnJhbWVidWZmZXIoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xuICBjYWxsQW5kQ2hlY2soZ2wsICgpID0+IGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCkpO1xuICBjYWxsQW5kQ2hlY2soZ2wsICgpID0+IGdsLnZpZXdwb3J0KDAsIDAsIGdsLmNhbnZhcy53aWR0aCwgZ2wuY2FudmFzLmhlaWdodCkpO1xuICBjYWxsQW5kQ2hlY2soZ2wsICgpID0+IGdsLnNjaXNzb3IoMCwgMCwgZ2wuY2FudmFzLndpZHRoLCBnbC5jYW52YXMuaGVpZ2h0KSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiaW5kQ29sb3JUZXh0dXJlVG9GcmFtZWJ1ZmZlcihcbiAgICBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB0ZXh0dXJlOiBXZWJHTFRleHR1cmUsXG4gICAgZnJhbWVidWZmZXI6IFdlYkdMRnJhbWVidWZmZXIpIHtcbiAgY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyKSk7XG4gIGNhbGxBbmRDaGVjayhcbiAgICAgIGdsLFxuICAgICAgKCkgPT4gZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoXG4gICAgICAgICAgZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwLCBnbC5URVhUVVJFXzJELCB0ZXh0dXJlLCAwKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmJpbmRDb2xvclRleHR1cmVGcm9tRnJhbWVidWZmZXIoXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgZnJhbWVidWZmZXI6IFdlYkdMRnJhbWVidWZmZXIpIHtcbiAgY2FsbEFuZENoZWNrKGdsLCAoKSA9PiBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyKSk7XG4gIGNhbGxBbmRDaGVjayhcbiAgICAgIGdsLFxuICAgICAgKCkgPT4gZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoXG4gICAgICAgICAgZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwLCBnbC5URVhUVVJFXzJELCBudWxsLCAwKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUZyYW1lYnVmZmVyKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpIHtcbiAgY29uc3Qgc3RhdHVzID0gZ2wuY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhnbC5GUkFNRUJVRkZFUik7XG4gIGlmIChzdGF0dXMgIT09IGdsLkZSQU1FQlVGRkVSX0NPTVBMRVRFKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnRXJyb3IgYmluZGluZyBmcmFtZWJ1ZmZlcjogJyArIGdldEZyYW1lYnVmZmVyRXJyb3JNZXNzYWdlKGdsLCBzdGF0dXMpKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhbWVidWZmZXJFcnJvck1lc3NhZ2UoXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgc3RhdHVzOiBudW1iZXIpOiBzdHJpbmcge1xuICBzd2l0Y2ggKHN0YXR1cykge1xuICAgIGNhc2UgZ2wuRlJBTUVCVUZGRVJfSU5DT01QTEVURV9BVFRBQ0hNRU5UOlxuICAgICAgcmV0dXJuICdGUkFNRUJVRkZFUl9JTkNPTVBMRVRFX0FUVEFDSE1FTlQnO1xuICAgIGNhc2UgZ2wuRlJBTUVCVUZGRVJfSU5DT01QTEVURV9NSVNTSU5HX0FUVEFDSE1FTlQ6XG4gICAgICByZXR1cm4gJ0ZSQU1FQlVGRkVSX0lOQ09NUExFVEVfTUlTU0lOR19BVFRBQ0hNRU5UJztcbiAgICBjYXNlIGdsLkZSQU1FQlVGRkVSX0lOQ09NUExFVEVfRElNRU5TSU9OUzpcbiAgICAgIHJldHVybiAnRlJBTUVCVUZGRVJfSU5DT01QTEVURV9ESU1FTlNJT05TJztcbiAgICBjYXNlIGdsLkZSQU1FQlVGRkVSX1VOU1VQUE9SVEVEOlxuICAgICAgcmV0dXJuICdGUkFNRUJVRkZFUl9VTlNVUFBPUlRFRCc7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAndW5rbm93biBlcnJvciAnICsgc3RhdHVzO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRocm93SWZOdWxsPFQ+KFxuICAgIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHJldHVyblRPck51bGw6ICgpID0+IFQgfCBudWxsLFxuICAgIGZhaWx1cmVNZXNzYWdlOiBzdHJpbmcpOiBUIHtcbiAgY29uc3QgdE9yTnVsbDogVHxudWxsID0gY2FsbEFuZENoZWNrKGdsLCAoKSA9PiByZXR1cm5UT3JOdWxsKCkpO1xuICBpZiAodE9yTnVsbCA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGZhaWx1cmVNZXNzYWdlKTtcbiAgfVxuICByZXR1cm4gdE9yTnVsbCBhcyBUO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVRleHR1cmVVbml0KGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHRleHR1cmVVbml0OiBudW1iZXIpIHtcbiAgY29uc3QgbWF4VGV4dHVyZVVuaXQgPSBnbC5NQVhfQ09NQklORURfVEVYVFVSRV9JTUFHRV9VTklUUyAtIDE7XG4gIGNvbnN0IGdsVGV4dHVyZVVuaXQgPSB0ZXh0dXJlVW5pdCArIGdsLlRFWFRVUkUwO1xuICBpZiAoZ2xUZXh0dXJlVW5pdCA8IGdsLlRFWFRVUkUwIHx8IGdsVGV4dHVyZVVuaXQgPiBtYXhUZXh0dXJlVW5pdCkge1xuICAgIGNvbnN0IHRleHR1cmVVbml0UmFuZ2UgPSAnW2dsLlRFWFRVUkUwLCBnbC5URVhUVVJFJyArIG1heFRleHR1cmVVbml0ICsgJ10nO1xuICAgIHRocm93IG5ldyBFcnJvcigndGV4dHVyZVVuaXQgbXVzdCBiZSBpbiAnICsgdGV4dHVyZVVuaXRSYW5nZSArICcuJyk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRleHR1cmVTaGFwZUZyb21Mb2dpY2FsU2hhcGUoXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgbG9naWNhbFNoYXBlOiBudW1iZXJbXSxcbiAgICBwcmVmZXJyZWRUZXhTaGFwZT86IFtudW1iZXIsIG51bWJlcl0pOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgY29uc3QgbWF4VGV4U2l6ZSA9IHF1ZXJ5TWF4VGV4dHVyZVNpemUoZ2wpO1xuICBjb25zdCBzaXplID0gdXRpbC5zaXplRnJvbVNoYXBlKGxvZ2ljYWxTaGFwZSk7XG4gIGlmIChwcmVmZXJyZWRUZXhTaGFwZSAhPSBudWxsKSB7XG4gICAgY29uc3Qgc2l6ZVByZWZlcnJlZCA9IHV0aWwuc2l6ZUZyb21TaGFwZShwcmVmZXJyZWRUZXhTaGFwZSk7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHNpemUgPT09IHNpemVQcmVmZXJyZWQsXG4gICAgICAgIGBTaXplIG9mIHNoYXBlICgke3NpemV9KSBtdXN0IG1hdGNoIHNpemUgb2YgYCArXG4gICAgICAgICAgICBgcHJlZmVycmVkU2hhcGUgKCR7c2l6ZVByZWZlcnJlZH0pYCk7XG4gICAgaWYgKHByZWZlcnJlZFRleFNoYXBlWzBdIDw9IG1heFRleFNpemUgJiZcbiAgICAgICAgcHJlZmVycmVkVGV4U2hhcGVbMV0gPD0gbWF4VGV4U2l6ZSkge1xuICAgICAgcmV0dXJuIHByZWZlcnJlZFRleFNoYXBlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChsb2dpY2FsU2hhcGUubGVuZ3RoIDw9IDEgJiYgc2l6ZSA8PSBtYXhUZXhTaXplKSB7XG4gICAgcmV0dXJuIFtzaXplLCAxXTtcbiAgfSBlbHNlIGlmIChcbiAgICAgIGxvZ2ljYWxTaGFwZS5sZW5ndGggPT09IDIgJiYgbG9naWNhbFNoYXBlWzBdIDw9IG1heFRleFNpemUgJiZcbiAgICAgIGxvZ2ljYWxTaGFwZVsxXSA8PSBtYXhUZXhTaXplKSB7XG4gICAgcmV0dXJuIGxvZ2ljYWxTaGFwZSBhcyBbbnVtYmVyLCBudW1iZXJdO1xuICB9IGVsc2UgaWYgKFxuICAgICAgbG9naWNhbFNoYXBlLmxlbmd0aCA9PT0gMyAmJiBsb2dpY2FsU2hhcGVbMF0gPD0gbWF4VGV4U2l6ZSAmJlxuICAgICAgbG9naWNhbFNoYXBlWzFdICogbG9naWNhbFNoYXBlWzJdIDw9IG1heFRleFNpemUpIHtcbiAgICByZXR1cm4gW2xvZ2ljYWxTaGFwZVswXSwgbG9naWNhbFNoYXBlWzFdICogbG9naWNhbFNoYXBlWzJdXTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdXRpbC5zaXplVG9TcXVhcmlzaFNoYXBlKHNpemUpO1xuICB9XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCB7QWRkTm9kZSwgQXJnTWF4RXF1YWxzTm9kZSwgQXJnTWF4Tm9kZSwgQ29uY2F0M0ROb2RlLCBDb252b2x1dGlvbjJETm9kZSwgRGl2aWRlTm9kZSwgRXhwTm9kZSwgRnVzZWRMaW5lYXJDb21iaW5hdGlvbk5vZGUsIEdyYXBoLCBMb2dOb2RlLCBNYXRNdWxOb2RlLCBNYXhQb29sTm9kZSwgTWVhblNxdWFyZWRDb3N0Tm9kZSwgTXVsdGlwbHlOb2RlLCBOb2RlLCBSZWR1Y2VTdW1Ob2RlLCBSZUxVTm9kZSwgUmVzaGFwZU5vZGUsIFNpZ21vaWROb2RlLCBTb2Z0bWF4Q3Jvc3NFbnRyb3B5Q29zdE5vZGUsIFNvZnRtYXhOb2RlLCBTcGxpdE5vZGUsIFNxdWFyZU5vZGUsIFN1YnRyYWN0Tm9kZSwgVGFuSE5vZGUsIFRlbnNvcn0gZnJvbSAnLi9ncmFwaCc7XG5pbXBvcnQgKiBhcyBncmFwaF91dGlsIGZyb20gJy4vZ3JhcGhfdXRpbCc7XG5pbXBvcnQge0FkZH0gZnJvbSAnLi9vcHMvYWRkJztcbmltcG9ydCB7QXJnTWF4fSBmcm9tICcuL29wcy9hcmdtYXgnO1xuaW1wb3J0IHtBcmdNYXhFcXVhbHN9IGZyb20gJy4vb3BzL2FyZ21heGVxdWFscyc7XG5pbXBvcnQge0NvbmNhdDNEfSBmcm9tICcuL29wcy9jb25jYXQzZCc7XG5pbXBvcnQge0NvbnZvbHV0aW9uMkR9IGZyb20gJy4vb3BzL2NvbnZvbHV0aW9uJztcbmltcG9ydCB7RGl2aWRlfSBmcm9tICcuL29wcy9kaXZpZGUnO1xuaW1wb3J0IHtSZUxVLCBTaWdtb2lkLCBTcXVhcmUsIFRhbkh9IGZyb20gJy4vb3BzL2VsZW1lbnRfd2lzZV9hY3RpdmF0aW9uJztcbmltcG9ydCB7TWVhblNxdWFyZWRDb3N0fSBmcm9tICcuL29wcy9lbGVtZW50X3dpc2VfY29zdCc7XG5pbXBvcnQge0V4cH0gZnJvbSAnLi9vcHMvZXhwJztcbmltcG9ydCB7TGluZWFyQ29tYmluYXRpb259IGZyb20gJy4vb3BzL2xpbmVhcl9jb21iaW5hdGlvbic7XG5pbXBvcnQge0xvZ30gZnJvbSAnLi9vcHMvbG9nJztcbmltcG9ydCB7TWF0TXVsfSBmcm9tICcuL29wcy9tYXRtdWwnO1xuaW1wb3J0IHtNYXhQb29sfSBmcm9tICcuL29wcy9tYXhfcG9vbCc7XG5pbXBvcnQge011bHRpcGx5fSBmcm9tICcuL29wcy9tdWx0aXBseSc7XG5pbXBvcnQge09wZXJhdGlvbn0gZnJvbSAnLi9vcHMvb3AnO1xuaW1wb3J0IHtSZWR1Y2VTdW19IGZyb20gJy4vb3BzL3JlZHVjZV9zdW0nO1xuaW1wb3J0IHtSZXNoYXBlfSBmcm9tICcuL29wcy9yZXNoYXBlJztcbmltcG9ydCB7U29mdG1heCwgU29mdG1heENyb3NzRW50cm9weUNvc3R9IGZyb20gJy4vb3BzL3NvZnRtYXgnO1xuaW1wb3J0IHtTcGxpdH0gZnJvbSAnLi9vcHMvc3BsaXQnO1xuaW1wb3J0IHtTdWJ0cmFjdH0gZnJvbSAnLi9vcHMvc3VidHJhY3QnO1xuXG5leHBvcnQgZnVuY3Rpb24gZW1pdEZyb21HcmFwaE5vZGVzKG5vZGVzOiBOb2RlW10pOiBPcGVyYXRpb25bXSB7XG4gIGNvbnN0IG9wczogT3BlcmF0aW9uW10gPSBbXTtcbiAgbm9kZXMuZm9yRWFjaChub2RlID0+IEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KG9wcywgZW1pdE9wRnJvbU5vZGUobm9kZSkpKTtcbiAgcmV0dXJuIG9wcztcbn1cblxuZnVuY3Rpb24gZW1pdE9wRnJvbU5vZGUobm9kZTogTm9kZSk6IE9wZXJhdGlvbltdIHtcbiAgaWYgKG5vZGUgaW5zdGFuY2VvZiBSZXNoYXBlTm9kZSkge1xuICAgIHJldHVybiBbbmV3IFJlc2hhcGUobm9kZS5pbnB1dHNbUmVzaGFwZU5vZGUuWF0sIG5vZGUub3V0cHV0KV07XG4gIH0gZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIE1hdE11bE5vZGUpIHtcbiAgICBjb25zdCB4MSA9IG5vZGUuaW5wdXRzW01hdE11bE5vZGUuWDFdO1xuICAgIGNvbnN0IHgyID0gbm9kZS5pbnB1dHNbTWF0TXVsTm9kZS5YMl07XG4gICAgcmV0dXJuIFtuZXcgTWF0TXVsKHgxLCB4Miwgbm9kZS5vdXRwdXQpXTtcbiAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgQ29udm9sdXRpb24yRE5vZGUpIHtcbiAgICBjb25zdCB3ID0gbm9kZS5pbnB1dHNbQ29udm9sdXRpb24yRE5vZGUuV107XG4gICAgY29uc3QgeCA9IG5vZGUuaW5wdXRzW0NvbnZvbHV0aW9uMkROb2RlLlhdO1xuICAgIGNvbnN0IGIgPSBub2RlLmlucHV0c1tDb252b2x1dGlvbjJETm9kZS5CXTtcbiAgICByZXR1cm4gW25ldyBDb252b2x1dGlvbjJEKFxuICAgICAgICB3LCB4LCBiLCBub2RlLm91dHB1dCwgbm9kZS5maWVsZFNpemUsIG5vZGUub3V0cHV0RGVwdGgsIG5vZGUuc3RyaWRlLFxuICAgICAgICBub2RlLnplcm9QYWQpXTtcbiAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgTWF4UG9vbE5vZGUpIHtcbiAgICBjb25zdCB4ID0gbm9kZS5pbnB1dHNbTWF4UG9vbE5vZGUuWF07XG4gICAgcmV0dXJuIFtuZXcgTWF4UG9vbChcbiAgICAgICAgeCwgbm9kZS5vdXRwdXQsIG5vZGUuZmllbGRTaXplLCBub2RlLnN0cmlkZSwgbm9kZS56ZXJvUGFkKV07XG4gIH0gZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIEV4cE5vZGUpIHtcbiAgICByZXR1cm4gW25ldyBFeHAobm9kZS5pbnB1dHNbRXhwTm9kZS5YXSwgbm9kZS5vdXRwdXQpXTtcbiAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgTG9nTm9kZSkge1xuICAgIHJldHVybiBbbmV3IExvZyhub2RlLmlucHV0c1tMb2dOb2RlLlhdLCBub2RlLm91dHB1dCldO1xuICB9IGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBSZUxVTm9kZSkge1xuICAgIHJldHVybiBbbmV3IFJlTFUobm9kZS5pbnB1dHNbUmVMVU5vZGUuWF0sIG5vZGUub3V0cHV0KV07XG4gIH0gZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIFRhbkhOb2RlKSB7XG4gICAgcmV0dXJuIFtuZXcgVGFuSChub2RlLmlucHV0c1tUYW5ITm9kZS5YXSwgbm9kZS5vdXRwdXQpXTtcbiAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgU2lnbW9pZE5vZGUpIHtcbiAgICByZXR1cm4gW25ldyBTaWdtb2lkKG5vZGUuaW5wdXRzW1NpZ21vaWROb2RlLlhdLCBub2RlLm91dHB1dCldO1xuICB9IGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBTb2Z0bWF4Q3Jvc3NFbnRyb3B5Q29zdE5vZGUpIHtcbiAgICBjb25zdCB4ID0gbm9kZS5pbnB1dHNbU29mdG1heENyb3NzRW50cm9weUNvc3ROb2RlLlhdO1xuICAgIGNvbnN0IHRhcmdldCA9IG5vZGUuaW5wdXRzW1NvZnRtYXhDcm9zc0VudHJvcHlDb3N0Tm9kZS5UQVJHRVRdO1xuICAgIHJldHVybiBbbmV3IFNvZnRtYXhDcm9zc0VudHJvcHlDb3N0KHgsIHRhcmdldCwgbm9kZS5vdXRwdXQpXTtcbiAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgU29mdG1heE5vZGUpIHtcbiAgICByZXR1cm4gW25ldyBTb2Z0bWF4KG5vZGUuaW5wdXRzW1NvZnRtYXhOb2RlLlhdLCBub2RlLm91dHB1dCldO1xuICB9IGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBNZWFuU3F1YXJlZENvc3ROb2RlKSB7XG4gICAgY29uc3QgbGFiZWwgPSBub2RlLmlucHV0c1tNZWFuU3F1YXJlZENvc3ROb2RlLkxBQkVMXTtcbiAgICBjb25zdCBwcmVkaWN0aW9uID0gbm9kZS5pbnB1dHNbTWVhblNxdWFyZWRDb3N0Tm9kZS5QUkVESUNUSU9OXTtcbiAgICByZXR1cm4gW25ldyBNZWFuU3F1YXJlZENvc3QobGFiZWwsIHByZWRpY3Rpb24sIG5vZGUub3V0cHV0KV07XG4gIH0gZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIEFyZ01heEVxdWFsc05vZGUpIHtcbiAgICByZXR1cm4gW25ldyBBcmdNYXhFcXVhbHMoXG4gICAgICAgIG5vZGUuaW5wdXRzW0FyZ01heEVxdWFsc05vZGUuWDFdLCBub2RlLmlucHV0c1tBcmdNYXhFcXVhbHNOb2RlLlgyXSxcbiAgICAgICAgbm9kZS5vdXRwdXQpXTtcbiAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgQXJnTWF4Tm9kZSkge1xuICAgIHJldHVybiBbbmV3IEFyZ01heChub2RlLngsIG5vZGUub3V0cHV0KV07XG4gIH0gZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIEZ1c2VkTGluZWFyQ29tYmluYXRpb25Ob2RlKSB7XG4gICAgcmV0dXJuIFtuZXcgTGluZWFyQ29tYmluYXRpb24oXG4gICAgICAgIG5vZGUuaW5wdXRzW0Z1c2VkTGluZWFyQ29tYmluYXRpb25Ob2RlLlQxXSxcbiAgICAgICAgbm9kZS5pbnB1dHNbRnVzZWRMaW5lYXJDb21iaW5hdGlvbk5vZGUuVDJdLFxuICAgICAgICBub2RlLmlucHV0c1tGdXNlZExpbmVhckNvbWJpbmF0aW9uTm9kZS5DMV0sXG4gICAgICAgIG5vZGUuaW5wdXRzW0Z1c2VkTGluZWFyQ29tYmluYXRpb25Ob2RlLkMyXSwgbm9kZS5vdXRwdXQpXTtcbiAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgQ29uY2F0M0ROb2RlKSB7XG4gICAgcmV0dXJuIFtuZXcgQ29uY2F0M0QoXG4gICAgICAgIG5vZGUuaW5wdXRzW0NvbmNhdDNETm9kZS5YMV0sIG5vZGUuaW5wdXRzW0NvbmNhdDNETm9kZS5YMl0sIG5vZGUuYXhpcyxcbiAgICAgICAgbm9kZS5vdXRwdXQpXTtcbiAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgU3F1YXJlTm9kZSkge1xuICAgIHJldHVybiBbbmV3IFNxdWFyZShub2RlLmlucHV0c1tTcXVhcmVOb2RlLlhdLCBub2RlLm91dHB1dCldO1xuICB9IGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBBZGROb2RlKSB7XG4gICAgcmV0dXJuIFtuZXcgQWRkKFxuICAgICAgICBub2RlLmlucHV0c1tBZGROb2RlLlQxXSwgbm9kZS5pbnB1dHNbQWRkTm9kZS5UMl0sIG5vZGUub3V0cHV0KV07XG4gIH0gZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIFN1YnRyYWN0Tm9kZSkge1xuICAgIHJldHVybiBbbmV3IFN1YnRyYWN0KFxuICAgICAgICBub2RlLmlucHV0c1tTdWJ0cmFjdE5vZGUuVDFdLCBub2RlLmlucHV0c1tTdWJ0cmFjdE5vZGUuVDJdLFxuICAgICAgICBub2RlLm91dHB1dCldO1xuICB9IGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBNdWx0aXBseU5vZGUpIHtcbiAgICByZXR1cm4gW25ldyBNdWx0aXBseShcbiAgICAgICAgbm9kZS5pbnB1dHNbTXVsdGlwbHlOb2RlLlQxXSwgbm9kZS5pbnB1dHNbTXVsdGlwbHlOb2RlLlQyXSxcbiAgICAgICAgbm9kZS5vdXRwdXQpXTtcbiAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgRGl2aWRlTm9kZSkge1xuICAgIHJldHVybiBbbmV3IERpdmlkZShcbiAgICAgICAgbm9kZS5pbnB1dHNbRGl2aWRlTm9kZS5UMV0sIG5vZGUuaW5wdXRzW0RpdmlkZU5vZGUuVDJdLCBub2RlLm91dHB1dCldO1xuICB9IGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBTcGxpdE5vZGUpIHtcbiAgICByZXR1cm4gW25ldyBTcGxpdChub2RlLmlucHV0c1tTcGxpdE5vZGUuWF0sIG5vZGUub3V0cHV0cyldO1xuICB9IGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBSZWR1Y2VTdW1Ob2RlKSB7XG4gICAgcmV0dXJuIFtuZXcgUmVkdWNlU3VtKG5vZGUuaW5wdXRzW1JlZHVjZVN1bU5vZGUuWF0sIG5vZGUub3V0cHV0KV07XG4gIH0gZWxzZSBpZiAoZ3JhcGhfdXRpbC5pc0lucHV0Tm9kZShub2RlKSkge1xuICAgIHJldHVybiBbXTtcbiAgfSBlbHNlIHtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG4gICAgdGhyb3cgRXJyb3IoJ1Vuc3VwcG9ydGVkIG5vZGUgdHlwZTogJyArIChub2RlLmNvbnN0cnVjdG9yIGFzIGFueSkubmFtZSk7XG4gIH1cbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtUZW5zb3J9IGZyb20gJy4uL2dyYXBoJztcbmltcG9ydCAqIGFzIGdyYXBoX3V0aWwgZnJvbSAnLi4vZ3JhcGhfdXRpbCc7XG5pbXBvcnQge05EQXJyYXlNYXRofSBmcm9tICcuLi9tYXRoL21hdGgnO1xuaW1wb3J0IHtOREFycmF5LCBTY2FsYXJ9IGZyb20gJy4uL21hdGgvbmRhcnJheSc7XG5pbXBvcnQge1RlbnNvckFycmF5TWFwfSBmcm9tICcuLi90ZW5zb3JfYXJyYXlfbWFwJztcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi4vdXRpbCc7XG5cbmltcG9ydCB7T3BlcmF0aW9ufSBmcm9tICcuL29wJztcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZGQgZXh0ZW5kcyBPcGVyYXRpb24ge1xuICBwcml2YXRlIGR5U2l6ZVNjYWxhcjogU2NhbGFyO1xuXG4gIC8qKiBFbGVtZW50LXdpc2UgYWRkIG9wZXJhdGlvbi4gQnJvYWRjYXN0cyBpZiBvbmUgb2YgdGhlIHRlbnNvcnMgaXMgc2NhbGFyLiAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICAgIHByaXZhdGUgeDFUZW5zb3I6IFRlbnNvciwgcHJpdmF0ZSB4MlRlbnNvcjogVGVuc29yLFxuICAgICAgcHJpdmF0ZSB5VGVuc29yOiBUZW5zb3IpIHtcbiAgICBzdXBlcigpO1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB1dGlsLnNpemVGcm9tU2hhcGUoeDFUZW5zb3Iuc2hhcGUpID09PSAxIHx8XG4gICAgICAgICAgICB1dGlsLnNpemVGcm9tU2hhcGUoeDJUZW5zb3Iuc2hhcGUpID09PSAxIHx8XG4gICAgICAgICAgICB1dGlsLmFycmF5c0VxdWFsKHgxVGVuc29yLnNoYXBlLCB4MlRlbnNvci5zaGFwZSksXG4gICAgICAgICdPbmUgb2YgdDEgb3IgdDIgbXVzdCBiZSBhIHNjYWxhciwgb3IgdDEgYW5kIHQyIG11c3QgaGF2ZSAnICtcbiAgICAgICAgICAgICd0aGUgc2FtZSBzaGFwZScpO1xuICB9XG5cbiAgZmVlZEZvcndhcmQobWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBjb25zdCB4MSA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54MVRlbnNvcik7XG4gICAgY29uc3QgeDIgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMueDJUZW5zb3IpO1xuXG4gICAgbWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgbGV0IHJlc3VsdDogTkRBcnJheTtcbiAgICAgIGlmICh1dGlsLmlzU2NhbGFyU2hhcGUoeDEuc2hhcGUpKSB7XG4gICAgICAgIHJlc3VsdCA9IG1hdGguc2NhbGFyUGx1c0FycmF5KHgxLCB4Mik7XG4gICAgICB9IGVsc2UgaWYgKHV0aWwuaXNTY2FsYXJTaGFwZSh4Mi5zaGFwZSkpIHtcbiAgICAgICAgcmVzdWx0ID0gbWF0aC5zY2FsYXJQbHVzQXJyYXkoeDIsIHgxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IG1hdGguYWRkKHgxLCB4Mik7XG4gICAgICB9XG4gICAgICBpbmZlcmVuY2VBcnJheXMuc2V0KHRoaXMueVRlbnNvciwga2VlcChyZXN1bHQpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGJhY2tQcm9wKFxuICAgICAgbWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXAsXG4gICAgICBncmFkaWVudEFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBjb25zdCB4MSA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54MVRlbnNvcik7XG4gICAgY29uc3QgeDIgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMueDJUZW5zb3IpO1xuICAgIGNvbnN0IGR5ID0gZ3JhZGllbnRBcnJheXMuZ2V0KHRoaXMueVRlbnNvcik7XG5cbiAgICBtYXRoLnNjb3BlKChrZWVwKSA9PiB7XG4gICAgICBpZiAoZ3JhcGhfdXRpbC5zaG91bGRCYWNrUHJvcCh0aGlzLngxVGVuc29yKSkge1xuICAgICAgICBpZiAodXRpbC5pc1NjYWxhclNoYXBlKHRoaXMueDFUZW5zb3Iuc2hhcGUpKSB7XG4gICAgICAgICAgY29uc3Qgc3VtID0gbWF0aC5zdW0oZHkpO1xuICAgICAgICAgIGlmICh0aGlzLmR5U2l6ZVNjYWxhciA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmR5U2l6ZVNjYWxhciA9IFNjYWxhci5uZXcoZHkuc2l6ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGdyYWRpZW50QXJyYXlzLnNldChcbiAgICAgICAgICAgICAgdGhpcy54MVRlbnNvciwga2VlcChtYXRoLmRpdmlkZShzdW0sIHRoaXMuZHlTaXplU2NhbGFyKSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGdyYWRpZW50QXJyYXlzLnNldCh0aGlzLngxVGVuc29yLCBkeSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGdyYXBoX3V0aWwuc2hvdWxkQmFja1Byb3AodGhpcy54MlRlbnNvcikpIHtcbiAgICAgICAgaWYgKHV0aWwuaXNTY2FsYXJTaGFwZSh0aGlzLngyVGVuc29yLnNoYXBlKSkge1xuICAgICAgICAgIGNvbnN0IHN1bSA9IG1hdGguc3VtKGR5KTtcbiAgICAgICAgICBpZiAodGhpcy5keVNpemVTY2FsYXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5keVNpemVTY2FsYXIgPSBTY2FsYXIubmV3KGR5LnNpemUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBncmFkaWVudEFycmF5cy5zZXQoXG4gICAgICAgICAgICAgIHRoaXMueDJUZW5zb3IsIGtlZXAobWF0aC5kaXZpZGUoc3VtLCB0aGlzLmR5U2l6ZVNjYWxhcikpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBncmFkaWVudEFycmF5cy5zZXQodGhpcy54MlRlbnNvciwgZHkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBkaXNwb3NlKCkge1xuICAgIGlmICh0aGlzLmR5U2l6ZVNjYWxhciAhPSBudWxsKSB7XG4gICAgICB0aGlzLmR5U2l6ZVNjYWxhci5kaXNwb3NlKCk7XG4gICAgfVxuICB9XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCB7VGVuc29yfSBmcm9tICcuLi9ncmFwaCc7XG5pbXBvcnQge05EQXJyYXlNYXRofSBmcm9tICcuLi9tYXRoL21hdGgnO1xuaW1wb3J0IHtBcnJheTFELCBBcnJheTJELCBOREFycmF5LCBTY2FsYXJ9IGZyb20gJy4uL21hdGgvbmRhcnJheSc7XG5pbXBvcnQge1RlbnNvckFycmF5TWFwfSBmcm9tICcuLi90ZW5zb3JfYXJyYXlfbWFwJztcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi4vdXRpbCc7XG5cbmltcG9ydCB7T3BlcmF0aW9ufSBmcm9tICcuL29wJztcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBBcmdNYXggZXh0ZW5kcyBPcGVyYXRpb24ge1xuICAvKipcbiAgICogQW4gQXJnTWF4IG9wZXJhdGlvbi5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgeFRlbnNvcjogVGVuc29yLCBwcml2YXRlIHlUZW5zb3I6IFRlbnNvcikge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBmZWVkRm9yd2FyZChtYXRoOiBOREFycmF5TWF0aCwgaW5mZXJlbmNlQXJyYXlzOiBUZW5zb3JBcnJheU1hcCkge1xuICAgIGNvbnN0IHggPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMueFRlbnNvcik7XG4gICAgbWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgaW5mZXJlbmNlQXJyYXlzLnNldCh0aGlzLnlUZW5zb3IsIGtlZXAobWF0aC5hcmdNYXgoeCkpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGJhY2tQcm9wKFxuICAgICAgbWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXAsXG4gICAgICBncmFkaWVudEFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0FyZ01heCBiYWNrcHJvcCB1bmltcGxlbWVudGVkJyk7XG4gIH1cbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtUZW5zb3J9IGZyb20gJy4uL2dyYXBoJztcbmltcG9ydCB7TkRBcnJheU1hdGh9IGZyb20gJy4uL21hdGgvbWF0aCc7XG5pbXBvcnQge0FycmF5MUQsIEFycmF5MkQsIE5EQXJyYXksIFNjYWxhcn0gZnJvbSAnLi4vbWF0aC9uZGFycmF5JztcbmltcG9ydCB7VGVuc29yQXJyYXlNYXB9IGZyb20gJy4uL3RlbnNvcl9hcnJheV9tYXAnO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuLi91dGlsJztcblxuaW1wb3J0IHtPcGVyYXRpb259IGZyb20gJy4vb3AnO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIEFyZ01heEVxdWFscyBleHRlbmRzIE9wZXJhdGlvbiB7XG4gIC8qKlxuICAgKiBBbiBBcmdNYXhFcXVhbHMgb3BlcmF0aW9uLlxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgICBwcml2YXRlIHgxVGVuc29yOiBUZW5zb3IsIHByaXZhdGUgeDJUZW5zb3I6IFRlbnNvcixcbiAgICAgIHByaXZhdGUgeVRlbnNvcjogVGVuc29yKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIGZlZWRGb3J3YXJkKG1hdGg6IE5EQXJyYXlNYXRoLCBpbmZlcmVuY2VBcnJheXM6IFRlbnNvckFycmF5TWFwKSB7XG4gICAgY29uc3QgeDEgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMueDFUZW5zb3IpO1xuICAgIGNvbnN0IHgyID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLngyVGVuc29yKTtcbiAgICBtYXRoLnNjb3BlKChrZWVwKSA9PiB7XG4gICAgICBpbmZlcmVuY2VBcnJheXMuc2V0KHRoaXMueVRlbnNvciwga2VlcChtYXRoLmFyZ01heEVxdWFscyh4MSwgeDIpKSk7XG4gICAgfSk7XG4gIH1cblxuICBiYWNrUHJvcChcbiAgICAgIG1hdGg6IE5EQXJyYXlNYXRoLCBpbmZlcmVuY2VBcnJheXM6IFRlbnNvckFycmF5TWFwLFxuICAgICAgZ3JhZGllbnRBcnJheXM6IFRlbnNvckFycmF5TWFwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdBcmdNYXhFcXVhbHMgYmFja3Byb3AgdW5pbXBsZW1lbnRlZCcpO1xuICB9XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCB7VGVuc29yfSBmcm9tICcuLi9ncmFwaCc7XG5pbXBvcnQgKiBhcyBjb25jYXQzZF91dGlsIGZyb20gJy4uL21hdGgvY29uY2F0M2RfdXRpbCc7XG5pbXBvcnQge05EQXJyYXlNYXRofSBmcm9tICcuLi9tYXRoL21hdGgnO1xuaW1wb3J0IHtBcnJheTNELCBOREFycmF5fSBmcm9tICcuLi9tYXRoL25kYXJyYXknO1xuaW1wb3J0IHtUZW5zb3JBcnJheU1hcH0gZnJvbSAnLi4vdGVuc29yX2FycmF5X21hcCc7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gJy4uL3V0aWwnO1xuXG5pbXBvcnQge09wZXJhdGlvbn0gZnJvbSAnLi9vcCc7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQ29uY2F0M0QgZXh0ZW5kcyBPcGVyYXRpb24ge1xuICAvKipcbiAgICogQSBDb25jYXQgM0Qgb3BlcmF0aW9uLlxuICAgKlxuICAgKiBDb25jYXRzIHR3byAzRCB0ZW5zb3JzIGFsb25nIGFuIGF4aXMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICAgIHByaXZhdGUgeDFUZW5zb3I6IFRlbnNvciwgcHJpdmF0ZSB4MlRlbnNvcjogVGVuc29yLCBwcml2YXRlIGF4aXM6IG51bWJlcixcbiAgICAgIHByaXZhdGUgeVRlbnNvcjogVGVuc29yKSB7XG4gICAgc3VwZXIoKTtcbiAgICBjb25jYXQzZF91dGlsLmFzc2VydENvbmNhdDNEU2hhcGVzTWF0Y2goXG4gICAgICAgIHgxVGVuc29yLnNoYXBlLCB4MlRlbnNvci5zaGFwZSwgYXhpcyk7XG4gIH1cblxuICBmZWVkRm9yd2FyZChtYXRoOiBOREFycmF5TWF0aCwgaW5mZXJlbmNlQXJyYXlzOiBUZW5zb3JBcnJheU1hcCkge1xuICAgIGNvbnN0IHgxID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLngxVGVuc29yKSBhcyBBcnJheTNEO1xuICAgIGNvbnN0IHgyID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLngyVGVuc29yKSBhcyBBcnJheTNEO1xuXG4gICAgbWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgY29uc3QgY29uY2F0UmVzdWx0ID0gbWF0aC5jb25jYXQzRCh4MSwgeDIsIHRoaXMuYXhpcyk7XG4gICAgICBpbmZlcmVuY2VBcnJheXMuc2V0KHRoaXMueVRlbnNvciwga2VlcChjb25jYXRSZXN1bHQpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGJhY2tQcm9wKFxuICAgICAgbWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXAsXG4gICAgICBncmFkaWVudEFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbmNhdDNEIGJhY2twcm9wIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgfVxufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge1RlbnNvcn0gZnJvbSAnLi4vZ3JhcGgnO1xuaW1wb3J0ICogYXMgY29udl91dGlsIGZyb20gJy4uL21hdGgvY29udl91dGlsJztcbmltcG9ydCB7TWF0cml4T3JpZW50YXRpb24sIE5EQXJyYXlNYXRofSBmcm9tICcuLi9tYXRoL21hdGgnO1xuaW1wb3J0IHtBcnJheTFELCBBcnJheTJELCBBcnJheTNELCBBcnJheTRELCBOREFycmF5LCBTY2FsYXJ9IGZyb20gJy4uL21hdGgvbmRhcnJheSc7XG5pbXBvcnQge1RlbnNvckFycmF5TWFwfSBmcm9tICcuLi90ZW5zb3JfYXJyYXlfbWFwJztcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi4vdXRpbCc7XG5cbmltcG9ydCB7T3BlcmF0aW9ufSBmcm9tICcuL29wJztcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb252b2x1dGlvbjJEIGV4dGVuZHMgT3BlcmF0aW9uIHtcbiAgcHJpdmF0ZSB6ZXJvUGFkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBjb252b2x1dGlvbiBvcCB3aXRoIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICpcbiAgICogQHBhcmFtIGlucHV0U2hhcGUgVGhlIHNoYXBlIG9mIHRoZSBpbnB1dCBuZGFycmF5LlxuICAgKiBAcGFyYW0gZmllbGRTaXplIFRoZSBzaXplIG9mIHRoZSBmaWx0ZXIgKHJvd3MvY29scyBvZiBzbGlkaW5nIHdpbmRvdykuXG4gICAqIEBwYXJhbSBvdXRwdXREZXB0aCBUaGUgZGVwdGggb2YgdGhlIG91dHB1dCAoTnVtYmVyIG9mIGZpbHRlcnMpLlxuICAgKiBAcGFyYW0gc3RyaWRlIEhvdyBtYW55IHBpeGVscyB0byBzaGlmdCB0aGUgZmlsdGVyIGJ5IHdoZW4gc2xpZGluZy5cbiAgICogICAgIERlZmF1bHRzIHRvIDEuXG4gICAqIEBwYXJhbSB6ZXJvUGFkIEhvdyBtYW55IHBpeGVscyB0byBwYWQgdGhlIGlucHV0IGZyb20gZWFjaCBzaWRlLiBEZWZhdWx0cyB0b1xuICAgKiAgICAgYSB2YWx1ZSBzbyB0aGF0IHRoZSByb3dzIGFuZCBjb2x1bW5zIG9mIHRoZSBvdXRwdXQgbmRhcnJheSBpc1xuICAgKiAgICAgdGhlIHNhbWUgYXMgdGhlIGlucHV0IG5kYXJyYXkuXG4gICAqIEBwYXJhbSB3ZWlnaHRzIE9wdGlvbmFsLiBUaGUgd2VpZ2h0cyBvZiB0aGUgZmlsdGVycy5cbiAgICogQHBhcmFtIGJpYXNlcyBPcHRpb25hbC4gVGhlIGJpYXMgdGVybXMgb2YgdGhlIGZpbHRlcnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICAgIHByaXZhdGUgd1RlbnNvcjogVGVuc29yLCBwcml2YXRlIHhUZW5zb3I6IFRlbnNvciwgcHJpdmF0ZSBiVGVuc29yOiBUZW5zb3IsXG4gICAgICBwcml2YXRlIHlUZW5zb3I6IFRlbnNvciwgcHJpdmF0ZSBmaWVsZFNpemU6IG51bWJlcixcbiAgICAgIHByaXZhdGUgb3V0cHV0RGVwdGg6IG51bWJlciwgcHJpdmF0ZSBzdHJpZGUgPSAxLCB6ZXJvUGFkPzogbnVtYmVyKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFzc2VydFdlaWdodHNTaGFwZSh3VGVuc29yLnNoYXBlKTtcbiAgICB0aGlzLnplcm9QYWQgPSB6ZXJvUGFkICE9IG51bGwgP1xuICAgICAgICB6ZXJvUGFkIDpcbiAgICAgICAgY29udl91dGlsLmNvbXB1dGVEZWZhdWx0UGFkKFxuICAgICAgICAgICAgdGhpcy54VGVuc29yLnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgdGhpcy5maWVsZFNpemUsXG4gICAgICAgICAgICB0aGlzLnN0cmlkZSk7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHV0aWwuaXNJbnQodGhpcy56ZXJvUGFkKSxcbiAgICAgICAgYFRoZSB6ZXJvIHBhZGRpbmcgKCR7dGhpcy56ZXJvUGFkfSkgbXVzdCBiZSBhbiBpbnRlZ2VyLiBDaGFuZ2UgdGhlIGAgK1xuICAgICAgICAgICAgYHN0cmlkZSBhbmQvb3IgemVybyBwYWQgcGFyYW1ldGVyc2ApO1xuICB9XG5cbiAgZmVlZEZvcndhcmQobWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBjb25zdCB3ZWlnaHRzID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLndUZW5zb3IpIGFzIEFycmF5NEQ7XG4gICAgY29uc3QgYmlhc2VzID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLmJUZW5zb3IpIGFzIEFycmF5MUQ7XG4gICAgY29uc3QgeCA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54VGVuc29yKSBhcyBBcnJheTNEO1xuXG4gICAgbWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgaW5mZXJlbmNlQXJyYXlzLnNldChcbiAgICAgICAgICB0aGlzLnlUZW5zb3IsXG4gICAgICAgICAga2VlcChtYXRoLmNvbnYyZCh4LCB3ZWlnaHRzLCBiaWFzZXMsIHRoaXMuc3RyaWRlLCB0aGlzLnplcm9QYWQpKSk7XG4gICAgfSk7XG4gIH1cblxuICBiYWNrUHJvcChcbiAgICAgIG1hdGg6IE5EQXJyYXlNYXRoLCBpbmZlcmVuY2VBcnJheXM6IFRlbnNvckFycmF5TWFwLFxuICAgICAgZ3JhZGllbnRBcnJheXM6IFRlbnNvckFycmF5TWFwKSB7XG4gICAgY29uc3Qgd2VpZ2h0cyA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy53VGVuc29yKSBhcyBBcnJheTREO1xuICAgIGNvbnN0IHggPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMueFRlbnNvcikgYXMgQXJyYXkzRDtcbiAgICBjb25zdCBkeSA9IGdyYWRpZW50QXJyYXlzLmdldCh0aGlzLnlUZW5zb3IpIGFzIEFycmF5M0Q7XG5cbiAgICBtYXRoLnNjb3BlKChrZWVwKSA9PiB7XG4gICAgICBjb25zdCB7ZHcsIGRiLCBkeH0gPVxuICAgICAgICAgIG1hdGguY29udjJkQmFja1Byb3AoeCwgZHksIHdlaWdodHMsIHRoaXMuc3RyaWRlLCB0aGlzLnplcm9QYWQpO1xuICAgICAgZ3JhZGllbnRBcnJheXMuc2V0KHRoaXMud1RlbnNvciwga2VlcChkdykpO1xuICAgICAgZ3JhZGllbnRBcnJheXMuc2V0KHRoaXMuYlRlbnNvciwga2VlcChkYikpO1xuICAgICAgZ3JhZGllbnRBcnJheXMuc2V0KHRoaXMueFRlbnNvciwga2VlcChkeCkpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3NlcnRXZWlnaHRzU2hhcGUod2VpZ2h0c1NoYXBlOiBudW1iZXJbXSkge1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB3ZWlnaHRzU2hhcGVbMF0gPT09IHRoaXMuZmllbGRTaXplICYmXG4gICAgICAgICAgICB3ZWlnaHRzU2hhcGVbMV0gPT09IHRoaXMuZmllbGRTaXplICYmXG4gICAgICAgICAgICB3ZWlnaHRzU2hhcGVbMl0gPT09IHRoaXMueFRlbnNvci5zaGFwZVsyXSAmJlxuICAgICAgICAgICAgd2VpZ2h0c1NoYXBlWzNdID09PSB0aGlzLm91dHB1dERlcHRoLFxuICAgICAgICBgd2VpZ2h0cyBtdXN0IGJlIG9mIHNoYXBlIFske3RoaXMuZmllbGRTaXplfSwke3RoaXMuZmllbGRTaXplfSxgICtcbiAgICAgICAgICAgIGAke3RoaXMueFRlbnNvci5zaGFwZVsyXX0sJHt0aGlzLm91dHB1dERlcHRofV0gYnV0IHRoZXkgYXJlIG9mYCArXG4gICAgICAgICAgICBgc2hhcGUgWyR7d2VpZ2h0c1NoYXBlfV1gKTtcbiAgfVxufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge1RlbnNvcn0gZnJvbSAnLi4vZ3JhcGgnO1xuaW1wb3J0ICogYXMgZ3JhcGhfdXRpbCBmcm9tICcuLi9ncmFwaF91dGlsJztcbmltcG9ydCB7TkRBcnJheU1hdGh9IGZyb20gJy4uL21hdGgvbWF0aCc7XG5pbXBvcnQge05EQXJyYXksIFNjYWxhcn0gZnJvbSAnLi4vbWF0aC9uZGFycmF5JztcbmltcG9ydCB7VGVuc29yQXJyYXlNYXB9IGZyb20gJy4uL3RlbnNvcl9hcnJheV9tYXAnO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuLi91dGlsJztcblxuaW1wb3J0IHtPcGVyYXRpb259IGZyb20gJy4vb3AnO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIERpdmlkZSBleHRlbmRzIE9wZXJhdGlvbiB7XG4gIHByaXZhdGUgb25lczogTkRBcnJheTtcblxuICAvKipcbiAgICogRWxlbWVudC13aXNlIGRpdmlkZSBvcGVyYXRpb24uIEJyb2FkY2FzdHMgaWYgb25lIG9mIHRoZSB0ZW5zb3JzIGlzXG4gICAqIHNjYWxhci5cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgcHJpdmF0ZSB4MVRlbnNvcjogVGVuc29yLCBwcml2YXRlIHgyVGVuc29yOiBUZW5zb3IsXG4gICAgICBwcml2YXRlIHlUZW5zb3I6IFRlbnNvcikge1xuICAgIHN1cGVyKCk7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHV0aWwuc2l6ZUZyb21TaGFwZSh4MVRlbnNvci5zaGFwZSkgPT09IDEgfHxcbiAgICAgICAgICAgIHV0aWwuc2l6ZUZyb21TaGFwZSh4MlRlbnNvci5zaGFwZSkgPT09IDEgfHxcbiAgICAgICAgICAgIHV0aWwuYXJyYXlzRXF1YWwoeDFUZW5zb3Iuc2hhcGUsIHgyVGVuc29yLnNoYXBlKSxcbiAgICAgICAgJ09uZSBvZiB0MSBvciB0MiBtdXN0IGJlIGEgc2NhbGFyLCBvciB0MSBhbmQgdDIgbXVzdCBoYXZlICcgK1xuICAgICAgICAgICAgJ3RoZSBzYW1lIHNoYXBlJyk7XG4gIH1cblxuICBmZWVkRm9yd2FyZChtYXRoOiBOREFycmF5TWF0aCwgaW5mZXJlbmNlQXJyYXlzOiBUZW5zb3JBcnJheU1hcCkge1xuICAgIGNvbnN0IHQxID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLngxVGVuc29yKTtcbiAgICBjb25zdCB0MiA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54MlRlbnNvcik7XG5cbiAgICBtYXRoLnNjb3BlKChrZWVwKSA9PiB7XG4gICAgICBsZXQgcmVzdWx0OiBOREFycmF5O1xuICAgICAgaWYgKHV0aWwuaXNTY2FsYXJTaGFwZSh0MS5zaGFwZSkpIHtcbiAgICAgICAgcmVzdWx0ID0gbWF0aC5zY2FsYXJEaXZpZGVkQnlBcnJheSh0MSwgdDIpO1xuICAgICAgfSBlbHNlIGlmICh1dGlsLmlzU2NhbGFyU2hhcGUodDIuc2hhcGUpKSB7XG4gICAgICAgIHJlc3VsdCA9IG1hdGguYXJyYXlEaXZpZGVkQnlTY2FsYXIodDEsIHQyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IG1hdGguZGl2aWRlKHQxLCB0Mik7XG4gICAgICB9XG4gICAgICBpbmZlcmVuY2VBcnJheXMuc2V0KHRoaXMueVRlbnNvciwga2VlcChyZXN1bHQpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGJhY2tQcm9wKFxuICAgICAgbWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXAsXG4gICAgICBncmFkaWVudEFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBjb25zdCB4MSA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54MVRlbnNvcik7XG4gICAgY29uc3QgeDIgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMueDJUZW5zb3IpO1xuICAgIGNvbnN0IGR5ID0gZ3JhZGllbnRBcnJheXMuZ2V0KHRoaXMueVRlbnNvcik7XG5cbiAgICBjb25zdCB4MUlzU2NhbGFyID0gdXRpbC5pc1NjYWxhclNoYXBlKHgxLnNoYXBlKTtcbiAgICBjb25zdCB4MklzU2NhbGFyID0gdXRpbC5pc1NjYWxhclNoYXBlKHgyLnNoYXBlKTtcblxuICAgIG1hdGguc2NvcGUoKGtlZXApID0+IHtcbiAgICAgIGlmIChncmFwaF91dGlsLnNob3VsZEJhY2tQcm9wKHRoaXMueDFUZW5zb3IpKSB7XG4gICAgICAgIGlmICh4MUlzU2NhbGFyKSB7XG4gICAgICAgICAgY29uc3QgZGl2ID0gbWF0aC5kaXZpZGUoZHksIHgyKTtcblxuICAgICAgICAgIGdyYWRpZW50QXJyYXlzLnNldCh0aGlzLngxVGVuc29yLCBrZWVwKG1hdGguc3VtKGRpdikpKTtcblxuICAgICAgICAgIGRpdi5kaXNwb3NlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoeDJJc1NjYWxhcikge1xuICAgICAgICAgIGdyYWRpZW50QXJyYXlzLnNldChcbiAgICAgICAgICAgICAgdGhpcy54MVRlbnNvciwga2VlcChtYXRoLmFycmF5RGl2aWRlZEJ5U2NhbGFyKGR5LCB4MikpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBncmFkaWVudEFycmF5cy5zZXQodGhpcy54MVRlbnNvciwga2VlcChtYXRoLmRpdmlkZShkeSwgeDIpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGdyYXBoX3V0aWwuc2hvdWxkQmFja1Byb3AodGhpcy54MlRlbnNvcikpIHtcbiAgICAgICAgLy8gZHgyID0gLTEgKiB4MSAqIHgyIF4gLTIuXG4gICAgICAgIGNvbnN0IHgyU3F1YXJlZCA9IG1hdGguZWxlbWVudFdpc2VNdWwoeDIsIHgyKTtcblxuICAgICAgICBsZXQgeDFPdmVyWDJTcXVhcmVkOiBOREFycmF5O1xuICAgICAgICBpZiAoeDJJc1NjYWxhcikge1xuICAgICAgICAgIHgxT3ZlclgyU3F1YXJlZCA9IG1hdGguYXJyYXlEaXZpZGVkQnlTY2FsYXIoeDEsIHgyU3F1YXJlZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoeDFJc1NjYWxhcikge1xuICAgICAgICAgIHgxT3ZlclgyU3F1YXJlZCA9IG1hdGguc2NhbGFyRGl2aWRlZEJ5QXJyYXkoeDEsIHgyU3F1YXJlZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgeDFPdmVyWDJTcXVhcmVkID0gbWF0aC5kaXZpZGUoeDEsIHgyU3F1YXJlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkeDIgPSBtYXRoLm5lZyh4MU92ZXJYMlNxdWFyZWQpO1xuICAgICAgICBjb25zdCBkeVRpbWVzRGVyaXZhdGl2ZSA9IG1hdGguZWxlbWVudFdpc2VNdWwoZHksIGR4Mik7XG5cbiAgICAgICAgaWYgKHgySXNTY2FsYXIpIHtcbiAgICAgICAgICBncmFkaWVudEFycmF5cy5zZXQodGhpcy54MlRlbnNvciwga2VlcChtYXRoLnN1bShkeVRpbWVzRGVyaXZhdGl2ZSkpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBncmFkaWVudEFycmF5cy5zZXQodGhpcy54MlRlbnNvciwga2VlcChkeVRpbWVzRGVyaXZhdGl2ZSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtUZW5zb3J9IGZyb20gJy4uL2dyYXBoJztcbmltcG9ydCB7QWN0aXZhdGlvbkZ1bmN0aW9uLCBSZUxVRnVuYywgU2lnbW9pZEZ1bmMsIFNxdWFyZUZ1bmMsIFRhbkhGdW5jfSBmcm9tICcuLi9tYXRoL2FjdGl2YXRpb25fZnVuY3Rpb25zJztcbmltcG9ydCB7TkRBcnJheU1hdGh9IGZyb20gJy4uL21hdGgvbWF0aCc7XG5pbXBvcnQge05EQXJyYXl9IGZyb20gJy4uL21hdGgvbmRhcnJheSc7XG5pbXBvcnQge1RlbnNvckFycmF5TWFwfSBmcm9tICcuLi90ZW5zb3JfYXJyYXlfbWFwJztcblxuaW1wb3J0IHtPcGVyYXRpb259IGZyb20gJy4vb3AnO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIEVsZW1lbnRXaXNlQWN0aXZhdGlvbiBleHRlbmRzIE9wZXJhdGlvbiB7XG4gIGNvbnN0cnVjdG9yKFxuICAgICAgcHJvdGVjdGVkIHhUZW5zb3I6IFRlbnNvciwgcHJvdGVjdGVkIHlUZW5zb3I6IFRlbnNvcixcbiAgICAgIHByaXZhdGUgZnVuYzogQWN0aXZhdGlvbkZ1bmN0aW9uKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIGZlZWRGb3J3YXJkKG1hdGg6IE5EQXJyYXlNYXRoLCBpbmZlcmVuY2VBcnJheXM6IFRlbnNvckFycmF5TWFwKSB7XG4gICAgY29uc3QgeCA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54VGVuc29yKTtcblxuICAgIG1hdGguc2NvcGUoKGtlZXApID0+IHtcbiAgICAgIGluZmVyZW5jZUFycmF5cy5zZXQodGhpcy55VGVuc29yLCBrZWVwKHRoaXMuZnVuYy5vdXRwdXQobWF0aCwgeCkpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGJhY2tQcm9wKFxuICAgICAgbWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXAsXG4gICAgICBncmFkaWVudEFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICAvLyBkRS9keF9pID0gc3VtX2ogZEUvZHlfaiAqIGR5X2ovZHhfaVxuICAgIC8vICAgICAgICAgPSBkRS9keV9pICogZHlfaS9keF9pXG4gICAgY29uc3QgeCA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54VGVuc29yKTtcbiAgICBjb25zdCB5ID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLnlUZW5zb3IpO1xuICAgIGNvbnN0IGR5ID0gZ3JhZGllbnRBcnJheXMuZ2V0KHRoaXMueVRlbnNvcik7XG5cbiAgICBtYXRoLnNjb3BlKChrZWVwKSA9PiB7XG4gICAgICBjb25zdCBkeWR4ID0gdGhpcy5mdW5jLmRlcihtYXRoLCB4LCB5KTtcbiAgICAgIGdyYWRpZW50QXJyYXlzLnNldCh0aGlzLnhUZW5zb3IsIGtlZXAobWF0aC5lbGVtZW50V2lzZU11bChkeSwgZHlkeCkpKTtcbiAgICAgIGR5ZHguZGlzcG9zZSgpO1xuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgUmVMVSBleHRlbmRzIEVsZW1lbnRXaXNlQWN0aXZhdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHhUZW5zb3I6IFRlbnNvciwgeVRlbnNvcjogVGVuc29yKSB7XG4gICAgc3VwZXIoeFRlbnNvciwgeVRlbnNvciwgbmV3IFJlTFVGdW5jKCkpO1xuICB9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgVGFuSCBleHRlbmRzIEVsZW1lbnRXaXNlQWN0aXZhdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHhUZW5zb3I6IFRlbnNvciwgeVRlbnNvcjogVGVuc29yKSB7XG4gICAgc3VwZXIoeFRlbnNvciwgeVRlbnNvciwgbmV3IFRhbkhGdW5jKCkpO1xuICB9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgU2lnbW9pZCBleHRlbmRzIEVsZW1lbnRXaXNlQWN0aXZhdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHhUZW5zb3I6IFRlbnNvciwgeVRlbnNvcjogVGVuc29yKSB7XG4gICAgc3VwZXIoeFRlbnNvciwgeVRlbnNvciwgbmV3IFNpZ21vaWRGdW5jKCkpO1xuICB9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgU3F1YXJlIGV4dGVuZHMgRWxlbWVudFdpc2VBY3RpdmF0aW9uIHtcbiAgY29uc3RydWN0b3IoeFRlbnNvcjogVGVuc29yLCB5VGVuc29yOiBUZW5zb3IpIHtcbiAgICBzdXBlcih4VGVuc29yLCB5VGVuc29yLCBuZXcgU3F1YXJlRnVuYygpKTtcbiAgfVxufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge1RlbnNvcn0gZnJvbSAnLi4vZ3JhcGgnO1xuaW1wb3J0ICogYXMgZ3JhcGhfdXRpbCBmcm9tICcuLi9ncmFwaF91dGlsJztcbmltcG9ydCB7RWxlbWVudFdpc2VDb3N0RnVuY3Rpb24sIFNxdWFyZUNvc3RGdW5jfSBmcm9tICcuLi9tYXRoL2Nvc3RfZnVuY3Rpb25zJztcbmltcG9ydCB7TkRBcnJheU1hdGh9IGZyb20gJy4uL21hdGgvbWF0aCc7XG5pbXBvcnQge0FycmF5MUQsIE5EQXJyYXksIFNjYWxhcn0gZnJvbSAnLi4vbWF0aC9uZGFycmF5JztcbmltcG9ydCB7VGVuc29yQXJyYXlNYXB9IGZyb20gJy4uL3RlbnNvcl9hcnJheV9tYXAnO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuLi91dGlsJztcblxuaW1wb3J0IHtPcGVyYXRpb259IGZyb20gJy4vb3AnO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIEVsZW1lbnRXaXNlQ29zdDxUIGV4dGVuZHMgTkRBcnJheT4gZXh0ZW5kcyBPcGVyYXRpb24ge1xuICBwcml2YXRlIG9uZU92ZXJOU2NhbGFyOiBTY2FsYXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICBwcm90ZWN0ZWQgeDFUZW5zb3I6IFRlbnNvciwgcHJvdGVjdGVkIHgyVGVuc29yOiBUZW5zb3IsXG4gICAgICBwcm90ZWN0ZWQgeVRlbnNvcjogVGVuc29yLCBwcm90ZWN0ZWQgZnVuYzogRWxlbWVudFdpc2VDb3N0RnVuY3Rpb24pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMub25lT3Zlck5TY2FsYXIgPSBTY2FsYXIubmV3KDEgLyB1dGlsLnNpemVGcm9tU2hhcGUoeDFUZW5zb3Iuc2hhcGUpKTtcbiAgfVxuXG4gIGZlZWRGb3J3YXJkKG1hdGg6IE5EQXJyYXlNYXRoLCBpbmZlcmVuY2VBcnJheXM6IFRlbnNvckFycmF5TWFwKSB7XG4gICAgY29uc3QgeDEgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMueDFUZW5zb3IpO1xuICAgIGNvbnN0IHgyID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLngyVGVuc29yKTtcblxuICAgIG1hdGguc2NvcGUoKGtlZXApID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnRXaXNlQ29zdCA9IHRoaXMuZnVuYy5jb3N0KG1hdGgsIHgxLCB4Mik7XG4gICAgICBjb25zdCBzdW0gPSBtYXRoLnN1bShlbGVtZW50V2lzZUNvc3QpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gbWF0aC5zY2FsYXJUaW1lc0FycmF5KHRoaXMub25lT3Zlck5TY2FsYXIsIHN1bSk7XG4gICAgICBpbmZlcmVuY2VBcnJheXMuc2V0KHRoaXMueVRlbnNvciwga2VlcChyZXN1bHQpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGJhY2tQcm9wKFxuICAgICAgbWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXAsXG4gICAgICBncmFkaWVudEFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBjb25zdCB4MSA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54MVRlbnNvcik7XG4gICAgY29uc3QgeDIgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMueDJUZW5zb3IpO1xuXG4gICAgbWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgaWYgKGdyYXBoX3V0aWwuc2hvdWxkQmFja1Byb3AodGhpcy54MVRlbnNvcikpIHtcbiAgICAgICAgZ3JhZGllbnRBcnJheXMuc2V0KHRoaXMueDFUZW5zb3IsIGtlZXAodGhpcy5mdW5jLmRlcihtYXRoLCB4MSwgeDIpKSk7XG4gICAgICB9XG4gICAgICBpZiAoZ3JhcGhfdXRpbC5zaG91bGRCYWNrUHJvcCh0aGlzLngyVGVuc29yKSkge1xuICAgICAgICBncmFkaWVudEFycmF5cy5zZXQodGhpcy54MlRlbnNvciwga2VlcCh0aGlzLmZ1bmMuZGVyKG1hdGgsIHgyLCB4MSkpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5mdW5jLmRpc3Bvc2UoKTtcbiAgICB0aGlzLm9uZU92ZXJOU2NhbGFyLmRpc3Bvc2UoKTtcbiAgfVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIE1lYW5TcXVhcmVkQ29zdCBleHRlbmRzIEVsZW1lbnRXaXNlQ29zdDxBcnJheTFEPiB7XG4gIGNvbnN0cnVjdG9yKHgxVGVuc29yOiBUZW5zb3IsIHgyVGVuc29yOiBUZW5zb3IsIHlUZW5zb3I6IFRlbnNvcikge1xuICAgIHN1cGVyKHgxVGVuc29yLCB4MlRlbnNvciwgeVRlbnNvciwgbmV3IFNxdWFyZUNvc3RGdW5jKCkpO1xuICB9XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCB7VGVuc29yfSBmcm9tICcuLi9ncmFwaCc7XG5pbXBvcnQgKiBhcyBncmFwaF91dGlsIGZyb20gJy4uL2dyYXBoX3V0aWwnO1xuaW1wb3J0IHtOREFycmF5TWF0aH0gZnJvbSAnLi4vbWF0aC9tYXRoJztcbmltcG9ydCB7TkRBcnJheSwgU2NhbGFyfSBmcm9tICcuLi9tYXRoL25kYXJyYXknO1xuaW1wb3J0IHtUZW5zb3JBcnJheU1hcH0gZnJvbSAnLi4vdGVuc29yX2FycmF5X21hcCc7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gJy4uL3V0aWwnO1xuXG5pbXBvcnQge09wZXJhdGlvbn0gZnJvbSAnLi9vcCc7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgRXhwIGV4dGVuZHMgT3BlcmF0aW9uIHtcbiAgLyoqXG4gICAqIEV4cG9uZW50YXRpb24gb3BlcmF0aW9uIC0gZV54LlxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSB4VGVuc29yOiBUZW5zb3IsIHByaXZhdGUgeVRlbnNvcjogVGVuc29yKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIGZlZWRGb3J3YXJkKG1hdGg6IE5EQXJyYXlNYXRoLCBpbmZlcmVuY2VBcnJheXM6IFRlbnNvckFycmF5TWFwKSB7XG4gICAgY29uc3QgeCA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54VGVuc29yKTtcblxuICAgIG1hdGguc2NvcGUoKGtlZXApID0+IHtcbiAgICAgIGluZmVyZW5jZUFycmF5cy5zZXQodGhpcy55VGVuc29yLCBrZWVwKG1hdGguZXhwKHgpKSk7XG4gICAgfSk7XG4gIH1cblxuICBiYWNrUHJvcChcbiAgICAgIG1hdGg6IE5EQXJyYXlNYXRoLCBpbmZlcmVuY2VBcnJheXM6IFRlbnNvckFycmF5TWFwLFxuICAgICAgZ3JhZGllbnRBcnJheXM6IFRlbnNvckFycmF5TWFwKSB7XG4gICAgY29uc3QgeSA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy55VGVuc29yKTtcbiAgICBjb25zdCBkeSA9IGdyYWRpZW50QXJyYXlzLmdldCh0aGlzLnlUZW5zb3IpO1xuXG4gICAgbWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgaWYgKGdyYXBoX3V0aWwuc2hvdWxkQmFja1Byb3AodGhpcy54VGVuc29yKSkge1xuICAgICAgICBncmFkaWVudEFycmF5cy5zZXQodGhpcy54VGVuc29yLCBrZWVwKG1hdGguZWxlbWVudFdpc2VNdWwoeSwgZHkpKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtUZW5zb3J9IGZyb20gJy4uL2dyYXBoJztcbmltcG9ydCAqIGFzIGdyYXBoX3V0aWwgZnJvbSAnLi4vZ3JhcGhfdXRpbCc7XG5pbXBvcnQge05EQXJyYXlNYXRofSBmcm9tICcuLi9tYXRoL21hdGgnO1xuaW1wb3J0IHtOREFycmF5fSBmcm9tICcuLi9tYXRoL25kYXJyYXknO1xuaW1wb3J0IHtUZW5zb3JBcnJheU1hcH0gZnJvbSAnLi4vdGVuc29yX2FycmF5X21hcCc7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gJy4uL3V0aWwnO1xuXG5pbXBvcnQge09wZXJhdGlvbn0gZnJvbSAnLi9vcCc7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgTGluZWFyQ29tYmluYXRpb24gZXh0ZW5kcyBPcGVyYXRpb24ge1xuICAvKipcbiAgICogQSAyLXRlbnNvciBsaW5lYXIgY29tYmluYXRpb24gb3BlcmF0aW9uLlxuICAgKlxuICAgKiBDb21iaW5lcyB0ZW5zb3JzIHgxIGFuZCB4MiAob2YgdGhlIHNhbWUgc2hhcGUpIHdpdGggd2VpZ2h0cyBjMSAmIGMyO1xuICAgKiBDb21wdXRlcyBjMSp4MSArIGMyKngyLlxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgICBwcml2YXRlIHgxVGVuc29yOiBUZW5zb3IsIHByaXZhdGUgeDJUZW5zb3I6IFRlbnNvcixcbiAgICAgIHByaXZhdGUgYzFUZW5zb3I6IFRlbnNvciwgcHJpdmF0ZSBjMlRlbnNvcjogVGVuc29yLFxuICAgICAgcHJpdmF0ZSBvdXRUZW5zb3I6IFRlbnNvcikge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBmZWVkRm9yd2FyZChtYXRoOiBOREFycmF5TWF0aCwgaW5mZXJlbmNlQXJyYXlzOiBUZW5zb3JBcnJheU1hcCkge1xuICAgIGNvbnN0IHgxID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLngxVGVuc29yKTtcbiAgICBjb25zdCB4MiA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54MlRlbnNvcik7XG4gICAgY29uc3QgYzEgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMuYzFUZW5zb3IpLmFzU2NhbGFyKCk7XG4gICAgY29uc3QgYzIgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMuYzJUZW5zb3IpLmFzU2NhbGFyKCk7XG5cbiAgICBtYXRoLnNjb3BlKChrZWVwKSA9PiB7XG4gICAgICBpbmZlcmVuY2VBcnJheXMuc2V0KFxuICAgICAgICAgIHRoaXMub3V0VGVuc29yLCBrZWVwKG1hdGguc2NhbGVkQXJyYXlBZGQoYzEsIHgxLCBjMiwgeDIpKSk7XG4gICAgfSk7XG4gIH1cblxuICBiYWNrUHJvcChcbiAgICAgIG1hdGg6IE5EQXJyYXlNYXRoLCBpbmZlcmVuY2VBcnJheXM6IFRlbnNvckFycmF5TWFwLFxuICAgICAgZ3JhZGllbnRBcnJheXM6IFRlbnNvckFycmF5TWFwKSB7XG4gICAgY29uc3QgeDEgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMueDFUZW5zb3IpO1xuICAgIGNvbnN0IHgyID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLngyVGVuc29yKTtcbiAgICBjb25zdCBjMSA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy5jMVRlbnNvcik7XG4gICAgY29uc3QgYzIgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMuYzJUZW5zb3IpO1xuICAgIGNvbnN0IGR5ID0gZ3JhZGllbnRBcnJheXMuZ2V0KHRoaXMub3V0VGVuc29yKTtcblxuICAgIG1hdGguc2NvcGUoKGtlZXApID0+IHtcbiAgICAgIGlmIChncmFwaF91dGlsLnNob3VsZEJhY2tQcm9wKHRoaXMueDFUZW5zb3IpKSB7XG4gICAgICAgIGdyYWRpZW50QXJyYXlzLnNldCh0aGlzLngxVGVuc29yLCBrZWVwKG1hdGguc2NhbGFyVGltZXNBcnJheShjMSwgZHkpKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChncmFwaF91dGlsLnNob3VsZEJhY2tQcm9wKHRoaXMueDJUZW5zb3IpKSB7XG4gICAgICAgIGdyYWRpZW50QXJyYXlzLnNldCh0aGlzLngyVGVuc29yLCBrZWVwKG1hdGguc2NhbGFyVGltZXNBcnJheShjMiwgZHkpKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChncmFwaF91dGlsLnNob3VsZEJhY2tQcm9wKHRoaXMuYzFUZW5zb3IpKSB7XG4gICAgICAgIGNvbnN0IGRvdFByb2R1Y3QxID0gbWF0aC5lbGVtZW50V2lzZU11bCh4MSwgZHkpO1xuICAgICAgICBncmFkaWVudEFycmF5cy5zZXQodGhpcy5jMVRlbnNvciwga2VlcChtYXRoLnN1bShkb3RQcm9kdWN0MSkpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdyYXBoX3V0aWwuc2hvdWxkQmFja1Byb3AodGhpcy5jMlRlbnNvcikpIHtcbiAgICAgICAgY29uc3QgZG90UHJvZHVjdDIgPSBtYXRoLmVsZW1lbnRXaXNlTXVsKHgyLCBkeSk7XG4gICAgICAgIGdyYWRpZW50QXJyYXlzLnNldCh0aGlzLmMyVGVuc29yLCBrZWVwKG1hdGguc3VtKGRvdFByb2R1Y3QyKSkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCB7VGVuc29yfSBmcm9tICcuLi9ncmFwaCc7XG5pbXBvcnQgKiBhcyBncmFwaF91dGlsIGZyb20gJy4uL2dyYXBoX3V0aWwnO1xuaW1wb3J0IHtOREFycmF5TWF0aH0gZnJvbSAnLi4vbWF0aC9tYXRoJztcbmltcG9ydCB7TkRBcnJheSwgU2NhbGFyfSBmcm9tICcuLi9tYXRoL25kYXJyYXknO1xuaW1wb3J0IHtUZW5zb3JBcnJheU1hcH0gZnJvbSAnLi4vdGVuc29yX2FycmF5X21hcCc7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gJy4uL3V0aWwnO1xuXG5pbXBvcnQge09wZXJhdGlvbn0gZnJvbSAnLi9vcCc7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgTG9nIGV4dGVuZHMgT3BlcmF0aW9uIHtcbiAgLyoqXG4gICAqIE5hdHVyYWwgbG9nIG9wZXJhdGlvbiAtIGxuKHgpXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHhUZW5zb3I6IFRlbnNvciwgcHJpdmF0ZSB5VGVuc29yOiBUZW5zb3IpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgZmVlZEZvcndhcmQobWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBjb25zdCB4ID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLnhUZW5zb3IpO1xuXG4gICAgbWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgaW5mZXJlbmNlQXJyYXlzLnNldCh0aGlzLnlUZW5zb3IsIGtlZXAobWF0aC5sb2coeCkpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGJhY2tQcm9wKFxuICAgICAgbWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXAsXG4gICAgICBncmFkaWVudEFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBjb25zdCB4ID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLnhUZW5zb3IpO1xuICAgIGNvbnN0IGR5ID0gZ3JhZGllbnRBcnJheXMuZ2V0KHRoaXMueVRlbnNvcik7XG5cbiAgICBtYXRoLnNjb3BlKChrZWVwKSA9PiB7XG4gICAgICBpZiAoZ3JhcGhfdXRpbC5zaG91bGRCYWNrUHJvcCh0aGlzLnhUZW5zb3IpKSB7XG4gICAgICAgIGdyYWRpZW50QXJyYXlzLnNldCh0aGlzLnhUZW5zb3IsIGtlZXAobWF0aC5kaXZpZGUoZHksIHgpKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtUZW5zb3J9IGZyb20gJy4uL2dyYXBoJztcbmltcG9ydCAqIGFzIGdyYXBoX3V0aWwgZnJvbSAnLi4vZ3JhcGhfdXRpbCc7XG5pbXBvcnQge01hdHJpeE9yaWVudGF0aW9uLCBOREFycmF5TWF0aH0gZnJvbSAnLi4vbWF0aC9tYXRoJztcbmltcG9ydCB7QXJyYXkxRCwgQXJyYXkyRCwgTkRBcnJheX0gZnJvbSAnLi4vbWF0aC9uZGFycmF5JztcbmltcG9ydCB7VGVuc29yQXJyYXlNYXB9IGZyb20gJy4uL3RlbnNvcl9hcnJheV9tYXAnO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuLi91dGlsJztcblxuaW1wb3J0IHtPcGVyYXRpb259IGZyb20gJy4vb3AnO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIE1hdE11bCBleHRlbmRzIE9wZXJhdGlvbiB7XG4gIGNvbnN0cnVjdG9yKFxuICAgICAgcHJpdmF0ZSB4MVRlbnNvcjogVGVuc29yLCBwcml2YXRlIHgyVGVuc29yOiBUZW5zb3IsXG4gICAgICBwcml2YXRlIHlUZW5zb3I6IFRlbnNvcikge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBmZWVkRm9yd2FyZChtYXRoOiBOREFycmF5TWF0aCwgaW5mZXJlbmNlQXJyYXlzOiBUZW5zb3JBcnJheU1hcCkge1xuICAgIGNvbnN0IHgxID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLngxVGVuc29yKTtcbiAgICBjb25zdCB4MiA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54MlRlbnNvcik7XG5cbiAgICBtYXRoLnNjb3BlKChrZWVwKSA9PiB7XG4gICAgICBpZiAoeDEuc2hhcGUubGVuZ3RoID09PSAyICYmIHgyLnNoYXBlLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBpbmZlcmVuY2VBcnJheXMuc2V0KFxuICAgICAgICAgICAgdGhpcy55VGVuc29yLCBrZWVwKG1hdGgubWF0TXVsKHgxIGFzIEFycmF5MkQsIHgyIGFzIEFycmF5MkQpKSk7XG4gICAgICB9IGVsc2UgaWYgKHgxLnNoYXBlLmxlbmd0aCA9PT0gMiAmJiB4Mi5zaGFwZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaW5mZXJlbmNlQXJyYXlzLnNldChcbiAgICAgICAgICAgIHRoaXMueVRlbnNvcixcbiAgICAgICAgICAgIGtlZXAobWF0aC5tYXRyaXhUaW1lc1ZlY3Rvcih4MSBhcyBBcnJheTJELCB4MiBhcyBBcnJheTFEKSkpO1xuICAgICAgfSBlbHNlIGlmICh4MS5zaGFwZS5sZW5ndGggPT09IDEgJiYgeDIuc2hhcGUubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIGluZmVyZW5jZUFycmF5cy5zZXQoXG4gICAgICAgICAgICB0aGlzLnlUZW5zb3IsXG4gICAgICAgICAgICBrZWVwKG1hdGgudmVjdG9yVGltZXNNYXRyaXgoeDEgYXMgQXJyYXkxRCwgeDIgYXMgQXJyYXkyRCkpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGJhY2tQcm9wKFxuICAgICAgbWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXAsXG4gICAgICBncmFkaWVudEFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBsZXQgeDEgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMueDFUZW5zb3IpO1xuICAgIGxldCB4MiA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54MlRlbnNvcik7XG4gICAgbGV0IGR5ID0gZ3JhZGllbnRBcnJheXMuZ2V0KHRoaXMueVRlbnNvcik7XG5cbiAgICBpZiAoeDEuc2hhcGUubGVuZ3RoID09PSAxKSB7XG4gICAgICB4MSA9IHgxLnJlc2hhcGUoWzEsIHgxLnNpemVdKTtcbiAgICAgIGR5ID0gZHkucmVzaGFwZShbMSwgZHkuc2l6ZV0pO1xuICAgIH1cbiAgICBpZiAoeDIuc2hhcGUubGVuZ3RoID09PSAxKSB7XG4gICAgICB4MiA9IHgyLnJlc2hhcGUoW3gyLnNpemUsIDFdKTtcbiAgICAgIGR5ID0gZHkucmVzaGFwZShbZHkuc2l6ZSwgMV0pO1xuICAgIH1cblxuICAgIG1hdGguc2NvcGUoKGtlZXApID0+IHtcbiAgICAgIC8vIHkgPSB4MSAqIHgyXG4gICAgICAvLyBkeDEgPSBkeSAqIHgyVFxuICAgICAgLy8gZHgyID0geDFUICogZHlcbiAgICAgIGlmIChncmFwaF91dGlsLnNob3VsZEJhY2tQcm9wKHRoaXMueDFUZW5zb3IpKSB7XG4gICAgICAgIGNvbnN0IGR4MSA9IG1hdGgubWF0TXVsKFxuICAgICAgICAgICAgZHkgYXMgQXJyYXkyRCwgeDIgYXMgQXJyYXkyRCwgTWF0cml4T3JpZW50YXRpb24uUkVHVUxBUixcbiAgICAgICAgICAgIE1hdHJpeE9yaWVudGF0aW9uLlRSQU5TUE9TRUQpO1xuICAgICAgICBncmFkaWVudEFycmF5cy5zZXQoXG4gICAgICAgICAgICB0aGlzLngxVGVuc29yLFxuICAgICAgICAgICAga2VlcCh0aGlzLngxVGVuc29yLnNoYXBlLmxlbmd0aCA9PT0gMSA/IGR4MS5hczFEKCkgOiBkeDEpKTtcbiAgICAgIH1cbiAgICAgIGlmIChncmFwaF91dGlsLnNob3VsZEJhY2tQcm9wKHRoaXMueDJUZW5zb3IpKSB7XG4gICAgICAgIGNvbnN0IGR4MiA9IG1hdGgubWF0TXVsKFxuICAgICAgICAgICAgeDEgYXMgQXJyYXkyRCwgZHkgYXMgQXJyYXkyRCwgTWF0cml4T3JpZW50YXRpb24uVFJBTlNQT1NFRCxcbiAgICAgICAgICAgIE1hdHJpeE9yaWVudGF0aW9uLlJFR1VMQVIpO1xuICAgICAgICBncmFkaWVudEFycmF5cy5zZXQoXG4gICAgICAgICAgICB0aGlzLngyVGVuc29yLFxuICAgICAgICAgICAga2VlcCh0aGlzLngyVGVuc29yLnNoYXBlLmxlbmd0aCA9PT0gMSA/IGR4Mi5hczFEKCkgOiBkeDIpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge1RlbnNvcn0gZnJvbSAnLi4vZ3JhcGgnO1xuaW1wb3J0ICogYXMgY29udl91dGlsIGZyb20gJy4uL21hdGgvY29udl91dGlsJztcbmltcG9ydCB7TkRBcnJheU1hdGh9IGZyb20gJy4uL21hdGgvbWF0aCc7XG5pbXBvcnQge0FycmF5MkQsIEFycmF5M0QsIE5EQXJyYXl9IGZyb20gJy4uL21hdGgvbmRhcnJheSc7XG5pbXBvcnQge1RlbnNvckFycmF5TWFwfSBmcm9tICcuLi90ZW5zb3JfYXJyYXlfbWFwJztcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi4vdXRpbCc7XG5cbmltcG9ydCB7T3BlcmF0aW9ufSBmcm9tICcuL29wJztcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXhQb29sIGV4dGVuZHMgT3BlcmF0aW9uIHtcbiAgcHJpdmF0ZSBwYWQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIHByaXZhdGUgeFRlbnNvcjogVGVuc29yLCBwcml2YXRlIHlUZW5zb3I6IFRlbnNvcixcbiAgICAgIHByaXZhdGUgZmllbGRTaXplOiBudW1iZXIsIHByaXZhdGUgc3RyaWRlID0gMSwgcGFkPzogbnVtYmVyKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGlmIChwYWQgIT0gbnVsbCkge1xuICAgICAgdGhpcy5wYWQgPSBwYWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGFkID0gY29udl91dGlsLmNvbXB1dGVEZWZhdWx0UGFkKFxuICAgICAgICAgIHhUZW5zb3Iuc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXJdLCB0aGlzLmZpZWxkU2l6ZSxcbiAgICAgICAgICB0aGlzLnN0cmlkZSk7XG4gICAgfVxuXG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHV0aWwuaXNJbnQodGhpcy5wYWQpLFxuICAgICAgICBgVGhlIHplcm8gcGFkZGluZyAoJHt0aGlzLnBhZH0pIG11c3QgYmUgYW4gaW50ZWdlci4gQ2hhbmdlIHRoZSBgICtcbiAgICAgICAgICAgIGBzdHJpZGUgYW5kL29yIHplcm8gcGFkIHBhcmFtZXRlcnNgKTtcbiAgfVxuXG4gIGZlZWRGb3J3YXJkKG1hdGg6IE5EQXJyYXlNYXRoLCBpbmZlcmVuY2VBcnJheXM6IFRlbnNvckFycmF5TWFwKSB7XG4gICAgY29uc3QgeCA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54VGVuc29yKSBhcyBBcnJheTNEO1xuICAgIG1hdGguc2NvcGUoKGtlZXApID0+IHtcbiAgICAgIGluZmVyZW5jZUFycmF5cy5zZXQoXG4gICAgICAgICAgdGhpcy55VGVuc29yLFxuICAgICAgICAgIGtlZXAobWF0aC5tYXhQb29sKHgsIHRoaXMuZmllbGRTaXplLCB0aGlzLnN0cmlkZSwgdGhpcy5wYWQpKSk7XG4gICAgfSk7XG4gIH1cblxuICBiYWNrUHJvcChcbiAgICAgIG1hdGg6IE5EQXJyYXlNYXRoLCBpbmZlcmVuY2VBcnJheXM6IFRlbnNvckFycmF5TWFwLFxuICAgICAgZ3JhZGllbnRBcnJheXM6IFRlbnNvckFycmF5TWFwKSB7XG4gICAgY29uc3QgeCA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54VGVuc29yKSBhcyBBcnJheTNEO1xuICAgIGNvbnN0IGR5ID0gZ3JhZGllbnRBcnJheXMuZ2V0KHRoaXMueVRlbnNvcikgYXMgQXJyYXkzRDtcblxuICAgIG1hdGguc2NvcGUoKGtlZXApID0+IHtcbiAgICAgIGdyYWRpZW50QXJyYXlzLnNldChcbiAgICAgICAgICB0aGlzLnhUZW5zb3IsXG4gICAgICAgICAga2VlcChtYXRoLm1heFBvb2xCYWNrcHJvcChcbiAgICAgICAgICAgICAgZHksIHgsIHRoaXMuZmllbGRTaXplLCB0aGlzLnN0cmlkZSwgdGhpcy5wYWQpKSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtUZW5zb3J9IGZyb20gJy4uL2dyYXBoJztcbmltcG9ydCAqIGFzIGdyYXBoX3V0aWwgZnJvbSAnLi4vZ3JhcGhfdXRpbCc7XG5pbXBvcnQge05EQXJyYXlNYXRofSBmcm9tICcuLi9tYXRoL21hdGgnO1xuaW1wb3J0IHtOREFycmF5LCBTY2FsYXJ9IGZyb20gJy4uL21hdGgvbmRhcnJheSc7XG5pbXBvcnQge1RlbnNvckFycmF5TWFwfSBmcm9tICcuLi90ZW5zb3JfYXJyYXlfbWFwJztcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi4vdXRpbCc7XG5cbmltcG9ydCB7T3BlcmF0aW9ufSBmcm9tICcuL29wJztcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBNdWx0aXBseSBleHRlbmRzIE9wZXJhdGlvbiB7XG4gIC8qKlxuICAgKiBFbGVtZW50LXdpc2UgbXVsdGlwbHkgb3BlcmF0aW9uLiBCcm9hZGNhc3RzIGlmIG9uZSBvZiB0aGUgdGVuc29ycyBpc1xuICAgKiBzY2FsYXIuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICAgIHByaXZhdGUgeDFUZW5zb3I6IFRlbnNvciwgcHJpdmF0ZSB4MlRlbnNvcjogVGVuc29yLFxuICAgICAgcHJpdmF0ZSB5VGVuc29yOiBUZW5zb3IpIHtcbiAgICBzdXBlcigpO1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB1dGlsLnNpemVGcm9tU2hhcGUoeDFUZW5zb3Iuc2hhcGUpID09PSAxIHx8XG4gICAgICAgICAgICB1dGlsLnNpemVGcm9tU2hhcGUoeDJUZW5zb3Iuc2hhcGUpID09PSAxIHx8XG4gICAgICAgICAgICB1dGlsLmFycmF5c0VxdWFsKHgxVGVuc29yLnNoYXBlLCB4MlRlbnNvci5zaGFwZSksXG4gICAgICAgICdPbmUgb2YgdDEgb3IgdDIgbXVzdCBiZSBhIHNjYWxhciwgb3IgdDEgYW5kIHQyIG11c3QgaGF2ZSAnICtcbiAgICAgICAgICAgICd0aGUgc2FtZSBzaGFwZScpO1xuICB9XG5cbiAgZmVlZEZvcndhcmQobWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBjb25zdCB0MSA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54MVRlbnNvcik7XG4gICAgY29uc3QgdDIgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMueDJUZW5zb3IpO1xuXG4gICAgbWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgbGV0IHJlc3VsdDogTkRBcnJheTtcbiAgICAgIGlmICh1dGlsLmlzU2NhbGFyU2hhcGUodDEuc2hhcGUpKSB7XG4gICAgICAgIHJlc3VsdCA9IG1hdGguc2NhbGFyVGltZXNBcnJheSh0MSwgdDIpO1xuICAgICAgfSBlbHNlIGlmICh1dGlsLmlzU2NhbGFyU2hhcGUodDIuc2hhcGUpKSB7XG4gICAgICAgIHJlc3VsdCA9IG1hdGguc2NhbGFyVGltZXNBcnJheSh0MiwgdDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gbWF0aC5lbGVtZW50V2lzZU11bCh0MSwgdDIpO1xuICAgICAgfVxuICAgICAgaW5mZXJlbmNlQXJyYXlzLnNldCh0aGlzLnlUZW5zb3IsIGtlZXAocmVzdWx0KSk7XG4gICAgfSk7XG4gIH1cblxuICBiYWNrUHJvcChcbiAgICAgIG1hdGg6IE5EQXJyYXlNYXRoLCBpbmZlcmVuY2VBcnJheXM6IFRlbnNvckFycmF5TWFwLFxuICAgICAgZ3JhZGllbnRBcnJheXM6IFRlbnNvckFycmF5TWFwKSB7XG4gICAgY29uc3QgeDEgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMueDFUZW5zb3IpO1xuICAgIGNvbnN0IHgyID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLngyVGVuc29yKTtcbiAgICBjb25zdCBkeSA9IGdyYWRpZW50QXJyYXlzLmdldCh0aGlzLnlUZW5zb3IpO1xuXG4gICAgbWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgaWYgKGdyYXBoX3V0aWwuc2hvdWxkQmFja1Byb3AodGhpcy54MVRlbnNvcikpIHtcbiAgICAgICAgaWYgKHV0aWwuaXNTY2FsYXJTaGFwZSh0aGlzLngxVGVuc29yLnNoYXBlKSkge1xuICAgICAgICAgIGNvbnN0IG11bCA9IG1hdGguZWxlbWVudFdpc2VNdWwoZHksIHgyKTtcblxuICAgICAgICAgIGdyYWRpZW50QXJyYXlzLnNldCh0aGlzLngxVGVuc29yLCBrZWVwKG1hdGguc3VtKG11bCkpKTtcblxuICAgICAgICB9IGVsc2UgaWYgKHV0aWwuaXNTY2FsYXJTaGFwZSh4Mi5zaGFwZSkpIHtcbiAgICAgICAgICBncmFkaWVudEFycmF5cy5zZXQoXG4gICAgICAgICAgICAgIHRoaXMueDFUZW5zb3IsIGtlZXAobWF0aC5zY2FsYXJUaW1lc0FycmF5KHgyLCBkeSkpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBncmFkaWVudEFycmF5cy5zZXQodGhpcy54MVRlbnNvciwga2VlcChtYXRoLmVsZW1lbnRXaXNlTXVsKHgyLCBkeSkpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZ3JhcGhfdXRpbC5zaG91bGRCYWNrUHJvcCh0aGlzLngyVGVuc29yKSkge1xuICAgICAgICBpZiAodXRpbC5pc1NjYWxhclNoYXBlKHRoaXMueDJUZW5zb3Iuc2hhcGUpKSB7XG4gICAgICAgICAgY29uc3QgbXVsID0gbWF0aC5lbGVtZW50V2lzZU11bChkeSwgeDEpO1xuXG4gICAgICAgICAgZ3JhZGllbnRBcnJheXMuc2V0KHRoaXMueDJUZW5zb3IsIGtlZXAobWF0aC5zdW0obXVsKSkpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAodXRpbC5pc1NjYWxhclNoYXBlKHgxLnNoYXBlKSkge1xuICAgICAgICAgIGdyYWRpZW50QXJyYXlzLnNldChcbiAgICAgICAgICAgICAgdGhpcy54MlRlbnNvciwga2VlcChtYXRoLnNjYWxhclRpbWVzQXJyYXkoeDEsIGR5KSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGdyYWRpZW50QXJyYXlzLnNldCh0aGlzLngyVGVuc29yLCBrZWVwKG1hdGguZWxlbWVudFdpc2VNdWwoeDEsIGR5KSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtOREFycmF5TWF0aH0gZnJvbSAnLi4vbWF0aC9tYXRoJztcbmltcG9ydCB7TkRBcnJheSwgU2NhbGFyfSBmcm9tICcuLi9tYXRoL25kYXJyYXknO1xuaW1wb3J0IHtUZW5zb3JBcnJheU1hcH0gZnJvbSAnLi4vdGVuc29yX2FycmF5X21hcCc7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgT3BlcmF0aW9uIHtcbiAgYWJzdHJhY3QgZmVlZEZvcndhcmQobWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXApOlxuICAgICAgdm9pZDtcblxuICBhYnN0cmFjdCBiYWNrUHJvcChcbiAgICAgIG1hdGg6IE5EQXJyYXlNYXRoLCBpbmZlcmVuY2VBcnJheXM6IFRlbnNvckFycmF5TWFwLFxuICAgICAgZ3JhZGllbnRBcnJheXM6IFRlbnNvckFycmF5TWFwKTogdm9pZDtcblxuICBkaXNwb3NlVHJhbnNpZW50QXJyYXlzKFxuICAgICAgaW5mZXJlbmNlQXJyYXlzOiBUZW5zb3JBcnJheU1hcCwgZ3JhZGllbnRBcnJheXM6IFRlbnNvckFycmF5TWFwKSB7fVxuXG4gIGRpc3Bvc2UoKSB7fVxufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge1RlbnNvcn0gZnJvbSAnLi4vZ3JhcGgnO1xuaW1wb3J0ICogYXMgZ3JhcGhfdXRpbCBmcm9tICcuLi9ncmFwaF91dGlsJztcbmltcG9ydCB7TkRBcnJheU1hdGh9IGZyb20gJy4uL21hdGgvbWF0aCc7XG5pbXBvcnQge05EQXJyYXl9IGZyb20gJy4uL21hdGgvbmRhcnJheSc7XG5pbXBvcnQge1RlbnNvckFycmF5TWFwfSBmcm9tICcuLi90ZW5zb3JfYXJyYXlfbWFwJztcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi4vdXRpbCc7XG5cbmltcG9ydCB7T3BlcmF0aW9ufSBmcm9tICcuL29wJztcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWR1Y2VTdW0gZXh0ZW5kcyBPcGVyYXRpb24ge1xuICAvKiogRWxlbWVudC13aXNlIGFkZCBvcGVyYXRpb24uIEJyb2FkY2FzdHMgaWYgb25lIG9mIHRoZSB0ZW5zb3JzIGlzIHNjYWxhci4gKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSB4OiBUZW5zb3IsIHByaXZhdGUgb3V0VGVuc29yOiBUZW5zb3IpIHtcbiAgICBzdXBlcigpO1xuICAgIHV0aWwuYXNzZXJ0U2hhcGVzTWF0Y2gob3V0VGVuc29yLnNoYXBlLCBbXSk7XG4gIH1cblxuICBwcml2YXRlIG9uZXM6IE5EQXJyYXk7XG5cbiAgZmVlZEZvcndhcmQobWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBjb25zdCB4ID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLngpO1xuXG4gICAgbWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgaW5mZXJlbmNlQXJyYXlzLnNldCh0aGlzLm91dFRlbnNvciwga2VlcChtYXRoLnN1bSh4KSkpO1xuICAgIH0pO1xuICB9XG5cbiAgYmFja1Byb3AoXG4gICAgICBtYXRoOiBOREFycmF5TWF0aCwgaW5mZXJlbmNlQXJyYXlzOiBUZW5zb3JBcnJheU1hcCxcbiAgICAgIGdyYWRpZW50QXJyYXlzOiBUZW5zb3JBcnJheU1hcCkge1xuICAgIGlmICghZ3JhcGhfdXRpbC5zaG91bGRCYWNrUHJvcCh0aGlzLngpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgY29uc3QgZHkgPSBncmFkaWVudEFycmF5cy5nZXQodGhpcy5vdXRUZW5zb3IpO1xuICAgICAgaWYgKHRoaXMub25lcyA9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHhBcnJheSA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy54KTtcbiAgICAgICAgdGhpcy5vbmVzID0gTkRBcnJheS56ZXJvc0xpa2UoeEFycmF5KTtcbiAgICAgICAgdGhpcy5vbmVzLmZpbGwoMSk7XG4gICAgICB9XG4gICAgICBncmFkaWVudEFycmF5cy5zZXQodGhpcy54LCBrZWVwKG1hdGguc2NhbGFyVGltZXNBcnJheShkeSwgdGhpcy5vbmVzKSkpO1xuICAgIH0pO1xuICB9XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCB7VGVuc29yfSBmcm9tICcuLi9ncmFwaCc7XG5pbXBvcnQge05EQXJyYXlNYXRofSBmcm9tICcuLi9tYXRoL21hdGgnO1xuaW1wb3J0IHtOREFycmF5fSBmcm9tICcuLi9tYXRoL25kYXJyYXknO1xuaW1wb3J0IHtUZW5zb3JBcnJheU1hcH0gZnJvbSAnLi4vdGVuc29yX2FycmF5X21hcCc7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gJy4uL3V0aWwnO1xuXG5pbXBvcnQge09wZXJhdGlvbn0gZnJvbSAnLi9vcCc7XG5cbmV4cG9ydCBjbGFzcyBSZXNoYXBlPFQxIGV4dGVuZHMgTkRBcnJheSwgVDIgZXh0ZW5kcyBOREFycmF5PiBleHRlbmRzIE9wZXJhdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgeFRlbnNvcjogVGVuc29yLCBwcml2YXRlIHlUZW5zb3I6IFRlbnNvcikge1xuICAgIHN1cGVyKCk7XG4gICAgY29uc3QgeFNpemUgPSB1dGlsLnNpemVGcm9tU2hhcGUoeFRlbnNvci5zaGFwZSk7XG4gICAgY29uc3QgeVNpemUgPSB1dGlsLnNpemVGcm9tU2hhcGUoeVRlbnNvci5zaGFwZSk7XG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHhTaXplID09PSB5U2l6ZSxcbiAgICAgICAgYFRoZSBpbnB1dCBzaXplICgke3hTaXplfSkgYW5kIG91dHB1dCBzaXplICgke3lTaXplfSkgbXVzdCBtYXRjaGApO1xuICB9XG5cbiAgZmVlZEZvcndhcmQobWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBjb25zdCB4ID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLnhUZW5zb3IpIGFzIFQxO1xuXG4gICAgbWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgaW5mZXJlbmNlQXJyYXlzLnNldChcbiAgICAgICAgICB0aGlzLnlUZW5zb3IsIGtlZXAobWF0aC5yZXNoYXBlPFQxLCBUMj4oeCwgdGhpcy55VGVuc29yLnNoYXBlKSkpO1xuICAgIH0pO1xuICB9XG5cbiAgYmFja1Byb3AoXG4gICAgICBtYXRoOiBOREFycmF5TWF0aCwgaW5mZXJlbmNlQXJyYXlzOiBUZW5zb3JBcnJheU1hcCxcbiAgICAgIGdyYWRpZW50QXJyYXlzOiBUZW5zb3JBcnJheU1hcCkge1xuICAgIGNvbnN0IGR5ID0gZ3JhZGllbnRBcnJheXMuZ2V0KHRoaXMueVRlbnNvcikgYXMgVDI7XG5cbiAgICBtYXRoLnNjb3BlKChrZWVwKSA9PiB7XG4gICAgICBncmFkaWVudEFycmF5cy5zZXQoXG4gICAgICAgICAgdGhpcy54VGVuc29yLCBrZWVwKG1hdGgucmVzaGFwZTxUMiwgVDE+KGR5LCB0aGlzLnhUZW5zb3Iuc2hhcGUpKSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtUZW5zb3J9IGZyb20gJy4uL2dyYXBoJztcbmltcG9ydCB7TkRBcnJheU1hdGh9IGZyb20gJy4uL21hdGgvbWF0aCc7XG5pbXBvcnQge0FycmF5MUQsIE5EQXJyYXksIFNjYWxhcn0gZnJvbSAnLi4vbWF0aC9uZGFycmF5JztcbmltcG9ydCB7VGVuc29yQXJyYXlNYXB9IGZyb20gJy4uL3RlbnNvcl9hcnJheV9tYXAnO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuLi91dGlsJztcblxuaW1wb3J0IHtPcGVyYXRpb259IGZyb20gJy4vb3AnO1xuXG5leHBvcnQgY2xhc3MgU29mdG1heCBleHRlbmRzIE9wZXJhdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbG9naXRzVGVuc29yOiBUZW5zb3IsIHByaXZhdGUgb3V0cHV0OiBUZW5zb3IpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgZmVlZEZvcndhcmQobWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBjb25zdCBsb2dpdHMgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMubG9naXRzVGVuc29yKSBhcyBBcnJheTFEO1xuICAgIHJldHVybiBtYXRoLnNjb3BlKChrZWVwKSA9PiB7XG4gICAgICBpbmZlcmVuY2VBcnJheXMuc2V0KHRoaXMub3V0cHV0LCBrZWVwKG1hdGguc29mdG1heChsb2dpdHMpKSk7XG4gICAgfSk7XG4gIH1cblxuICBiYWNrUHJvcCgpIHtcbiAgICB0aHJvdyBFcnJvcignU29mdG1heCBiYWNrcHJvcCBpcyBub3QgeWV0IGltcGxlbWVudGVkJyk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFNvZnRtYXhDcm9zc0VudHJvcHlDb3N0IGV4dGVuZHMgT3BlcmF0aW9uIHtcbiAgY29uc3RydWN0b3IoXG4gICAgICBwcml2YXRlIGxvZ2l0c1RlbnNvcjogVGVuc29yLCBwcml2YXRlIGxhYmVsVGVuc29yOiBUZW5zb3IsXG4gICAgICBwcml2YXRlIHlUZW5zb3I6IFRlbnNvcikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5zb2Z0bWF4VGVuc29yID0gbmV3IFRlbnNvcihsb2dpdHNUZW5zb3Iuc2hhcGUpO1xuICB9XG5cbiAgZmVlZEZvcndhcmQobWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBjb25zdCBsb2dpdHMgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMubG9naXRzVGVuc29yKSBhcyBBcnJheTFEO1xuICAgIGNvbnN0IGxhYmVsID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLmxhYmVsVGVuc29yKSBhcyBBcnJheTFEO1xuXG4gICAgbWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgY29uc3Qgc29mdG1heFJlc3VsdCA9IG1hdGguc29mdG1heChsb2dpdHMpO1xuXG4gICAgICBpbmZlcmVuY2VBcnJheXMuc2V0KHRoaXMuc29mdG1heFRlbnNvciwga2VlcChzb2Z0bWF4UmVzdWx0KSk7XG4gICAgICBpbmZlcmVuY2VBcnJheXMuc2V0KFxuICAgICAgICAgIHRoaXMueVRlbnNvcixcbiAgICAgICAgICBrZWVwKGNyb3NzRW50cm9weUNvc3QobWF0aCwgc29mdG1heFJlc3VsdCwgbGFiZWwsIHRoaXMuZXBzaWxvbikpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGJhY2tQcm9wKFxuICAgICAgbWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXAsXG4gICAgICBncmFkaWVudEFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBjb25zdCBzb2Z0bWF4ID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLnNvZnRtYXhUZW5zb3IpO1xuICAgIGNvbnN0IGxhYmVsID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLmxhYmVsVGVuc29yKTtcblxuICAgIG1hdGguc2NvcGUoKGtlZXApID0+IHtcbiAgICAgIGdyYWRpZW50QXJyYXlzLnNldCh0aGlzLmxvZ2l0c1RlbnNvciwga2VlcChtYXRoLnN1Yihzb2Z0bWF4LCBsYWJlbCkpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRpc3Bvc2VUcmFuc2llbnRBcnJheXMoXG4gICAgICBpbmZlcmVuY2VBcnJheXM6IFRlbnNvckFycmF5TWFwLCBncmFkaWVudEFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBpbmZlcmVuY2VBcnJheXMuZGlzcG9zZUFycmF5KHRoaXMuc29mdG1heFRlbnNvcik7XG4gIH1cblxuICBkaXNwb3NlKCkge1xuICAgIHRoaXMuZXBzaWxvbi5kaXNwb3NlKCk7XG4gIH1cblxuICBwcml2YXRlIHNvZnRtYXhUZW5zb3I6IFRlbnNvcjtcbiAgcHJpdmF0ZSBlcHNpbG9uID0gU2NhbGFyLm5ldygxZS01KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyb3NzRW50cm9weUNvc3QoXG4gICAgbWF0aDogTkRBcnJheU1hdGgsIHk6IEFycmF5MUQsIHRhcmdldDogQXJyYXkxRCwgZXBzaWxvbjogU2NhbGFyKTogU2NhbGFyIHtcbiAgdXRpbC5hc3NlcnQoXG4gICAgICB5LnNpemUgPT09IHRhcmdldC5zaXplLCAnVGhlIG91dHB1dCBhbmQgdGFyZ2V0IG11c3QgYmUgdGhlIHNhbWUgc2l6ZScpO1xuXG4gIHJldHVybiBtYXRoLnNjb3BlKCgpID0+IHtcbiAgICBjb25zdCB5UGx1c0VwcyA9IG1hdGguc2NhbGFyUGx1c0FycmF5KGVwc2lsb24sIHkpO1xuICAgIGNvbnN0IGxvZ091dHB1dCA9IG1hdGgubG9nKHlQbHVzRXBzKTtcbiAgICBjb25zdCB0YXJMb2dPdXRwdXQgPSBtYXRoLmVsZW1lbnRXaXNlTXVsKHRhcmdldCwgbG9nT3V0cHV0KTtcbiAgICBjb25zdCBjb3N0VmVjdG9yID0gbWF0aC5uZWcodGFyTG9nT3V0cHV0KTtcbiAgICByZXR1cm4gbWF0aC5zdW0oY29zdFZlY3Rvcik7XG4gIH0pO1xufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge1RlbnNvcn0gZnJvbSAnLi4vZ3JhcGgnO1xuaW1wb3J0ICogYXMgZ3JhcGhfdXRpbCBmcm9tICcuLi9ncmFwaF91dGlsJztcbmltcG9ydCB7TkRBcnJheU1hdGh9IGZyb20gJy4uL21hdGgvbWF0aCc7XG5pbXBvcnQge05EQXJyYXksIFNjYWxhcn0gZnJvbSAnLi4vbWF0aC9uZGFycmF5JztcbmltcG9ydCB7VGVuc29yQXJyYXlNYXB9IGZyb20gJy4uL3RlbnNvcl9hcnJheV9tYXAnO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuLi91dGlsJztcblxuaW1wb3J0IHtPcGVyYXRpb259IGZyb20gJy4vb3AnO1xuXG4vKipcbiAqIFNwbGl0IG9wcyBhcmUgdXNlZCB0byBhY2N1bXVsYXRlIGJhY2twcm9wIGRlcml2YXRpdmVzIHdoZW4gYSBub2RlJ3Mgb3V0cHV0XG4gKiB0ZW5zb3IgaXMgY29uc3VtZWQgYnkgbXVsdGlwbGUgbm9kZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBTcGxpdCBleHRlbmRzIE9wZXJhdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgaW5wdXQ6IFRlbnNvciwgcHJpdmF0ZSBvdXRwdXRzOiBUZW5zb3JbXSkge1xuICAgIHN1cGVyKCk7XG4gICAgb3V0cHV0cy5mb3JFYWNoKG91dHB1dCA9PiB7XG4gICAgICB1dGlsLmFzc2VydFNoYXBlc01hdGNoKGlucHV0LnNoYXBlLCBvdXRwdXQuc2hhcGUpO1xuICAgIH0pO1xuICB9XG5cbiAgZmVlZEZvcndhcmQobWF0aDogTkRBcnJheU1hdGgsIGluZmVyZW5jZUFycmF5czogVGVuc29yQXJyYXlNYXApIHtcbiAgICBjb25zdCBpbnB1dEFycmF5ID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLmlucHV0KTtcbiAgICB0aGlzLm91dHB1dHMuZm9yRWFjaChvdXRwdXQgPT4ge1xuICAgICAgaW5mZXJlbmNlQXJyYXlzLnNldChvdXRwdXQsIGlucHV0QXJyYXkpO1xuICAgIH0pO1xuICB9XG5cbiAgYmFja1Byb3AoXG4gICAgICBtYXRoOiBOREFycmF5TWF0aCwgaW5mZXJlbmNlQXJyYXlzOiBUZW5zb3JBcnJheU1hcCxcbiAgICAgIGdyYWRpZW50QXJyYXlzOiBUZW5zb3JBcnJheU1hcCkge1xuICAgIGlmICghZ3JhcGhfdXRpbC5zaG91bGRCYWNrUHJvcCh0aGlzLmlucHV0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG1hdGguc2NvcGUoKGtlZXApID0+IHtcbiAgICAgIGxldCBkeCA9IG1hdGguYWRkKFxuICAgICAgICAgIGdyYWRpZW50QXJyYXlzLmdldCh0aGlzLm91dHB1dHNbMF0pLFxuICAgICAgICAgIGdyYWRpZW50QXJyYXlzLmdldCh0aGlzLm91dHB1dHNbMV0pKTtcbiAgICAgIC8vIFN1bSBhY3Jvc3MgYWxsIHRoZSBkZXJpdmF0aXZlcyBvZiB0aGUgY29uc3VtZXJzIG9mIHRoaXMgbm9kZS5cbiAgICAgIHRoaXMub3V0cHV0cy5zbGljZSgyKS5mb3JFYWNoKG91dHB1dCA9PiB7XG4gICAgICAgIGR4ID0gbWF0aC5hZGQoZHgsIGdyYWRpZW50QXJyYXlzLmdldChvdXRwdXQpKTtcbiAgICAgIH0pO1xuICAgICAgZ3JhZGllbnRBcnJheXMuc2V0KHRoaXMuaW5wdXQsIGtlZXAoZHgpKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge1RlbnNvcn0gZnJvbSAnLi4vZ3JhcGgnO1xuaW1wb3J0ICogYXMgZ3JhcGhfdXRpbCBmcm9tICcuLi9ncmFwaF91dGlsJztcbmltcG9ydCB7TkRBcnJheU1hdGh9IGZyb20gJy4uL21hdGgvbWF0aCc7XG5pbXBvcnQge05EQXJyYXksIFNjYWxhcn0gZnJvbSAnLi4vbWF0aC9uZGFycmF5JztcbmltcG9ydCB7VGVuc29yQXJyYXlNYXB9IGZyb20gJy4uL3RlbnNvcl9hcnJheV9tYXAnO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuLi91dGlsJztcblxuaW1wb3J0IHtPcGVyYXRpb259IGZyb20gJy4vb3AnO1xuXG5leHBvcnQgY2xhc3MgU3VidHJhY3QgZXh0ZW5kcyBPcGVyYXRpb24ge1xuICBwcml2YXRlIGR5U2l6ZVNjYWxhcjogU2NhbGFyO1xuXG4gIC8qKlxuICAgKiBFbGVtZW50LXdpc2Ugc3VidHJhY3Qgb3BlcmF0aW9uLiBCcm9hZGNhc3RzIGlmIG9uZSBvZiB0aGUgdGVuc29ycyBpc1xuICAgKiBzY2FsYXIuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICAgIHByaXZhdGUgdDE6IFRlbnNvciwgcHJpdmF0ZSB0MjogVGVuc29yLCBwcml2YXRlIG91dFRlbnNvcjogVGVuc29yKSB7XG4gICAgc3VwZXIoKTtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgdXRpbC5zaXplRnJvbVNoYXBlKHQxLnNoYXBlKSA9PT0gMSB8fFxuICAgICAgICAgICAgdXRpbC5zaXplRnJvbVNoYXBlKHQyLnNoYXBlKSA9PT0gMSB8fFxuICAgICAgICAgICAgdXRpbC5hcnJheXNFcXVhbCh0MS5zaGFwZSwgdDIuc2hhcGUpLFxuICAgICAgICAnT25lIG9mIHQxIG9yIHQyIG11c3QgYmUgYSBzY2FsYXIsIG9yIHQxIGFuZCB0MiBtdXN0IGhhdmUgJyArXG4gICAgICAgICAgICAndGhlIHNhbWUgc2hhcGUnKTtcbiAgfVxuXG4gIGZlZWRGb3J3YXJkKG1hdGg6IE5EQXJyYXlNYXRoLCBpbmZlcmVuY2VBcnJheXM6IFRlbnNvckFycmF5TWFwKSB7XG4gICAgY29uc3QgdDEgPSBpbmZlcmVuY2VBcnJheXMuZ2V0KHRoaXMudDEpO1xuICAgIGNvbnN0IHQyID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLnQyKTtcblxuICAgIG1hdGguc2NvcGUoKGtlZXApID0+IHtcbiAgICAgIGxldCByZXN1bHQ6IE5EQXJyYXk7XG4gICAgICBpZiAodXRpbC5pc1NjYWxhclNoYXBlKHQxLnNoYXBlKSkge1xuICAgICAgICByZXN1bHQgPSBtYXRoLnNjYWxhck1pbnVzQXJyYXkodDEsIHQyKTtcbiAgICAgIH0gZWxzZSBpZiAodXRpbC5pc1NjYWxhclNoYXBlKHQyLnNoYXBlKSkge1xuICAgICAgICByZXN1bHQgPSBtYXRoLmFycmF5TWludXNTY2FsYXIodDEsIHQyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IG1hdGguc3ViKHQxLCB0Mik7XG4gICAgICB9XG4gICAgICBpbmZlcmVuY2VBcnJheXMuc2V0KHRoaXMub3V0VGVuc29yLCBrZWVwKHJlc3VsdCkpO1xuICAgIH0pO1xuICB9XG5cbiAgYmFja1Byb3AoXG4gICAgICBtYXRoOiBOREFycmF5TWF0aCwgaW5mZXJlbmNlQXJyYXlzOiBUZW5zb3JBcnJheU1hcCxcbiAgICAgIGdyYWRpZW50QXJyYXlzOiBUZW5zb3JBcnJheU1hcCkge1xuICAgIGNvbnN0IHQxID0gaW5mZXJlbmNlQXJyYXlzLmdldCh0aGlzLnQxKTtcbiAgICBjb25zdCB0MiA9IGluZmVyZW5jZUFycmF5cy5nZXQodGhpcy50Mik7XG4gICAgY29uc3QgZHkgPSBncmFkaWVudEFycmF5cy5nZXQodGhpcy5vdXRUZW5zb3IpO1xuXG4gICAgbWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgaWYgKGdyYXBoX3V0aWwuc2hvdWxkQmFja1Byb3AodGhpcy50MSkpIHtcbiAgICAgICAgaWYgKHV0aWwuaXNTY2FsYXJTaGFwZSh0aGlzLnQxLnNoYXBlKSkge1xuICAgICAgICAgIGNvbnN0IHN1bSA9IG1hdGguc3VtKGR5KTtcbiAgICAgICAgICBpZiAodGhpcy5keVNpemVTY2FsYXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5keVNpemVTY2FsYXIgPSBTY2FsYXIubmV3KGR5LnNpemUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBncmFkaWVudEFycmF5cy5zZXQoXG4gICAgICAgICAgICAgIHRoaXMudDEsIGtlZXAobWF0aC5kaXZpZGUoc3VtLCB0aGlzLmR5U2l6ZVNjYWxhcikpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBncmFkaWVudEFycmF5cy5zZXQodGhpcy50MSwga2VlcChkeSkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChncmFwaF91dGlsLnNob3VsZEJhY2tQcm9wKHRoaXMudDIpKSB7XG4gICAgICAgIGlmICh1dGlsLmlzU2NhbGFyU2hhcGUodGhpcy50Mi5zaGFwZSkpIHtcbiAgICAgICAgICBjb25zdCBzdW0gPSBtYXRoLnN1bShkeSk7XG4gICAgICAgICAgY29uc3QgbmVnU3VtID0gbWF0aC5uZWcoc3VtKTtcbiAgICAgICAgICBpZiAodGhpcy5keVNpemVTY2FsYXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5keVNpemVTY2FsYXIgPSBTY2FsYXIubmV3KGR5LnNpemUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBncmFkaWVudEFycmF5cy5zZXQoXG4gICAgICAgICAgICAgIHRoaXMudDIsIGtlZXAobWF0aC5kaXZpZGUobmVnU3VtLCB0aGlzLmR5U2l6ZVNjYWxhcikpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBncmFkaWVudEFycmF5cy5zZXQodGhpcy50Miwga2VlcChtYXRoLm5lZyhkeSkpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZGlzcG9zZSgpIHtcbiAgICBpZiAodGhpcy5keVNpemVTY2FsYXIgIT0gbnVsbCkge1xuICAgICAgdGhpcy5keVNpemVTY2FsYXIuZGlzcG9zZSgpO1xuICAgIH1cbiAgfVxufVxuIiwiLyogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5pbXBvcnQge05vZGUsIFRlbnNvciwgVmFyaWFibGVOb2RlfSBmcm9tICcuL2dyYXBoJztcbmltcG9ydCB7TkRBcnJheU1hdGh9IGZyb20gJy4vbWF0aC9tYXRoJztcbmltcG9ydCB7U2Vzc2lvblJ1bnRpbWV9IGZyb20gJy4vc2Vzc2lvbic7XG5pbXBvcnQge1RlbnNvckFycmF5TWFwfSBmcm9tICcuL3RlbnNvcl9hcnJheV9tYXAnO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgT3B0aW1pemVyIHtcbiAgcHJvdGVjdGVkIHZhcmlhYmxlTm9kZXM6IFZhcmlhYmxlTm9kZVtdO1xuICBwcm90ZWN0ZWQgc3BlY2lmaWVkVmFyaWFibGVOb2RlczogVmFyaWFibGVOb2RlW118bnVsbDtcblxuICBjb25zdHJ1Y3RvcihzcGVjaWZpZWRWYXJpYWJsZUxpc3Q/OiBOb2RlW10pIHtcbiAgICBpZiAoc3BlY2lmaWVkVmFyaWFibGVMaXN0ICE9IG51bGwpIHtcbiAgICAgIHRoaXMuc3BlY2lmaWVkVmFyaWFibGVOb2RlcyA9IHNwZWNpZmllZFZhcmlhYmxlTGlzdCBhcyBWYXJpYWJsZU5vZGVbXTtcbiAgICB9XG4gIH1cblxuICBhYnN0cmFjdCBiZWZvcmVCYXRjaChcbiAgICAgIG1hdGg6IE5EQXJyYXlNYXRoLCBiYXRjaFNpemU6IG51bWJlciwgcnVudGltZTogU2Vzc2lvblJ1bnRpbWUsXG4gICAgICBhY3RpdmF0aW9uQXJyYXlNYXA6IFRlbnNvckFycmF5TWFwLFxuICAgICAgZ3JhZGllbnRBcnJheU1hcDogVGVuc29yQXJyYXlNYXApOiB2b2lkO1xuXG4gIGFic3RyYWN0IGFmdGVyRXhhbXBsZShcbiAgICAgIG1hdGg6IE5EQXJyYXlNYXRoLCBydW50aW1lOiBTZXNzaW9uUnVudGltZSxcbiAgICAgIGFjdGl2YXRpb25BcnJheU1hcDogVGVuc29yQXJyYXlNYXAsXG4gICAgICBncmFkaWVudEFycmF5TWFwOiBUZW5zb3JBcnJheU1hcCk6IHZvaWQ7XG5cbiAgYWJzdHJhY3QgYWZ0ZXJCYXRjaChcbiAgICAgIG1hdGg6IE5EQXJyYXlNYXRoLCBiYXRjaFNpemU6IG51bWJlciwgcnVudGltZTogU2Vzc2lvblJ1bnRpbWUsXG4gICAgICBhY3RpdmF0aW9uQXJyYXlNYXA6IFRlbnNvckFycmF5TWFwLFxuICAgICAgZ3JhZGllbnRBcnJheU1hcDogVGVuc29yQXJyYXlNYXApOiB2b2lkO1xuXG4gIGFic3RyYWN0IGRpc3Bvc2UoKTogdm9pZDtcbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuLyoqXG4gKiBEZWZhdWx0IGNvbXBhcmlzb24gZnVuY3Rpb24gZm9yIHRoZSBwcmlvcml0eSBxdWV1ZS5cbiAqIEBwYXJhbSBhIFRoZSBmaXJzdCBlbGVtZW50IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gYiBUaGUgc2Vjb25kIGVsZW1lbnQgdG8gY29tcGFyZS5cbiAqIEByZXR1cm4gXCJhID4gYlwiIHJldHVybnMgPiAwLiBcImEgPCBiXCIgcmV0dXJucyA8IDAuIFwiYSA9PT0gYlwiIHJldHVybnMgMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRDb21wYXJlPFQ+KGE6IFQsIGI6IFQpOiBudW1iZXIge1xuICBpZiAoYSA9PT0gYikge1xuICAgIHJldHVybiAwO1xuICB9IGVsc2UgaWYgKGEgPCBiKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAxO1xuICB9XG59XG5cbi8qKlxuICogQSBDb21wYXJhdG9yIGlzIGEgdXNlci1wcm92aWRlZCBmdW5jdGlvbiB0aGF0IGNvbXBhcmVzIHR3byBUIGluc3RhbmNlcy4gVGhlXG4gKiBjb252ZW50aW9uIGZvciBkZWZhdWx0Q29tcGFyZSBpcyBleHBlY3RlZCB0byBiZSBmb2xsb3dlZCB0byBtYWludGFpbiB0aGVcbiAqIGJpbmFyeSBtaW4taGVhcCBpbnRlZ3JpdHkuXG4gKiBAcGFyYW0gYSBUaGUgZmlyc3QgZWxlbWVudCB0byBjb21wYXJlLlxuICogQHBhcmFtIGIgVGhlIHNlY29uZCBlbGVtZW50IHRvIGNvbXBhcmUuXG4gKi9cbmV4cG9ydCB0eXBlIENvbXBhcmF0b3I8VD4gPSAoYTogVCwgYjogVCkgPT4gbnVtYmVyO1xuXG4vKipcbiAqIEluZGV4T2JzZXJ2ZXIgaXMgYSB1c2VyLXByb3ZpZGVkIGNhbGxiYWNrIHRoYXQgaW5mb3JtcyB0aGUgY2FsbGVyIHdoZW4gYW5cbiAqIGVsZW1lbnQgaW4gdGhlIHByaW9yaXR5IHF1ZXVlJ3MgYmluYXJ5IG1pbi1oZWFwIGhhcyBiZWVuIHJlbG9jYXRlZC5cbiAqIEBwYXJhbSB0IFRoZSBlbGVtZW50IHRoYXQgd2FzIHJlbG9jYXRlZC5cbiAqIEBwYXJhbSBuZXdJbmRleCBUaGUgbmV3IGxvY2F0aW9uIGluIHRoZSBiaW5hcnkgbWluLWhlYXAgb2YgdGhlIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCB0eXBlIEluZGV4T2JzZXJ2ZXI8VD4gPSAodDogVCwgbmV3SW5kZXg6IG51bWJlcikgPT4gdm9pZDtcblxuLyoqXG4gKiBBIHByaW9yaXR5IHF1ZXVlLCBpbXBsZW1lbnRlZCBpbiB0ZXJtcyBvZiBhIGJpbmFyeSBtaW4taGVhcC4gTG93ZXIgcHJpb3JpdHlcbiAqIG51bWJlcnMgYXJlIGNvbnNpZGVyZWQgaGlnaGVyIHByaW9yaXR5LlxuICogZW5xdWV1ZSwgZGVxdWV1ZSwgYW5kIHVwZGF0ZSBhcmUgYWxsIE8obG9nIE4pIHdpdGggcmVzcGVjdCB0byB0aGUgbnVtYmVyIG9mXG4gKiBlbGVtZW50cyBpbiB0aGUgcXVldWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBQcmlvcml0eVF1ZXVlPFQ+IHtcbiAgcHJpdmF0ZSBoZWFwOiBUW10gPSBbXTtcblxuICAvKipcbiAgICogQHBhcmFtIGNvbXBhcmF0b3IgQSBmdW5jdGlvbiB0aGF0IGNvbXBhcmVzIHR3byBxdWV1ZSBlbGVtZW50cy5cbiAgICogQHBhcmFtIGluZGV4T2JzZXJ2ZXIgQW4gb3B0aW9uYWwgY2FsbGJhY2sgcmFpc2VkIHdoZW4gdGhlIHByaW9yaXR5IHF1ZXVlXG4gICAqIGNoYW5nZXMgdGhlIG9yZGVyIG9mIGVsZW1lbnRzIGluIGl0cyBtaW4taGVhcC4gVXNlZnVsIGZvciB0cmFja2luZyB0aGVcbiAgICogcG9zaXRpb25zIG9mIGVsZW1lbnRzIHRoYXQgbmVlZCB1cGRhdGluZy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgcHJpdmF0ZSBjb21wYXJhdG9yOiBDb21wYXJhdG9yPFQ+LFxuICAgICAgcHJpdmF0ZSBpbmRleE9ic2VydmVyPzogSW5kZXhPYnNlcnZlcjxUPikge31cblxuICAvKipcbiAgICogQWRkIGFuIGVsZW1lbnQgdG8gdGhlIHByaW9yaXR5IHF1ZXVlLlxuICAgKiBAcGFyYW0gdCBUaGUgZWxlbWVudCB0byBlbnF1ZXVlLlxuICAgKi9cbiAgZW5xdWV1ZSh0OiBUKSB7XG4gICAgdGhpcy5oZWFwLnB1c2godCk7XG4gICAgdGhpcy5vbkluZGV4Q2hhbmdlZCh0LCB0aGlzLmhlYXAubGVuZ3RoIC0gMSk7XG4gICAgdGhpcy5zaWZ0VXAodGhpcy5oZWFwLmxlbmd0aCAtIDEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBlbGVtZW50IGZyb20gdGhlIHByaW9yaXR5IHF1ZXVlLlxuICAgKiBAcmV0dXJuIFRoZSBlbGVtZW50IGluIHRoZSBwcmlvcml0eSBxdWV1ZSB3aXRoIHRoZSBoaWdoZXN0IHByaW9yaXR5XG4gICAqIChsb3dlc3QgbnVtZXJpYyBwcmlvcml0eSB2YWx1ZSkuXG4gICAqL1xuICBkZXF1ZXVlKCk6IFQge1xuICAgIGlmICh0aGlzLmVtcHR5KCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZGVxdWV1ZSBjYWxsZWQgb24gZW1wdHkgcHJpb3JpdHkgcXVldWUuJyk7XG4gICAgfVxuICAgIGNvbnN0IHQgPSB0aGlzLmhlYXBbMF07XG4gICAgdGhpcy5zd2FwKDAsIHRoaXMuaGVhcC5sZW5ndGggLSAxKTtcbiAgICB0aGlzLmhlYXAucG9wKCk7XG4gICAgdGhpcy5zaWZ0RG93bigwKTtcbiAgICByZXR1cm4gdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGFuIGVsZW1lbnQgYXQgdGhlIHNwZWNpZmllZCBpbmRleC4gVGhpcyBjYW4gYmUgYSBmdWxsIGVsZW1lbnRcbiAgICogcmVwbGFjZW1lbnQsIG9yIGl0IGNhbiBiZSBhbiBpbi1wbGFjZSB1cGRhdGUuIFRoZSBwcmlvcml0eSBpcyBhc3N1bWVkIHRvIGJlXG4gICAqIGNoYW5nZWQsIGFuZCB0aGUgaW50ZXJuYWwgc3RvcmFnZSBpcyB1cGRhdGVkLiBUaGlzIGZ1bmN0aW9uIGlzIG9ubHkgdXNlZnVsXG4gICAqIGlmIHRoZSBzdG9yYWdlIGluZGV4IG9mIHRoZSB1cGRhdGVkIGVsZW1lbnQgaXMga25vd247IGNvbnN0cnVjdCB0aGVcbiAgICogUHJpb3JpdHlRdWV1ZSB3aXRoIGFuIEluZGV4T2JzZXJ2ZXIgdG8gdHJhY2sgZWxlbWVudCBsb2NhdGlvbnMuXG4gICAqIEBwYXJhbSBuZXdUIFRoZSBuZXcgZWxlbWVudCB0byByZXBsYWNlIGluIHRoZSBwcmlvcml0eSBxdWV1ZS5cbiAgICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCB0byBpbnNlcnQgdGhlIG5ldyBlbGVtZW50IGludG8uXG4gICAqL1xuICB1cGRhdGUobmV3VDogVCwgaW5kZXg6IG51bWJlcikge1xuICAgIC8qIElmIHRoZSBlbGVtZW50IGlzIGF0IHRoZSB2ZXJ5IGVuZCBvZiB0aGUgaGVhcCwgbm8gc2lmdGluZyBpcyBuZWNlc3NhcnksXG4gICAgICogaXQgY2FuIGJlIHNhZmVseSByZW1vdmVkLiAqL1xuICAgIGNvbnN0IGxhc3QgPSAoaW5kZXggPT09IHRoaXMuaGVhcC5sZW5ndGggLSAxKTtcbiAgICBpZiAoIWxhc3QpIHtcbiAgICAgIHRoaXMuc3dhcChpbmRleCwgdGhpcy5oZWFwLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICB0aGlzLmhlYXAucG9wKCk7XG4gICAgaWYgKCFsYXN0KSB7XG4gICAgICAvKiBUaGUgZWxlbWVudCBhdCAnaW5kZXgnIGhhcyBiZWVuIHJlbW92ZWQsIGFuZCByZXBsYWNlZCB3aXRoIHdoYXRldmVyIHdhc1xuICAgICAgICogYXQgdGhlIGVuZCBvZiB0aGUgaGVhcC4gU2luY2UgdGhhdCBlbGVtZW50IG1pZ2h0IGhhdmUgY29tZSBmcm9tIGFcbiAgICAgICAqIGRpZmZlcmVudCBzdWJ0cmVlIChhbmQgbm90IGJlIGEgZGlyZWN0IGRlc2NlbmRhbnQgb2YgdGhlIG5vZGUgYXRcbiAgICAgICAqICdpbmRleCcpLCB3ZSBtaWdodCBuZWVkIHRvIHNpZnQgdGhpcyBuZXcgdmFsdWUgdXAgaW5zdGVhZCBvZiBkb3duLiBUZXN0XG4gICAgICAgKiBib3RoIGRpcmVjdGlvbnMsIGFuZCBzaWZ0IHRvIHdoZXJldmVyIHRoZSBub2RlIG5lZWRzIHRvIGdvLlxuICAgICAgICovXG4gICAgICBpZiAodGhpcy5zaWZ0VXBJbmRleChpbmRleCkgIT09IC0xKSB7XG4gICAgICAgIHRoaXMuc2lmdFVwKGluZGV4KTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zaWZ0RG93bkluZGV4KGluZGV4KSAhPT0gLTEpIHtcbiAgICAgICAgdGhpcy5zaWZ0RG93bihpbmRleCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZW5xdWV1ZShuZXdUKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVkaWNhdGUgZm9yIHRlc3Rpbmcgd2hldGhlciB0aGUgUHJpb3JpdHlRdWV1ZSBpcyBlbXB0eS5cbiAgICogQHJldHVybiBUcnVlIGlmIHRoZSBQcmlvcml0eVF1ZXVlIGlzIGVtcHR5LCBvdGhlcndpc2UgRmFsc2UuXG4gICAqL1xuICBlbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5oZWFwLmxlbmd0aCA9PT0gMDtcbiAgfVxuXG4gIHByaXZhdGUgb25JbmRleENoYW5nZWQodDogVCwgbmV3SW5kZXg6IG51bWJlcikge1xuICAgIGlmICh0aGlzLmluZGV4T2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMuaW5kZXhPYnNlcnZlcih0LCBuZXdJbmRleCk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogU3RhbmRhcmQgemVyby1pbmRleGVkIGJpbmFyeSBoZWFwIGFycmF5IGxheW91dDpcbiAgICogICBQYXJlbnQoTikgPSBGbG9vcigoTiAtIDEpIC8gMilcbiAgICogICBMZWZ0Q2hpbGQoTikgPSAoTiAqIDIpICsgMVxuICAgKiAgIFJpZ2h0Q2hpbGQoTikgPSAoTiAqIDIpICsgMlxuICAgKi9cblxuICBwcml2YXRlIGdldFBhcmVudEluZGV4KGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICByZXR1cm4gTWF0aC5mbG9vcigoaW5kZXggLSAxKSAvIDIpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRMZWZ0Q2hpbGRJbmRleChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBjYW5kaWRhdGUgPSBpbmRleCAqIDIgKyAxO1xuICAgIHJldHVybiBjYW5kaWRhdGUgPCB0aGlzLmhlYXAubGVuZ3RoID8gY2FuZGlkYXRlIDogLTE7XG4gIH1cblxuICBwcml2YXRlIGdldFJpZ2h0Q2hpbGRJbmRleChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBjYW5kaWRhdGUgPSBpbmRleCAqIDIgKyAyO1xuICAgIHJldHVybiBjYW5kaWRhdGUgPCB0aGlzLmhlYXAubGVuZ3RoID8gY2FuZGlkYXRlIDogLTE7XG4gIH1cblxuICBwcml2YXRlIHNpZnRVcEluZGV4KGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IHBhcmVudEluZGV4ID0gdGhpcy5nZXRQYXJlbnRJbmRleChpbmRleCk7XG4gICAgaWYgKHBhcmVudEluZGV4ID09PSAtMSkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpZiAodGhpcy5jb21wYXJlKHBhcmVudEluZGV4LCBpbmRleCkgPiAwKSB7XG4gICAgICByZXR1cm4gcGFyZW50SW5kZXg7XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIHByaXZhdGUgc2lmdFVwKGluZGV4OiBudW1iZXIpIHtcbiAgICBsZXQgc2lmdEluZGV4ID0gdGhpcy5zaWZ0VXBJbmRleChpbmRleCk7XG4gICAgd2hpbGUgKHNpZnRJbmRleCAhPT0gLTEpIHtcbiAgICAgIHRoaXMuc3dhcChpbmRleCwgc2lmdEluZGV4KTtcbiAgICAgIGluZGV4ID0gc2lmdEluZGV4O1xuICAgICAgc2lmdEluZGV4ID0gdGhpcy5zaWZ0VXBJbmRleChpbmRleCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaWZ0RG93bkluZGV4KGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmIChpbmRleCA+PSB0aGlzLmhlYXAubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGxldCBsYXJnZXN0Q2hpbGRJbmRleCA9IGluZGV4O1xuICAgIGNvbnN0IGxlZnRDaGlsZEluZGV4ID0gdGhpcy5nZXRMZWZ0Q2hpbGRJbmRleChpbmRleCk7XG4gICAgaWYgKChsZWZ0Q2hpbGRJbmRleCAhPT0gLTEpICYmXG4gICAgICAgICh0aGlzLmNvbXBhcmUobGVmdENoaWxkSW5kZXgsIGxhcmdlc3RDaGlsZEluZGV4KSA8IDApKSB7XG4gICAgICBsYXJnZXN0Q2hpbGRJbmRleCA9IGxlZnRDaGlsZEluZGV4O1xuICAgIH1cbiAgICBjb25zdCByaWdodENoaWxkSW5kZXggPSB0aGlzLmdldFJpZ2h0Q2hpbGRJbmRleChpbmRleCk7XG4gICAgaWYgKChyaWdodENoaWxkSW5kZXggIT09IC0xKSAmJlxuICAgICAgICAodGhpcy5jb21wYXJlKHJpZ2h0Q2hpbGRJbmRleCwgbGFyZ2VzdENoaWxkSW5kZXgpIDwgMCkpIHtcbiAgICAgIGxhcmdlc3RDaGlsZEluZGV4ID0gcmlnaHRDaGlsZEluZGV4O1xuICAgIH1cbiAgICByZXR1cm4gKGxhcmdlc3RDaGlsZEluZGV4ID09PSBpbmRleCkgPyAtMSA6IGxhcmdlc3RDaGlsZEluZGV4O1xuICB9XG5cbiAgcHJpdmF0ZSBzaWZ0RG93bihpbmRleDogbnVtYmVyKSB7XG4gICAgbGV0IHNpZnRJbmRleCA9IHRoaXMuc2lmdERvd25JbmRleChpbmRleCk7XG4gICAgd2hpbGUgKHNpZnRJbmRleCAhPT0gLTEpIHtcbiAgICAgIHRoaXMuc3dhcChpbmRleCwgc2lmdEluZGV4KTtcbiAgICAgIGluZGV4ID0gc2lmdEluZGV4O1xuICAgICAgc2lmdEluZGV4ID0gdGhpcy5zaWZ0RG93bkluZGV4KGluZGV4KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNvbXBhcmUoYUluZGV4OiBudW1iZXIsIGJJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jb21wYXJhdG9yKHRoaXMuaGVhcFthSW5kZXhdLCB0aGlzLmhlYXBbYkluZGV4XSk7XG4gIH1cblxuICBwcml2YXRlIHN3YXAoYTogbnVtYmVyLCBiOiBudW1iZXIpIHtcbiAgICBjb25zdCB0ZW1wID0gdGhpcy5oZWFwW2FdO1xuICAgIHRoaXMuaGVhcFthXSA9IHRoaXMuaGVhcFtiXTtcbiAgICB0aGlzLmhlYXBbYl0gPSB0ZW1wO1xuICAgIHRoaXMub25JbmRleENoYW5nZWQodGhpcy5oZWFwW2FdLCBhKTtcbiAgICB0aGlzLm9uSW5kZXhDaGFuZ2VkKHRoaXMuaGVhcFtiXSwgYik7XG4gIH1cbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtHcmFwaCwgTm9kZSwgVGVuc29yfSBmcm9tICcuL2dyYXBoJztcbmltcG9ydCAqIGFzIGdyYXBoX3V0aWwgZnJvbSAnLi9ncmFwaF91dGlsJztcbmltcG9ydCB7SW5wdXRQcm92aWRlcn0gZnJvbSAnLi9pbnB1dF9wcm92aWRlcic7XG5pbXBvcnQge05EQXJyYXlNYXRofSBmcm9tICcuL21hdGgvbWF0aCc7XG5pbXBvcnQge05EQXJyYXksIFNjYWxhcn0gZnJvbSAnLi9tYXRoL25kYXJyYXknO1xuaW1wb3J0ICogYXMgb3BlcmF0aW9uX2VtaXR0ZXIgZnJvbSAnLi9vcGVyYXRpb25fZW1pdHRlcic7XG5pbXBvcnQge09wZXJhdGlvbn0gZnJvbSAnLi9vcHMvb3AnO1xuaW1wb3J0IHtPcHRpbWl6ZXJ9IGZyb20gJy4vb3B0aW1pemVyJztcbmltcG9ydCAqIGFzIHNlc3Npb25fdXRpbCBmcm9tICcuL3Nlc3Npb25fdXRpbCc7XG5pbXBvcnQge1RlbnNvckFycmF5TWFwfSBmcm9tICcuL3RlbnNvcl9hcnJheV9tYXAnO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuL3V0aWwnO1xuXG4vKipcbiAqIEZlZWRFbnRyeSBhc3NvY2lhdGVzIGEgdGVuc29yIHdpdGggdXNlci1wcm92aWRlZCBOREFycmF5IGRhdGEuXG4gKi9cbmV4cG9ydCB0eXBlIEZlZWRFbnRyeSA9IHtcbiAgdGVuc29yOiBUZW5zb3IsXG4gIGRhdGE6IE5EQXJyYXl8SW5wdXRQcm92aWRlclxufTtcblxuLyoqXG4gKiBBIEZlZWREaWN0aW9uYXJ5IGhvbGRzIGEgbWFwIGZyb20gdGVuc29ycyB0byB1c2VyLXByb3ZpZGVkIE5EQXJyYXlzLiBGZWVkXG4gKiBkaWN0aW9uYXJpZXMgcmVwcmVzZW50IHRoZSAnZW50cnkgcG9pbnRzJyBvZiBldmFsdWF0aW9uLCBzaW5jZSBncmFwaCBub2Rlc1xuICogdGhhdCBhcmUgcmVwbGFjZWQgYnkgZmVlZHMgZG9uJ3QgbmVlZCB0byBoYXZlIHRoZWlyIGlucHV0IG5vZGVzIGV2YWx1YXRlZC5cbiAqIEZlZWQgZGljdGlvbmFyaWVzIHVzdWFsbHkgcHJvdmlkZSBOREFycmF5IGRhdGEgZm9yIFBsYWNlaG9sZGVyIG5vZGVzLCBidXQgYW55XG4gKiBub2RlIGluIHRoZSBncmFwaCBjYW4gYmUgcmVwbGFjZWQgYnkgYSBmZWVkIGRpY3Rpb25hcnkgZW50cnkuXG4gKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgRmVlZERpY3Rpb25hcnkge1xuICBkaWN0OiB7W3RlbnNvcklEOiBudW1iZXJdOiBGZWVkRW50cnl9ID0ge307XG5cbiAgLyoqXG4gICAqIE9wdGlvbmFsbHkgY29uc3RydWN0IGEgRmVlZERpY3Rpb25hcnkgZnJvbSBhbiBhcnJheSBvZiBlbnRyaWVzLlxuICAgKiBAcGFyYW0gZmVlZEVudHJpZXMgT3B0aW9uYWwgYXJyYXkgb2YgRmVlZEVudHJ5IG9iamVjdHMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihmZWVkRW50cmllcz86IEZlZWRFbnRyeVtdKSB7XG4gICAgaWYgKGZlZWRFbnRyaWVzKSB7XG4gICAgICBmZWVkRW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHRoaXMuZGljdFtlbnRyeS50ZW5zb3IuaWRdID0gZW50cnkpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZW51bSBDb3N0UmVkdWN0aW9uIHtcbiAgTk9ORSxcbiAgU1VNLFxuICBNRUFOXG59XG5cbi8qKlxuICogQSBTZXNzaW9uIG1haW50YWlucyB0aGUgcnVudGltZSBzdGF0ZSByZXF1aXJlZCB0byBlZmZpY2llbnRseSBldmFsdWF0ZSBub2Rlcy5cbiAqIE9uIHRoZWlyIG93biwgZ3JhcGggb2JqZWN0cyBhcmUgdmVyeSBsaWdodHdlaWdodCBsb2dpY2FsIHRvcG9sb2dpZXM7IHRoZXlcbiAqIGhhdmUgbm8gcmVsYXRpb25zaGlwIHdpdGggdGhlIEdQVS4gU2Vzc2lvbnMgZW5jYXBzdWxhdGUgdGhlIGV2YWx1YXRpb24gb2ZcbiAqIG5vZGVzLCB0aGUgbWFuYWdlbWVudCBvZiBHUFUgcmVzb3VyY2VzLCB0aGUgY2FjaGluZyBvZiBldmFsdWF0aW9uIHBhdGhzLCBhbmRcbiAqIGFueXRoaW5nIGVsc2UgcmVxdWlyZWQgdG8gZXZhbHVhdGUgb3IgdHJhaW4gYSBuZXR3b3JrLlxuICovXG5leHBvcnQgY2xhc3MgU2Vzc2lvbiB7XG4gIC8qKlxuICAgKiBAcGFyYW0gZ3JhcGggVGhlIGdyYXBoIHRvIGFzc29jaWF0ZSB3aXRoIHRoaXMgU2Vzc2lvbi5cbiAgICogQHBhcmFtIG1hdGggVGhlIE5EQXJyYXlNYXRoIGludGVyZmFjZSB0aGF0IHRoaXMgU2Vzc2lvbiBzaG91bGQgdXNlLlxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBncmFwaDogR3JhcGgsIHByaXZhdGUgbWF0aDogTkRBcnJheU1hdGgpIHt9XG5cbiAgLyoqXG4gICAqIFJlbGVhc2UgYWxsIHN5c3RlbSByZXNvdXJjZXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgU2Vzc2lvbi5cbiAgICovXG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5hY3RpdmF0aW9uQXJyYXlNYXAuZGlzcG9zZSgpO1xuICAgIE9iamVjdC5rZXlzKHRoaXMucnVudGltZUNhY2hlKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBjb25zdCBydW50aW1lID0gdGhpcy5ydW50aW1lQ2FjaGVba2V5XTtcbiAgICAgIGlmIChydW50aW1lLm9wZXJhdGlvbnMpIHtcbiAgICAgICAgcnVudGltZS5vcGVyYXRpb25zLmZvckVhY2gob3AgPT4gb3AuZGlzcG9zZSgpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnJ1bnRpbWVDYWNoZSA9IHt9O1xuICAgIGlmICh0aGlzLmJhdGNoU2l6ZVNjYWxhciAhPSBudWxsKSB7XG4gICAgICB0aGlzLmJhdGNoU2l6ZVNjYWxhci5kaXNwb3NlKCk7XG4gICAgfVxuICAgIHRoaXMub25lU2NhbGFyLmRpc3Bvc2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmFsdWF0ZSBhIGxpc3Qgb2YgdGVuc29ycywgdXNpbmcgdGhlIHByb3ZpZGVkIGZlZWQgZW50cmllcyB0byBwcm92aWRlXG4gICAqIHVwc3RyZWFtIE5EQXJyYXkgaW5wdXQuXG4gICAqIFdoZW4gdXNpbmcgYSBgTkRBcnJheU1hdGhgIG9iamVjdCBpbiBzYWZlIG1vZGUgdGhpcyBtdXN0IGJlIHVzZWQgaW4gYVxuICAgKiBtYXRoLnNjb3BlKCkuXG4gICAqIEBwYXJhbSB0ZW5zb3JzIFRoZSBsaXN0IG9mIHRlbnNvcnMgdG8gZXZhbHVhdGUuXG4gICAqIEBwYXJhbSBmZWVkRW50cmllcyBMaXN0IG9mIGBGZWVkRW50cnlgIHRvIHJlYWQgd2hlbiByZXBsYWNpbmcgZ3JhcGhcbiAgICogdGVuc29ycyB3aXRoIE5EQXJyYXlzLlxuICAgKiBAcmV0dXJuIFRoZSBjb21wdXRlZCB2YWx1ZXMgb2YgdGhlIHRlbnNvcnMuXG4gICAqL1xuICBldmFsQWxsKHRlbnNvcnM6IFRlbnNvcltdLCBmZWVkRW50cmllczogRmVlZEVudHJ5W10pOiBOREFycmF5W10ge1xuICAgIHJldHVybiB0aGlzLm1hdGguc2NvcGUoKCkgPT4ge1xuICAgICAgY29uc3QgZmVlZCA9IG5ldyBGZWVkRGljdGlvbmFyeShmZWVkRW50cmllcyk7XG4gICAgICBjb25zdCBydW50aW1lID0gdGhpcy5nZXRPckNyZWF0ZVJ1bnRpbWUodGVuc29ycywgZmVlZCk7XG5cbiAgICAgIGNvbnN0IGFjdGl2YXRpb25zID0gdGhpcy5hY3RpdmF0aW9uQXJyYXlNYXA7XG5cbiAgICAgIHNlc3Npb25fdXRpbC5kaXNwb3NlQW5kSW5pdGlhbGl6ZU9wZXJhdGlvbk91dHB1dHMoXG4gICAgICAgICAgcnVudGltZS5ub2RlcywgYWN0aXZhdGlvbnMpO1xuICAgICAgc2Vzc2lvbl91dGlsLmRpc3Bvc2VUcmFuc2llbnRPcGVyYXRpb25BcnJheXMoXG4gICAgICAgICAgcnVudGltZS5vcGVyYXRpb25zLCB0aGlzLmFjdGl2YXRpb25BcnJheU1hcCwgdGhpcy5ncmFkaWVudEFycmF5TWFwKTtcblxuICAgICAgc2Vzc2lvbl91dGlsLmFkZFBlcnNpc3RlbnRBcnJheXNUb1RlbnNvckFycmF5TWFwKFxuICAgICAgICAgIHJ1bnRpbWUubm9kZXMsIGFjdGl2YXRpb25zKTtcbiAgICAgIHNlc3Npb25fdXRpbC5sb2FkSW5wdXRzRnJvbUZlZWREaWN0aW9uYXJ5VG9UZW5zb3JBcnJheU1hcChcbiAgICAgICAgICBmZWVkLCBhY3RpdmF0aW9ucywgdGhpcy5tYXRoKTtcblxuICAgICAgcnVudGltZS5vcGVyYXRpb25zLmZvckVhY2gob3AgPT4gb3AuZmVlZEZvcndhcmQodGhpcy5tYXRoLCBhY3RpdmF0aW9ucykpO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gdGVuc29ycy5tYXAoeCA9PiBhY3RpdmF0aW9ucy5nZXQoeCkpO1xuICAgICAgdGVuc29ycy5mb3JFYWNoKHggPT4gYWN0aXZhdGlvbnMuZGVsZXRlKHgpKTtcblxuICAgICAgc2Vzc2lvbl91dGlsLnJlbGVhc2VGZWVkRGljdGlvbmFyeUlucHV0c0Zyb21UZW5zb3JBcnJheU1hcChcbiAgICAgICAgICBmZWVkLCBhY3RpdmF0aW9ucywgdGhpcy5tYXRoKTtcblxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXZhbHVhdGUgYSB0ZW5zb3IsIHVzaW5nIHRoZSBwcm92aWRlZCBmZWVkIGVudHJpZXMgdG8gcHJvdmlkZVxuICAgKiB1cHN0cmVhbSBOREFycmF5IGlucHV0LlxuICAgKlxuICAgKiBAcGFyYW0gdGVuc29yIFRoZSB0ZW5zb3IgdG8gZXZhbHVhdGUuXG4gICAqIEBwYXJhbSBmZWVkRW50cmllcyBMaXN0IG9mIGBGZWVkRW50cnlgIHRvIHJlYWQgd2hlbiByZXBsYWNpbmcgZ3JhcGhcbiAgICogdGVuc29ycyB3aXRoIE5EQXJyYXlzLlxuICAgKiBAcmV0dXJuIFRoZSBjb21wdXRlZCB2YWx1ZSBvZiB0aGUgdGVuc29yLlxuICAgKi9cbiAgZXZhbCh0ZW5zb3I6IFRlbnNvciwgZmVlZEVudHJpZXM6IEZlZWRFbnRyeVtdKTogTkRBcnJheSB7XG4gICAgcmV0dXJuIHRoaXMuZXZhbEFsbChbdGVuc29yXSwgZmVlZEVudHJpZXMpWzBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYWlucyBhIGJhdGNoLlxuICAgKiBSZXR1cm5zIGEgcmVkdWNlZCBjb3N0IGlmIHRoZSBjb3N0UmVkdWN0aW9uIHBhcmFtZXRlciBpcyBzZXQuXG4gICAqIFdoZW4gdXNpbmcgYSBgTkRBcnJheU1hdGhgIG9iamVjdCBpbiBzYWZlIG1vZGUgdGhpcyBtdXN0IGJlIHVzZWQgaW4gYVxuICAgKiBtYXRoLnNjb3BlKCkuXG4gICAqIEBwYXJhbSBjb3N0VGVuc29yIEEgdGVuc29yIHJlcHJlc2VudGluZyB0aGUgY29zdCB0byBvcHRpbWl6ZS4gU2hvdWxkIGJlIGFcbiAgICogc2NhbGFyLlxuICAgKiBAcGFyYW0gZmVlZEVudHJpZXMgRmVlZCBlbnRyaWVzIGZvciB0aGlzIHRyYWluIHJ1bi4gUHJvdmlkZXMgaW5wdXRzLlxuICAgKiBAcGFyYW0gYmF0Y2hTaXplIEJhdGNoIHNpemUgZm9yIHRoaXMgdHJhaW4gbG9vcC5cbiAgICogQHBhcmFtIG9wdGltaXplciBBbiBvcHRpbWl6ZXIgdG8gcGVyZm9ybSB3ZWlnaHQgdXBkYXRlcy5cbiAgICogQHBhcmFtIGNvc3RSZWR1Y3Rpb24gQW4gb3B0aW9uIHRvIGFsbG93IHRoZSB1c2VyIHRvIGdldCBhIHN1bW1lZCwgYXZlcmFnZWQsXG4gICAqIG9yIG5vIGNvc3QgYmFjay5cbiAgICogQHJldHVybiBUaGUgcmVkdWNlZCBjb3N0LCBpZiBjb3N0IHJlZHVjdGlvbiBpcyBub3QgTk9ORS4gVGhlIHVzZXIgaXNcbiAgICogcmVzcG9uc2libGUgZm9yIGRpc3Bvc2luZyB0aGUgY29zdCBOREFycmF5IGJldHdlZW4gdHJhaW4gbG9vcHMuXG4gICAqL1xuICB0cmFpbihcbiAgICAgIGNvc3RUZW5zb3I6IFRlbnNvciwgZmVlZEVudHJpZXM6IEZlZWRFbnRyeVtdLCBiYXRjaFNpemU6IG51bWJlcixcbiAgICAgIG9wdGltaXplcjogT3B0aW1pemVyLCBjb3N0UmVkdWN0aW9uID0gQ29zdFJlZHVjdGlvbi5OT05FKTogU2NhbGFyIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgdXRpbC5pc1NjYWxhclNoYXBlKGNvc3RUZW5zb3Iuc2hhcGUpLFxuICAgICAgICAnQ29zdCB0ZW5zb3IgZm9yIHRyYWluaW5nIG11c3QgYmUgYSBzY2FsYXIgdmFsdWUuJyk7XG5cbiAgICBpZiAodGhpcy5wcmV2QmF0Y2hTaXplICE9PSBiYXRjaFNpemUpIHtcbiAgICAgIHRoaXMucHJldkJhdGNoU2l6ZSA9IGJhdGNoU2l6ZTtcbiAgICAgIHRoaXMuYmF0Y2hTaXplU2NhbGFyID0gU2NhbGFyLm5ldyhiYXRjaFNpemUpO1xuICAgIH1cblxuICAgIGNvbnN0IGZlZWQgPSBuZXcgRmVlZERpY3Rpb25hcnkoZmVlZEVudHJpZXMpO1xuICAgIHNlc3Npb25fdXRpbC50aHJvd0lmRmVlZERpY3Rpb25hcnlDb250YWluc05EQXJyYXlzKGZlZWQpO1xuXG4gICAgY29uc3QgcnVudGltZSA9IHRoaXMuZ2V0T3JDcmVhdGVSdW50aW1lKFtjb3N0VGVuc29yXSwgZmVlZCk7XG4gICAgY29uc3QgaW5mZXJlbmNlT3BlcmF0aW9ucyA9IHJ1bnRpbWUub3BlcmF0aW9ucztcbiAgICBjb25zdCBiYWNrUHJvcE9wZXJhdGlvbnMgPSBydW50aW1lLm9wZXJhdGlvbnMuc2xpY2UoKS5yZXZlcnNlKCk7XG4gICAgY29uc3QgYWN0aXZhdGlvbnMgPSB0aGlzLmFjdGl2YXRpb25BcnJheU1hcDtcbiAgICBjb25zdCBncmFkaWVudHMgPSB0aGlzLmdyYWRpZW50QXJyYXlNYXA7XG4gICAgZ3JhZGllbnRzLnNldChjb3N0VGVuc29yLCB0aGlzLm9uZVNjYWxhcik7XG5cbiAgICBzZXNzaW9uX3V0aWwuYWRkUGVyc2lzdGVudEFycmF5c1RvVGVuc29yQXJyYXlNYXAoXG4gICAgICAgIHJ1bnRpbWUubm9kZXMsIGFjdGl2YXRpb25zKTtcblxuICAgIG9wdGltaXplci5iZWZvcmVCYXRjaChcbiAgICAgICAgdGhpcy5tYXRoLCBiYXRjaFNpemUsIHJ1bnRpbWUsIGFjdGl2YXRpb25zLCBncmFkaWVudHMpO1xuXG4gICAgcmV0dXJuIHRoaXMubWF0aC5zY29wZSgoa2VlcCwgdHJhY2spID0+IHtcbiAgICAgIGxldCBjb3N0ID0gdHJhY2soU2NhbGFyLm5ldygwKSk7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmF0Y2hTaXplOyArK2kpIHtcbiAgICAgICAgc2Vzc2lvbl91dGlsLmRpc3Bvc2VBbmRJbml0aWFsaXplT3BlcmF0aW9uT3V0cHV0cyhcbiAgICAgICAgICAgIHJ1bnRpbWUubm9kZXMsIGFjdGl2YXRpb25zKTtcbiAgICAgICAgc2Vzc2lvbl91dGlsLmRpc3Bvc2VBbmRJbml0aWFsaXplT3BlcmF0aW9uSW5wdXRHcmFkaWVudHMoXG4gICAgICAgICAgICBydW50aW1lLm5vZGVzLCBncmFkaWVudHMpO1xuICAgICAgICBzZXNzaW9uX3V0aWwuZGlzcG9zZVRyYW5zaWVudE9wZXJhdGlvbkFycmF5cyhcbiAgICAgICAgICAgIHJ1bnRpbWUub3BlcmF0aW9ucywgYWN0aXZhdGlvbnMsIGdyYWRpZW50cyk7XG5cbiAgICAgICAgc2Vzc2lvbl91dGlsLmxvYWRJbnB1dHNGcm9tRmVlZERpY3Rpb25hcnlUb1RlbnNvckFycmF5TWFwKFxuICAgICAgICAgICAgZmVlZCwgYWN0aXZhdGlvbnMsIHRoaXMubWF0aCk7XG5cbiAgICAgICAgaW5mZXJlbmNlT3BlcmF0aW9ucy5mb3JFYWNoKFxuICAgICAgICAgICAgb3AgPT4gb3AuZmVlZEZvcndhcmQodGhpcy5tYXRoLCBhY3RpdmF0aW9ucykpO1xuICAgICAgICBiYWNrUHJvcE9wZXJhdGlvbnMuZm9yRWFjaChcbiAgICAgICAgICAgIG9wID0+IG9wLmJhY2tQcm9wKHRoaXMubWF0aCwgYWN0aXZhdGlvbnMsIGdyYWRpZW50cykpO1xuXG4gICAgICAgIG9wdGltaXplci5hZnRlckV4YW1wbGUodGhpcy5tYXRoLCBydW50aW1lLCBhY3RpdmF0aW9ucywgZ3JhZGllbnRzKTtcblxuICAgICAgICBzZXNzaW9uX3V0aWwucmVsZWFzZUZlZWREaWN0aW9uYXJ5SW5wdXRzRnJvbVRlbnNvckFycmF5TWFwKFxuICAgICAgICAgICAgZmVlZCwgYWN0aXZhdGlvbnMsIHRoaXMubWF0aCk7XG5cbiAgICAgICAgY29zdCA9IHRoaXMudXBkYXRlQ29zdEZvckV4YW1wbGUoXG4gICAgICAgICAgICBjb3N0LCBhY3RpdmF0aW9ucy5nZXQoY29zdFRlbnNvciksIGNvc3RSZWR1Y3Rpb24pO1xuICAgICAgfVxuXG4gICAgICBvcHRpbWl6ZXIuYWZ0ZXJCYXRjaChcbiAgICAgICAgICB0aGlzLm1hdGgsIGJhdGNoU2l6ZSwgcnVudGltZSwgYWN0aXZhdGlvbnMsIGdyYWRpZW50cyk7XG5cbiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUNvc3RGb3JCYXRjaChjb3N0LCBjb3N0UmVkdWN0aW9uKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ29zdEZvckV4YW1wbGUoXG4gICAgICB0b3RhbENvc3Q6IFNjYWxhciwgY3VyckNvc3Q6IFNjYWxhcixcbiAgICAgIGNvc3RSZWR1Y3Rpb246IENvc3RSZWR1Y3Rpb24pOiBTY2FsYXIge1xuICAgIGlmIChjb3N0UmVkdWN0aW9uID09PSBDb3N0UmVkdWN0aW9uLk1FQU4gfHxcbiAgICAgICAgY29zdFJlZHVjdGlvbiA9PT0gQ29zdFJlZHVjdGlvbi5TVU0pIHtcbiAgICAgIHJldHVybiB0aGlzLm1hdGguYWRkKHRvdGFsQ29zdCwgY3VyckNvc3QpO1xuICAgIH1cbiAgICByZXR1cm4gdG90YWxDb3N0O1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVDb3N0Rm9yQmF0Y2godG90YWxDb3N0OiBTY2FsYXIsIGNvc3RSZWR1Y3Rpb246IENvc3RSZWR1Y3Rpb24pOlxuICAgICAgU2NhbGFyIHtcbiAgICBpZiAoY29zdFJlZHVjdGlvbiA9PT0gQ29zdFJlZHVjdGlvbi5NRUFOKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXRoLmRpdmlkZSh0b3RhbENvc3QsIHRoaXMuYmF0Y2hTaXplU2NhbGFyKTtcbiAgICB9XG4gICAgcmV0dXJuIHRvdGFsQ29zdDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0T3JDcmVhdGVSdW50aW1lKHRlbnNvcnM6IFRlbnNvcltdLCBmZWVkOiBGZWVkRGljdGlvbmFyeSk6XG4gICAgICBTZXNzaW9uUnVudGltZSB7XG4gICAgY29uc3Qga2V5ID0gdGhpcy5tYWtlUnVudGltZUNhY2hlS2V5KHRlbnNvcnMsIGZlZWQpO1xuICAgIGxldCBydW50aW1lID0gdGhpcy5ydW50aW1lQ2FjaGVba2V5XTtcbiAgICBpZiAocnVudGltZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBsZXQgbm9kZXMgPVxuICAgICAgICAgIHNlc3Npb25fdXRpbC5nZXRPcmRlcmVkRXZhbHVhdGlvblNldEZyb21FdmFsVGVuc29yKHRlbnNvcnMsIGZlZWQpO1xuICAgICAgLy8gSW4gaW5mZXJlbmNlIG1vZGUgc3BsaXQgbm9kZXMgYXJlIG5vdCBuZWVkZWQsIGJ1dCB0aGVpciBjb3N0IGlzXG4gICAgICAvLyBuZWdsaWdpYmxlLCBhbmQgYWx3YXlzIGFkZGluZyB0aGVtIGluIGFsbG93cyBmb3IgY2FjaGluZyBvZiAxIHJ1bnRpbWVcbiAgICAgIC8vIGZvciBib3RoIHRyYWluL2V2YWwuXG4gICAgICBub2RlcyA9IHNlc3Npb25fdXRpbC5hZGRTcGxpdE5vZGVzKG5vZGVzKTtcbiAgICAgIHNlc3Npb25fdXRpbC5yZW1vdmVGZWVkRGljdGlvbmFyeU5vZGVzRnJvbUV2YWx1YXRpb25TZXQoZmVlZCwgbm9kZXMpO1xuICAgICAgc2Vzc2lvbl91dGlsLnRocm93RXJyb3JJZkV2YWx1YXRpb25TZXRDb250YWluc1BsYWNlaG9sZGVyTm9kZXMobm9kZXMpO1xuICAgICAgY29uc3Qgb3BlcmF0aW9ucyA9IG9wZXJhdGlvbl9lbWl0dGVyLmVtaXRGcm9tR3JhcGhOb2Rlcyhub2Rlcyk7XG4gICAgICBydW50aW1lID0ge25vZGVzLCBvcGVyYXRpb25zfTtcbiAgICAgIHRoaXMucnVudGltZUNhY2hlW2tleV0gPSBydW50aW1lO1xuICAgIH1cblxuICAgIHJldHVybiBydW50aW1lO1xuICB9XG5cbiAgcHJpdmF0ZSBtYWtlUnVudGltZUNhY2hlS2V5KHRlbnNvcnM6IFRlbnNvcltdLCBmZWVkOiBGZWVkRGljdGlvbmFyeSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRlbnNvcnMubWFwKHggPT4geC5pZCkuc29ydCgpLmpvaW4oJ18nKSArICdfXycgK1xuICAgICAgICBPYmplY3Qua2V5cyhmZWVkLmRpY3QpLnNvcnQoKS5qb2luKCdfJyk7XG4gIH1cblxuICAvKiogTWFwcyBlYWNoIG91dHB1dCB0ZW5zb3Igb2YgdGhlIGdyYXBoIHRvIGl0cyBhY3RpdmF0aW9uIHZhbHVlLiAqL1xuICBhY3RpdmF0aW9uQXJyYXlNYXAgPSBuZXcgVGVuc29yQXJyYXlNYXAoKTtcbiAgLyoqIE1hcHMgZWFjaCB0ZW5zb3Igb2YgdGhlIGdyYXBoIHRvIGl0cyBkZXJpdmF0aXZlIHdydCB0aGUgY29zdCBmdW5jdGlvbi4gKi9cbiAgZ3JhZGllbnRBcnJheU1hcCA9IG5ldyBUZW5zb3JBcnJheU1hcCgpO1xuICBwcml2YXRlIHJ1bnRpbWVDYWNoZToge1trZXk6IHN0cmluZ106IFNlc3Npb25SdW50aW1lfSA9IHt9O1xuICAvKiogQmF0Y2ggc2l6ZSBvZiB0aGUgcHJldmlvdXMgdHJhaW4oKSBjYWxsLiAqL1xuICBwcml2YXRlIHByZXZCYXRjaFNpemU6IG51bWJlcjtcbiAgcHJpdmF0ZSBiYXRjaFNpemVTY2FsYXI6IFNjYWxhcjtcbiAgcHJpdmF0ZSBvbmVTY2FsYXIgPSBTY2FsYXIubmV3KDEpO1xufVxuXG4vKiogQGhpZGRlbiAqL1xuZXhwb3J0IHR5cGUgU2Vzc2lvblJ1bnRpbWUgPSB7XG4gIG5vZGVzOiBOb2RlW107IG9wZXJhdGlvbnM6IE9wZXJhdGlvbltdO1xufTtcbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtDb25zdGFudE5vZGUsIE5vZGUsIFBsYWNlaG9sZGVyTm9kZSwgU3BsaXROb2RlLCBUZW5zb3IsIFZhcmlhYmxlTm9kZX0gZnJvbSAnLi9ncmFwaCc7XG5pbXBvcnQgKiBhcyBncmFwaF91dGlsIGZyb20gJy4vZ3JhcGhfdXRpbCc7XG5pbXBvcnQge0lucHV0UHJvdmlkZXJ9IGZyb20gJy4vaW5wdXRfcHJvdmlkZXInO1xuaW1wb3J0IHtOREFycmF5TWF0aH0gZnJvbSAnLi9tYXRoL21hdGgnO1xuaW1wb3J0IHtOREFycmF5fSBmcm9tICcuL21hdGgvbmRhcnJheSc7XG5pbXBvcnQge09wZXJhdGlvbn0gZnJvbSAnLi9vcHMvb3AnO1xuaW1wb3J0IHtGZWVkRGljdGlvbmFyeX0gZnJvbSAnLi9zZXNzaW9uJztcbmltcG9ydCB7VGVuc29yQXJyYXlNYXB9IGZyb20gJy4vdGVuc29yX2FycmF5X21hcCc7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gJy4vdXRpbCc7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiBncmFwaCBub2RlcyB0aGF0IHN0b3AgdHJhdmVyc2FsLCBiYXNlZCBvbiB0aGUgY29udGVudHNcbiAqIG9mIHRoZSBwcm92aWRlZCBGZWVkRGljdGlvbmFyeS4gVGhpcyBpcyBhIHNpbXBsZSAxOjEgZXh0cmFjdGlvbiBvZiBub2RlcyBmcm9tXG4gKiB0aGUgRmVlZERpY3Rpb25hcnkuXG4gKlxuICogQGhpZGRlblxuICogQHBhcmFtIGZlZWREaWN0aW9uYXJ5IFRoZSBGZWVkRGljdGlvbmFyeSB0byBzY2FuIGZvciB0ZXJtaW5hdGlvbiBub2Rlcy5cbiAqIEByZXR1cm4gYW4gYXJyYXkgb2YgTm9kZXMgd2hpY2ggaGFsdCB0cmF2ZXJzYWwgd2hlbiB2aXNpdGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGVybWluYXRpbmdOb2Rlc0Zyb21GZWVkRGljdGlvbmFyeShcbiAgICBmZWVkRGljdGlvbmFyeTogRmVlZERpY3Rpb25hcnkpOiBOb2RlW10ge1xuICByZXR1cm4gT2JqZWN0LmtleXMoZmVlZERpY3Rpb25hcnkuZGljdClcbiAgICAgIC5tYXAodGVuc29ySUQgPT4gZmVlZERpY3Rpb25hcnkuZGljdFsrdGVuc29ySURdLnRlbnNvci5ub2RlKTtcbn1cblxuLyoqXG4gKiBHaXZlbiBhIHRlbnNvciBhbmQgYSBmZWVkIGRpY3Rpb25hcnksIGNvbXB1dGVzIHRoZSBzZXQgb2Ygbm9kZXMgdGhhdCBuZWVkIHRvXG4gKiBiZSBldmFsdWF0ZWQgdG8gcGVyZm9ybSBpbmZlcmVuY2UuXG4gKlxuICogQGhpZGRlblxuICogQHBhcmFtIGV2YWxUZW5zb3JzIFRoZSBsaXN0IG9mIHRlbnNvcnMgdG8gZXZlbnR1YWxseSBiZSBldmFsdWF0ZWQuXG4gKiBAcGFyYW0gZmVlZERpY3Rpb25hcnkgVGhlIHBvcHVsYXRlZCBmZWVkIGRpY3Rpb25hcnkuXG4gKiBAcmV0dXJuIFRoZSBzZXQgb2Ygbm9kZXMgdG8gZXZhbHVhdGUsIGluIGV2YWx1YXRpb24gb3JkZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcmRlcmVkRXZhbHVhdGlvblNldEZyb21FdmFsVGVuc29yKFxuICAgIGV2YWxUZW5zb3JzOiBUZW5zb3JbXSwgZmVlZERpY3Rpb25hcnk6IEZlZWREaWN0aW9uYXJ5KTogTm9kZVtdIHtcbiAgY29uc3QgdGVybWluYXRpbmdOb2RlcyA9XG4gICAgICBnZXRUZXJtaW5hdGluZ05vZGVzRnJvbUZlZWREaWN0aW9uYXJ5KGZlZWREaWN0aW9uYXJ5KTtcbiAgY29uc3QgZXZhbE5vZGVzID0gZXZhbFRlbnNvcnMubWFwKHggPT4geC5ub2RlKTtcbiAgY29uc3QgdW5vcmRlcmVkRXZhbHVhdGlvblNldCA9XG4gICAgICBncmFwaF91dGlsLmdldFVub3JkZXJlZEV2YWx1YXRpb25TZXQoZXZhbE5vZGVzLCB0ZXJtaW5hdGluZ05vZGVzKTtcbiAgY29uc3Qgb3JkZXJlZEV2YWx1YXRpb25TZXQgPVxuICAgICAgZ3JhcGhfdXRpbC5nZXRPcmRlcmVkRXZhbHVhdGlvblNldCh1bm9yZGVyZWRFdmFsdWF0aW9uU2V0KTtcbiAgcmV0dXJuIG9yZGVyZWRFdmFsdWF0aW9uU2V0O1xufVxuXG4vKipcbiAqIFRyYXZlcnNlcyB0aGUgcHJvdmlkZWQgbm9kZSBhcnJheSBhbmQgYWRkcyBhbGwgcGVyc2lzdGVudCBub2RlIE5EQXJyYXlzIHRvXG4gKiB0aGUgcHJvdmlkZWQgVGVuc29yQXJyYXlNYXAuXG4gKlxuICogQGhpZGRlblxuICogQHBhcmFtIGV2YWx1YXRpb25TZXQgVGhlIGFycmF5IG9mIG5vZGVzIHRvIHNjYW4uXG4gKiBAcGFyYW0gdGVuc29yQXJyYXlNYXAgVGhlIG1hcCB0aGF0IHJlY2VpdmVzIHRoZSBOREFycmF5cyBmcm9tIHBlcnNpc3RlbnRcbiAqIG5vZGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUGVyc2lzdGVudEFycmF5c1RvVGVuc29yQXJyYXlNYXAoXG4gICAgZXZhbHVhdGlvblNldDogTm9kZVtdLCB0ZW5zb3JBcnJheU1hcDogVGVuc29yQXJyYXlNYXApIHtcbiAgZXZhbHVhdGlvblNldC5mb3JFYWNoKG5vZGUgPT4ge1xuICAgIGlmIChub2RlIGluc3RhbmNlb2YgVmFyaWFibGVOb2RlIHx8IG5vZGUgaW5zdGFuY2VvZiBDb25zdGFudE5vZGUpIHtcbiAgICAgIHRlbnNvckFycmF5TWFwLnNldChub2RlLm91dHB1dCwgbm9kZS5kYXRhKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFZhcmlhYmxlTm9kZXNGcm9tRXZhbHVhdGlvblNldChldmFsdWF0aW9uU2V0OiBOb2RlW10pOlxuICAgIFZhcmlhYmxlTm9kZVtdIHtcbiAgY29uc3Qgbm9kZXM6IFZhcmlhYmxlTm9kZVtdID0gW107XG4gIGV2YWx1YXRpb25TZXQuZm9yRWFjaChub2RlID0+IHtcbiAgICBpZiAobm9kZSBpbnN0YW5jZW9mIFZhcmlhYmxlTm9kZSkge1xuICAgICAgbm9kZXMucHVzaChub2RlKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gbm9kZXM7XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgZnVuY3Rpb24gdGhyb3dJZkZlZWREaWN0aW9uYXJ5Q29udGFpbnNOREFycmF5cyhcbiAgICBmZWVkRGljdGlvbmFyeTogRmVlZERpY3Rpb25hcnkpIHtcbiAgT2JqZWN0LmtleXMoZmVlZERpY3Rpb25hcnkuZGljdCkuZm9yRWFjaCh0ZW5zb3JJRCA9PiB7XG4gICAgaWYgKGZlZWREaWN0aW9uYXJ5LmRpY3RbK3RlbnNvcklEXS5kYXRhIGluc3RhbmNlb2YgTkRBcnJheSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICd0cmFpbmluZyByZXF1aXJlcyBGZWVkRGljdGlvbmFyeSBlbnRyaWVzIHRvIGJlIElucHV0UHJvdmlkZXJzJyArXG4gICAgICAgICAgJ2FuZCBub3QgTkRBcnJheXMuJyk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2FkSW5wdXRzRnJvbUZlZWREaWN0aW9uYXJ5VG9UZW5zb3JBcnJheU1hcChcbiAgICBiYXRjaEZlZWQ6IEZlZWREaWN0aW9uYXJ5LCBhY3RpdmF0aW9uczogVGVuc29yQXJyYXlNYXAsIG1hdGg6IE5EQXJyYXlNYXRoKSB7XG4gIE9iamVjdC5rZXlzKGJhdGNoRmVlZC5kaWN0KS5mb3JFYWNoKHRlbnNvcklEID0+IHtcbiAgICBjb25zdCBmZWVkRW50cnkgPSBiYXRjaEZlZWQuZGljdFsrdGVuc29ySURdO1xuXG4gICAgbGV0IGRhdGE6IE5EQXJyYXk7XG4gICAgaWYgKGZlZWRFbnRyeS5kYXRhIGluc3RhbmNlb2YgTkRBcnJheSkge1xuICAgICAgZGF0YSA9IGZlZWRFbnRyeS5kYXRhIGFzIE5EQXJyYXk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHByb3ZpZGVyID0gZmVlZEVudHJ5LmRhdGEgYXMgSW5wdXRQcm92aWRlcjtcbiAgICAgIGRhdGEgPSBwcm92aWRlci5nZXROZXh0Q29weShtYXRoKTtcbiAgICB9XG5cbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgdXRpbC5hcnJheXNFcXVhbChmZWVkRW50cnkudGVuc29yLnNoYXBlLCBkYXRhLnNoYXBlKSxcbiAgICAgICAgYEVycm9yIGxvYWRpbmcgRmVlZEVudHJ5OiBmZWVkaW5nIE5EQXJyYXkgb2Ygc2hhcGUgJHtkYXRhLnNoYXBlfSBgICtcbiAgICAgICAgICAgIGBkb2VzIG5vdCBtYXRjaCBUZW5zb3IgKGlkOiAke2ZlZWRFbnRyeS50ZW5zb3IuaWR9KSBzaGFwZTogYCArXG4gICAgICAgICAgICBgJHtmZWVkRW50cnkudGVuc29yLnNoYXBlfS5gKTtcbiAgICBhY3RpdmF0aW9ucy5zZXQoZmVlZEVudHJ5LnRlbnNvciwgZGF0YSk7XG4gIH0pO1xufVxuXG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVsZWFzZUZlZWREaWN0aW9uYXJ5SW5wdXRzRnJvbVRlbnNvckFycmF5TWFwKFxuICAgIGJhdGNoRmVlZDogRmVlZERpY3Rpb25hcnksIGFjdGl2YXRpb25zOiBUZW5zb3JBcnJheU1hcCwgbWF0aDogTkRBcnJheU1hdGgpIHtcbiAgT2JqZWN0LmtleXMoYmF0Y2hGZWVkLmRpY3QpLmZvckVhY2godGVuc29ySUQgPT4ge1xuICAgIGNvbnN0IGZlZWRFbnRyeSA9IGJhdGNoRmVlZC5kaWN0Wyt0ZW5zb3JJRF07XG5cbiAgICBpZiAoIShmZWVkRW50cnkuZGF0YSBpbnN0YW5jZW9mIE5EQXJyYXkpKSB7XG4gICAgICBjb25zdCBwcm92aWRlciA9IGZlZWRFbnRyeS5kYXRhIGFzIElucHV0UHJvdmlkZXI7XG5cbiAgICAgIGNvbnN0IGZlZWRFbnRyeUFycmF5ID0gYWN0aXZhdGlvbnMuZ2V0KGZlZWRFbnRyeS50ZW5zb3IpO1xuICAgICAgcHJvdmlkZXIuZGlzcG9zZUNvcHkobWF0aCwgZmVlZEVudHJ5QXJyYXkpO1xuICAgIH1cblxuICAgIGFjdGl2YXRpb25zLmRlbGV0ZShmZWVkRW50cnkudGVuc29yKTtcbiAgfSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgbm9kZXMgZnJvbSB0aGUgcHJvdmlkZWQgTm9kZSBhcnJheSB3aG9zZSBvdXRwdXQgdGVuc29ycyBleGlzdCBpblxuICogdGhlIHByb3ZpZGVkIGZlZWQgZGljdGlvbmFyeS4gQWZ0ZXIgY2FsbGluZyB0aGlzLCB0aGUgTm9kZSBhcnJheSBzaG91bGRcbiAqIGNvbnRhaW4gemVybyBQbGFjZWhvbGRlciBub2Rlcywgb3IgdGhlIHVzZXIgaGFzIGZhaWxlZCB0byBwcm92aWRlIGEgZmVlZCBmb3JcbiAqIGEgUGxhY2Vob2xkZXIgbm9kZS5cbiAqXG4gKiBAaGlkZGVuXG4gKiBAcGFyYW0gZmVlZERpY3Rpb25hcnkgVGhlIEZlZWREaWN0aW9uYXJ5IHRvIHByb2Nlc3MuXG4gKiBAcGFyYW0gZXZhbHVhdGlvblNldCBUaGUgYXJyYXkgb2Ygbm9kZXMgdG8gcmVtb3ZlIGlucHV0IG5vZGVzIGZyb20uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGZWVkRGljdGlvbmFyeU5vZGVzRnJvbUV2YWx1YXRpb25TZXQoXG4gICAgZmVlZERpY3Rpb25hcnk6IEZlZWREaWN0aW9uYXJ5LCBldmFsdWF0aW9uU2V0OiBOb2RlW10pIHtcbiAgbGV0IGkgPSAwO1xuICB3aGlsZSAoaSA8IGV2YWx1YXRpb25TZXQubGVuZ3RoKSB7XG4gICAgY29uc3Qgbm9kZSA9IGV2YWx1YXRpb25TZXRbaV07XG4gICAgaWYgKGZlZWREaWN0aW9uYXJ5LmRpY3Rbbm9kZS5vdXRwdXQuaWRdICE9IG51bGwpIHtcbiAgICAgIGV2YWx1YXRpb25TZXQuc3BsaWNlKGksIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICArK2k7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRGlzcG9zZXMgYW55IE5EQXJyYXlzIG9uIHRoZSB0ZW5zb3JBcnJheU1hcCBmcm9tIG9wZXJhdGlvbiBvdXRwdXRzIGFuZCBzZXRzXG4gKiB0aGUgdmFsdWUgdG8gbnVsbC5cbiAqXG4gKiBAaGlkZGVuXG4gKiBAcGFyYW0gZXZhbHVhdGlvblNldCBUaGUgc2V0IG9mIG5vZGVzIHRvIGJlIGV2YWx1YXRlZC5cbiAqIEBwYXJhbSB0ZW5zb3JBcnJheU1hcCBUaGUgbWFwIHRvIGRpc3Bvc2UgYW5kIGluaXRpYWxpemUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwb3NlQW5kSW5pdGlhbGl6ZU9wZXJhdGlvbk91dHB1dHMoXG4gICAgZXZhbHVhdGlvblNldDogTm9kZVtdLCB0ZW5zb3JBcnJheU1hcDogVGVuc29yQXJyYXlNYXApIHtcbiAgZXZhbHVhdGlvblNldC5mb3JFYWNoKG5vZGUgPT4ge1xuICAgIGlmICghZ3JhcGhfdXRpbC5pc0lucHV0Tm9kZShub2RlKSkge1xuICAgICAgaWYgKCFncmFwaF91dGlsLmlzUGFzc3Rocm91Z2hOb2RlKG5vZGUsIHRlbnNvckFycmF5TWFwKSkge1xuICAgICAgICB0ZW5zb3JBcnJheU1hcC5kaXNwb3NlQXJyYXkobm9kZS5vdXRwdXQpO1xuICAgICAgfVxuICAgICAgdGVuc29yQXJyYXlNYXAuc2V0KG5vZGUub3V0cHV0LCBudWxsKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIERpc3Bvc2VzIGFueSBOREFycmF5cyBvbiB0aGUgdGVuc29yQXJyYXlNYXAgZnJvbSBkZXJpdmF0aXZlcyBvZiBvcGVyYXRpb25cbiAqIGlucHV0cyBhbmQgc2V0cyB0aGUgdmFsdWUgdG8gbnVsbC5cbiAqXG4gKiBAaGlkZGVuXG4gKiBAcGFyYW0gZXZhbHVhdGlvblNldCBUaGUgc2V0IG9mIG5vZGVzIHRvIGJlIGV2YWx1YXRlZC5cbiAqIEBwYXJhbSBncmFkaWVudHMgVGhlIGdyYWRpZW50IG1hcCB0byBkaXNwb3NlIGFuZCBpbml0aWFsaXplLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzcG9zZUFuZEluaXRpYWxpemVPcGVyYXRpb25JbnB1dEdyYWRpZW50cyhcbiAgICBldmFsdWF0aW9uU2V0OiBOb2RlW10sIGdyYWRpZW50czogVGVuc29yQXJyYXlNYXApIHtcbiAgZXZhbHVhdGlvblNldC5mb3JFYWNoKG5vZGUgPT4ge1xuICAgIE9iamVjdC5rZXlzKG5vZGUuaW5wdXRzKS5mb3JFYWNoKGlucHV0TmFtZSA9PiB7XG4gICAgICBjb25zdCBpbnB1dCA9IG5vZGUuaW5wdXRzW2lucHV0TmFtZV07XG4gICAgICBpZiAoZ3JhZGllbnRzLmdldChpbnB1dCwgdHJ1ZSkgIT09IGdyYWRpZW50cy5nZXQobm9kZS5vdXRwdXQsIHRydWUpKSB7XG4gICAgICAgIGdyYWRpZW50cy5kaXNwb3NlQXJyYXkoaW5wdXQpO1xuICAgICAgfVxuICAgICAgZ3JhZGllbnRzLnNldChpbnB1dCwgbnVsbCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5cbi8qKlxuICogQ2FsbHMgdW5kZXJseWluZyBvcGVyYXRpb24gZGlzcG9zZVRyYW5zaWVudEFycmF5cyBtZXRob2RzIHdoaWNoIGNsZWFuIHVwIGFueVxuICogTkRBcnJheXMgd2hpY2ggb3BlcmF0aW9ucyBtYXkgaGF2ZSBjcmVhdGVkIGR1cmluZyBhIHJ1bi5cbiAqXG4gKiBAaGlkZGVuXG4gKiBAcGFyYW0gb3BlcmF0aW9uTm9kZXMgVGhlIGFycmF5IG9mIE5vZGVzIHRvIHRyYXZlcnNlLlxuICogQHBhcmFtIG91dHB1dFRlbnNvciBUaGUgdGVuc29yIGJlaW5nIGV2YWx1YXRlZC5cbiAqIEBwYXJhbSBtYXAgVGhlIFRlbnNvckFycmF5TWFwIHRvIG9wZXJhdGUgb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwb3NlVHJhbnNpZW50T3BlcmF0aW9uQXJyYXlzKFxuICAgIG9wZXJhdGlvbnM6IE9wZXJhdGlvbltdLCBhY3RpdmF0aW9uczogVGVuc29yQXJyYXlNYXAsXG4gICAgZ3JhZGllbnRzOiBUZW5zb3JBcnJheU1hcCkge1xuICBvcGVyYXRpb25zLmZvckVhY2gob3AgPT4gb3AuZGlzcG9zZVRyYW5zaWVudEFycmF5cyhhY3RpdmF0aW9ucywgZ3JhZGllbnRzKSk7XG59XG5cbi8qKlxuICogSXRlcmF0ZXMgdGhlIHByb3ZpZGVkIE5vZGUgYXJyYXkgYW5kIHRocm93cyBhbiBleGNlcHRpb24gaWYgdGhlcmUgYXJlIGFueVxuICogUGxhY2Vob2xkZXIgbm9kZXMgcHJlc2VudC4gQ2FsbCBhZnRlciB0aGUgZXZhbHVhdGlvbiBzZXQgaGFzIGJlZW4gcHJ1bmVkIHdpdGhcbiAqIHRoZSBhY2NvbXBhbnlpbmcgRmVlZERpY3Rpb25hcnkgdG8gZW5zdXJlIHRoYXQgYWxsIGlucHV0cyBoYXZlIGJlZW4gcmVzb2x2ZWQuXG4gKlxuICogQGhpZGRlblxuICogQHBhcmFtIGV2YWx1YXRpb25TZXQgVGhlIGFycmF5IG9mIG5vZGVzIHRvIHNjYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0aHJvd0Vycm9ySWZFdmFsdWF0aW9uU2V0Q29udGFpbnNQbGFjZWhvbGRlck5vZGVzKFxuICAgIGV2YWx1YXRpb25TZXQ6IE5vZGVbXSkge1xuICBldmFsdWF0aW9uU2V0LmZvckVhY2gobm9kZSA9PiB7XG4gICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBQbGFjZWhvbGRlck5vZGUpIHtcbiAgICAgIGNvbnN0IHNoYXBlID0gJ1snICsgbm9kZS5vdXRwdXQuc2hhcGUuam9pbignLCAnKSArICddJztcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnUGxhY2Vob2xkZXIgbm9kZSBcIicgKyBub2RlLm5hbWUgKyAnXCIgJyArIHNoYXBlICtcbiAgICAgICAgICAnIG5vdCBwcmVzZW50IGluIGZlZWQgZGljdGlvbmFyeS4nKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEluamVjdHMgc3BsaXRzIG5vZGVzIGFmdGVyIGV2ZXJ5IG5vZGUgdGhhdCBoYXMgbXVsdGlwbGUgY29uc3VtZXJzLlxuICpcbiAqIEBoaWRkZW5cbiAqIEBwYXJhbSBub2RlcyBUaGUgbm9kZSBsaXN0IGluIGV2YWx1YXRpb24gb3JkZXIuXG4gKiBAcmV0dXJuIFRoZSBub2RlIGxpc3Qgd2l0aCBzcGxpdCBub2RlcyBpbmplY3RlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFNwbGl0Tm9kZXMobm9kZXM6IE5vZGVbXSk6IE5vZGVbXSB7XG4gIGNvbnN0IG5vZGVJZFRvTnVtQ29uc3VtZXJzOiBudW1iZXJbXSA9IFtdO1xuICBjb25zdCBub2RlSWRUb1NwbGl0Tm9kZToge1tub2RlSWQ6IG51bWJlcl06IFNwbGl0Tm9kZX0gPSB7fTtcblxuICAvLyBGaW5kIG5vZGVzIHRoYXQgaGF2ZSBtdWx0aXBsZSBjb25zdW1lcnMuXG4gIG5vZGVzLmZvckVhY2gobm9kZSA9PiB7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG5vZGUuaW5wdXRzKTtcbiAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGNvbnN0IGlucHV0VGVuc29yID0gbm9kZS5pbnB1dHNba2V5XTtcbiAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRUZW5zb3Iubm9kZTtcbiAgICAgIGlmIChub2RlSWRUb051bUNvbnN1bWVyc1tpbnB1dC5pZF0gPT0gbnVsbCkge1xuICAgICAgICBub2RlSWRUb051bUNvbnN1bWVyc1tpbnB1dC5pZF0gPSAwO1xuICAgICAgfVxuICAgICAgbm9kZUlkVG9OdW1Db25zdW1lcnNbaW5wdXQuaWRdKys7XG4gICAgICBpZiAobm9kZUlkVG9OdW1Db25zdW1lcnNbaW5wdXQuaWRdID4gMSAmJlxuICAgICAgICAgIG5vZGVJZFRvU3BsaXROb2RlW2lucHV0LmlkXSA9PSBudWxsKSB7XG4gICAgICAgIG5vZGVJZFRvU3BsaXROb2RlW2lucHV0LmlkXSA9IG5ldyBTcGxpdE5vZGUoaW5wdXQuZ3JhcGgsIGlucHV0VGVuc29yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gSW5qZWN0IGEgc3BsaXQgbm9kZSBhZnRlciBlYWNoIG5vZGUgdGhhdCBoYXMgbXVsdGlwbGUgY29uc3VtZXJzIGFuZFxuICAvLyByZXdpcmUgdGhlIGlucHV0cyBvZiB0aGUgY29uc3VtZXJzIHRvIGNvbnN1bWUgdGhlIG91dHB1dCB0ZW5zb3JzIG9mIHRoZVxuICAvLyBzcGxpdCBub2RlIGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIG5vZGUuIEVhY2ggY29uc3VtZXIgY29uc3VtZXMgYVxuICAvLyBkaWZmZXJlbnQgb3V0cHV0IHRlbnNvciBzbyB0aGF0IGRlcml2YXRpdmVzIGFyZSBub3Qgb3ZlcndyaXR0ZW4uXG4gIC8vIHgtLT55ICBiZWNvbWVzIHgtLT5zLS0+eSAgIHdoZXJlIHkgY29uc3VtZXMgdGhlIDFzdCBvdXRwdXQgdGVuc29yIG9mIHNcbiAgLy8gfC0tPnogICAgICAgICAgICAgIHwtLT56ICAgICBhbmQgeiBjb25zdW1lcyB0aGUgMm5kIG91dHB1dCB0ZW5zb3Igb2Ygc1xuICBjb25zdCBuZXdOb2RlczogTm9kZVtdID0gW107XG4gIG5vZGVzLmZvckVhY2gobm9kZSA9PiB7XG4gICAgbmV3Tm9kZXMucHVzaChub2RlKTtcbiAgICBpZiAobm9kZS5pZCBpbiBub2RlSWRUb1NwbGl0Tm9kZSkge1xuICAgICAgY29uc3Qgc3BsaXROb2RlID0gbm9kZUlkVG9TcGxpdE5vZGVbbm9kZS5pZF07XG4gICAgICBuZXdOb2Rlcy5wdXNoKHNwbGl0Tm9kZSk7XG4gICAgfVxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhub2RlLmlucHV0cyk7XG4gICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBjb25zdCBpbnB1dFRlbnNvciA9IG5vZGUuaW5wdXRzW2tleV07XG4gICAgICBjb25zdCBpbnB1dElkID0gaW5wdXRUZW5zb3Iubm9kZS5pZDtcbiAgICAgIGlmIChpbnB1dElkIGluIG5vZGVJZFRvU3BsaXROb2RlKSB7XG4gICAgICAgIG5vZGUuaW5wdXRzW2tleV0gPSBub2RlSWRUb1NwbGl0Tm9kZVtpbnB1dElkXS5nZXROZXdPdXRwdXRUZW5zb3IoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBuZXdOb2Rlcztcbn1cbiIsIi8qIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuaW1wb3J0IHtOb2RlLCBUZW5zb3IsIFZhcmlhYmxlTm9kZX0gZnJvbSAnLi9ncmFwaCc7XG5pbXBvcnQge05EQXJyYXlNYXRofSBmcm9tICcuL21hdGgvbWF0aCc7XG5pbXBvcnQge05EQXJyYXksIFNjYWxhcn0gZnJvbSAnLi9tYXRoL25kYXJyYXknO1xuaW1wb3J0IHtPcHRpbWl6ZXJ9IGZyb20gJy4vb3B0aW1pemVyJztcbmltcG9ydCB7U2Vzc2lvblJ1bnRpbWV9IGZyb20gJy4vc2Vzc2lvbic7XG5pbXBvcnQgKiBhcyBzZXNzaW9uX3V0aWwgZnJvbSAnLi9zZXNzaW9uX3V0aWwnO1xuaW1wb3J0IHtUZW5zb3JBcnJheU1hcH0gZnJvbSAnLi90ZW5zb3JfYXJyYXlfbWFwJztcblxuZXhwb3J0IGNsYXNzIFNHRE9wdGltaXplciBleHRlbmRzIE9wdGltaXplciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbGVhcm5pbmdSYXRlOiBudW1iZXIsIHNwZWNpZmllZFZhcmlhYmxlTGlzdD86IE5vZGVbXSkge1xuICAgIHN1cGVyKHNwZWNpZmllZFZhcmlhYmxlTGlzdCk7XG4gIH1cblxuICBiZWZvcmVCYXRjaChcbiAgICAgIG1hdGg6IE5EQXJyYXlNYXRoLCBiYXRjaFNpemU6IG51bWJlciwgcnVudGltZTogU2Vzc2lvblJ1bnRpbWUsXG4gICAgICBhY3RpdmF0aW9uQXJyYXlNYXA6IFRlbnNvckFycmF5TWFwLCBncmFkaWVudEFycmF5TWFwOiBUZW5zb3JBcnJheU1hcCkge1xuICAgIHRoaXMudmFyaWFibGVOb2RlcyA9IHRoaXMuc3BlY2lmaWVkVmFyaWFibGVOb2RlcyA9PSBudWxsID9cbiAgICAgICAgc2Vzc2lvbl91dGlsLmdldFZhcmlhYmxlTm9kZXNGcm9tRXZhbHVhdGlvblNldChydW50aW1lLm5vZGVzKSA6XG4gICAgICAgIHRoaXMuc3BlY2lmaWVkVmFyaWFibGVOb2RlcztcbiAgICBpZiAoYmF0Y2hTaXplICE9PSB0aGlzLnByZXZCYXRjaFNpemUpIHtcbiAgICAgIHRoaXMucHJldkJhdGNoU2l6ZSA9IGJhdGNoU2l6ZTtcbiAgICAgIHRoaXMuYyA9IFNjYWxhci5uZXcoLXRoaXMubGVhcm5pbmdSYXRlIC8gYmF0Y2hTaXplKTtcbiAgICB9XG4gICAgdGhpcy52YXJpYWJsZU5vZGVzLmZvckVhY2goXG4gICAgICAgIG5vZGUgPT4gdGhpcy52YXJpYWJsZUdyYWRpZW50cy5zZXQoXG4gICAgICAgICAgICBub2RlLm91dHB1dCwgTkRBcnJheS56ZXJvcyhub2RlLm91dHB1dC5zaGFwZSkpKTtcbiAgfVxuXG4gIGFmdGVyRXhhbXBsZShcbiAgICAgIG1hdGg6IE5EQXJyYXlNYXRoLCBydW50aW1lOiBTZXNzaW9uUnVudGltZSxcbiAgICAgIGFjdGl2YXRpb25BcnJheU1hcDogVGVuc29yQXJyYXlNYXAsIGdyYWRpZW50QXJyYXlNYXA6IFRlbnNvckFycmF5TWFwKSB7XG4gICAgbWF0aC5zY29wZSgoa2VlcCkgPT4ge1xuICAgICAgdGhpcy52YXJpYWJsZU5vZGVzIS5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgICBjb25zdCBncmFkaWVudCA9IGdyYWRpZW50QXJyYXlNYXAuZ2V0KG5vZGUub3V0cHV0KTtcbiAgICAgICAgY29uc3QgYWNjdW11bGF0ZWRHcmFkaWVudCA9IHRoaXMudmFyaWFibGVHcmFkaWVudHMuZ2V0KG5vZGUub3V0cHV0KTtcbiAgICAgICAgdGhpcy52YXJpYWJsZUdyYWRpZW50cy5zZXQoXG4gICAgICAgICAgICBub2RlLm91dHB1dCwga2VlcChtYXRoLmFkZChncmFkaWVudCwgYWNjdW11bGF0ZWRHcmFkaWVudCkpKTtcbiAgICAgICAgYWNjdW11bGF0ZWRHcmFkaWVudC5kaXNwb3NlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFmdGVyQmF0Y2goXG4gICAgICBtYXRoOiBOREFycmF5TWF0aCwgYmF0Y2hTaXplOiBudW1iZXIsIHJ1bnRpbWU6IFNlc3Npb25SdW50aW1lLFxuICAgICAgYWN0aXZhdGlvbkFycmF5TWFwOiBUZW5zb3JBcnJheU1hcCwgZ3JhZGllbnRBcnJheU1hcDogVGVuc29yQXJyYXlNYXApIHtcbiAgICBtYXRoLnNjb3BlKChrZWVwKSA9PiB7XG4gICAgICB0aGlzLnZhcmlhYmxlTm9kZXMhLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICAgIGNvbnN0IG9sZFZhcmlhYmxlID0gYWN0aXZhdGlvbkFycmF5TWFwLmdldChub2RlLm91dHB1dCk7XG4gICAgICAgIGNvbnN0IGdyYWRpZW50ID0gdGhpcy52YXJpYWJsZUdyYWRpZW50cy5nZXQobm9kZS5vdXRwdXQpO1xuICAgICAgICBjb25zdCB2YXJpYWJsZSA9XG4gICAgICAgICAgICBtYXRoLnNjYWxlZEFycmF5QWRkKHRoaXMuYyEsIGdyYWRpZW50LCB0aGlzLm9uZSEsIG9sZFZhcmlhYmxlKTtcbiAgICAgICAgYWN0aXZhdGlvbkFycmF5TWFwLnNldChub2RlLm91dHB1dCwga2VlcCh2YXJpYWJsZSkpO1xuICAgICAgICBub2RlLmRhdGEgPSB2YXJpYWJsZTtcblxuICAgICAgICBvbGRWYXJpYWJsZS5kaXNwb3NlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMudmFyaWFibGVHcmFkaWVudHMuZGlzcG9zZSgpO1xuICAgIHRoaXMudmFyaWFibGVHcmFkaWVudHMgPSBuZXcgVGVuc29yQXJyYXlNYXAoKTtcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgaWYgKHRoaXMuYyAhPSBudWxsKSB7XG4gICAgICB0aGlzLmMuZGlzcG9zZSgpO1xuICAgIH1cbiAgICB0aGlzLm9uZS5kaXNwb3NlKCk7XG4gIH1cblxuICBzZXRMZWFybmluZ1JhdGUobGVhcm5pbmdSYXRlOiBudW1iZXIpIHtcbiAgICB0aGlzLmxlYXJuaW5nUmF0ZSA9IGxlYXJuaW5nUmF0ZTtcbiAgfVxuXG4gIHByaXZhdGUgdmFyaWFibGVHcmFkaWVudHMgPSBuZXcgVGVuc29yQXJyYXlNYXAoKTtcbiAgcHJpdmF0ZSBwcmV2QmF0Y2hTaXplOiBudW1iZXI7XG4gIHByaXZhdGUgb25lID0gU2NhbGFyLm5ldygxKTtcbiAgcHJpdmF0ZSBjOiBTY2FsYXI7XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmltcG9ydCB7VGVuc29yfSBmcm9tICcuL2dyYXBoJztcbmltcG9ydCB7TkRBcnJheX0gZnJvbSAnLi9tYXRoL25kYXJyYXknO1xuXG4vKipcbiAqIFRlbnNvckFycmF5TWFwIGlzIGFuIGludGVybmFsIG1hcCBmcm9tIFRlbnNvciBJRHMgdG8gTkRBcnJheXMuIFNpbmNlIE5EQXJyYXlzXG4gKiBjYW4gYmUgYmFja2VkIGJ5IFdlYkdMIHRleHR1cmVzLCB0aGUgVGVuc29yQXJyYXlNYXAgaXMgb25seSB1c2VkIGluc2lkZSBvZiBhXG4gKiBTZXNzaW9uLlxuICovXG5leHBvcnQgY2xhc3MgVGVuc29yQXJyYXlNYXAge1xuICAvKipcbiAgICogQWRkIG9yIHJlcGxhY2UgYW4gZW50cnkgaW4gdGhlIG1hcC5cbiAgICogQHBhcmFtIHRlbnNvciBUaGUgdGVuc29yIGtleS5cbiAgICogQHBhcmFtIGFycmF5IFRoZSBOREFycmF5IHZhbHVlLCBjYW4gYmUgbnVsbC5cbiAgICovXG4gIHNldCh0ZW5zb3I6IFRlbnNvciwgYXJyYXk6IE5EQXJyYXl8bnVsbCkge1xuICAgIHRoaXMuZGljdFt0ZW5zb3IuaWRdID0gYXJyYXk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgTkRBcnJheSBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3ZpZGVkIHRlbnNvci4gV2lsbCB0aHJvdyBhblxuICAgKiBleGNlcHRpb24gaWYgdGhlIHRlbnNvciBpcyBub3QgYSBrZXkgaW4gdGhlIG1hcCwgb3IgaWYgdGhlIGFzc29jaWF0ZWRcbiAgICogTkRBcnJheSBpcyBudWxsLlxuICAgKiBAcGFyYW0gdGVuc29yIFRoZSB0ZW5zb3Iga2V5LlxuICAgKiBAcGFyYW0gc2tpcENoZWNrcyBGYWxzZSBieSBkZWZhdWx0LiBJZiB0cnVlIHdpbGwgc2tpcCBhbGwgY2hlY2tzLlxuICAgKiBAcmV0dXJuIFRoZSBOREFycmF5IGFzc29jaWF0ZWQgd2l0aCB0aGUgdGVuc29yLlxuICAgKi9cbiAgZ2V0KHRlbnNvcjogVGVuc29yLCBza2lwQ2hlY2tzID0gZmFsc2UpOiBOREFycmF5IHtcbiAgICBpZiAoIXNraXBDaGVja3MgJiYgdGhpcy5kaWN0W3RlbnNvci5pZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd0ZW5zb3IgJyArIHRlbnNvci5pZCArICcgbm90IGluIGFycmF5IG1hcC4nKTtcbiAgICB9XG4gICAgY29uc3QgbmRhID0gdGhpcy5kaWN0W3RlbnNvci5pZF07XG4gICAgaWYgKCFza2lwQ2hlY2tzICYmIG5kYSA9PT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd0ZW5zb3IgJyArIHRlbnNvci5pZCArICcgaGFzIG51bGwgYXJyYXkuJyk7XG4gICAgfVxuICAgIHJldHVybiBuZGEhO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSB0ZW5zb3IvTkRBcnJheSBwYWlyIGZyb20gdGhlIG1hcC5cbiAgICogQHBhcmFtIHRlbnNvciBUaGUgdGVuc29yIGtleS5cbiAgICovXG4gIGRlbGV0ZSh0ZW5zb3I6IFRlbnNvcikge1xuICAgIGRlbGV0ZSB0aGlzLmRpY3RbdGVuc29yLmlkXTtcbiAgfVxuXG4gIGRpc3Bvc2VBcnJheSh0ZW5zb3I6IFRlbnNvcikge1xuICAgIGlmICh0aGlzLmRpY3RbdGVuc29yLmlkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG5kYSA9IHRoaXMuZGljdFt0ZW5zb3IuaWRdO1xuICAgIGlmIChuZGEgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbmRhLmRpc3Bvc2UoKTtcbiAgICB0aGlzLmRpY3RbdGVuc29yLmlkXSA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiBUaGUgbnVtYmVyIG9mIHRlbnNvci9OREFycmF5IHBhaXJzIGluIHRoZSBtYXAuXG4gICAqL1xuICBzaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuZGljdCkubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIEl0ZXJhdGUgb3ZlciBhbGwgY29udGFpbmVkIE5EQXJyYXkgdmFsdWVzIGFuZCBkaXNwb3NlIHRoZW0uXG4gICAqL1xuICBkaXNwb3NlKCkge1xuICAgIE9iamVjdC5rZXlzKHRoaXMuZGljdCkuZm9yRWFjaCh0ZW5zb3JJRCA9PiB7XG4gICAgICBjb25zdCBuZGEgPSB0aGlzLmRpY3RbK3RlbnNvcklEXTtcbiAgICAgIGlmIChuZGEpIHtcbiAgICAgICAgbmRhLmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmRpY3QgPSB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0cyB0byBzZWUgaWYgYSB0ZW5zb3IgaGFzIGEgbnVsbCBhc3NvY2lhdGVkIHdpdGggaXQuIFRocm93c1xuICAgKiBpZiB0aGUgdGVuc29yIGlzIG5vdCBhIGtleSBpbiB0aGUgbWFwLlxuICAgKiBAcGFyYW0gdGVuc29yIFRoZSB0ZW5zb3Iga2V5LlxuICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIGFzc29jaWF0ZWQgTkRBcnJheSBpcyBudWxsLCBlbHNlIEZhbHNlLlxuICAgKi9cbiAgaGFzTnVsbEFycmF5KHRlbnNvcjogVGVuc29yKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuZGljdFt0ZW5zb3IuaWRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndGVuc29yICcgKyB0ZW5zb3IuaWQgKyAnIG5vdCBpbiBhcnJheSBtYXAuJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRpY3RbdGVuc29yLmlkXSA9PT0gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgZGljdDoge1t0ZW5zb3JJRDogbnVtYmVyXTogTkRBcnJheSB8IG51bGx9ID0ge307XG59XG4iLCIvKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cbmV4cG9ydCB0eXBlIFZlY3RvciA9IG51bWJlcltdIHwgRmxvYXQ2NEFycmF5IHwgRmxvYXQzMkFycmF5IHwgSW50MzJBcnJheSB8XG4gICAgSW50OEFycmF5IHwgSW50MTZBcnJheTtcblxuLyoqIFNodWZmbGVzIHRoZSBhcnJheSB1c2luZyBGaXNoZXItWWF0ZXMgYWxnb3JpdGhtLiAqL1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxuZXhwb3J0IGZ1bmN0aW9uIHNodWZmbGUoYXJyYXk6IGFueVtdfFVpbnQzMkFycmF5fEludDMyQXJyYXl8XG4gICAgICAgICAgICAgICAgICAgICAgICBGbG9hdDMyQXJyYXkpOiB2b2lkIHtcbiAgbGV0IGNvdW50ZXIgPSBhcnJheS5sZW5ndGg7XG4gIGxldCB0ZW1wID0gMDtcbiAgbGV0IGluZGV4ID0gMDtcbiAgLy8gV2hpbGUgdGhlcmUgYXJlIGVsZW1lbnRzIGluIHRoZSBhcnJheVxuICB3aGlsZSAoY291bnRlciA+IDApIHtcbiAgICAvLyBQaWNrIGEgcmFuZG9tIGluZGV4XG4gICAgaW5kZXggPSAoTWF0aC5yYW5kb20oKSAqIGNvdW50ZXIpIHwgMDtcbiAgICAvLyBEZWNyZWFzZSBjb3VudGVyIGJ5IDFcbiAgICBjb3VudGVyLS07XG4gICAgLy8gQW5kIHN3YXAgdGhlIGxhc3QgZWxlbWVudCB3aXRoIGl0XG4gICAgdGVtcCA9IGFycmF5W2NvdW50ZXJdO1xuICAgIGFycmF5W2NvdW50ZXJdID0gYXJyYXlbaW5kZXhdO1xuICAgIGFycmF5W2luZGV4XSA9IHRlbXA7XG4gIH1cbn1cblxuLyoqIENsYW1wcyBhIHZhbHVlIHRvIGEgc3BlY2lmaWVkIHJhbmdlLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKG1pbjogbnVtYmVyLCB4OiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyIHtcbiAgcmV0dXJuIE1hdGgubWF4KG1pbiwgTWF0aC5taW4oeCwgbWF4KSk7XG59XG5cbi8qKiBSZXR1cm5zIGEgc2FtcGxlIGZyb20gYSB1bmlmb3JtIFthLCBiXSBkaXN0cmlidXRpb24uICovXG5leHBvcnQgZnVuY3Rpb24gcmFuZFVuaWZvcm0oYTogbnVtYmVyLCBiOiBudW1iZXIpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAoYiAtIGEpICsgYTtcbn1cblxuLyoqXG4gKiBTYW1wbGVzIGZyb20gYSBnYXVzc2lhbiBkaXN0cmlidXRpb24uXG4gKlxuICogQHBhcmFtIG1lYW4gVGhlIG1lYW4uIERlZmF1bHQgaXMgMC5cbiAqIEBwYXJhbSBzdGREZXYgVGhlIHN0YW5kYXJkIGRldmlhdGlvbi4gRGVmYXVsdCBpcyAxLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmFuZEdhdXNzKG1lYW4gPSAwLCBzdGREZXYgPSAxLCB0cnVuY2F0ZWQgPSBmYWxzZSk6IG51bWJlciB7XG4gIGxldCB2MTogbnVtYmVyLCB2MjogbnVtYmVyLCBzOiBudW1iZXI7XG4gIGRvIHtcbiAgICB2MSA9IDIgKiBNYXRoLnJhbmRvbSgpIC0gMTtcbiAgICB2MiA9IDIgKiBNYXRoLnJhbmRvbSgpIC0gMTtcbiAgICBzID0gdjEgKiB2MSArIHYyICogdjI7XG4gIH0gd2hpbGUgKHMgPiAxKTtcblxuICBjb25zdCByZXN1bHQgPSBNYXRoLnNxcnQoLTIgKiBNYXRoLmxvZyhzKSAvIHMpICogdjE7XG4gIGlmICh0cnVuY2F0ZWQgJiYgcmVzdWx0ID4gMikge1xuICAgIHJldHVybiByYW5kR2F1c3MobWVhbiwgc3RkRGV2LCB0cnVlKTtcbiAgfVxuICByZXR1cm4gbWVhbiArIHN0ZERldiAqIHJlc3VsdDtcbn1cblxuLyoqIFJldHVybnMgc3F1YXJlZCBldWNsZWRpYW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gdmVjdG9ycy4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXN0U3F1YXJlZChhOiBWZWN0b3IsIGI6IFZlY3Rvcik6IG51bWJlciB7XG4gIGxldCByZXN1bHQgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBkaWZmID0gYVtpXSAtIGJbaV07XG4gICAgcmVzdWx0ICs9IGRpZmYgKiBkaWZmO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnQoZXhwcjogYm9vbGVhbiwgbXNnOiBzdHJpbmcpIHtcbiAgaWYgKCFleHByKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFNoYXBlc01hdGNoKFxuICAgIHNoYXBlQTogbnVtYmVyW10sIHNoYXBlQjogbnVtYmVyW10sIGVycm9yTWVzc2FnZVByZWZpeCA9ICcnKTogdm9pZCB7XG4gIGFzc2VydChcbiAgICAgIGFycmF5c0VxdWFsKHNoYXBlQSwgc2hhcGVCKSxcbiAgICAgIGVycm9yTWVzc2FnZVByZWZpeCArIGBTaGFwZXMgJHtzaGFwZUF9IGFuZCAke3NoYXBlQn0gbXVzdCBtYXRjaGApO1xufVxuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG5leHBvcnQgZnVuY3Rpb24gZmxhdHRlbihhcnI6IGFueVtdLCByZXQ/OiBudW1iZXJbXSk6IG51bWJlcltdIHtcbiAgcmV0ID0gKHJldCA9PT0gdW5kZWZpbmVkID8gW10gOiByZXQpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFycltpXSkpIHtcbiAgICAgIGZsYXR0ZW4oYXJyW2ldLCByZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXQucHVzaChhcnJbaV0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5leHBvcnQgdHlwZSBBcnJheURhdGEgPSBudW1iZXJ8bnVtYmVyW118bnVtYmVyW11bXXxudW1iZXJbXVtdW118bnVtYmVyW11bXVtdW107XG5cbmV4cG9ydCBmdW5jdGlvbiBpbmZlclNoYXBlKGFycjogQXJyYXlEYXRhKTogbnVtYmVyW10ge1xuICBjb25zdCBzaGFwZTogbnVtYmVyW10gPSBbXTtcbiAgd2hpbGUgKGFyciBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgc2hhcGUucHVzaChhcnIubGVuZ3RoKTtcbiAgICBhcnIgPSBhcnJbMF07XG4gIH1cbiAgcmV0dXJuIHNoYXBlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2l6ZUZyb21TaGFwZShzaGFwZTogbnVtYmVyW10pOiBudW1iZXIge1xuICBpZiAoc2hhcGUubGVuZ3RoID09PSAwKSB7XG4gICAgLy8gU2NhbGFyLlxuICAgIHJldHVybiAxO1xuICB9XG4gIGxldCBzaXplID0gc2hhcGVbMF07XG4gIGZvciAobGV0IGkgPSAxOyBpIDwgc2hhcGUubGVuZ3RoOyBpKyspIHtcbiAgICBzaXplICo9IHNoYXBlW2ldO1xuICB9XG4gIHJldHVybiBzaXplO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTY2FsYXJTaGFwZShzaGFwZTogbnVtYmVyW10pOiBib29sZWFuIHtcbiAgcmV0dXJuIHNoYXBlLmxlbmd0aCA9PT0gMDtcbn1cblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5c0VxdWFsKG4xOiBhbnlbXXxGbG9hdDMyQXJyYXksIG4yOiBhbnlbXXxGbG9hdDMyQXJyYXkpIHtcbiAgaWYgKG4xLmxlbmd0aCAhPT0gbjIubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbjEubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAobjFbaV0gIT09IG4yW2ldKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNJbnQoYTogbnVtYmVyKTogYm9vbGVhbiB7XG4gIHJldHVybiBhICUgMSA9PT0gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRhbmgoeDogbnVtYmVyKTogbnVtYmVyIHtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxuICBpZiAoKE1hdGggYXMgYW55KS50YW5oICE9IG51bGwpIHtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG4gICAgcmV0dXJuIChNYXRoIGFzIGFueSkudGFuaCh4KTtcbiAgfVxuICBpZiAoeCA9PT0gSW5maW5pdHkpIHtcbiAgICByZXR1cm4gMTtcbiAgfSBlbHNlIGlmICh4ID09PSAtSW5maW5pdHkpIHtcbiAgICByZXR1cm4gLTE7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZTJ4ID0gTWF0aC5leHAoMiAqIHgpO1xuICAgIHJldHVybiAoZTJ4IC0gMSkgLyAoZTJ4ICsgMSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNpemVUb1NxdWFyaXNoU2hhcGUoc2l6ZTogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXSB7XG4gIGZvciAobGV0IGEgPSBNYXRoLmZsb29yKE1hdGguc3FydChzaXplKSk7IGEgPiAxOyAtLWEpIHtcbiAgICBpZiAoc2l6ZSAlIGEgPT09IDApIHtcbiAgICAgIHJldHVybiBbYSwgc2l6ZSAvIGFdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gWzEsIHNpemVdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2h1ZmZsZWRJbmRpY2VzKG46IG51bWJlcik6IFVpbnQzMkFycmF5IHtcbiAgY29uc3Qgc2h1ZmZsZWRJbmRpY2VzID0gbmV3IFVpbnQzMkFycmF5KG4pO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgIHNodWZmbGVkSW5kaWNlc1tpXSA9IGk7XG4gIH1cbiAgc2h1ZmZsZShzaHVmZmxlZEluZGljZXMpO1xuICByZXR1cm4gc2h1ZmZsZWRJbmRpY2VzO1xufVxuIl19
